var $t=Object.defineProperty;var Dt=(c,n,h)=>n in c?$t(c,n,{enumerable:!0,configurable:!0,writable:!0,value:h}):c[n]=h;var ae=(c,n,h)=>(Dt(c,typeof n!="symbol"?n+"":n,h),h);(function(){"use strict";const Empty=new Uint8Array(0),TE=new TextEncoder,TD=new TextDecoder;function concat(...c){let n=0;for(let m=0;m<c.length;m++)n+=c[m].length;const h=new Uint8Array(n);let u=0;for(let m=0;m<c.length;m++)h.set(c[m],u),u+=c[m].length;return h}function encode$2(...c){const n=[];for(let h=0;h<c.length;h++)n.push(TE.encode(c[h]));return n.length===0?Empty:n.length===1?n[0]:concat(...n)}function decode$3(c){return!c||c.length===0?"":TD.decode(c)}const digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",base$2=36,maxSeq=0xcfd41b9100000,minInc=33,maxInc=333,totalLen=22;function _getRandomValues(c){for(let n=0;n<c.length;n++)c[n]=Math.floor(Math.random()*255)}function fillRandom(c){var n;(n=globalThis==null?void 0:globalThis.crypto)!=null&&n.getRandomValues?globalThis.crypto.getRandomValues(c):_getRandomValues(c)}class Nuid{constructor(){ae(this,"buf");ae(this,"seq");ae(this,"inc");ae(this,"inited");this.buf=new Uint8Array(totalLen),this.inited=!1}init(){this.inited=!0,this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(Math.random()*maxSeq),this.inc=Math.floor(Math.random()*(maxInc-minInc)+minInc)}setPre(){const n=new Uint8Array(12);fillRandom(n);for(let h=0;h<12;h++){const u=n[h]%36;this.buf[h]=digits.charCodeAt(u)}}fillSeq(){let n=this.seq;for(let h=totalLen-1;h>=12;h--)this.buf[h]=digits.charCodeAt(n%base$2),n=Math.floor(n/base$2)}next(){return this.inited||this.init(),this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}}const nuid=new Nuid;var Events;(function(c){c.Disconnect="disconnect",c.Reconnect="reconnect",c.Update="update",c.LDM="ldm",c.Error="error"})(Events||(Events={}));var DebugEvents;(function(c){c.Reconnecting="reconnecting",c.PingTimer="pingTimer",c.StaleConnection="staleConnection",c.ClientInitiatedReconnect="client initiated reconnect"})(DebugEvents||(DebugEvents={}));var ErrorCode;(function(c){c.ApiError="BAD API",c.BadAuthentication="BAD_AUTHENTICATION",c.BadCreds="BAD_CREDS",c.BadHeader="BAD_HEADER",c.BadJson="BAD_JSON",c.BadPayload="BAD_PAYLOAD",c.BadSubject="BAD_SUBJECT",c.Cancelled="CANCELLED",c.ConnectionClosed="CONNECTION_CLOSED",c.ConnectionDraining="CONNECTION_DRAINING",c.ConnectionRefused="CONNECTION_REFUSED",c.ConnectionTimeout="CONNECTION_TIMEOUT",c.Disconnect="DISCONNECT",c.InvalidOption="INVALID_OPTION",c.InvalidPayload="INVALID_PAYLOAD",c.MaxPayloadExceeded="MAX_PAYLOAD_EXCEEDED",c.NoResponders="503",c.NotFunction="NOT_FUNC",c.RequestError="REQUEST_ERROR",c.ServerOptionNotAvailable="SERVER_OPT_NA",c.SubClosed="SUB_CLOSED",c.SubDraining="SUB_DRAINING",c.Timeout="TIMEOUT",c.Tls="TLS",c.Unknown="UNKNOWN_ERROR",c.WssRequired="WSS_REQUIRED",c.JetStreamInvalidAck="JESTREAM_INVALID_ACK",c.JetStream404NoMessages="404",c.JetStream408RequestTimeout="408",c.JetStream409MaxAckPendingExceeded="409",c.JetStream409="409",c.JetStreamNotEnabled="503",c.JetStreamIdleHeartBeat="IDLE_HEARTBEAT",c.AuthorizationViolation="AUTHORIZATION_VIOLATION",c.AuthenticationExpired="AUTHENTICATION_EXPIRED",c.ProtocolError="NATS_PROTOCOL_ERR",c.PermissionsViolation="PERMISSIONS_VIOLATION",c.AuthenticationTimeout="AUTHENTICATION_TIMEOUT"})(ErrorCode||(ErrorCode={}));function isNatsError(c){return typeof c.code=="string"}class Messages{constructor(){ae(this,"messages");this.messages=new Map,this.messages.set(ErrorCode.InvalidPayload,"Invalid payload type - payloads can be 'binary', 'string', or 'json'"),this.messages.set(ErrorCode.BadJson,"Bad JSON"),this.messages.set(ErrorCode.WssRequired,"TLS is required, therefore a secure websocket connection is also required")}static getMessage(n){return messages.getMessage(n)}getMessage(n){return this.messages.get(n)||n}}const messages=new Messages;class NatsError extends Error{constructor(h,u,m){super(h);ae(this,"name");ae(this,"message");ae(this,"code");ae(this,"permissionContext");ae(this,"chainedError");ae(this,"api_error");this.name="NatsError",this.message=h,this.code=u,this.chainedError=m}static errorForCode(h,u){const m=Messages.getMessage(h);return new NatsError(m,h,u)}isAuthError(){return this.code===ErrorCode.AuthenticationExpired||this.code===ErrorCode.AuthorizationViolation}isAuthTimeout(){return this.code===ErrorCode.AuthenticationTimeout}isPermissionError(){return this.code===ErrorCode.PermissionsViolation}isProtocolError(){return this.code===ErrorCode.ProtocolError}isJetStreamError(){return this.api_error!==void 0}jsError(){return this.api_error?this.api_error:null}}var Match;(function(c){c[c.Exact=0]="Exact",c[c.CanonicalMIME=1]="CanonicalMIME",c[c.IgnoreCase=2]="IgnoreCase"})(Match||(Match={}));var RequestStrategy;(function(c){c.Timer="timer",c.Count="count",c.JitterTimer="jitterTimer",c.SentinelMsg="sentinelMsg"})(RequestStrategy||(RequestStrategy={}));var ServiceResponseType;(function(c){c.STATS="io.nats.micro.v1.stats_response",c.INFO="io.nats.micro.v1.info_response",c.PING="io.nats.micro.v1.ping_response"})(ServiceResponseType||(ServiceResponseType={}));const ServiceErrorHeader="Nats-Service-Error",ServiceErrorCodeHeader="Nats-Service-Error-Code";class ServiceError extends Error{constructor(h,u){super(u);ae(this,"code");this.code=h}static isServiceError(h){return ServiceError.toServiceError(h)!==null}static toServiceError(h){var m,s;const u=((m=h==null?void 0:h.headers)==null?void 0:m.get(ServiceErrorCodeHeader))||"";if(u!==""){const g=parseInt(u)||400,x=((s=h==null?void 0:h.headers)==null?void 0:s.get(ServiceErrorHeader))||"";return new ServiceError(g,x.length?x:u)}return null}}function createInbox(c=""){if(c=c||"_INBOX",typeof c!="string")throw new Error("prefix must be a string");return c.split(".").forEach(n=>{if(n==="*"||n===">")throw new Error(`inbox prefixes cannot have wildcards '${c}'`)}),`${c}.${nuid.next()}`}const DEFAULT_HOST="127.0.0.1";var ServiceVerb;(function(c){c.PING="PING",c.STATS="STATS",c.INFO="INFO"})(ServiceVerb||(ServiceVerb={}));function extend(c,...n){for(let h=0;h<n.length;h++){const u=n[h];Object.keys(u).forEach(function(m){c[m]=u[m]})}return c}function render(c){return TD.decode(c).replace(/\n/g,"␊").replace(/\r/g,"␍")}function timeout(c,n=!0){const h=n?NatsError.errorForCode(ErrorCode.Timeout):null;let u,m;const s=new Promise((g,x)=>{u={cancel:()=>{m&&clearTimeout(m)}},m=setTimeout(()=>{x(h===null?NatsError.errorForCode(ErrorCode.Timeout):h)},c)});return Object.assign(s,u)}function delay(c=0){let n;const h=new Promise(u=>{const m=setTimeout(()=>{u()},c);n={cancel:()=>{m&&clearTimeout(m)}}});return Object.assign(h,n)}function deferred(){let c={};const n=new Promise((h,u)=>{c={resolve:h,reject:u}});return Object.assign(n,c)}function shuffle(c){for(let n=c.length-1;n>0;n--){const h=Math.floor(Math.random()*(n+1));[c[n],c[h]]=[c[h],c[n]]}return c}function jitter(c){return c===0?0:Math.floor(c/2+Math.random()*c)}function backoff(c=[0,250,250,500,500,3e3,5e3]){Array.isArray(c)||(c=[0,250,250,500,500,3e3,5e3]);const n=c.length-1;return{backoff(h){return jitter(h>n?c[n]:c[h])}}}function nanos(c){return c*1e6}function millis(c){return Math.floor(c/1e6)}function canonicalMIMEHeaderKey(c){let u=!0;const m=new Array(c.length);for(let s=0;s<c.length;s++){let g=c.charCodeAt(s);if(g===58||g<33||g>126)throw new NatsError(`'${c[s]}' is not a valid character for a header key`,ErrorCode.BadHeader);u&&97<=g&&g<=122?g-=32:!u&&65<=g&&g<=90&&(g+=32),m[s]=g,u=g==45}return String.fromCharCode(...m)}function headers(c=0,n=""){if(c===0&&n!==""||c>0&&n==="")throw new Error("setting status requires both code and description");return new MsgHdrsImpl(c,n)}const HEADER="NATS/1.0";class MsgHdrsImpl{constructor(n=0,h=""){ae(this,"_code");ae(this,"headers");ae(this,"_description");this._code=n,this._description=h,this.headers=new Map}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(n){if(n&&this.headers.size===n.headers.size&&this._code===n._code){for(const[h,u]of this.headers){const m=n.values(h);if(u.length!==m.length)return!1;const s=[...u].sort(),g=[...m].sort();for(let x=0;x<s.length;x++)if(s[x]!==g[x])return!1}return!0}return!1}static decode(n){const h=new MsgHdrsImpl,m=TD.decode(n).split(`\r
`),s=m[0];if(s!==HEADER){let g=s.replace(HEADER,"").trim();if(g.length>0){h._code=parseInt(g,10),isNaN(h._code)&&(h._code=0);const x=h._code.toString();g=g.replace(x,""),h._description=g.trim()}}return m.length>=1&&m.slice(1).map(g=>{if(g){const x=g.indexOf(":");if(x>-1){const _=g.slice(0,x),M=g.slice(x+1).trim();h.append(_,M)}}}),h}toString(){if(this.headers.size===0&&this._code===0)return"";let n=HEADER;this._code>0&&this._description!==""&&(n+=` ${this._code} ${this._description}`);for(const[h,u]of this.headers)for(let m=0;m<u.length;m++)n=`${n}\r
${h}: ${u[m]}`;return`${n}\r
\r
`}encode(){return TE.encode(this.toString())}static validHeaderValue(n){if(/[\r\n]/.test(n))throw new NatsError("invalid header value - \\r and \\n are not allowed.",ErrorCode.BadHeader);return n.trim()}keys(){const n=[];for(const h of this.headers.keys())n.push(h);return n}findKeys(n,h=Match.Exact){const u=this.keys();switch(h){case Match.Exact:return u.filter(m=>m===n);case Match.CanonicalMIME:return n=canonicalMIMEHeaderKey(n),u.filter(m=>m===n);default:{const m=n.toLowerCase();return u.filter(s=>m===s.toLowerCase())}}}get(n,h=Match.Exact){const u=this.findKeys(n,h);if(u.length){const m=this.headers.get(u[0]);if(m)return Array.isArray(m)?m[0]:m}return""}last(n,h=Match.Exact){const u=this.findKeys(n,h);if(u.length){const m=this.headers.get(u[0]);if(m)return Array.isArray(m)?m[m.length-1]:m}return""}has(n,h=Match.Exact){return this.findKeys(n,h).length>0}set(n,h,u=Match.Exact){this.delete(n,u),this.append(n,h,u)}append(n,h,u=Match.Exact){const m=canonicalMIMEHeaderKey(n);u===Match.CanonicalMIME&&(n=m);const s=this.findKeys(n,u);n=s.length>0?s[0]:n;const g=MsgHdrsImpl.validHeaderValue(h);let x=this.headers.get(n);x||(x=[],this.headers.set(n,x)),x.push(g)}values(n,h=Match.Exact){const u=[];return this.findKeys(n,h).forEach(s=>{const g=this.headers.get(s);g&&u.push(...g)}),u}delete(n,h=Match.Exact){this.findKeys(n,h).forEach(m=>{this.headers.delete(m)})}get hasError(){return this._code>=300}get status(){return`${this._code} ${this._description}`.trim()}toRecord(){const n={};return this.keys().forEach(h=>{n[h]=this.values(h)}),n}get code(){return this._code}get description(){return this._description}static fromRecord(n){const h=new MsgHdrsImpl;for(const u in n)h.headers.set(u,n[u]);return h}}function StringCodec(){return{encode(c){return TE.encode(c)},decode(c){return TD.decode(c)}}}function JSONCodec(c){return{encode(n){try{return n===void 0&&(n=null),TE.encode(JSON.stringify(n))}catch(h){throw NatsError.errorForCode(ErrorCode.BadJson,h)}},decode(n){try{return JSON.parse(TD.decode(n),c)}catch(h){throw NatsError.errorForCode(ErrorCode.BadJson,h)}}}}function isRequestError(c){var n;return c&&c.data.length===0&&((n=c.headers)==null?void 0:n.code)===503?NatsError.errorForCode(ErrorCode.NoResponders):null}class MsgImpl{constructor(n,h,u){ae(this,"_headers");ae(this,"_msg");ae(this,"_rdata");ae(this,"_reply");ae(this,"_subject");ae(this,"publisher");this._msg=n,this._rdata=h,this.publisher=u}get subject(){return this._subject?this._subject:(this._subject=TD.decode(this._msg.subject),this._subject)}get reply(){return this._reply?this._reply:(this._reply=TD.decode(this._msg.reply),this._reply)}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){const n=this._rdata.subarray(0,this._msg.hdr);this._headers=MsgHdrsImpl.decode(n)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(n=Empty,h){return this.reply?(this.publisher.publish(this.reply,n,h),!0):!1}size(){var m;const n=this._msg.subject.length,h=((m=this._msg.reply)==null?void 0:m.length)||0,u=this._msg.size===-1?0:this._msg.size;return n+h+u}json(n){return JSONCodec(n).decode(this.data)}string(){return TD.decode(this.data)}requestInfo(){var h;const n=(h=this.headers)==null?void 0:h.get("Nats-Request-Info");return n?JSON.parse(n,function(u,m){return(u==="start"||u==="stop")&&m!==""?new Date(Date.parse(m)):m}):null}}ae(MsgImpl,"jc");function validateDurableName(c){return minValidation("durable",c)}function validateStreamName(c){return minValidation("stream",c)}function minValidation(c,n=""){if(n==="")throw Error(`${c} name required`);return[".","*",">","/","\\"," ","	",`
`,"\r"].forEach(u=>{if(n.indexOf(u)!==-1){switch(u){case`
`:u="\\n";break;case"\r":u="\\r";break;case"	":u="\\t";break}throw Error(`invalid ${c} name - ${c} name cannot contain '${u}'`)}}),""}function validateName(c,n=""){if(n==="")throw Error(`${c} name required`);const h=validName(n);if(h.length)throw new Error(`invalid ${c} name - ${c} name ${h}`)}function validName(c=""){if(c==="")throw Error("name required");const n=/^[-\w]+$/g;if(c.match(n)===null){for(const u of c.split(""))if(u.match(n)===null)return`cannot contain '${u}'`}return""}function isFlowControlMsg(c){if(c.data.length>0)return!1;const n=c.headers;return n?n.code>=100&&n.code<200:!1}function isHeartbeatMsg(c){var n;return isFlowControlMsg(c)&&((n=c.headers)==null?void 0:n.description)==="Idle Heartbeat"}function newJsErrorMsg(c,n,h){const u=headers(c,n),m={hdr:1,sid:0,size:0},s=new MsgImpl(m,Empty,{});return s._headers=u,s._subject=h,s}function checkJsError(c){if(c.data.length!==0)return null;const n=c.headers;return n?checkJsErrorCode(n.code,n.description):null}var Js409Errors;(function(c){c.MaxBatchExceeded="exceeded maxrequestbatch of",c.MaxExpiresExceeded="exceeded maxrequestexpires of",c.MaxBytesExceeded="exceeded maxrequestmaxbytes of",c.MaxMessageSizeExceeded="message size exceeds maxbytes",c.PushConsumer="consumer is push based",c.MaxWaitingExceeded="exceeded maxwaiting",c.IdleHeartbeatMissed="idle heartbeats missed",c.ConsumerDeleted="consumer deleted"})(Js409Errors||(Js409Errors={}));function isTerminal409(c){return c.code!==ErrorCode.JetStream409?!1:[Js409Errors.MaxBatchExceeded,Js409Errors.MaxExpiresExceeded,Js409Errors.MaxBytesExceeded,Js409Errors.MaxMessageSizeExceeded,Js409Errors.PushConsumer,Js409Errors.IdleHeartbeatMissed,Js409Errors.ConsumerDeleted].find(h=>c.message.indexOf(h)!==-1)!==void 0}function checkJsErrorCode(c,n=""){if(c<300)return null;switch(n=n.toLowerCase(),c){case 404:return new NatsError(n,ErrorCode.JetStream404NoMessages);case 408:return new NatsError(n,ErrorCode.JetStream408RequestTimeout);case 409:{const h=n.startsWith(Js409Errors.IdleHeartbeatMissed)?ErrorCode.JetStreamIdleHeartBeat:ErrorCode.JetStream409;return new NatsError(n,h)}case 503:return NatsError.errorForCode(ErrorCode.JetStreamNotEnabled,new Error(n));default:return n===""&&(n=ErrorCode.Unknown),new NatsError(n,`${c}`)}}class QueuedIteratorImpl{constructor(){ae(this,"inflight");ae(this,"processed");ae(this,"received");ae(this,"noIterator");ae(this,"iterClosed");ae(this,"done");ae(this,"signal");ae(this,"yields");ae(this,"filtered");ae(this,"pendingFiltered");ae(this,"ingestionFilterFn");ae(this,"protocolFilterFn");ae(this,"dispatchedFn");ae(this,"ctx");ae(this,"_data");ae(this,"err");ae(this,"time");ae(this,"yielding");this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=deferred(),this.yields=[],this.iterClosed=deferred(),this.time=0,this.yielding=!1}[Symbol.asyncIterator](){return this.iterate()}push(n){if(this.done)return;if(typeof n=="function"){this.yields.push(n),this.signal.resolve();return}const{ingest:h,protocol:u}=this.ingestionFilterFn?this.ingestionFilterFn(n,this.ctx||this):{ingest:!0,protocol:!1};h&&(u&&(this.filtered++,this.pendingFiltered++),this.yields.push(n),this.signal.resolve())}async*iterate(){if(this.noIterator)throw new NatsError("unsupported iterator",ErrorCode.ApiError);if(this.yielding)throw new NatsError("already yielding",ErrorCode.ApiError);this.yielding=!0;try{for(;;){if(this.yields.length===0&&await this.signal,this.err)throw this.err;const n=this.yields;this.inflight=n.length,this.yields=[];for(let h=0;h<n.length;h++){if(typeof n[h]=="function"){const m=n[h];try{m()}catch(s){throw s}if(this.err)throw this.err;continue}if(this.protocolFilterFn?this.protocolFilterFn(n[h]):!0){this.processed++;const m=Date.now();yield n[h],this.time=Date.now()-m,this.dispatchedFn&&n[h]&&this.dispatchedFn(n[h])}else this.pendingFiltered--;this.inflight--}if(this.done)break;this.yields.length===0&&(n.length=0,this.yields=n,this.signal=deferred())}}finally{this.stop()}}stop(n){this.done||(this.err=n,this.done=!0,this.signal.resolve(),this.iterClosed.resolve(n))}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}class IdleHeartbeatMonitor{constructor(n,h,u={maxOut:2}){ae(this,"interval");ae(this,"maxOut");ae(this,"cancelAfter");ae(this,"timer");ae(this,"autoCancelTimer");ae(this,"last");ae(this,"missed");ae(this,"count");ae(this,"callback");this.interval=n,this.maxOut=(u==null?void 0:u.maxOut)||2,this.cancelAfter=(u==null?void 0:u.cancelAfter)||0,this.last=Date.now(),this.missed=0,this.count=0,this.callback=h,this._schedule()}cancel(){this.autoCancelTimer&&clearTimeout(this.autoCancelTimer),this.timer&&clearInterval(this.timer),this.timer=0,this.autoCancelTimer=0,this.missed=0}work(){this.last=Date.now(),this.missed=0}_change(n,h=0,u=2){this.interval=n,this.maxOut=u,this.cancelAfter=h,this.restart()}restart(){this.cancel(),this._schedule()}_schedule(){this.cancelAfter>0&&(this.autoCancelTimer=setTimeout(()=>{this.cancel()},this.cancelAfter)),this.timer=setInterval(()=>{if(this.count++,Date.now()-this.last>this.interval&&this.missed++,this.missed>=this.maxOut)try{this.callback(this.missed)===!0&&this.cancel()}catch(n){console.log(n)}},this.interval)}}var RetentionPolicy;(function(c){c.Limits="limits",c.Interest="interest",c.Workqueue="workqueue"})(RetentionPolicy||(RetentionPolicy={}));var DiscardPolicy;(function(c){c.Old="old",c.New="new"})(DiscardPolicy||(DiscardPolicy={}));var StorageType;(function(c){c.File="file",c.Memory="memory"})(StorageType||(StorageType={}));var DeliverPolicy;(function(c){c.All="all",c.Last="last",c.New="new",c.StartSequence="by_start_sequence",c.StartTime="by_start_time",c.LastPerSubject="last_per_subject"})(DeliverPolicy||(DeliverPolicy={}));var AckPolicy;(function(c){c.None="none",c.All="all",c.Explicit="explicit",c.NotSet=""})(AckPolicy||(AckPolicy={}));var ReplayPolicy;(function(c){c.Instant="instant",c.Original="original"})(ReplayPolicy||(ReplayPolicy={}));var StoreCompression;(function(c){c.None="none",c.S2="s2"})(StoreCompression||(StoreCompression={}));var ConsumerApiAction;(function(c){c.CreateOrUpdate="",c.Update="update",c.Create="create"})(ConsumerApiAction||(ConsumerApiAction={}));function defaultConsumer(c,n={}){return Object.assign({name:c,deliver_policy:DeliverPolicy.All,ack_policy:AckPolicy.Explicit,ack_wait:nanos(30*1e3),replay_policy:ReplayPolicy.Instant},n)}var AdvisoryKind;(function(c){c.API="api_audit",c.StreamAction="stream_action",c.ConsumerAction="consumer_action",c.SnapshotCreate="snapshot_create",c.SnapshotComplete="snapshot_complete",c.RestoreCreate="restore_create",c.RestoreComplete="restore_complete",c.MaxDeliver="max_deliver",c.Terminated="terminated",c.Ack="consumer_ack",c.StreamLeaderElected="stream_leader_elected",c.StreamQuorumLost="stream_quorum_lost",c.ConsumerLeaderElected="consumer_leader_elected",c.ConsumerQuorumLost="consumer_quorum_lost"})(AdvisoryKind||(AdvisoryKind={}));var JsHeaders;(function(c){c.StreamSourceHdr="Nats-Stream-Source",c.LastConsumerSeqHdr="Nats-Last-Consumer",c.LastStreamSeqHdr="Nats-Last-Stream",c.ConsumerStalledHdr="Nats-Consumer-Stalled",c.MessageSizeHdr="Nats-Msg-Size",c.RollupHdr="Nats-Rollup",c.RollupValueSubject="sub",c.RollupValueAll="all",c.PendingMessagesHdr="Nats-Pending-Messages",c.PendingBytesHdr="Nats-Pending-Bytes"})(JsHeaders||(JsHeaders={}));var KvWatchInclude;(function(c){c.LastValue="",c.AllHistory="history",c.UpdatesOnly="updates"})(KvWatchInclude||(KvWatchInclude={}));var DirectMsgHeaders;(function(c){c.Stream="Nats-Stream",c.Sequence="Nats-Sequence",c.TimeStamp="Nats-Time-Stamp",c.Subject="Nats-Subject"})(DirectMsgHeaders||(DirectMsgHeaders={}));var RepublishHeaders;(function(c){c.Stream="Nats-Stream",c.Subject="Nats-Subject",c.Sequence="Nats-Sequence",c.LastSequence="Nats-Last-Sequence",c.Size="Nats-Msg-Size"})(RepublishHeaders||(RepublishHeaders={}));const kvPrefix="KV_";class ConsumerOptsBuilderImpl{constructor(n){ae(this,"config");ae(this,"ordered");ae(this,"mack");ae(this,"stream");ae(this,"callbackFn");ae(this,"max");ae(this,"qname");ae(this,"isBind");ae(this,"filters");this.stream="",this.mack=!1,this.ordered=!1,this.config=defaultConsumer("",n||{})}getOpts(){var h;const n={};if(n.config=Object.assign({},this.config),n.config.filter_subject&&(this.filterSubject(n.config.filter_subject),n.config.filter_subject=void 0),n.config.filter_subjects&&((h=n.config.filter_subjects)==null||h.forEach(u=>{this.filterSubject(u)}),n.config.filter_subjects=void 0),n.mack=this.mack,n.stream=this.stream,n.callbackFn=this.callbackFn,n.max=this.max,n.queue=this.qname,n.ordered=this.ordered,n.config.ack_policy=n.ordered?AckPolicy.None:n.config.ack_policy,n.isBind=n.isBind||!1,this.filters)switch(this.filters.length){case 0:break;case 1:n.config.filter_subject=this.filters[0];break;default:n.config.filter_subjects=this.filters}return n}description(n){return this.config.description=n,this}deliverTo(n){return this.config.deliver_subject=n,this}durable(n){return validateDurableName(n),this.config.durable_name=n,this}startSequence(n){if(n<=0)throw new Error("sequence must be greater than 0");return this.config.deliver_policy=DeliverPolicy.StartSequence,this.config.opt_start_seq=n,this}startTime(n){return this.config.deliver_policy=DeliverPolicy.StartTime,this.config.opt_start_time=n.toISOString(),this}deliverAll(){return this.config.deliver_policy=DeliverPolicy.All,this}deliverLastPerSubject(){return this.config.deliver_policy=DeliverPolicy.LastPerSubject,this}deliverLast(){return this.config.deliver_policy=DeliverPolicy.Last,this}deliverNew(){return this.config.deliver_policy=DeliverPolicy.New,this}startAtTimeDelta(n){return this.startTime(new Date(Date.now()-n)),this}headersOnly(){return this.config.headers_only=!0,this}ackNone(){return this.config.ack_policy=AckPolicy.None,this}ackAll(){return this.config.ack_policy=AckPolicy.All,this}ackExplicit(){return this.config.ack_policy=AckPolicy.Explicit,this}ackWait(n){return this.config.ack_wait=nanos(n),this}maxDeliver(n){return this.config.max_deliver=n,this}filterSubject(n){return this.filters=this.filters||[],this.filters.push(n),this}replayInstantly(){return this.config.replay_policy=ReplayPolicy.Instant,this}replayOriginal(){return this.config.replay_policy=ReplayPolicy.Original,this}sample(n){if(n=Math.trunc(n),n<0||n>100)throw new Error("value must be between 0-100");return this.config.sample_freq=`${n}%`,this}limit(n){return this.config.rate_limit_bps=n,this}maxWaiting(n){return this.config.max_waiting=n,this}maxAckPending(n){return this.config.max_ack_pending=n,this}idleHeartbeat(n){return this.config.idle_heartbeat=nanos(n),this}flowControl(){return this.config.flow_control=!0,this}deliverGroup(n){return this.queue(n),this}manualAck(){return this.mack=!0,this}maxMessages(n){return this.max=n,this}callback(n){return this.callbackFn=n,this}queue(n){return this.qname=n,this.config.deliver_group=n,this}orderedConsumer(){return this.ordered=!0,this}bind(n,h){return this.stream=n,this.config.durable_name=h,this.isBind=!0,this}bindStream(n){return this.stream=n,this}inactiveEphemeralThreshold(n){return this.config.inactive_threshold=nanos(n),this}maxPullBatch(n){return this.config.max_batch=n,this}maxPullRequestExpires(n){return this.config.max_expires=nanos(n),this}memory(){return this.config.mem_storage=!0,this}numReplicas(n){return this.config.num_replicas=n,this}consumerName(n){return this.config.name=n,this}}function consumerOpts(c){return new ConsumerOptsBuilderImpl(c)}function isConsumerOptsBuilder(c){return typeof c.getOpts=="function"}class Base64Codec{static encode(n){if(typeof n=="string")return btoa(n);const h=Array.from(n);return btoa(String.fromCharCode(...h))}static decode(n,h=!1){const u=atob(n);return h?Uint8Array.from(u,m=>m.charCodeAt(0)):u}}class Base64UrlPaddedCodec{static encode(n){return Base64UrlPaddedCodec.toB64URLEncoding(Base64Codec.encode(n))}static decode(n,h=!1){return Base64UrlPaddedCodec.decode(Base64UrlPaddedCodec.fromB64URLEncoding(n),h)}static toB64URLEncoding(n){return n.replace(/\+/g,"-").replace(/\//g,"_")}static fromB64URLEncoding(n){return n.replace(/_/g,"/").replace(/-/g,"+")}}class DataBuffer{constructor(){ae(this,"buffers");ae(this,"byteLength");this.buffers=[],this.byteLength=0}static concat(...n){let h=0;for(let s=0;s<n.length;s++)h+=n[s].length;const u=new Uint8Array(h);let m=0;for(let s=0;s<n.length;s++)u.set(n[s],m),m+=n[s].length;return u}static fromAscii(n){return n||(n=""),TE.encode(n)}static toAscii(n){return TD.decode(n)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){const n=new Uint8Array(this.byteLength);let h=0;for(let u=0;u<this.buffers.length;u++)n.set(this.buffers[u],h),h+=this.buffers[u].length;this.buffers.length=0,this.buffers.push(n)}}shift(){if(this.buffers.length){const n=this.buffers.shift();if(n)return this.byteLength-=n.length,n}return new Uint8Array(0)}drain(n){if(this.buffers.length){this.pack();const h=this.buffers.pop();if(h){const u=this.byteLength;(n===void 0||n>u)&&(n=u);const m=h.subarray(0,n);return u>n&&this.buffers.push(h.subarray(n)),this.byteLength=u-n,m}}return new Uint8Array(0)}fill(n,...h){n&&(this.buffers.push(n),this.byteLength+=n.length);for(let u=0;u<h.length;u++)h[u]&&h[u].length&&(this.buffers.push(h[u]),this.byteLength+=h[u].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}function getLengths(c){const n=c.length;let h=c.indexOf("=");h===-1&&(h=n);const u=h===n?0:4-h%4;return[h,u]}function init(c,n,h=!1){function u(g,x){return Math.floor((g+x)*3/4-x)}function m(g){return c[g>>18&63]+c[g>>12&63]+c[g>>6&63]+c[g&63]}function s(g,x,_){const M=new Array((_-x)/3);for(let b=x,S=0;b<_;b+=3)M[S++]=m((g[b]<<16)+(g[b+1]<<8)+g[b+2]);return M.join("")}return{byteLength(g){return u.apply(null,getLengths(g))},toUint8Array(g){const[x,_]=getLengths(g),M=new Uint8Array(u(x,_)),b=_?x-4:x;let S,E=0,A;for(A=0;A<b;A+=4)S=n[g.charCodeAt(A)]<<18|n[g.charCodeAt(A+1)]<<12|n[g.charCodeAt(A+2)]<<6|n[g.charCodeAt(A+3)],M[E++]=S>>16&255,M[E++]=S>>8&255,M[E++]=S&255;return _===2?(S=n[g.charCodeAt(A)]<<2|n[g.charCodeAt(A+1)]>>4,M[E++]=S&255):_===1&&(S=n[g.charCodeAt(A)]<<10|n[g.charCodeAt(A+1)]<<4|n[g.charCodeAt(A+2)]>>2,M[E++]=S>>8&255,M[E++]=S&255),M},fromUint8Array(g){const _=g.length,M=_%3,b=_-M,S=new Array(Math.ceil(b/16383)+(M?1:0));let E=0,A;for(let R=0;R<b;R+=16383)A=R+16383,S[E++]=s(g,R,A>b?b:A);let B;return M===1?(B=g[b],S[E]=c[B>>2]+c[B<<4&63],h||(S[E]+="==")):M===2&&(B=g[b]<<8|g[b+1]&255,S[E]=c[B>>10]+c[B>>4&63]+c[B<<2&63],h||(S[E]+="=")),S.join("")}}}const lookup$1=[],revLookup$1=[],code$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let c=0,n=code$1.length;c<n;++c)lookup$1[c]=code$1[c],revLookup$1[code$1.charCodeAt(c)]=c;const{byteLength:byteLength$1,toUint8Array,fromUint8Array}=init(lookup$1,revLookup$1,!0),decoder=new TextDecoder,encoder=new TextEncoder;function toHexString(c){return c.reduce((n,h)=>`${n}${h<16?"0":""}${h.toString(16)}`,"")}function fromHexString(c){const n=c.length;if(n%2||!/^[0-9a-fA-F]+$/.test(c))throw new TypeError("Invalid hex string.");c=c.toLowerCase();const h=new Uint8Array(Math.floor(n/2)),u=n/2;for(let m=0;m<u;++m)h[m]=parseInt(c.substr(m*2,2),16);return h}function decode1(c,n="utf8"){if(/^utf-?8$/i.test(n))return decoder.decode(c);if(/^base64$/i.test(n))return fromUint8Array(c);if(/^hex(?:adecimal)?$/i.test(n))return toHexString(c);throw new TypeError("Unsupported string encoding.")}function encode1(c,n="utf8"){if(/^utf-?8$/i.test(n))return encoder.encode(c);if(/^base64$/i.test(n))return toUint8Array(c);if(/^hex(?:adecimal)?$/i.test(n))return fromHexString(c);throw new TypeError("Unsupported string encoding.")}class SHA256{constructor(){ae(this,"hashSize",32);ae(this,"_buf");ae(this,"_bufIdx");ae(this,"_count");ae(this,"_K");ae(this,"_H");ae(this,"_finalized");this._buf=new Uint8Array(64),this._K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),this.init()}init(){return this._H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(n,h){if(n===null)throw new TypeError("msg must be a string or Uint8Array.");typeof n=="string"&&(n=encode1(n,h));for(let m=0,s=n.length;m<s;m++)this._buf[this._bufIdx++]=n[m],this._bufIdx===64&&(this._transform(),this._bufIdx=0);const u=this._count;return(u[0]+=n.length<<3)<n.length<<3&&u[1]++,u[1]+=n.length>>>29,this}digest(n){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const h=this._buf;let u=this._bufIdx;for(h[u++]=128;u!==56;)u===64&&(this._transform(),u=0),h[u++]=0;const m=this._count;h[56]=m[1]>>>24&255,h[57]=m[1]>>>16&255,h[58]=m[1]>>>8&255,h[59]=m[1]>>>0&255,h[60]=m[0]>>>24&255,h[61]=m[0]>>>16&255,h[62]=m[0]>>>8&255,h[63]=m[0]>>>0&255,this._transform();const s=new Uint8Array(32);for(let g=0;g<8;g++)s[(g<<2)+0]=this._H[g]>>>24&255,s[(g<<2)+1]=this._H[g]>>>16&255,s[(g<<2)+2]=this._H[g]>>>8&255,s[(g<<2)+3]=this._H[g]>>>0&255;return this.init(),n?decode1(s,n):s}_transform(){const n=this._H;let h=n[0],u=n[1],m=n[2],s=n[3],g=n[4],x=n[5],_=n[6],M=n[7];const b=new Uint32Array(16);let S;for(S=0;S<16;S++)b[S]=this._buf[(S<<2)+3]|this._buf[(S<<2)+2]<<8|this._buf[(S<<2)+1]<<16|this._buf[S<<2]<<24;for(S=0;S<64;S++){let E;if(S<16)E=b[S];else{let A=b[S+1&15],B=b[S+14&15];E=b[S&15]=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(B>>>17^B>>>19^B>>>10^B<<15^B<<13)+b[S&15]+b[S+9&15]|0}E=E+M+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(_^g&(x^_))+this._K[S]|0,M=_,_=x,x=g,g=s+E,s=m,m=u,u=h,h=E+(u&m^s&(u^m))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0}n[0]=n[0]+h|0,n[1]=n[1]+u|0,n[2]=n[2]+m|0,n[3]=n[3]+s|0,n[4]=n[4]+g|0,n[5]=n[5]+x|0,n[6]=n[6]+_|0,n[7]=n[7]+M|0}}class BaseRequest{constructor(n,h,u=!0){ae(this,"token");ae(this,"received");ae(this,"ctx");ae(this,"requestSubject");ae(this,"mux");this.mux=n,this.requestSubject=h,this.received=0,this.token=nuid.next(),u&&(this.ctx=new Error)}}class RequestMany extends BaseRequest{constructor(h,u,m={maxWait:1e3}){super(h,u);ae(this,"callback");ae(this,"done");ae(this,"timer");ae(this,"max");ae(this,"opts");if(this.opts=m,typeof this.opts.callback!="function")throw new Error("callback is required");this.callback=this.opts.callback,this.max=typeof m.maxMessages=="number"&&m.maxMessages>0?m.maxMessages:-1,this.done=deferred(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},m.maxWait)}cancel(h){h&&this.callback(h,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(h,u){h?(this.ctx&&(h.stack+=`

${this.ctx.stack}`),this.cancel(h)):(this.callback(null,u),this.opts.strategy===RequestStrategy.Count&&(this.max--,this.max===0&&this.cancel()),this.opts.strategy===RequestStrategy.JitterTimer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},this.opts.jitter||300)),this.opts.strategy===RequestStrategy.SentinelMsg&&u&&u.data.length===0&&this.cancel())}}class RequestOne extends BaseRequest{constructor(h,u,m={timeout:1e3},s=!0){super(h,u,s);ae(this,"deferred");ae(this,"timer");this.deferred=deferred(),this.timer=timeout(m.timeout,s)}resolver(h,u){this.timer&&this.timer.cancel(),h?(this.ctx&&(h.stack+=`

${this.ctx.stack}`),this.deferred.reject(h)):this.deferred.resolve(u),this.cancel()}cancel(h){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(h||NatsError.errorForCode(ErrorCode.Cancelled))}}const defaultPrefix="$JS.API";function defaultJsOptions(c){return c=c||{},c.domain&&(c.apiPrefix=`$JS.${c.domain}.API`,delete c.domain),extend({apiPrefix:defaultPrefix,timeout:5e3},c)}class BaseApiClient{constructor(n,h){ae(this,"nc");ae(this,"opts");ae(this,"prefix");ae(this,"timeout");ae(this,"jc");this.nc=n,this.opts=defaultJsOptions(h),this._parseOpts(),this.prefix=this.opts.apiPrefix,this.timeout=this.opts.timeout,this.jc=JSONCodec()}getOptions(){return Object.assign({},this.opts)}_parseOpts(){let n=this.opts.apiPrefix;if(!n||n.length===0)throw new Error("invalid empty prefix");n[n.length-1]==="."&&(n=n.substr(0,n.length-1)),this.opts.apiPrefix=n}async _request(n,h=null,u){u=u||{},u.timeout=this.timeout;let m=Empty;h&&(m=this.jc.encode(h));let{retries:s}=u;s=s||1,s=s===-1?Number.MAX_SAFE_INTEGER:s;const g=backoff();for(let x=0;x<s;x++)try{const _=await this.nc.request(n,m,u);return this.parseJsResponse(_)}catch(_){const M=_;if((M.code==="503"||M.code===ErrorCode.Timeout)&&x+1<s)await delay(g.backoff(x));else throw _}}async findStream(n){const h={subject:n},m=await this._request(`${this.prefix}.STREAM.NAMES`,h);if(!m.streams||m.streams.length!==1)throw new Error("no stream matches subject");return m.streams[0]}getConnection(){return this.nc}parseJsResponse(n){const h=this.jc.decode(n.data),u=h;if(u.error){const m=checkJsErrorCode(u.error.code,u.error.description);if(m!==null)throw m.api_error=u.error,m}return h}}class ListerImpl{constructor(n,h,u,m){ae(this,"err");ae(this,"offset");ae(this,"pageInfo");ae(this,"subject");ae(this,"jsm");ae(this,"filter");ae(this,"payload");if(!n)throw new Error("subject is required");this.subject=n,this.jsm=u,this.offset=0,this.pageInfo={},this.filter=h,this.payload=m||{}}async next(){if(this.err)return[];if(this.pageInfo&&this.offset>=this.pageInfo.total)return[];const n={offset:this.offset};this.payload&&Object.assign(n,this.payload);try{const h=await this.jsm._request(this.subject,n,{timeout:this.jsm.timeout});this.pageInfo=h;const u=this.countResponse(h);return u===0?[]:(this.offset+=u,this.filter(h))}catch(h){throw this.err=h,h}}countResponse(n){var h,u,m;switch(n==null?void 0:n.type){case"io.nats.jetstream.api.v1.stream_names_response":case"io.nats.jetstream.api.v1.stream_list_response":return((h=n.streams)==null?void 0:h.length)||0;case"io.nats.jetstream.api.v1.consumer_list_response":return((u=n.consumers)==null?void 0:u.length)||0;default:return console.error(`jslister.ts: unknown API response for paged output: ${n==null?void 0:n.type}`),((m=n.streams)==null?void 0:m.length)||0}return 0}async*[Symbol.asyncIterator](){let n=await this.next();for(;n.length>0;){for(const h of n)yield h;n=await this.next()}}}function parseSemVer(c=""){const n=c.match(/(\d+).(\d+).(\d+)/);if(n)return{major:parseInt(n[1]),minor:parseInt(n[2]),micro:parseInt(n[3])};throw new Error(`'${c}' is not a semver value`)}function compare(c,n){return c.major<n.major?-1:c.major>n.major?1:c.minor<n.minor?-1:c.minor>n.minor?1:c.micro<n.micro?-1:c.micro>n.micro?1:0}var Feature;(function(c){c.JS_KV="js_kv",c.JS_OBJECTSTORE="js_objectstore",c.JS_PULL_MAX_BYTES="js_pull_max_bytes",c.JS_NEW_CONSUMER_CREATE_API="js_new_consumer_create",c.JS_ALLOW_DIRECT="js_allow_direct",c.JS_MULTIPLE_CONSUMER_FILTER="js_multiple_consumer_filter",c.JS_SIMPLIFICATION="js_simplification",c.JS_STREAM_CONSUMER_METADATA="js_stream_consumer_metadata",c.JS_CONSUMER_FILTER_SUBJECTS="js_consumer_filter_subjects",c.JS_STREAM_FIRST_SEQ="js_stream_first_seq",c.JS_STREAM_SUBJECT_TRANSFORM="js_stream_subject_transform",c.JS_STREAM_SOURCE_SUBJECT_TRANSFORM="js_stream_source_subject_transform",c.JS_STREAM_COMPRESSION="js_stream_compression",c.JS_DEFAULT_CONSUMER_LIMITS="js_default_consumer_limits",c.JS_BATCH_DIRECT_GET="js_batch_direct_get"})(Feature||(Feature={}));class Features{constructor(n){ae(this,"server");ae(this,"features");ae(this,"disabled");this.features=new Map,this.disabled=[],this.update(n)}resetDisabled(){this.disabled.length=0,this.update(this.server)}disable(n){this.disabled.push(n),this.update(this.server)}isDisabled(n){return this.disabled.indexOf(n)!==-1}update(n){typeof n=="string"&&(n=parseSemVer(n)),this.server=n,this.set(Feature.JS_KV,"2.6.2"),this.set(Feature.JS_OBJECTSTORE,"2.6.3"),this.set(Feature.JS_PULL_MAX_BYTES,"2.8.3"),this.set(Feature.JS_NEW_CONSUMER_CREATE_API,"2.9.0"),this.set(Feature.JS_ALLOW_DIRECT,"2.9.0"),this.set(Feature.JS_MULTIPLE_CONSUMER_FILTER,"2.10.0"),this.set(Feature.JS_SIMPLIFICATION,"2.9.4"),this.set(Feature.JS_STREAM_CONSUMER_METADATA,"2.10.0"),this.set(Feature.JS_CONSUMER_FILTER_SUBJECTS,"2.10.0"),this.set(Feature.JS_STREAM_FIRST_SEQ,"2.10.0"),this.set(Feature.JS_STREAM_SUBJECT_TRANSFORM,"2.10.0"),this.set(Feature.JS_STREAM_SOURCE_SUBJECT_TRANSFORM,"2.10.0"),this.set(Feature.JS_STREAM_COMPRESSION,"2.10.0"),this.set(Feature.JS_DEFAULT_CONSUMER_LIMITS,"2.10.0"),this.set(Feature.JS_BATCH_DIRECT_GET,"2.11.0"),this.disabled.forEach(h=>{this.features.delete(h)})}set(n,h){this.features.set(n,{min:h,ok:compare(this.server,parseSemVer(h))>=0})}get(n){return this.features.get(n)||{min:"unknown",ok:!1}}supports(n){var h;return((h=this.get(n))==null?void 0:h.ok)||!1}require(n){return typeof n=="string"&&(n=parseSemVer(n)),compare(this.server,n)>=0}}class ConsumerAPIImpl extends BaseApiClient{constructor(n,h){super(n,h)}async add(n,h,u=ConsumerApiAction.Create){if(validateStreamName(n),h.deliver_group&&h.flow_control)throw new Error("jetstream flow control is not supported with queue groups");if(h.deliver_group&&h.idle_heartbeat)throw new Error("jetstream idle heartbeat is not supported with queue groups");const m={};m.config=h,m.stream_name=n,m.action=u,m.config.durable_name&&validateDurableName(m.config.durable_name);const s=this.nc;let{min:g,ok:x}=s.features.get(Feature.JS_NEW_CONSUMER_CREATE_API);const _=h.name===""?void 0:h.name;if(_&&!x)throw new Error(`consumer 'name' requires server ${g}`);if(_)try{minValidation("name",_)}catch(E){const A=E.message,B=A.indexOf("cannot contain");throw B!==-1?new Error(`consumer 'name' ${A.substring(B)}`):E}let M,b="";if(Array.isArray(h.filter_subjects)){const{min:E,ok:A}=s.features.get(Feature.JS_MULTIPLE_CONSUMER_FILTER);if(!A)throw new Error(`consumer 'filter_subjects' requires server ${E}`);x=!1}if(h.metadata){const{min:E,ok:A}=s.features.get(Feature.JS_STREAM_CONSUMER_METADATA);if(!A)throw new Error(`consumer 'metadata' requires server ${E}`)}if(x&&(b=h.name??h.durable_name??""),b!==""){let E=h.filter_subject??void 0;E===">"&&(E=void 0),M=E!==void 0?`${this.prefix}.CONSUMER.CREATE.${n}.${b}.${E}`:`${this.prefix}.CONSUMER.CREATE.${n}.${b}`}else M=h.durable_name?`${this.prefix}.CONSUMER.DURABLE.CREATE.${n}.${h.durable_name}`:`${this.prefix}.CONSUMER.CREATE.${n}`;return await this._request(M,m)}async update(n,h,u){const m=await this.info(n,h),s=u;return this.add(n,Object.assign(m.config,s),ConsumerApiAction.Update)}async info(n,h){return validateStreamName(n),validateDurableName(h),await this._request(`${this.prefix}.CONSUMER.INFO.${n}.${h}`)}async delete(n,h){return validateStreamName(n),validateDurableName(h),(await this._request(`${this.prefix}.CONSUMER.DELETE.${n}.${h}`)).success}list(n){validateStreamName(n);const h=m=>m.consumers,u=`${this.prefix}.CONSUMER.LIST.${n}`;return new ListerImpl(u,h,this)}pause(n,h,u){const m=`${this.prefix}.CONSUMER.PAUSE.${n}.${h}`,s={pause_until:u.toISOString()};return this._request(m,s)}resume(n,h){return this.pause(n,h,new Date(0))}}function checkFn(c,n,h=!1){if(h===!0&&!c)throw NatsError.errorForCode(ErrorCode.ApiError,new Error(`${n} is not a function`));if(c&&typeof c!="function")throw NatsError.errorForCode(ErrorCode.ApiError,new Error(`${n} is not a function`))}class TypedSubscription extends QueuedIteratorImpl{constructor(h,u,m){super();ae(this,"sub");ae(this,"adapter");ae(this,"subIterDone");checkFn(m.adapter,"adapter",!0),this.adapter=m.adapter,m.callback&&checkFn(m.callback,"callback"),this.noIterator=typeof m.callback=="function",m.ingestionFilterFn&&(checkFn(m.ingestionFilterFn,"ingestionFilterFn"),this.ingestionFilterFn=m.ingestionFilterFn),m.protocolFilterFn&&(checkFn(m.protocolFilterFn,"protocolFilterFn"),this.protocolFilterFn=m.protocolFilterFn),m.dispatchedFn&&(checkFn(m.dispatchedFn,"dispatchedFn"),this.dispatchedFn=m.dispatchedFn),m.cleanupFn&&checkFn(m.cleanupFn,"cleanupFn");let s=(b,S)=>{this.callback(b,S)};if(m.callback){const b=m.callback;s=(S,E)=>{const[A,B]=this.adapter(S,E);if(A){b(A,null);return}const{ingest:R}=this.ingestionFilterFn?this.ingestionFilterFn(B,this):{ingest:!0};R&&(!this.protocolFilterFn||this.protocolFilterFn(B))&&(b(A,B),this.dispatchedFn&&B&&this.dispatchedFn(B))}}const{max:g,queue:x,timeout:_}=m,M={queue:x,timeout:_,callback:s};g&&g>0&&(M.max=g),this.sub=h.subscribe(u,M),m.cleanupFn&&(this.sub.cleanupFn=m.cleanupFn),this.noIterator||this.iterClosed.then(()=>{this.unsubscribe()}),this.subIterDone=deferred(),Promise.all([this.sub.closed,this.iterClosed]).then(()=>{this.subIterDone.resolve()}).catch(()=>{this.subIterDone.resolve()}),(async b=>{await b.closed,this.stop()})(this.sub).then().catch()}unsubscribe(h){this.sub.unsubscribe(h)}drain(){return this.sub.drain()}isDraining(){return this.sub.isDraining()}isClosed(){return this.sub.isClosed()}callback(h,u){this.sub.cancelTimeout();const[m,s]=this.adapter(h,u);m&&this.stop(m),s&&this.push(s)}getSubject(){return this.sub.getSubject()}getReceived(){return this.sub.getReceived()}getProcessed(){return this.sub.getProcessed()}getPending(){return this.sub.getPending()}getID(){return this.sub.getID()}getMax(){return this.sub.getMax()}get closed(){return this.sub.closed}}let transportConfig;function setTransportFactory(c){transportConfig=c}function defaultPort(){return transportConfig!==void 0&&transportConfig.defaultPort!==void 0?transportConfig.defaultPort:4222}function getUrlParseFn(){return transportConfig!==void 0&&transportConfig.urlParseFn?transportConfig.urlParseFn:void 0}function newTransport(){if(!transportConfig||typeof transportConfig.factory!="function")throw new Error("transport fn is not set");return transportConfig.factory()}function getResolveFn(){return transportConfig!==void 0&&transportConfig.dnsResolveFn?transportConfig.dnsResolveFn:void 0}const CR_LF=`\r
`,CRLF=DataBuffer.fromAscii(CR_LF),CR=new Uint8Array(CRLF)[0],LF=new Uint8Array(CRLF)[1];function protoLen(c){for(let n=0;n<c.length;n++){const h=n+1;if(c.byteLength>h&&c[n]===CR&&c[h]===LF)return h+1}return 0}function extractProtocolMessage(c){const n=protoLen(c);if(n>0){const u=new Uint8Array(c).slice(0,n);return TD.decode(u)}return""}const IPv4LEN=4,ASCII0=48,ASCIIA=65,ASCIIa=97;function ipV4(c,n,h,u){const m=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((g,x)=>{m[x]=g}),m[12]=c,m[13]=n,m[14]=h,m[15]=u,m}function isIP(c){return parseIP(c)!==void 0}function parseIP(c){for(let n=0;n<c.length;n++)switch(c[n]){case".":return parseIPv4(c);case":":return parseIPv6(c)}}function parseIPv4(c){const n=new Uint8Array(4);for(let h=0;h<4;h++){if(c.length===0)return;if(h>0){if(c[0]!==".")return;c=c.substring(1)}const{n:u,c:m,ok:s}=dtoi(c);if(!s||u>255)return;c=c.substring(m),n[h]=u}return ipV4(n[0],n[1],n[2],n[3])}function parseIPv6(c){const n=new Uint8Array(16);let h=-1;if(c.length>=2&&c[0]===":"&&c[1]===":"&&(h=0,c=c.substring(2),c.length===0))return n;let u=0;for(;u<16;){const{n:m,c:s,ok:g}=xtoi(c);if(!g||m>65535)return;if(s<c.length&&c[s]==="."){if(h<0&&u!=12||u+4>16)return;const x=parseIPv4(c);if(x===void 0)return;n[u]=x[12],n[u+1]=x[13],n[u+2]=x[14],n[u+3]=x[15],c="",u+=IPv4LEN;break}if(n[u]=m>>8,n[u+1]=m,u+=2,c=c.substring(s),c.length===0)break;if(c[0]!==":"||c.length==1)return;if(c=c.substring(1),c[0]===":"){if(h>=0)return;if(h=u,c=c.substring(1),c.length===0)break}}if(c.length===0){if(u<16){if(h<0)return;const m=16-u;for(let s=u-1;s>=h;s--)n[s+m]=n[s];for(let s=h+m-1;s>=h;s--)n[s]=0}else if(h>=0)return;return n}}function dtoi(c){let n=0,h=0;for(n=0;n<c.length&&48<=c.charCodeAt(n)&&c.charCodeAt(n)<=57;n++)if(h=h*10+(c.charCodeAt(n)-ASCII0),h>=16777215)return{n:16777215,c:n,ok:!1};return n===0?{n:0,c:0,ok:!1}:{n:h,c:n,ok:!0}}function xtoi(c){let n=0,h=0;for(h=0;h<c.length;h++){if(48<=c.charCodeAt(h)&&c.charCodeAt(h)<=57)n*=16,n+=c.charCodeAt(h)-ASCII0;else if(97<=c.charCodeAt(h)&&c.charCodeAt(h)<=102)n*=16,n+=c.charCodeAt(h)-ASCIIa+10;else if(65<=c.charCodeAt(h)&&c.charCodeAt(h)<=70)n*=16,n+=c.charCodeAt(h)-ASCIIA+10;else break;if(n>=16777215)return{n:0,c:h,ok:!1}}return h===0?{n:0,c:h,ok:!1}:{n,c:h,ok:!0}}function isIPV4OrHostname(c){return c.indexOf(".")!==-1?!0:c.indexOf("[")!==-1||c.indexOf("::")!==-1?!1:c.split(":").length<=2}function isIPV6(c){return!isIPV4OrHostname(c)}function filterIpv6MappedToIpv4(c){const n="::FFFF:",h=c.toUpperCase().indexOf(n);if(h!==-1&&c.indexOf(".")!==-1){let u=c.substring(h+n.length);return u=u.replace("[",""),u.replace("]","")}return c}function hostPort(c){c=c.trim(),c.match(/^(.*:\/\/)(.*)/m)&&(c=c.replace(/^(.*:\/\/)(.*)/gm,"$2")),c=filterIpv6MappedToIpv4(c),isIPV6(c)&&c.indexOf("[")===-1&&(c=`[${c}]`);const n=isIPV6(c)?c.match(/(]:)(\d+)/):c.match(/(:)(\d+)/),h=n&&n.length===3&&n[1]&&n[2]?parseInt(n[2]):4222,u=h===80?"https":"http",m=new URL(`${u}://${c}`);m.port=`${h}`;let s=m.hostname;return s.charAt(0)==="["&&(s=s.substring(1,s.length-1)),{listen:m.host,hostname:s,port:h}}class ServerImpl{constructor(n,h=!1){ae(this,"src");ae(this,"listen");ae(this,"hostname");ae(this,"port");ae(this,"didConnect");ae(this,"reconnects");ae(this,"lastConnect");ae(this,"gossiped");ae(this,"tlsName");ae(this,"resolves");this.src=n,this.tlsName="";const u=hostPort(n);this.listen=u.listen,this.hostname=u.hostname,this.port=u.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=h}toString(){return this.listen}async resolve(n){if(!n.fn)return[this];const h=[];if(isIP(this.hostname))return[this];{const u=await n.fn(this.hostname);n.debug&&console.log(`resolve ${this.hostname} = ${u.join(",")}`);for(const m of u){const s=this.port===80?"https":"http",g=new URL(`${s}://${isIPV6(m)?"["+m+"]":m}`);g.port=`${this.port}`;const x=new ServerImpl(g.host,!1);x.tlsName=this.hostname,h.push(x)}}return n.randomize&&shuffle(h),this.resolves=h,h}}class Servers{constructor(n=[],h={}){ae(this,"firstSelect");ae(this,"servers");ae(this,"currentServer");ae(this,"tlsName");ae(this,"randomize");this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=h.randomize||!1;const u=getUrlParseFn();n&&(n.forEach(m=>{m=u?u(m):m,this.servers.push(new ServerImpl(m))}),this.randomize&&(this.servers=shuffle(this.servers))),this.servers.length===0&&this.addServer(`${DEFAULT_HOST}:${defaultPort()}`,!1),this.currentServer=this.servers[0]}clear(){this.servers.length=0}updateTLSName(){const n=this.getCurrentServer();isIP(n.hostname)||(this.tlsName=n.hostname,this.servers.forEach(h=>{h.gossiped&&(h.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(n,h=!1){const u=getUrlParseFn();n=u?u(n):n;const m=new ServerImpl(n,h);isIP(m.hostname)&&(m.tlsName=this.tlsName),this.servers.push(m)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;const n=this.servers.shift();return n&&(this.servers.push(n),this.currentServer=n),n}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(n){if(n){const h=this.servers.indexOf(n);this.servers.splice(h,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(n,h){const u=[];let m=[];const s=getUrlParseFn(),g=new Map;n.connect_urls&&n.connect_urls.length>0&&n.connect_urls.forEach(_=>{_=s?s(_,h):_;const M=new ServerImpl(_,!0);g.set(_,M)});const x=[];return this.servers.forEach((_,M)=>{const b=_.listen;_.gossiped&&this.currentServer.listen!==b&&g.get(b)===void 0&&x.push(M),g.delete(b)}),x.reverse(),x.forEach(_=>{const M=this.servers.splice(_,1);m=m.concat(M[0].listen)}),g.forEach((_,M)=>{this.servers.push(_),u.push(M)}),{added:u,deleted:m}}}class MuxSubscription{constructor(){ae(this,"baseInbox");ae(this,"reqs");this.reqs=new Map}size(){return this.reqs.size}init(n){return this.baseInbox=`${createInbox(n)}.`,this.baseInbox}add(n){isNaN(n.received)||(n.received=0),this.reqs.set(n.token,n)}get(n){return this.reqs.get(n)}cancel(n){this.reqs.delete(n.token)}getToken(n){const h=n.subject||"";return h.indexOf(this.baseInbox)===0?h.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(n,h){if(h&&h.permissionContext){if(n)return this.all().forEach(m=>{m.resolver(h,{})}),!0;const u=h.permissionContext;if(u.operation==="publish"){const m=this.all().find(s=>s.requestSubject===u.subject);if(m)return m.resolver(h,{}),!0}}return!1}dispatcher(){return(n,h)=>{const u=this.getToken(h);if(u){const m=this.get(u);m&&(n===null&&h.headers&&(n=isRequestError(h)),m.resolver(n,h))}}}close(){const n=NatsError.errorForCode(ErrorCode.Timeout);this.reqs.forEach(h=>{h.resolver(n,{})})}}class Heartbeat{constructor(n,h,u){ae(this,"ph");ae(this,"interval");ae(this,"maxOut");ae(this,"timer");ae(this,"pendings");this.ph=n,this.interval=h,this.maxOut=u,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(n){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),n&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:DebugEvents.PingTimer,data:`${this.pendings.length+1}`}),this.pendings.length===this.maxOut){this.cancel(!0);return}const n=deferred();this.ph.flush(n).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(n),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(n=>(n.resolve(),!1))}}class AssertionError extends Error{constructor(n){super(n),this.name="AssertionError"}}function assert(c,n="Assertion failed."){if(!c)throw new AssertionError(n)}const MIN_READ=32*1024,MAX_SIZE=2**32-2;function copy(c,n,h=0){const u=n.byteLength-h;return c.byteLength>u&&(c=c.subarray(0,u)),n.set(c,h),c.byteLength}class DenoBuffer{constructor(n){ae(this,"_buf");ae(this,"_off");if(this._off=0,n==null){this._buf=new Uint8Array(0);return}this._buf=new Uint8Array(n)}bytes(n={copy:!0}){return n.copy===!1?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(n){if(n===0){this.reset();return}if(n<0||n>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+n)}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(n){const h=this._buf.byteLength;return n<=this.capacity-h?(this._reslice(h+n),h):-1}_reslice(n){assert(n<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,n)}readByte(){const n=new Uint8Array(1);return this.read(n)?n[0]:null}read(n){if(this.empty())return this.reset(),n.byteLength===0?0:null;const h=copy(this._buf.subarray(this._off),n);return this._off+=h,h}writeByte(n){return this.write(Uint8Array.of(n))}writeString(n){return this.write(TE.encode(n))}write(n){const h=this._grow(n.byteLength);return copy(n,this._buf,h)}_grow(n){const h=this.length;h===0&&this._off!==0&&this.reset();const u=this._tryGrowByReslice(n);if(u>=0)return u;const m=this.capacity;if(n<=Math.floor(m/2)-h)copy(this._buf.subarray(this._off),this._buf);else{if(m+n>MAX_SIZE)throw new Error("The buffer cannot be grown beyond the maximum size.");{const s=new Uint8Array(Math.min(2*m+n,MAX_SIZE));copy(this._buf.subarray(this._off),s),this._buf=s}}return this._off=0,this._reslice(Math.min(h+n,MAX_SIZE)),h}grow(n){if(n<0)throw Error("Buffer._grow: negative count");const h=this._grow(n);this._reslice(h)}readFrom(n){let h=0;const u=new Uint8Array(MIN_READ);for(;;){const m=this.capacity-this.length<MIN_READ,s=m?u:new Uint8Array(this._buf.buffer,this.length),g=n.read(s);if(g===null)return h;m?this.write(s.subarray(0,g)):this._reslice(this.length+g),h+=g}}}var Kind;(function(c){c[c.OK=0]="OK",c[c.ERR=1]="ERR",c[c.MSG=2]="MSG",c[c.INFO=3]="INFO",c[c.PING=4]="PING",c[c.PONG=5]="PONG"})(Kind||(Kind={}));function newMsgArg(){const c={};return c.sid=-1,c.hdr=-1,c.size=-1,c}const ASCII_0=48;class Parser{constructor(n){ae(this,"dispatcher");ae(this,"state");ae(this,"as");ae(this,"drop");ae(this,"hdr");ae(this,"ma");ae(this,"argBuf");ae(this,"msgBuf");this.dispatcher=n,this.state=State.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(n){let h;for(h=0;h<n.length;h++){const u=n[h];switch(this.state){case State.OP_START:switch(u){case cc.M:case cc.m:this.state=State.OP_M,this.hdr=-1,this.ma=newMsgArg();break;case cc.H:case cc.h:this.state=State.OP_H,this.hdr=0,this.ma=newMsgArg();break;case cc.P:case cc.p:this.state=State.OP_P;break;case cc.PLUS:this.state=State.OP_PLUS;break;case cc.MINUS:this.state=State.OP_MINUS;break;case cc.I:case cc.i:this.state=State.OP_I;break;default:throw this.fail(n.subarray(h))}break;case State.OP_H:switch(u){case cc.M:case cc.m:this.state=State.OP_M;break;default:throw this.fail(n.subarray(h))}break;case State.OP_M:switch(u){case cc.S:case cc.s:this.state=State.OP_MS;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MS:switch(u){case cc.G:case cc.g:this.state=State.OP_MSG;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MSG:switch(u){case cc.SPACE:case cc.TAB:this.state=State.OP_MSG_SPC;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MSG_SPC:switch(u){case cc.SPACE:case cc.TAB:continue;default:this.state=State.MSG_ARG,this.as=h}break;case State.MSG_ARG:switch(u){case cc.CR:this.drop=1;break;case cc.NL:{const m=this.argBuf?this.argBuf.bytes():n.subarray(this.as,h-this.drop);this.processMsgArgs(m),this.drop=0,this.as=h+1,this.state=State.MSG_PAYLOAD,h=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(u)}break;case State.MSG_PAYLOAD:if(this.msgBuf)if(this.msgBuf.length>=this.ma.size){const m=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:Kind.MSG,msg:this.ma,data:m}),this.argBuf=void 0,this.msgBuf=void 0,this.state=State.MSG_END}else{let m=this.ma.size-this.msgBuf.length;const s=n.length-h;s<m&&(m=s),m>0?(this.msgBuf.write(n.subarray(h,h+m)),h=h+m-1):this.msgBuf.writeByte(u)}else h-this.as>=this.ma.size&&(this.dispatcher.push({kind:Kind.MSG,msg:this.ma,data:n.subarray(this.as,h)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=State.MSG_END);break;case State.MSG_END:switch(u){case cc.NL:this.drop=0,this.as=h+1,this.state=State.OP_START;break;default:continue}break;case State.OP_PLUS:switch(u){case cc.O:case cc.o:this.state=State.OP_PLUS_O;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PLUS_O:switch(u){case cc.K:case cc.k:this.state=State.OP_PLUS_OK;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PLUS_OK:switch(u){case cc.NL:this.dispatcher.push({kind:Kind.OK}),this.drop=0,this.state=State.OP_START;break}break;case State.OP_MINUS:switch(u){case cc.E:case cc.e:this.state=State.OP_MINUS_E;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MINUS_E:switch(u){case cc.R:case cc.r:this.state=State.OP_MINUS_ER;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MINUS_ER:switch(u){case cc.R:case cc.r:this.state=State.OP_MINUS_ERR;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MINUS_ERR:switch(u){case cc.SPACE:case cc.TAB:this.state=State.OP_MINUS_ERR_SPC;break;default:throw this.fail(n.subarray(h))}break;case State.OP_MINUS_ERR_SPC:switch(u){case cc.SPACE:case cc.TAB:continue;default:this.state=State.MINUS_ERR_ARG,this.as=h}break;case State.MINUS_ERR_ARG:switch(u){case cc.CR:this.drop=1;break;case cc.NL:{let m;this.argBuf?(m=this.argBuf.bytes(),this.argBuf=void 0):m=n.subarray(this.as,h-this.drop),this.dispatcher.push({kind:Kind.ERR,data:m}),this.drop=0,this.as=h+1,this.state=State.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(u))}break;case State.OP_P:switch(u){case cc.I:case cc.i:this.state=State.OP_PI;break;case cc.O:case cc.o:this.state=State.OP_PO;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PO:switch(u){case cc.N:case cc.n:this.state=State.OP_PON;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PON:switch(u){case cc.G:case cc.g:this.state=State.OP_PONG;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PONG:switch(u){case cc.NL:this.dispatcher.push({kind:Kind.PONG}),this.drop=0,this.state=State.OP_START;break}break;case State.OP_PI:switch(u){case cc.N:case cc.n:this.state=State.OP_PIN;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PIN:switch(u){case cc.G:case cc.g:this.state=State.OP_PING;break;default:throw this.fail(n.subarray(h))}break;case State.OP_PING:switch(u){case cc.NL:this.dispatcher.push({kind:Kind.PING}),this.drop=0,this.state=State.OP_START;break}break;case State.OP_I:switch(u){case cc.N:case cc.n:this.state=State.OP_IN;break;default:throw this.fail(n.subarray(h))}break;case State.OP_IN:switch(u){case cc.F:case cc.f:this.state=State.OP_INF;break;default:throw this.fail(n.subarray(h))}break;case State.OP_INF:switch(u){case cc.O:case cc.o:this.state=State.OP_INFO;break;default:throw this.fail(n.subarray(h))}break;case State.OP_INFO:switch(u){case cc.SPACE:case cc.TAB:this.state=State.OP_INFO_SPC;break;default:throw this.fail(n.subarray(h))}break;case State.OP_INFO_SPC:switch(u){case cc.SPACE:case cc.TAB:continue;default:this.state=State.INFO_ARG,this.as=h}break;case State.INFO_ARG:switch(u){case cc.CR:this.drop=1;break;case cc.NL:{let m;this.argBuf?(m=this.argBuf.bytes(),this.argBuf=void 0):m=n.subarray(this.as,h-this.drop),this.dispatcher.push({kind:Kind.INFO,data:m}),this.drop=0,this.as=h+1,this.state=State.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(u)}break;default:throw this.fail(n.subarray(h))}}(this.state===State.MSG_ARG||this.state===State.MINUS_ERR_ARG||this.state===State.INFO_ARG)&&!this.argBuf&&(this.argBuf=new DenoBuffer(n.subarray(this.as,h-this.drop))),this.state===State.MSG_PAYLOAD&&!this.msgBuf&&(this.argBuf||this.cloneMsgArg(),this.msgBuf=new DenoBuffer(n.subarray(this.as)))}cloneMsgArg(){const n=this.ma.subject.length,h=this.ma.reply?this.ma.reply.length:0,u=new Uint8Array(n+h);u.set(this.ma.subject),this.ma.reply&&u.set(this.ma.reply,n),this.argBuf=new DenoBuffer(u),this.ma.subject=u.subarray(0,n),this.ma.reply&&(this.ma.reply=u.subarray(n))}processMsgArgs(n){if(this.hdr>=0)return this.processHeaderMsgArgs(n);const h=[];let u=-1;for(let m=0;m<n.length;m++)switch(n[m]){case cc.SPACE:case cc.TAB:case cc.CR:case cc.NL:u>=0&&(h.push(n.subarray(u,m)),u=-1);break;default:u<0&&(u=m)}switch(u>=0&&h.push(n.subarray(u)),h.length){case 3:this.ma.subject=h[0],this.ma.sid=this.protoParseInt(h[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(h[2]);break;case 4:this.ma.subject=h[0],this.ma.sid=this.protoParseInt(h[1]),this.ma.reply=h[2],this.ma.size=this.protoParseInt(h[3]);break;default:throw this.fail(n,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(n,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(n,"processMsgArgs Bad or Missing Size Error")}fail(n,h=""){return h?h=`${h} [${this.state}]`:h=`parse error [${this.state}]`,new Error(`${h}: ${TD.decode(n)}`)}processHeaderMsgArgs(n){const h=[];let u=-1;for(let m=0;m<n.length;m++)switch(n[m]){case cc.SPACE:case cc.TAB:case cc.CR:case cc.NL:u>=0&&(h.push(n.subarray(u,m)),u=-1);break;default:u<0&&(u=m)}switch(u>=0&&h.push(n.subarray(u)),h.length){case 4:this.ma.subject=h[0],this.ma.sid=this.protoParseInt(h[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(h[2]),this.ma.size=this.protoParseInt(h[3]);break;case 5:this.ma.subject=h[0],this.ma.sid=this.protoParseInt(h[1]),this.ma.reply=h[2],this.ma.hdr=this.protoParseInt(h[3]),this.ma.size=this.protoParseInt(h[4]);break;default:throw this.fail(n,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(n,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(n,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(n,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(n){if(n.length===0)return-1;let h=0;for(let u=0;u<n.length;u++){if(n[u]<48||n[u]>57)return-1;h=h*10+(n[u]-ASCII_0)}return h}}var State;(function(c){c[c.OP_START=0]="OP_START",c[c.OP_PLUS=1]="OP_PLUS",c[c.OP_PLUS_O=2]="OP_PLUS_O",c[c.OP_PLUS_OK=3]="OP_PLUS_OK",c[c.OP_MINUS=4]="OP_MINUS",c[c.OP_MINUS_E=5]="OP_MINUS_E",c[c.OP_MINUS_ER=6]="OP_MINUS_ER",c[c.OP_MINUS_ERR=7]="OP_MINUS_ERR",c[c.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",c[c.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",c[c.OP_M=10]="OP_M",c[c.OP_MS=11]="OP_MS",c[c.OP_MSG=12]="OP_MSG",c[c.OP_MSG_SPC=13]="OP_MSG_SPC",c[c.MSG_ARG=14]="MSG_ARG",c[c.MSG_PAYLOAD=15]="MSG_PAYLOAD",c[c.MSG_END=16]="MSG_END",c[c.OP_H=17]="OP_H",c[c.OP_P=18]="OP_P",c[c.OP_PI=19]="OP_PI",c[c.OP_PIN=20]="OP_PIN",c[c.OP_PING=21]="OP_PING",c[c.OP_PO=22]="OP_PO",c[c.OP_PON=23]="OP_PON",c[c.OP_PONG=24]="OP_PONG",c[c.OP_I=25]="OP_I",c[c.OP_IN=26]="OP_IN",c[c.OP_INF=27]="OP_INF",c[c.OP_INFO=28]="OP_INFO",c[c.OP_INFO_SPC=29]="OP_INFO_SPC",c[c.INFO_ARG=30]="INFO_ARG"})(State||(State={}));var cc;(function(c){c[c.CR=13]="CR",c[c.E=69]="E",c[c.e=101]="e",c[c.F=70]="F",c[c.f=102]="f",c[c.G=71]="G",c[c.g=103]="g",c[c.H=72]="H",c[c.h=104]="h",c[c.I=73]="I",c[c.i=105]="i",c[c.K=75]="K",c[c.k=107]="k",c[c.M=77]="M",c[c.m=109]="m",c[c.MINUS=45]="MINUS",c[c.N=78]="N",c[c.n=110]="n",c[c.NL=10]="NL",c[c.O=79]="O",c[c.o=111]="o",c[c.P=80]="P",c[c.p=112]="p",c[c.PLUS=43]="PLUS",c[c.R=82]="R",c[c.r=114]="r",c[c.S=83]="S",c[c.s=115]="s",c[c.SPACE=32]="SPACE",c[c.TAB=9]="TAB"})(cc||(cc={})),function(c){var n=function(X,re){this.hi=X|0,this.lo=re|0},h=function(X){var re,te=new Float64Array(16);if(X)for(re=0;re<X.length;re++)te[re]=X[re];return te},u=function(){throw new Error("no PRNG")},m=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var g=h(),x=h([1]),_=h([56129,1]),M=h([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),b=h([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=h([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),E=h([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=h([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(X,re){return X<<re|X>>>32-re}function R(X,re){var te=X[re+3]&255;return te=te<<8|X[re+2]&255,te=te<<8|X[re+1]&255,te<<8|X[re+0]&255}function T(X,re){var te=X[re]<<24|X[re+1]<<16|X[re+2]<<8|X[re+3],fe=X[re+4]<<24|X[re+5]<<16|X[re+6]<<8|X[re+7];return new n(te,fe)}function k(X,re,te){var fe;for(fe=0;fe<4;fe++)X[re+fe]=te&255,te>>>=8}function O(X,re,te){X[re]=te.hi>>24&255,X[re+1]=te.hi>>16&255,X[re+2]=te.hi>>8&255,X[re+3]=te.hi&255,X[re+4]=te.lo>>24&255,X[re+5]=te.lo>>16&255,X[re+6]=te.lo>>8&255,X[re+7]=te.lo&255}function U(X,re,te,fe,le){var pe,Se=0;for(pe=0;pe<le;pe++)Se|=X[re+pe]^te[fe+pe];return(1&Se-1>>>8)-1}function L(X,re,te,fe){return U(X,re,te,fe,16)}function Q(X,re,te,fe){return U(X,re,te,fe,32)}function ie(X,re,te,fe,le){var pe=new Uint32Array(16),Se=new Uint32Array(16),Ee=new Uint32Array(16),me=new Uint32Array(4),_e,De,Me;for(_e=0;_e<4;_e++)Se[5*_e]=R(fe,4*_e),Se[1+_e]=R(te,4*_e),Se[6+_e]=R(re,4*_e),Se[11+_e]=R(te,16+4*_e);for(_e=0;_e<16;_e++)Ee[_e]=Se[_e];for(_e=0;_e<20;_e++){for(De=0;De<4;De++){for(Me=0;Me<4;Me++)me[Me]=Se[(5*De+4*Me)%16];for(me[1]^=B(me[0]+me[3]|0,7),me[2]^=B(me[1]+me[0]|0,9),me[3]^=B(me[2]+me[1]|0,13),me[0]^=B(me[3]+me[2]|0,18),Me=0;Me<4;Me++)pe[4*De+(De+Me)%4]=me[Me]}for(Me=0;Me<16;Me++)Se[Me]=pe[Me]}if(le){for(_e=0;_e<16;_e++)Se[_e]=Se[_e]+Ee[_e]|0;for(_e=0;_e<4;_e++)Se[5*_e]=Se[5*_e]-R(fe,4*_e)|0,Se[6+_e]=Se[6+_e]-R(re,4*_e)|0;for(_e=0;_e<4;_e++)k(X,4*_e,Se[5*_e]),k(X,16+4*_e,Se[6+_e])}else for(_e=0;_e<16;_e++)k(X,4*_e,Se[_e]+Ee[_e]|0)}function we(X,re,te,fe){return ie(X,re,te,fe,!1),0}function ye(X,re,te,fe){return ie(X,re,te,fe,!0),0}var se=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ke(X,re,te,fe,le,pe,Se){var Ee=new Uint8Array(16),me=new Uint8Array(64),_e,De;if(!le)return 0;for(De=0;De<16;De++)Ee[De]=0;for(De=0;De<8;De++)Ee[De]=pe[De];for(;le>=64;){for(we(me,Ee,Se,se),De=0;De<64;De++)X[re+De]=(te?te[fe+De]:0)^me[De];for(_e=1,De=8;De<16;De++)_e=_e+(Ee[De]&255)|0,Ee[De]=_e&255,_e>>>=8;le-=64,re+=64,te&&(fe+=64)}if(le>0)for(we(me,Ee,Se,se),De=0;De<le;De++)X[re+De]=(te?te[fe+De]:0)^me[De];return 0}function w(X,re,te,fe,le){return ke(X,re,null,0,te,fe,le)}function e(X,re,te,fe,le){var pe=new Uint8Array(32);return ye(pe,fe,le,se),w(X,re,te,fe.subarray(16),pe)}function r(X,re,te,fe,le,pe,Se){var Ee=new Uint8Array(32);return ye(Ee,pe,Se,se),ke(X,re,te,fe,le,pe.subarray(16),Ee)}function a(X,re){var te,fe=0;for(te=0;te<17;te++)fe=fe+(X[te]+re[te]|0)|0,X[te]=fe&255,fe>>>=8}var o=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);function d(X,re,te,fe,le,pe){var Se,Ee,me,_e,De=new Uint32Array(17),Me=new Uint32Array(17),Be=new Uint32Array(17),Qe=new Uint32Array(17),Ye=new Uint32Array(17);for(me=0;me<17;me++)Me[me]=Be[me]=0;for(me=0;me<16;me++)Me[me]=pe[me];for(Me[3]&=15,Me[4]&=252,Me[7]&=15,Me[8]&=252,Me[11]&=15,Me[12]&=252,Me[15]&=15;le>0;){for(me=0;me<17;me++)Qe[me]=0;for(me=0;me<16&&me<le;++me)Qe[me]=te[fe+me];for(Qe[me]=1,fe+=me,le-=me,a(Be,Qe),Ee=0;Ee<17;Ee++)for(De[Ee]=0,me=0;me<17;me++)De[Ee]=De[Ee]+Be[me]*(me<=Ee?Me[Ee-me]:320*Me[Ee+17-me]|0)|0|0;for(Ee=0;Ee<17;Ee++)Be[Ee]=De[Ee];for(_e=0,me=0;me<16;me++)_e=_e+Be[me]|0,Be[me]=_e&255,_e>>>=8;for(_e=_e+Be[16]|0,Be[16]=_e&3,_e=5*(_e>>>2)|0,me=0;me<16;me++)_e=_e+Be[me]|0,Be[me]=_e&255,_e>>>=8;_e=_e+Be[16]|0,Be[16]=_e}for(me=0;me<17;me++)Ye[me]=Be[me];for(a(Be,o),Se=-(Be[16]>>>7)|0,me=0;me<17;me++)Be[me]^=Se&(Ye[me]^Be[me]);for(me=0;me<16;me++)Qe[me]=pe[me+16];for(Qe[16]=0,a(Be,Qe),me=0;me<16;me++)X[re+me]=Be[me];return 0}function v(X,re,te,fe,le,pe){var Se=new Uint8Array(16);return d(Se,0,te,fe,le,pe),L(X,re,Se,0)}function y(X,re,te,fe,le){var pe;if(te<32)return-1;for(r(X,0,re,0,te,fe,le),d(X,16,X,32,te-32,X),pe=0;pe<16;pe++)X[pe]=0;return 0}function l(X,re,te,fe,le){var pe,Se=new Uint8Array(32);if(te<32||(e(Se,0,32,fe,le),v(re,16,re,32,te-32,Se)!==0))return-1;for(r(X,0,re,0,te,fe,le),pe=0;pe<32;pe++)X[pe]=0;return 0}function t(X,re){var te;for(te=0;te<16;te++)X[te]=re[te]|0}function p(X){var re,te;for(te=0;te<16;te++)X[te]+=65536,re=Math.floor(X[te]/65536),X[(te+1)*(te<15?1:0)]+=re-1+37*(re-1)*(te===15?1:0),X[te]-=re*65536}function q(X,re,te){for(var fe,le=~(te-1),pe=0;pe<16;pe++)fe=le&(X[pe]^re[pe]),X[pe]^=fe,re[pe]^=fe}function I(X,re){var te,fe,le,pe=h(),Se=h();for(te=0;te<16;te++)Se[te]=re[te];for(p(Se),p(Se),p(Se),fe=0;fe<2;fe++){for(pe[0]=Se[0]-65517,te=1;te<15;te++)pe[te]=Se[te]-65535-(pe[te-1]>>16&1),pe[te-1]&=65535;pe[15]=Se[15]-32767-(pe[14]>>16&1),le=pe[15]>>16&1,pe[14]&=65535,q(Se,pe,1-le)}for(te=0;te<16;te++)X[2*te]=Se[te]&255,X[2*te+1]=Se[te]>>8}function $(X,re){var te=new Uint8Array(32),fe=new Uint8Array(32);return I(te,X),I(fe,re),Q(te,0,fe,0)}function G(X){var re=new Uint8Array(32);return I(re,X),re[0]&1}function V(X,re){var te;for(te=0;te<16;te++)X[te]=re[2*te]+(re[2*te+1]<<8);X[15]&=32767}function N(X,re,te){var fe;for(fe=0;fe<16;fe++)X[fe]=re[fe]+te[fe]|0}function W(X,re,te){var fe;for(fe=0;fe<16;fe++)X[fe]=re[fe]-te[fe]|0}function Z(X,re,te){var fe,le,pe=new Float64Array(31);for(fe=0;fe<31;fe++)pe[fe]=0;for(fe=0;fe<16;fe++)for(le=0;le<16;le++)pe[fe+le]+=re[fe]*te[le];for(fe=0;fe<15;fe++)pe[fe]+=38*pe[fe+16];for(fe=0;fe<16;fe++)X[fe]=pe[fe];p(X),p(X)}function ne(X,re){Z(X,re,re)}function ee(X,re){var te=h(),fe;for(fe=0;fe<16;fe++)te[fe]=re[fe];for(fe=253;fe>=0;fe--)ne(te,te),fe!==2&&fe!==4&&Z(te,te,re);for(fe=0;fe<16;fe++)X[fe]=te[fe]}function z(X,re){var te=h(),fe;for(fe=0;fe<16;fe++)te[fe]=re[fe];for(fe=250;fe>=0;fe--)ne(te,te),fe!==1&&Z(te,te,re);for(fe=0;fe<16;fe++)X[fe]=te[fe]}function ue(X,re,te){var fe=new Uint8Array(32),le=new Float64Array(80),pe,Se,Ee=h(),me=h(),_e=h(),De=h(),Me=h(),Be=h();for(Se=0;Se<31;Se++)fe[Se]=re[Se];for(fe[31]=re[31]&127|64,fe[0]&=248,V(le,te),Se=0;Se<16;Se++)me[Se]=le[Se],De[Se]=Ee[Se]=_e[Se]=0;for(Ee[0]=De[0]=1,Se=254;Se>=0;--Se)pe=fe[Se>>>3]>>>(Se&7)&1,q(Ee,me,pe),q(_e,De,pe),N(Me,Ee,_e),W(Ee,Ee,_e),N(_e,me,De),W(me,me,De),ne(De,Me),ne(Be,Ee),Z(Ee,_e,Ee),Z(_e,me,Me),N(Me,Ee,_e),W(Ee,Ee,_e),ne(me,Ee),W(_e,De,Be),Z(Ee,_e,_),N(Ee,Ee,De),Z(_e,_e,Ee),Z(Ee,De,Be),Z(De,me,le),ne(me,Me),q(Ee,me,pe),q(_e,De,pe);for(Se=0;Se<16;Se++)le[Se+16]=Ee[Se],le[Se+32]=_e[Se],le[Se+48]=me[Se],le[Se+64]=De[Se];var Qe=le.subarray(32),Ye=le.subarray(16);return ee(Qe,Qe),Z(Ye,Ye,Qe),I(X,Ye),0}function Ze(X,re){return ue(X,re,s)}function Ae(X,re){return u(re,32),Ze(X,re)}function qe(X,re,te){var fe=new Uint8Array(32);return ue(fe,te,re),ye(X,m,fe,se)}var nt=y,Ne=l;function ve(X,re,te,fe,le,pe){var Se=new Uint8Array(32);return qe(Se,le,pe),nt(X,re,te,fe,Se)}function ut(X,re,te,fe,le,pe){var Se=new Uint8Array(32);return qe(Se,le,pe),Ne(X,re,te,fe,Se)}function Ce(){var X=0,re=0,te=0,fe=0,le=65535,pe,Se,Ee;for(Ee=0;Ee<arguments.length;Ee++)pe=arguments[Ee].lo,Se=arguments[Ee].hi,X+=pe&le,re+=pe>>>16,te+=Se&le,fe+=Se>>>16;return re+=X>>>16,te+=re>>>16,fe+=te>>>16,new n(te&le|fe<<16,X&le|re<<16)}function je(X,re){return new n(X.hi>>>re,X.lo>>>re|X.hi<<32-re)}function ht(){var X=0,re=0,te;for(te=0;te<arguments.length;te++)X^=arguments[te].lo,re^=arguments[te].hi;return new n(re,X)}function Ie(X,re){var te,fe,le=32-re;return re<32?(te=X.hi>>>re|X.lo<<le,fe=X.lo>>>re|X.hi<<le):re<64&&(te=X.lo>>>re|X.hi<<le,fe=X.hi>>>re|X.lo<<le),new n(te,fe)}function Le(X,re,te){var fe=X.hi&re.hi^~X.hi&te.hi,le=X.lo&re.lo^~X.lo&te.lo;return new n(fe,le)}function lt(X,re,te){var fe=X.hi&re.hi^X.hi&te.hi^re.hi&te.hi,le=X.lo&re.lo^X.lo&te.lo^re.lo&te.lo;return new n(fe,le)}function $e(X){return ht(Ie(X,28),Ie(X,34),Ie(X,39))}function ze(X){return ht(Ie(X,14),Ie(X,18),Ie(X,41))}function bt(X){return ht(Ie(X,1),Ie(X,8),je(X,7))}function K(X){return ht(Ie(X,19),Ie(X,61),je(X,6))}var P=[new n(1116352408,3609767458),new n(1899447441,602891725),new n(3049323471,3964484399),new n(3921009573,2173295548),new n(961987163,4081628472),new n(1508970993,3053834265),new n(2453635748,2937671579),new n(2870763221,3664609560),new n(3624381080,2734883394),new n(310598401,1164996542),new n(607225278,1323610764),new n(1426881987,3590304994),new n(1925078388,4068182383),new n(2162078206,991336113),new n(2614888103,633803317),new n(3248222580,3479774868),new n(3835390401,2666613458),new n(4022224774,944711139),new n(264347078,2341262773),new n(604807628,2007800933),new n(770255983,1495990901),new n(1249150122,1856431235),new n(1555081692,3175218132),new n(1996064986,2198950837),new n(2554220882,3999719339),new n(2821834349,766784016),new n(2952996808,2566594879),new n(3210313671,3203337956),new n(3336571891,1034457026),new n(3584528711,2466948901),new n(113926993,3758326383),new n(338241895,168717936),new n(666307205,1188179964),new n(773529912,1546045734),new n(1294757372,1522805485),new n(1396182291,2643833823),new n(1695183700,2343527390),new n(1986661051,1014477480),new n(2177026350,1206759142),new n(2456956037,344077627),new n(2730485921,1290863460),new n(2820302411,3158454273),new n(3259730800,3505952657),new n(3345764771,106217008),new n(3516065817,3606008344),new n(3600352804,1432725776),new n(4094571909,1467031594),new n(275423344,851169720),new n(430227734,3100823752),new n(506948616,1363258195),new n(659060556,3750685593),new n(883997877,3785050280),new n(958139571,3318307427),new n(1322822218,3812723403),new n(1537002063,2003034995),new n(1747873779,3602036899),new n(1955562222,1575990012),new n(2024104815,1125592928),new n(2227730452,2716904306),new n(2361852424,442776044),new n(2428436474,593698344),new n(2756734187,3733110249),new n(3204031479,2999351573),new n(3329325298,3815920427),new n(3391569614,3928383900),new n(3515267271,566280711),new n(3940187606,3454069534),new n(4118630271,4000239992),new n(116418474,1914138554),new n(174292421,2731055270),new n(289380356,3203993006),new n(460393269,320620315),new n(685471733,587496836),new n(852142971,1086792851),new n(1017036298,365543100),new n(1126000580,2618297676),new n(1288033470,3409855158),new n(1501505948,4234509866),new n(1607167915,987167468),new n(1816402316,1246189591)];function D(X,re,te){var fe=[],le=[],pe=[],Se=[],Ee,me,_e;for(me=0;me<8;me++)fe[me]=pe[me]=T(X,8*me);for(var De=0;te>=128;){for(me=0;me<16;me++)Se[me]=T(re,8*me+De);for(me=0;me<80;me++){for(_e=0;_e<8;_e++)le[_e]=pe[_e];for(Ee=Ce(pe[7],ze(pe[4]),Le(pe[4],pe[5],pe[6]),P[me],Se[me%16]),le[7]=Ce(Ee,$e(pe[0]),lt(pe[0],pe[1],pe[2])),le[3]=Ce(le[3],Ee),_e=0;_e<8;_e++)pe[(_e+1)%8]=le[_e];if(me%16===15)for(_e=0;_e<16;_e++)Se[_e]=Ce(Se[_e],Se[(_e+9)%16],bt(Se[(_e+1)%16]),K(Se[(_e+14)%16]))}for(me=0;me<8;me++)pe[me]=Ce(pe[me],fe[me]),fe[me]=pe[me];De+=128,te-=128}for(me=0;me<8;me++)O(X,8*me,fe[me]);return te}var Y=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);function oe(X,re,te){var fe=new Uint8Array(64),le=new Uint8Array(256),pe,Se=te;for(pe=0;pe<64;pe++)fe[pe]=Y[pe];for(D(fe,re,te),te%=128,pe=0;pe<256;pe++)le[pe]=0;for(pe=0;pe<te;pe++)le[pe]=re[Se-te+pe];for(le[te]=128,te=256-128*(te<112?1:0),le[te-9]=0,O(le,te-8,new n(Se/536870912|0,Se<<3)),D(fe,le,te),pe=0;pe<64;pe++)X[pe]=fe[pe];return 0}function Re(X,re){var te=h(),fe=h(),le=h(),pe=h(),Se=h(),Ee=h(),me=h(),_e=h(),De=h();W(te,X[1],X[0]),W(De,re[1],re[0]),Z(te,te,De),N(fe,X[0],X[1]),N(De,re[0],re[1]),Z(fe,fe,De),Z(le,X[3],re[3]),Z(le,le,b),Z(pe,X[2],re[2]),N(pe,pe,pe),W(Se,fe,te),W(Ee,pe,le),N(me,pe,le),N(_e,fe,te),Z(X[0],Se,Ee),Z(X[1],_e,me),Z(X[2],me,Ee),Z(X[3],Se,_e)}function ce(X,re,te){var fe;for(fe=0;fe<4;fe++)q(X[fe],re[fe],te)}function Te(X,re){var te=h(),fe=h(),le=h();ee(le,re[2]),Z(te,re[0],le),Z(fe,re[1],le),I(X,fe),X[31]^=G(te)<<7}function ft(X,re,te){var fe,le;for(t(X[0],g),t(X[1],x),t(X[2],x),t(X[3],g),le=255;le>=0;--le)fe=te[le/8|0]>>(le&7)&1,ce(X,re,fe),Re(re,X),Re(X,X),ce(X,re,fe)}function Pe(X,re){var te=[h(),h(),h(),h()];t(te[0],S),t(te[1],E),t(te[2],x),Z(te[3],S,E),ft(X,te,re)}function Ue(X,re,te){var fe=new Uint8Array(64),le=[h(),h(),h(),h()],pe;for(te||u(re,32),oe(fe,re,32),fe[0]&=248,fe[31]&=127,fe[31]|=64,Pe(le,fe),Te(X,le),pe=0;pe<32;pe++)re[pe+32]=X[pe];return 0}var ot=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function He(X,re){var te,fe,le,pe;for(fe=63;fe>=32;--fe){for(te=0,le=fe-32,pe=fe-12;le<pe;++le)re[le]+=te-16*re[fe]*ot[le-(fe-32)],te=Math.floor((re[le]+128)/256),re[le]-=te*256;re[le]+=te,re[fe]=0}for(te=0,le=0;le<32;le++)re[le]+=te-(re[31]>>4)*ot[le],te=re[le]>>8,re[le]&=255;for(le=0;le<32;le++)re[le]-=te*ot[le];for(fe=0;fe<32;fe++)re[fe+1]+=re[fe]>>8,X[fe]=re[fe]&255}function Ve(X){var re=new Float64Array(64),te;for(te=0;te<64;te++)re[te]=X[te];for(te=0;te<64;te++)X[te]=0;He(X,re)}function pt(X,re,te,fe){var le=new Uint8Array(64),pe=new Uint8Array(64),Se=new Uint8Array(64),Ee,me,_e=new Float64Array(64),De=[h(),h(),h(),h()];oe(le,fe,32),le[0]&=248,le[31]&=127,le[31]|=64;var Me=te+64;for(Ee=0;Ee<te;Ee++)X[64+Ee]=re[Ee];for(Ee=0;Ee<32;Ee++)X[32+Ee]=le[32+Ee];for(oe(Se,X.subarray(32),te+32),Ve(Se),Pe(De,Se),Te(X,De),Ee=32;Ee<64;Ee++)X[Ee]=fe[Ee];for(oe(pe,X,te+64),Ve(pe),Ee=0;Ee<64;Ee++)_e[Ee]=0;for(Ee=0;Ee<32;Ee++)_e[Ee]=Se[Ee];for(Ee=0;Ee<32;Ee++)for(me=0;me<32;me++)_e[Ee+me]+=pe[Ee]*le[me];return He(X.subarray(32),_e),Me}function Fe(X,re){var te=h(),fe=h(),le=h(),pe=h(),Se=h(),Ee=h(),me=h();return t(X[2],x),V(X[1],re),ne(le,X[1]),Z(pe,le,M),W(le,le,X[2]),N(pe,X[2],pe),ne(Se,pe),ne(Ee,Se),Z(me,Ee,Se),Z(te,me,le),Z(te,te,pe),z(te,te),Z(te,te,le),Z(te,te,pe),Z(te,te,pe),Z(X[0],te,pe),ne(fe,X[0]),Z(fe,fe,pe),$(fe,le)&&Z(X[0],X[0],A),ne(fe,X[0]),Z(fe,fe,pe),$(fe,le)?-1:(G(X[0])===re[31]>>7&&W(X[0],g,X[0]),Z(X[3],X[0],X[1]),0)}function Ge(X,re,te,fe){var le,pe=new Uint8Array(32),Se=new Uint8Array(64),Ee=[h(),h(),h(),h()],me=[h(),h(),h(),h()];if(te<64||Fe(me,fe))return-1;for(le=0;le<te;le++)X[le]=re[le];for(le=0;le<32;le++)X[le+32]=fe[le];if(oe(Se,X,te),Ve(Se),ft(Ee,me,Se),Pe(me,re.subarray(32)),Re(Ee,me),Te(pe,Ee),te-=64,Q(re,0,pe,0)){for(le=0;le<te;le++)X[le]=0;return-1}for(le=0;le<te;le++)X[le]=re[le+64];return te}var mt=32,Ke=24,We=32,vt=16,Oe=32,Je=32,j=32,F=32,H=32,C=Ke,J=We,he=vt,xe=64,de=32,ge=64,tt=32,Xe=64;c.lowlevel={crypto_core_hsalsa20:ye,crypto_stream_xor:r,crypto_stream:e,crypto_stream_salsa20_xor:ke,crypto_stream_salsa20:w,crypto_onetimeauth:d,crypto_onetimeauth_verify:v,crypto_verify_16:L,crypto_verify_32:Q,crypto_secretbox:y,crypto_secretbox_open:l,crypto_scalarmult:ue,crypto_scalarmult_base:Ze,crypto_box_beforenm:qe,crypto_box_afternm:nt,crypto_box:ve,crypto_box_open:ut,crypto_box_keypair:Ae,crypto_hash:oe,crypto_sign:pt,crypto_sign_keypair:Ue,crypto_sign_open:Ge,crypto_secretbox_KEYBYTES:mt,crypto_secretbox_NONCEBYTES:Ke,crypto_secretbox_ZEROBYTES:We,crypto_secretbox_BOXZEROBYTES:vt,crypto_scalarmult_BYTES:Oe,crypto_scalarmult_SCALARBYTES:Je,crypto_box_PUBLICKEYBYTES:j,crypto_box_SECRETKEYBYTES:F,crypto_box_BEFORENMBYTES:H,crypto_box_NONCEBYTES:C,crypto_box_ZEROBYTES:J,crypto_box_BOXZEROBYTES:he,crypto_sign_BYTES:xe,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:ge,crypto_sign_SEEDBYTES:tt,crypto_hash_BYTES:Xe,gf:h,D:M,L:ot,pack25519:I,unpack25519:V,M:Z,A:N,S:ne,Z:W,pow2523:z,add:Re,set25519:t,modL:He,scalarmult:ft,scalarbase:Pe};function ct(X,re){if(X.length!==mt)throw new Error("bad key size");if(re.length!==Ke)throw new Error("bad nonce size")}function rt(X,re){if(X.length!==j)throw new Error("bad public key size");if(re.length!==F)throw new Error("bad secret key size")}function st(){for(var X=0;X<arguments.length;X++)if(!(arguments[X]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function at(X){for(var re=0;re<X.length;re++)X[re]=0}c.randomBytes=function(X){var re=new Uint8Array(X);return u(re,X),re},c.secretbox=function(X,re,te){st(X,re,te),ct(te,re);for(var fe=new Uint8Array(We+X.length),le=new Uint8Array(fe.length),pe=0;pe<X.length;pe++)fe[pe+We]=X[pe];return y(le,fe,fe.length,re,te),le.subarray(vt)},c.secretbox.open=function(X,re,te){st(X,re,te),ct(te,re);for(var fe=new Uint8Array(vt+X.length),le=new Uint8Array(fe.length),pe=0;pe<X.length;pe++)fe[pe+vt]=X[pe];return fe.length<32||l(le,fe,fe.length,re,te)!==0?null:le.subarray(We)},c.secretbox.keyLength=mt,c.secretbox.nonceLength=Ke,c.secretbox.overheadLength=vt,c.scalarMult=function(X,re){if(st(X,re),X.length!==Je)throw new Error("bad n size");if(re.length!==Oe)throw new Error("bad p size");var te=new Uint8Array(Oe);return ue(te,X,re),te},c.scalarMult.base=function(X){if(st(X),X.length!==Je)throw new Error("bad n size");var re=new Uint8Array(Oe);return Ze(re,X),re},c.scalarMult.scalarLength=Je,c.scalarMult.groupElementLength=Oe,c.box=function(X,re,te,fe){var le=c.box.before(te,fe);return c.secretbox(X,re,le)},c.box.before=function(X,re){st(X,re),rt(X,re);var te=new Uint8Array(H);return qe(te,X,re),te},c.box.after=c.secretbox,c.box.open=function(X,re,te,fe){var le=c.box.before(te,fe);return c.secretbox.open(X,re,le)},c.box.open.after=c.secretbox.open,c.box.keyPair=function(){var X=new Uint8Array(j),re=new Uint8Array(F);return Ae(X,re),{publicKey:X,secretKey:re}},c.box.keyPair.fromSecretKey=function(X){if(st(X),X.length!==F)throw new Error("bad secret key size");var re=new Uint8Array(j);return Ze(re,X),{publicKey:re,secretKey:new Uint8Array(X)}},c.box.publicKeyLength=j,c.box.secretKeyLength=F,c.box.sharedKeyLength=H,c.box.nonceLength=C,c.box.overheadLength=c.secretbox.overheadLength,c.sign=function(X,re){if(st(X,re),re.length!==ge)throw new Error("bad secret key size");var te=new Uint8Array(xe+X.length);return pt(te,X,X.length,re),te},c.sign.open=function(X,re){if(st(X,re),re.length!==de)throw new Error("bad public key size");var te=new Uint8Array(X.length),fe=Ge(te,X,X.length,re);if(fe<0)return null;for(var le=new Uint8Array(fe),pe=0;pe<le.length;pe++)le[pe]=te[pe];return le},c.sign.detached=function(X,re){for(var te=c.sign(X,re),fe=new Uint8Array(xe),le=0;le<fe.length;le++)fe[le]=te[le];return fe},c.sign.detached.verify=function(X,re,te){if(st(X,re,te),re.length!==xe)throw new Error("bad signature size");if(te.length!==de)throw new Error("bad public key size");var fe=new Uint8Array(xe+X.length),le=new Uint8Array(xe+X.length),pe;for(pe=0;pe<xe;pe++)fe[pe]=re[pe];for(pe=0;pe<X.length;pe++)fe[pe+xe]=X[pe];return Ge(le,fe,fe.length,te)>=0},c.sign.keyPair=function(){var X=new Uint8Array(de),re=new Uint8Array(ge);return Ue(X,re),{publicKey:X,secretKey:re}},c.sign.keyPair.fromSecretKey=function(X){if(st(X),X.length!==ge)throw new Error("bad secret key size");for(var re=new Uint8Array(de),te=0;te<re.length;te++)re[te]=X[32+te];return{publicKey:re,secretKey:new Uint8Array(X)}},c.sign.keyPair.fromSeed=function(X){if(st(X),X.length!==tt)throw new Error("bad seed size");for(var re=new Uint8Array(de),te=new Uint8Array(ge),fe=0;fe<32;fe++)te[fe]=X[fe];return Ue(re,te,!0),{publicKey:re,secretKey:te}},c.sign.publicKeyLength=de,c.sign.secretKeyLength=ge,c.sign.seedLength=tt,c.sign.signatureLength=xe,c.hash=function(X){st(X);var re=new Uint8Array(Xe);return oe(re,X,X.length),re},c.hash.hashLength=Xe,c.verify=function(X,re){return st(X,re),X.length===0||re.length===0||X.length!==re.length?!1:U(X,0,re,0,X.length)===0},c.setPRNG=function(X){u=X},function(){var X=typeof globalThis<"u"?globalThis.crypto||globalThis.msCrypto:null;if(X&&X.getRandomValues){var re=65536;c.setPRNG(function(te,fe){var le,pe=new Uint8Array(fe);for(le=0;le<fe;le+=re)X.getRandomValues(pe.subarray(le,le+Math.min(fe-le,re)));for(le=0;le<fe;le++)te[le]=pe[le];at(pe)})}else typeof require<"u"&&(X=require("crypto"),X&&X.randomBytes&&c.setPRNG(function(te,fe){var le,pe=X.randomBytes(fe);for(le=0;le<fe;le++)te[le]=pe[le];at(pe)}))}()}(typeof module<"u"&&module.exports?module.exports:globalThis.nacl=globalThis.nacl||{});const nacl=typeof module<"u"&&module.exports?module.exports:globalThis.nacl,denoHelper={fromSeed:nacl.sign.keyPair.fromSeed,sign:nacl.sign.detached,verify:nacl.sign.detached.verify,randomBytes:nacl.randomBytes};let helper$2;function setEd25519Helper$1(c){helper$2=c}function getEd25519Helper$1(){return helper$2}const crc16tab$1=new Uint16Array([0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920]);let crc16$2=class Ot{static checksum(n){let h=0;for(let u=0;u<n.byteLength;u++){let m=n[u];h=h<<8&65535^crc16tab$1[(h>>8^m)&255]}return h}static validate(n,h){return Ot.checksum(n)==h}};const b32Alphabet$1="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let base32$2=class{static encode(n){let h=0,u=0,m=new Uint8Array(n),s=new Uint8Array(n.byteLength*2),g=0;for(let x=0;x<m.byteLength;x++)for(u=u<<8|m[x],h+=8;h>=5;){let _=u>>>h-5&31;s[g++]=b32Alphabet$1.charAt(_).charCodeAt(0),h-=5}if(h>0){let x=u<<5-h&31;s[g++]=b32Alphabet$1.charAt(x).charCodeAt(0)}return s.slice(0,g)}static decode(n){let h=0,u=0,m=0,s=new Uint8Array(n),g=new Uint8Array(s.byteLength*5/8|0);for(let x=0;x<s.byteLength;x++){let _=String.fromCharCode(s[x]),M=b32Alphabet$1.indexOf(_);if(M===-1)throw new Error("Illegal Base32 character: "+s[x]);u=u<<5|M,h+=5,h>=8&&(g[m++]=u>>>h-8&255,h-=8)}return g.slice(0,m)}};class NKeysError extends Error{constructor(h,u){super(h);ae(this,"name");ae(this,"code");ae(this,"chainedError");this.name="NKeysError",this.code=h,this.chainedError=u}}function createOperator(){return createPair(Prefix.Operator)}function createAccount(){return createPair(Prefix.Account)}function createUser(){return createPair(Prefix.User)}var NKeysErrorCode;(function(c){c.InvalidPrefixByte="nkeys: invalid prefix byte",c.InvalidKey="nkeys: invalid key",c.InvalidPublicKey="nkeys: invalid public key",c.InvalidSeedLen="nkeys: invalid seed length",c.InvalidSeed="nkeys: invalid seed",c.InvalidEncoding="nkeys: invalid encoded key",c.InvalidSignature="nkeys: signature verification failed",c.CannotSign="nkeys: cannot sign, no private key available",c.PublicKeyOnly="nkeys: no seed or private key available",c.InvalidChecksum="nkeys: invalid checksum",c.SerializationError="nkeys: serialization error",c.ApiError="nkeys: api error",c.ClearedPair="nkeys: pair is cleared"})(NKeysErrorCode||(NKeysErrorCode={}));var Prefix;(function(c){c[c.Seed=144]="Seed",c[c.Private=120]="Private",c[c.Operator=112]="Operator",c[c.Server=104]="Server",c[c.Cluster=16]="Cluster",c[c.Account=0]="Account",c[c.User=160]="User"})(Prefix||(Prefix={}));class Prefixes{static isValidPublicPrefix(n){return n==Prefix.Server||n==Prefix.Operator||n==Prefix.Cluster||n==Prefix.Account||n==Prefix.User}static startsWithValidPrefix(n){let h=n[0];return h=="S"||h=="P"||h=="O"||h=="N"||h=="C"||h=="A"||h=="U"}static isValidPrefix(n){return this.parsePrefix(n)!=-1}static parsePrefix(n){switch(n){case Prefix.Seed:return Prefix.Seed;case Prefix.Private:return Prefix.Private;case Prefix.Operator:return Prefix.Operator;case Prefix.Server:return Prefix.Server;case Prefix.Cluster:return Prefix.Cluster;case Prefix.Account:return Prefix.Account;case Prefix.User:return Prefix.User;default:return-1}}}class Codec{static encode(n,h){if(!h||!(h instanceof Uint8Array))throw new NKeysError(NKeysErrorCode.SerializationError);if(!Prefixes.isValidPrefix(n))throw new NKeysError(NKeysErrorCode.InvalidPrefixByte);return Codec._encode(!1,n,h)}static encodeSeed(n,h){if(!h)throw new NKeysError(NKeysErrorCode.ApiError);if(!Prefixes.isValidPublicPrefix(n))throw new NKeysError(NKeysErrorCode.InvalidPrefixByte);if(h.byteLength!==32)throw new NKeysError(NKeysErrorCode.InvalidSeedLen);return Codec._encode(!0,n,h)}static decode(n,h){if(!Prefixes.isValidPrefix(n))throw new NKeysError(NKeysErrorCode.InvalidPrefixByte);const u=Codec._decode(h);if(u[0]!==n)throw new NKeysError(NKeysErrorCode.InvalidPrefixByte);return u.slice(1)}static decodeSeed(n){const h=Codec._decode(n),u=Codec._decodePrefix(h);if(u[0]!=Prefix.Seed)throw new NKeysError(NKeysErrorCode.InvalidSeed);if(!Prefixes.isValidPublicPrefix(u[1]))throw new NKeysError(NKeysErrorCode.InvalidPrefixByte);return{buf:h.slice(2),prefix:u[1]}}static _encode(n,h,u){const m=n?2:1,s=u.byteLength,g=m+s+2,x=m+s,_=new Uint8Array(g);if(n){const S=Codec._encodePrefix(Prefix.Seed,h);_.set(S)}else _[0]=h;_.set(u,m);const M=crc16$2.checksum(_.slice(0,x));return new DataView(_.buffer).setUint16(x,M,!0),base32$2.encode(_)}static _decode(n){if(n.byteLength<4)throw new NKeysError(NKeysErrorCode.InvalidEncoding);let h;try{h=base32$2.decode(n)}catch(x){throw new NKeysError(NKeysErrorCode.InvalidEncoding,x)}const u=h.byteLength-2,s=new DataView(h.buffer).getUint16(u,!0),g=h.slice(0,u);if(!crc16$2.validate(g,s))throw new NKeysError(NKeysErrorCode.InvalidChecksum);return g}static _encodePrefix(n,h){const u=n|h>>5,m=(h&31)<<3;return new Uint8Array([u,m])}static _decodePrefix(n){const h=n[0]&248,u=(n[0]&7)<<5|(n[1]&248)>>3;return new Uint8Array([h,u])}}class KP{constructor(n){ae(this,"seed");this.seed=n}getRawSeed(){if(!this.seed)throw new NKeysError(NKeysErrorCode.ClearedPair);return Codec.decodeSeed(this.seed).buf}getSeed(){if(!this.seed)throw new NKeysError(NKeysErrorCode.ClearedPair);return this.seed}getPublicKey(){if(!this.seed)throw new NKeysError(NKeysErrorCode.ClearedPair);const n=Codec.decodeSeed(this.seed),h=getEd25519Helper$1().fromSeed(this.getRawSeed()),u=Codec.encode(n.prefix,h.publicKey);return new TextDecoder().decode(u)}getPrivateKey(){if(!this.seed)throw new NKeysError(NKeysErrorCode.ClearedPair);const n=getEd25519Helper$1().fromSeed(this.getRawSeed());return Codec.encode(Prefix.Private,n.secretKey)}sign(n){if(!this.seed)throw new NKeysError(NKeysErrorCode.ClearedPair);const h=getEd25519Helper$1().fromSeed(this.getRawSeed());return getEd25519Helper$1().sign(n,h.secretKey)}verify(n,h){if(!this.seed)throw new NKeysError(NKeysErrorCode.ClearedPair);const u=getEd25519Helper$1().fromSeed(this.getRawSeed());return getEd25519Helper$1().verify(n,h,u.publicKey)}clear(){this.seed&&(this.seed.fill(0),this.seed=void 0)}}function createPair(c){const n=getEd25519Helper$1().randomBytes(32);let h=Codec.encodeSeed(c,new Uint8Array(n));return new KP(h)}class PublicKey{constructor(n){ae(this,"publicKey");this.publicKey=n}getPublicKey(){if(!this.publicKey)throw new NKeysError(NKeysErrorCode.ClearedPair);return new TextDecoder().decode(this.publicKey)}getPrivateKey(){throw this.publicKey?new NKeysError(NKeysErrorCode.PublicKeyOnly):new NKeysError(NKeysErrorCode.ClearedPair)}getSeed(){throw this.publicKey?new NKeysError(NKeysErrorCode.PublicKeyOnly):new NKeysError(NKeysErrorCode.ClearedPair)}sign(n){throw this.publicKey?new NKeysError(NKeysErrorCode.CannotSign):new NKeysError(NKeysErrorCode.ClearedPair)}verify(n,h){if(!this.publicKey)throw new NKeysError(NKeysErrorCode.ClearedPair);let u=Codec._decode(this.publicKey);return getEd25519Helper$1().verify(n,h,u.slice(1))}clear(){this.publicKey&&(this.publicKey.fill(0),this.publicKey=void 0)}}function fromPublic(c){const n=new TextEncoder().encode(c),h=Codec._decode(n),u=Prefixes.parsePrefix(h[0]);if(Prefixes.isValidPublicPrefix(u))return new PublicKey(n);throw new NKeysError(NKeysErrorCode.InvalidPublicKey)}function fromSeed(c){return Codec.decodeSeed(c),new KP(c)}function encode2(c){return btoa(String.fromCharCode(...c))}function decode2(c){const n=atob(c),h=new Uint8Array(n.length);for(let u=0;u<n.length;u++)h[u]=n.charCodeAt(u);return h}setEd25519Helper$1(denoHelper);const mod$1={createAccount,createOperator,createPair,createUser,fromPublic,fromSeed,NKeysError,NKeysErrorCode,Prefix,decode:decode2,encode:encode2};function multiAuthenticator(c){return n=>{let h={};return c.forEach(u=>{const m=u(n)||{};h=Object.assign(h,m)}),h}}function noAuthFn(){return()=>{}}function usernamePasswordAuthenticator(c,n){return()=>{const h=typeof c=="function"?c():c,u=typeof n=="function"?n():n;return{user:h,pass:u}}}function tokenAuthenticator(c){return()=>({auth_token:typeof c=="function"?c():c})}function nkeyAuthenticator(c){return n=>{const h=typeof c=="function"?c():c,u=h?mod$1.fromSeed(h):void 0,m=u?u.getPublicKey():"",s=TE.encode(n||""),g=u!==void 0&&n?u.sign(s):void 0,x=g?mod$1.encode(g):"";return{nkey:m,sig:x}}}function jwtAuthenticator(c,n){return h=>{const u=typeof c=="function"?c():c,m=nkeyAuthenticator(n),{nkey:s,sig:g}=m(h);return{jwt:u,nkey:s,sig:g}}}function credsAuthenticator(c){const n=typeof c!="function"?()=>c:c,h=()=>{const s=/\s*(?:(?:[-]{3,}[^\n]*[-]{3,}\n)(.+)(?:\n\s*[-]{3,}[^\n]*[-]{3,}\n))/ig,g=TD.decode(n());let x=s.exec(g);if(!x)throw NatsError.errorForCode(ErrorCode.BadCreds);const _=x[1].trim();if(x=s.exec(g),!x||!x)throw NatsError.errorForCode(ErrorCode.BadCreds);const M=TE.encode(x[1].trim());return{jwt:_,seed:M}};return jwtAuthenticator(()=>{const{jwt:s}=h();return s},()=>{const{seed:s}=h();return s})}const DEFAULT_PING_INTERVAL=2*60*1e3,DEFAULT_MAX_PING_OUT=2,DEFAULT_RECONNECT_TIME_WAIT=2*1e3;function defaultOptions(){return{maxPingOut:2,maxReconnectAttempts:10,noRandomize:!1,pedantic:!1,pingInterval:DEFAULT_PING_INTERVAL,reconnect:!0,reconnectJitter:100,reconnectJitterTLS:1e3,reconnectTimeWait:DEFAULT_RECONNECT_TIME_WAIT,tls:void 0,verbose:!1,waitOnFirstConnect:!1,ignoreAuthErrorAbort:!1}}function buildAuthenticator(c){const n=[];return typeof c.authenticator=="function"&&n.push(c.authenticator),Array.isArray(c.authenticator)&&n.push(...c.authenticator),c.token&&n.push(tokenAuthenticator(c.token)),c.user&&n.push(usernamePasswordAuthenticator(c.user,c.pass)),n.length===0?noAuthFn():multiAuthenticator(n)}function parseOptions(c){const n=`${DEFAULT_HOST}:${defaultPort()}`;if(c=c||{servers:[n]},c.servers=c.servers||[],typeof c.servers=="string"&&(c.servers=[c.servers]),c.servers.length>0&&c.port)throw new NatsError("port and servers options are mutually exclusive",ErrorCode.InvalidOption);c.servers.length===0&&c.port&&(c.servers=[`${DEFAULT_HOST}:${c.port}`]),c.servers&&c.servers.length===0&&(c.servers=[n]);const h=extend(defaultOptions(),c);if(h.authenticator=buildAuthenticator(h),["reconnectDelayHandler","authenticator"].forEach(u=>{if(h[u]&&typeof h[u]!="function")throw new NatsError(`${u} option should be a function`,ErrorCode.NotFunction)}),h.reconnectDelayHandler||(h.reconnectDelayHandler=()=>{let u=h.tls?h.reconnectJitterTLS:h.reconnectJitter;return u&&(u++,u=Math.floor(Math.random()*u)),h.reconnectTimeWait+u}),h.inboxPrefix)try{createInbox(h.inboxPrefix)}catch(u){throw new NatsError(u.message,ErrorCode.ApiError)}if(h.resolve&&typeof getResolveFn()!="function")throw new NatsError("'resolve' is not supported on this client",ErrorCode.InvalidOption);return h}function checkOptions(c,n){const{proto:h,tls_required:u,tls_available:m}=c;if((h===void 0||h<1)&&n.noEcho)throw new NatsError("noEcho",ErrorCode.ServerOptionNotAvailable);const s=u||m||!1;if(n.tls&&!s)throw new NatsError("tls",ErrorCode.ServerOptionNotAvailable)}const FLUSH_THRESHOLD=1024*32,INFO=/^INFO\s+([^\r\n]+)\r\n/i,PONG_CMD=encode$2(`PONG\r
`),PING_CMD=encode$2(`PING\r
`);class Connect{constructor(n,h,u){ae(this,"echo");ae(this,"no_responders");ae(this,"protocol");ae(this,"verbose");ae(this,"pedantic");ae(this,"jwt");ae(this,"nkey");ae(this,"sig");ae(this,"user");ae(this,"pass");ae(this,"auth_token");ae(this,"tls_required");ae(this,"name");ae(this,"lang");ae(this,"version");ae(this,"headers");this.protocol=1,this.version=n.version,this.lang=n.lang,this.echo=h.noEcho?!1:void 0,this.verbose=h.verbose,this.pedantic=h.pedantic,this.tls_required=h.tls?!0:void 0,this.name=h.name;const m=(h&&typeof h.authenticator=="function"?h.authenticator(u):{})||{};extend(this,m)}}class SubscriptionImpl extends QueuedIteratorImpl{constructor(h,u,m={}){var g;super();ae(this,"sid");ae(this,"queue");ae(this,"draining");ae(this,"max");ae(this,"subject");ae(this,"drained");ae(this,"protocol");ae(this,"timer");ae(this,"info");ae(this,"cleanupFn");ae(this,"closed");ae(this,"requestSubject");extend(this,m),this.protocol=h,this.subject=u,this.draining=!1,this.noIterator=typeof m.callback=="function",this.closed=deferred();const s=!((g=h.options)!=null&&g.noAsyncTraces);m.timeout&&(this.timer=timeout(m.timeout,s),this.timer.then(()=>{this.timer=void 0}).catch(x=>{this.stop(x),this.noIterator&&this.callback(x,{})})),this.noIterator||this.iterClosed.then(()=>{this.closed.resolve(),this.unsubscribe()})}setPrePostHandlers(h){if(this.noIterator){const u=this.callback,m=h.ingestionFilterFn?h.ingestionFilterFn:()=>({ingest:!0,protocol:!1}),s=h.protocolFilterFn?h.protocolFilterFn:()=>!0,g=h.dispatchedFn?h.dispatchedFn:()=>{};this.callback=(x,_)=>{const{ingest:M}=m(_);M&&s(_)&&(u(x,_),g(_))}}else this.protocolFilterFn=h.protocolFilterFn,this.dispatchedFn=h.dispatchedFn}callback(h,u){this.cancelTimeout(),h?this.stop(h):this.push(u)}close(){if(!this.isClosed()){this.cancelTimeout();const h=()=>{if(this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch{}this.closed.resolve()};this.noIterator?h():this.push(h)}}unsubscribe(h){this.protocol.unsubscribe(this,h)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(NatsError.errorForCode(ErrorCode.ConnectionClosed)):this.isClosed()?Promise.reject(NatsError.errorForCode(ErrorCode.SubClosed)):(this.drained||(this.draining=!0,this.protocol.unsub(this),this.drained=this.protocol.flush(deferred()).then(()=>{this.protocol.subscriptions.cancel(this)}).catch(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}class Subscriptions{constructor(){ae(this,"mux");ae(this,"subs");ae(this,"sidCounter");this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(n){return this.sidCounter++,n.sid=this.sidCounter,this.subs.set(n.sid,n),n}setMux(n){return this.mux=n,n}getMux(){return this.mux}get(n){return this.subs.get(n)}resub(n){return this.sidCounter++,this.subs.delete(n.sid),n.sid=this.sidCounter,this.subs.set(n.sid,n),n}all(){return Array.from(this.subs.values())}cancel(n){n&&(n.close(),this.subs.delete(n.sid))}handleError(n){if(n&&n.permissionContext){const h=n.permissionContext,u=this.all();let m;if(h.operation==="subscription"&&(m=u.find(s=>s.subject===h.subject)),h.operation==="publish"&&(m=u.find(s=>s.requestSubject===h.subject)),m)return m.callback(n,{}),m.close(),this.subs.delete(m.sid),m!==this.mux}return!1}close(){this.subs.forEach(n=>{n.close()})}}class ProtocolHandler{constructor(n,h){ae(this,"connected");ae(this,"connectedOnce");ae(this,"infoReceived");ae(this,"info");ae(this,"muxSubscriptions");ae(this,"options");ae(this,"outbound");ae(this,"pongs");ae(this,"subscriptions");ae(this,"transport");ae(this,"noMorePublishing");ae(this,"connectError");ae(this,"publisher");ae(this,"_closed");ae(this,"closed");ae(this,"listeners");ae(this,"heartbeats");ae(this,"parser");ae(this,"outMsgs");ae(this,"inMsgs");ae(this,"outBytes");ae(this,"inBytes");ae(this,"pendingLimit");ae(this,"lastError");ae(this,"abortReconnect");ae(this,"whyClosed");ae(this,"servers");ae(this,"server");ae(this,"features");ae(this,"connectPromise");this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=FLUSH_THRESHOLD,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=n,this.publisher=h,this.subscriptions=new Subscriptions,this.muxSubscriptions=new MuxSubscription,this.outbound=new DataBuffer,this.pongs=[],this.whyClosed="",this.pendingLimit=n.pendingLimit||this.pendingLimit,this.features=new Features({major:0,minor:0,micro:0}),this.connectPromise=null;const u=typeof n.servers=="string"?[n.servers]:n.servers;this.servers=new Servers(u,{randomize:!n.noRandomize}),this.closed=deferred(),this.parser=new Parser(this),this.heartbeats=new Heartbeat(this,this.options.pingInterval||DEFAULT_PING_INTERVAL,this.options.maxPingOut||DEFAULT_MAX_PING_OUT)}resetOutbound(){this.outbound.reset();const n=this.pongs;this.pongs=[];const h=NatsError.errorForCode(ErrorCode.Disconnect);h.stack="",n.forEach(u=>{u.reject(h)}),this.parser=new Parser(this),this.infoReceived=!1}dispatchStatus(n){this.listeners.forEach(h=>{h.push(n)})}status(){const n=new QueuedIteratorImpl;return this.listeners.push(n),n}prepare(){this.transport&&this.transport.discard(),this.info=void 0,this.resetOutbound();const n=deferred();return n.catch(()=>{}),this.pongs.unshift(n),this.connectError=h=>{n.reject(h)},this.transport=newTransport(),this.transport.closed().then(async h=>{if(this.connected=!1,!this.isClosed()){await this.disconnected(this.transport.closeError||this.lastError);return}}),n}disconnect(){this.dispatchStatus({type:DebugEvents.StaleConnection,data:""}),this.transport.disconnect()}reconnect(){return this.connected&&(this.dispatchStatus({type:DebugEvents.ClientInitiatedReconnect,data:""}),this.transport.disconnect()),Promise.resolve()}async disconnected(n){this.dispatchStatus({type:Events.Disconnect,data:this.servers.getCurrentServer().toString()}),this.options.reconnect?await this.dialLoop().then(()=>{var h;this.dispatchStatus({type:Events.Reconnect,data:this.servers.getCurrentServer().toString()}),((h=this.lastError)==null?void 0:h.code)===ErrorCode.AuthenticationExpired&&(this.lastError=void 0)}).catch(h=>{this._close(h)}):await this._close(n)}async dial(n){const h=this.prepare();let u;try{u=timeout(this.options.timeout||2e4);const m=this.transport.connect(n,this.options);await Promise.race([m,u]),(async()=>{try{for await(const s of this.transport)this.parser.parse(s)}catch(s){console.log("reader closed",s)}})().then()}catch(m){h.reject(m)}try{await Promise.race([u,h]),u&&u.cancel(),this.connected=!0,this.connectError=void 0,this.sendSubscriptions(),this.connectedOnce=!0,this.server.didConnect=!0,this.server.reconnects=0,this.flushPending(),this.heartbeats.start()}catch(m){throw u&&u.cancel(),await this.transport.close(m),m}}async _doDial(n){const h=await n.resolve({fn:getResolveFn(),debug:this.options.debug,randomize:!this.options.noRandomize});let u=null;for(const m of h)try{u=null,this.dispatchStatus({type:DebugEvents.Reconnecting,data:m.toString()}),await this.dial(m);return}catch(s){u=s}throw u}dialLoop(){return this.connectPromise===null&&(this.connectPromise=this.dodialLoop(),this.connectPromise.then(()=>{}).catch(()=>{}).finally(()=>{this.connectPromise=null})),this.connectPromise}async dodialLoop(){let n;for(;;){this._closed&&this.servers.clear();const h=this.options.reconnectDelayHandler?this.options.reconnectDelayHandler():DEFAULT_RECONNECT_TIME_WAIT;let u=h;const m=this.selectServer();if(!m||this.abortReconnect)throw n||(this.lastError?this.lastError:NatsError.errorForCode(ErrorCode.ConnectionRefused));const s=Date.now();if(m.lastConnect===0||m.lastConnect+h<=s){m.lastConnect=Date.now();try{await this._doDial(m);break}catch(g){if(n=g,!this.connectedOnce){if(this.options.waitOnFirstConnect)continue;this.servers.removeCurrentServer()}m.reconnects++;const x=this.options.maxReconnectAttempts||0;x!==-1&&m.reconnects>=x&&this.servers.removeCurrentServer()}}else u=Math.min(u,m.lastConnect+h-s),await delay(u)}}static async connect(n,h){const u=new ProtocolHandler(n,h);return await u.dialLoop(),u}static toError(n){const h=n?n.toLowerCase():"";if(h.indexOf("permissions violation")!==-1){const u=new NatsError(n,ErrorCode.PermissionsViolation),m=n.match(/(Publish|Subscription) to "(\S+)"/);return m&&(u.permissionContext={operation:m[1].toLowerCase(),subject:m[2]}),u}else return h.indexOf("authorization violation")!==-1?new NatsError(n,ErrorCode.AuthorizationViolation):h.indexOf("user authentication expired")!==-1?new NatsError(n,ErrorCode.AuthenticationExpired):h.indexOf("authentication timeout")!==-1?new NatsError(n,ErrorCode.AuthenticationTimeout):new NatsError(n,ErrorCode.ProtocolError)}processMsg(n,h){if(this.inMsgs++,this.inBytes+=h.length,!this.subscriptions.sidCounter)return;const u=this.subscriptions.get(n.sid);u&&(u.received+=1,u.callback&&u.callback(null,new MsgImpl(n,h,this)),u.max!==void 0&&u.received>=u.max&&u.unsubscribe())}processError(n){const h=decode$3(n),u=ProtocolHandler.toError(h),m={type:Events.Error,data:u.code};if(u.isPermissionError()){let s=!1;if(u.permissionContext){m.permissionContext=u.permissionContext;const g=this.subscriptions.getMux();s=(g==null?void 0:g.subject)===u.permissionContext.subject}this.subscriptions.handleError(u),this.muxSubscriptions.handleError(s,u),s&&this.subscriptions.setMux(null)}this.dispatchStatus(m),this.handleError(u)}handleError(n){n.isAuthError()?this.handleAuthError(n):n.isProtocolError()?this.lastError=n:n.isAuthTimeout()&&(this.lastError=n),n.isPermissionError()||(this.lastError=n)}handleAuthError(n){this.lastError&&n.code===this.lastError.code&&this.options.ignoreAuthErrorAbort===!1&&(this.abortReconnect=!0),this.connectError?this.connectError(n):this.disconnect()}processPing(){this.transport.send(PONG_CMD)}processPong(){const n=this.pongs.shift();n&&n.resolve()}processInfo(n){const h=JSON.parse(decode$3(n));this.info=h;const u=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(h,this.transport.isEncrypted());if(!this.infoReceived){this.features.update(parseSemVer(h.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();const{version:s,lang:g}=this.transport;try{const x=new Connect({version:s,lang:g},this.options,h.nonce);h.headers&&(x.headers=!0,x.no_responders=!0);const _=JSON.stringify(x);this.transport.send(encode$2(`CONNECT ${_}${CR_LF}`)),this.transport.send(PING_CMD)}catch(x){this._close(x)}}u&&this.dispatchStatus({type:Events.Update,data:u}),(h.ldm!==void 0?h.ldm:!1)&&this.dispatchStatus({type:Events.LDM,data:this.servers.getCurrentServer().toString()})}push(n){switch(n.kind){case Kind.MSG:{const{msg:h,data:u}=n;this.processMsg(h,u);break}case Kind.OK:break;case Kind.ERR:this.processError(n.data);break;case Kind.PING:this.processPing();break;case Kind.PONG:this.processPong();break;case Kind.INFO:this.processInfo(n.data);break}}sendCommand(n,...h){const u=this.outbound.length();let m;typeof n=="string"?m=encode$2(n):m=n,this.outbound.fill(m,...h),u===0?queueMicrotask(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(n,h=Empty,u){let m;if(h instanceof Uint8Array)m=h;else if(typeof h=="string")m=TE.encode(h);else throw NatsError.errorForCode(ErrorCode.BadPayload);let s=m.length;u=u||{},u.reply=u.reply||"";let g=Empty,x=0;if(u.headers){if(this.info&&!this.info.headers)throw new NatsError("headers",ErrorCode.ServerOptionNotAvailable);g=u.headers.encode(),x=g.length,s=m.length+x}if(this.info&&s>this.info.max_payload)throw NatsError.errorForCode(ErrorCode.MaxPayloadExceeded);this.outBytes+=s,this.outMsgs++;let _;u.headers?(u.reply?_=`HPUB ${n} ${u.reply} ${x} ${s}\r
`:_=`HPUB ${n} ${x} ${s}\r
`,this.sendCommand(_,g,m,CRLF)):(u.reply?_=`PUB ${n} ${u.reply} ${s}\r
`:_=`PUB ${n} ${s}\r
`,this.sendCommand(_,m,CRLF))}request(n){return this.initMux(),this.muxSubscriptions.add(n),n}subscribe(n){return this.subscriptions.add(n),this._subunsub(n),n}_sub(n){n.queue?this.sendCommand(`SUB ${n.subject} ${n.queue} ${n.sid}\r
`):this.sendCommand(`SUB ${n.subject} ${n.sid}\r
`)}_subunsub(n){return this._sub(n),n.max&&this.unsubscribe(n,n.max),n}unsubscribe(n,h){this.unsub(n,h),(n.max===void 0||n.received>=n.max)&&this.subscriptions.cancel(n)}unsub(n,h){!n||this.isClosed()||(h?this.sendCommand(`UNSUB ${n.sid} ${h}\r
`):this.sendCommand(`UNSUB ${n.sid}\r
`),n.max=h)}resub(n,h){!n||this.isClosed()||(this.unsub(n),n.subject=h,this.subscriptions.resub(n),this._sub(n))}flush(n){return n||(n=deferred()),this.pongs.push(n),this.outbound.fill(PING_CMD),this.flushPending(),n}sendSubscriptions(){const n=[];this.subscriptions.all().forEach(h=>{const u=h;u.queue?n.push(`SUB ${u.subject} ${u.queue} ${u.sid}${CR_LF}`):n.push(`SUB ${u.subject} ${u.sid}${CR_LF}`)}),n.length&&this.transport.send(encode$2(n.join("")))}async _close(n){this._closed||(this.whyClosed=new Error("close trace").stack||"",this.heartbeats.cancel(),this.connectError&&(this.connectError(n),this.connectError=void 0),this.muxSubscriptions.close(),this.subscriptions.close(),this.listeners.forEach(h=>{h.stop()}),this._closed=!0,await this.transport.close(n),await this.closed.resolve(n))}close(){return this._close()}isClosed(){return this._closed}drain(){const n=this.subscriptions.all(),h=[];return n.forEach(u=>{h.push(u.drain())}),Promise.all(h).then(async()=>(this.noMorePublishing=!0,await this.flush(),this.close())).catch(()=>{})}flushPending(){if(!(!this.infoReceived||!this.connected)&&this.outbound.size()){const n=this.outbound.drain();this.transport.send(n)}}initMux(){if(!this.subscriptions.getMux()){const h=this.muxSubscriptions.init(this.options.inboxPrefix),u=new SubscriptionImpl(this,`${h}*`);u.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(u),this.subscribe(u)}}selectServer(){const n=this.servers.selectServer();if(n!==void 0)return this.server=n,this.server}getServer(){return this.server}}const ServiceApiPrefix="$SRV";class ServiceMsgImpl{constructor(n){ae(this,"msg");this.msg=n}get data(){return this.msg.data}get sid(){return this.msg.sid}get subject(){return this.msg.subject}get reply(){return this.msg.reply||""}get headers(){return this.msg.headers}respond(n,h){return this.msg.respond(n,h)}respondError(n,h,u,m){var s,g;return m=m||{},m.headers=m.headers||headers(),(s=m.headers)==null||s.set(ServiceErrorCodeHeader,`${n}`),(g=m.headers)==null||g.set(ServiceErrorHeader,h),this.msg.respond(u,m)}json(n){return this.msg.json(n)}string(){return this.msg.string()}}class ServiceGroupImpl{constructor(n,h="",u=""){ae(this,"subject");ae(this,"queue");ae(this,"srv");h!==""&&validInternalToken("service group",h);let m="";if(n instanceof ServiceImpl)this.srv=n,m="";else if(n instanceof ServiceGroupImpl){const s=n;this.srv=s.srv,u===""&&s.queue!==""&&(u=s.queue),m=s.subject}else throw new Error("unknown ServiceGroup type");this.subject=this.calcSubject(m,h),this.queue=u}calcSubject(n,h=""){return h===""?n:n!==""?`${n}.${h}`:h}addEndpoint(n="",h){h=h||{subject:n};const u=typeof h=="function"?{handler:h,subject:n}:h;validateName("endpoint",n);let{subject:m,handler:s,metadata:g,queue:x}=u;m=m||n,x=x||this.queue,validSubjectName("endpoint subject",m),m=this.calcSubject(this.subject,m);const _={name:n,subject:m,queue:x,handler:s,metadata:g};return this.srv._addEndpoint(_)}addGroup(n="",h=""){return new ServiceGroupImpl(this,n,h)}}function validSubjectName(c,n){if(n==="")throw new Error(`${c} cannot be empty`);if(n.indexOf(" ")!==-1)throw new Error(`${c} cannot contain spaces: '${n}'`);const h=n.split(".");h.forEach((u,m)=>{if(u===">"&&m!==h.length-1)throw new Error(`${c} cannot have internal '>': '${n}'`)})}function validInternalToken(c,n){if(n.indexOf(" ")!==-1)throw new Error(`${c} cannot contain spaces: '${n}'`);n.split(".").forEach(u=>{if(u===">")throw new Error(`${c} name cannot contain internal '>': '${n}'`)})}class ServiceImpl{constructor(n,h={name:"",version:""}){ae(this,"nc");ae(this,"_id");ae(this,"config");ae(this,"handlers");ae(this,"internal");ae(this,"_stopped");ae(this,"_done");ae(this,"started");this.nc=n,this.config=Object.assign({},h),this.config.queue||(this.config.queue="q"),validateName("name",this.config.name),validateName("queue",this.config.queue),parseSemVer(this.config.version),this._id=nuid.next(),this.internal=[],this._done=deferred(),this._stopped=!1,this.handlers=[],this.started=new Date().toISOString(),this.reset(),this.nc.closed().then(()=>{this.close().catch()}).catch(u=>{this.close(u).catch()})}static controlSubject(n,h="",u="",m){const s=m??ServiceApiPrefix;return h===""&&u===""?`${s}.${n}`:(validateName("control subject name",h),u!==""?(validateName("control subject id",u),`${s}.${n}.${h}.${u}`):`${s}.${n}.${h}`)}get subjects(){return this.handlers.filter(n=>n.internal===!1).map(n=>n.subject)}get id(){return this._id}get name(){return this.config.name}get description(){return this.config.description??""}get version(){return this.config.version}get metadata(){return this.config.metadata}errorToHeader(n){const h=headers();if(n instanceof ServiceError){const u=n;h.set(ServiceErrorHeader,u.message),h.set(ServiceErrorCodeHeader,`${u.code}`)}else h.set(ServiceErrorHeader,n.message),h.set(ServiceErrorCodeHeader,"500");return h}setupHandler(n,h=!1){const u=h?"":n.queue?n.queue:this.config.queue,{name:m,subject:s,handler:g}=n,x=n;x.internal=h,h&&this.internal.push(x),x.stats=new NamedEndpointStatsImpl(m,s,u),x.queue=u;const _=g?(M,b)=>{if(M){this.close(M);return}const S=Date.now();try{g(M,new ServiceMsgImpl(b))}catch(E){x.stats.countError(E),b==null||b.respond(Empty,{headers:this.errorToHeader(E)})}finally{x.stats.countLatency(S)}}:void 0;return x.sub=this.nc.subscribe(s,{callback:_,queue:u}),x.sub.closed.then(()=>{this._stopped||this.close(new Error(`required subscription ${n.subject} stopped`)).catch()}).catch(M=>{if(!this._stopped){const b=new Error(`required subscription ${n.subject} errored: ${M.message}`);b.stack=M.stack,this.close(b).catch()}}),x}info(){return{type:ServiceResponseType.INFO,name:this.name,id:this.id,version:this.version,description:this.description,metadata:this.metadata,endpoints:this.endpoints()}}endpoints(){return this.handlers.map(n=>{const{subject:h,metadata:u,name:m,queue:s}=n;return{subject:h,metadata:u,name:m,queue_group:s}})}async stats(){const n=[];for(const h of this.handlers){if(typeof this.config.statsHandler=="function")try{h.stats.data=await this.config.statsHandler(h)}catch(u){h.stats.countError(u)}n.push(h.stats.stats(h.qi))}return{type:ServiceResponseType.STATS,name:this.name,id:this.id,version:this.version,started:this.started,metadata:this.metadata,endpoints:n}}addInternalHandler(n,h){const u=`${n}`.toUpperCase();this._doAddInternalHandler(`${u}-all`,n,h),this._doAddInternalHandler(`${u}-kind`,n,h,this.name),this._doAddInternalHandler(`${u}`,n,h,this.name,this.id)}_doAddInternalHandler(n,h,u,m="",s=""){const g={};g.name=n,g.subject=ServiceImpl.controlSubject(h,m,s),g.handler=u,this.setupHandler(g,!0)}start(){const n=JSONCodec(),h=(g,x)=>g?(this.close(g),Promise.reject(g)):this.stats().then(_=>(x==null||x.respond(n.encode(_)),Promise.resolve())),u=(g,x)=>g?(this.close(g),Promise.reject(g)):(x==null||x.respond(n.encode(this.info())),Promise.resolve()),m=n.encode(this.ping()),s=(g,x)=>g?(this.close(g).then().catch(),Promise.reject(g)):(x.respond(m),Promise.resolve());return this.addInternalHandler(ServiceVerb.PING,s),this.addInternalHandler(ServiceVerb.STATS,h),this.addInternalHandler(ServiceVerb.INFO,u),this.handlers.forEach(g=>{const{subject:x}=g;typeof x=="string"&&g.handler!==null&&this.setupHandler(g)}),Promise.resolve(this)}close(n){if(this._stopped)return this._done;this._stopped=!0;let h=[];return this.nc.isClosed()||(h=this.handlers.concat(this.internal).map(u=>u.sub.drain())),Promise.allSettled(h).then(()=>{this._done.resolve(n||null)}),this._done}get stopped(){return this._done}get isStopped(){return this._stopped}stop(n){return this.close(n)}ping(){return{type:ServiceResponseType.PING,name:this.name,id:this.id,version:this.version,metadata:this.metadata}}reset(){if(this.started=new Date().toISOString(),this.handlers)for(const n of this.handlers)n.stats.reset(n.qi)}addGroup(n,h){return new ServiceGroupImpl(this,n,h)}addEndpoint(n,h){return new ServiceGroupImpl(this).addEndpoint(n,h)}_addEndpoint(n){const h=new QueuedIteratorImpl;h.noIterator=typeof n.handler=="function",h.noIterator||(n.handler=(m,s)=>{m?this.stop(m).catch():h.push(new ServiceMsgImpl(s))},h.iterClosed.then(()=>{this.close().catch()}));const u=this.setupHandler(n,!1);return u.qi=h,this.handlers.push(u),h}}class NamedEndpointStatsImpl{constructor(n,h,u=""){ae(this,"name");ae(this,"subject");ae(this,"average_processing_time");ae(this,"num_requests");ae(this,"processing_time");ae(this,"num_errors");ae(this,"last_error");ae(this,"data");ae(this,"metadata");ae(this,"queue");this.name=n,this.subject=h,this.average_processing_time=0,this.num_errors=0,this.num_requests=0,this.processing_time=0,this.queue=u}reset(n){this.num_requests=0,this.processing_time=0,this.average_processing_time=0,this.num_errors=0,this.last_error=void 0,this.data=void 0;const h=n;h&&(h.time=0,h.processed=0)}countLatency(n){this.num_requests++,this.processing_time+=nanos(Date.now()-n),this.average_processing_time=Math.round(this.processing_time/this.num_requests)}countError(n){this.num_errors++,this.last_error=n.message}_stats(){const{name:n,subject:h,average_processing_time:u,num_errors:m,num_requests:s,processing_time:g,last_error:x,data:_,queue:M}=this;return{name:n,subject:h,average_processing_time:u,num_errors:m,num_requests:s,processing_time:g,last_error:x,data:_,queue_group:M}}stats(n){const h=n;return(h==null?void 0:h.noIterator)===!1&&(this.processing_time=h.time,this.num_requests=h.processed,this.average_processing_time=this.processing_time>0&&this.num_requests>0?this.processing_time/this.num_requests:0),this._stats()}}class ServiceClientImpl{constructor(n,h={strategy:RequestStrategy.JitterTimer,maxWait:2e3},u){ae(this,"nc");ae(this,"prefix");ae(this,"opts");this.nc=n,this.prefix=u,this.opts=h}ping(n="",h=""){return this.q(ServiceVerb.PING,n,h)}stats(n="",h=""){return this.q(ServiceVerb.STATS,n,h)}info(n="",h=""){return this.q(ServiceVerb.INFO,n,h)}async q(n,h="",u=""){const m=new QueuedIteratorImpl,s=JSONCodec(),g=ServiceImpl.controlSubject(n,h,u,this.prefix),x=await this.nc.requestMany(g,Empty,this.opts);return(async()=>{for await(const _ of x)try{const M=s.decode(_.data);m.push(M)}catch(M){m.push(()=>{m.stop(M)})}m.push(()=>{m.stop()})})().catch(_=>{m.stop(_)}),m}}function NoopKvCodecs(){return{key:{encode(c){return c},decode(c){return c}},value:{encode(c){return c},decode(c){return c}}}}function defaultBucketOpts(){return{replicas:1,history:1,timeout:2e3,maxBucketSize:-1,maxValueSize:-1,codec:NoopKvCodecs(),storage:StorageType.File}}const kvOperationHdr="KV-Operation",kvSubjectPrefix="$KV",validKeyRe=/^[-/=.\w]+$/,validSearchKey=/^[-/=.>*\w]+$/,validBucketRe=/^[-\w]+$/;function validateKey(c){if(c.startsWith(".")||c.endsWith(".")||!validKeyRe.test(c))throw new Error(`invalid key: ${c}`)}function validateSearchKey(c){if(c.startsWith(".")||c.endsWith(".")||!validSearchKey.test(c))throw new Error(`invalid key: ${c}`)}function hasWildcards(c){if(c.startsWith(".")||c.endsWith("."))throw new Error(`invalid key: ${c}`);const n=c.split(".");let h=!1;for(let u=0;u<n.length;u++)switch(n[u]){case"*":h=!0;break;case">":if(u!==n.length-1)throw new Error(`invalid key: ${c}`);h=!0;break}return h}function validateBucket(c){if(!validBucketRe.test(c))throw new Error(`invalid bucket name: ${c}`)}var PubHeaders;(function(c){c.MsgIdHdr="Nats-Msg-Id",c.ExpectedStreamHdr="Nats-Expected-Stream",c.ExpectedLastSeqHdr="Nats-Expected-Last-Sequence",c.ExpectedLastMsgIdHdr="Nats-Expected-Last-Msg-Id",c.ExpectedLastSubjectSequenceHdr="Nats-Expected-Last-Subject-Sequence"})(PubHeaders||(PubHeaders={}));class Bucket{constructor(n,h,u){ae(this,"js");ae(this,"jsm");ae(this,"stream");ae(this,"bucket");ae(this,"direct");ae(this,"codec");ae(this,"prefix");ae(this,"editPrefix");ae(this,"useJsPrefix");ae(this,"_prefixLen");ae(this,"validateKey",validateKey);ae(this,"validateSearchKey",validateSearchKey);ae(this,"hasWildcards",hasWildcards);validateBucket(n),this.js=h,this.jsm=u,this.bucket=n,this.prefix=kvSubjectPrefix,this.editPrefix="",this.useJsPrefix=!1,this._prefixLen=0}static async create(n,h,u={}){validateBucket(h);const m=await n.jetstreamManager(),s=new Bucket(h,n,m);return await s.init(u),s}static async bind(n,h,u={}){const m=await n.jetstreamManager(),s={config:{allow_direct:u.allow_direct}};validateBucket(h);const g=new Bucket(h,n,m);return s.config.name=u.streamName??g.bucketName(),Object.assign(g,s),g.stream=s.config.name,g.codec=u.codec||NoopKvCodecs(),g.direct=s.config.allow_direct??!1,g.initializePrefixes(s),g}async init(n={}){const h=Object.assign(defaultBucketOpts(),n);this.codec=h.codec;const u={};this.stream=u.name=n.streamName??this.bucketName(),u.retention=RetentionPolicy.Limits,u.max_msgs_per_subject=h.history,h.maxBucketSize&&(h.max_bytes=h.maxBucketSize),h.max_bytes&&(u.max_bytes=h.max_bytes),u.max_msg_size=h.maxValueSize,u.storage=h.storage;const m=n.placementCluster??"";if(m&&(n.placement={},n.placement.cluster=m,n.placement.tags=[]),n.placement&&(u.placement=n.placement),n.republish&&(u.republish=n.republish),n.description&&(u.description=n.description),n.mirror){const S=Object.assign({},n.mirror);S.name.startsWith(kvPrefix)||(S.name=`${kvPrefix}${S.name}`),u.mirror=S,u.mirror_direct=!0}else if(n.sources){const S=n.sources.map(E=>{const A=Object.assign({},E);A.name.startsWith(kvPrefix)||(A.name=`${kvPrefix}${A.name}`)});u.sources=S}else u.subjects=[this.subjectForBucket()];n.metadata&&(u.metadata=n.metadata),typeof n.compression=="boolean"&&(u.compression=n.compression?StoreCompression.S2:StoreCompression.None);const s=this.js.nc,g=s.getServerVersion(),x=g?compare(g,parseSemVer("2.7.2"))>=0:!1;u.discard=x?DiscardPolicy.New:DiscardPolicy.Old;const{ok:_,min:M}=s.features.get(Feature.JS_ALLOW_DIRECT);if(!_&&n.allow_direct===!0){const S=g?`${g.major}.${g.minor}.${g.micro}`:"unknown";return Promise.reject(new Error(`allow_direct is not available on server version ${S} - requires ${M}`))}n.allow_direct=typeof n.allow_direct=="boolean"?n.allow_direct:_,u.allow_direct=n.allow_direct,this.direct=u.allow_direct,u.num_replicas=h.replicas,h.ttl&&(u.max_age=nanos(h.ttl)),u.allow_rollup_hdrs=!0;let b;try{b=await this.jsm.streams.info(u.name),!b.config.allow_direct&&this.direct===!0&&(this.direct=!1)}catch(S){if(S.message==="stream not found")b=await this.jsm.streams.add(u);else throw S}this.initializePrefixes(b)}initializePrefixes(n){this._prefixLen=0,this.prefix=`$KV.${this.bucket}`,this.useJsPrefix=this.js.apiPrefix!=="$JS.API";const{mirror:h}=n.config;if(h){let u=h.name;if(u.startsWith(kvPrefix)&&(u=u.substring(kvPrefix.length)),h.external&&h.external.api!==""){const m=h.name.substring(kvPrefix.length);this.useJsPrefix=!1,this.prefix=`$KV.${m}`,this.editPrefix=`${h.external.api}.$KV.${u}`}else this.editPrefix=this.prefix}}bucketName(){return this.stream??`${kvPrefix}${this.bucket}`}subjectForBucket(){return`${this.prefix}.${this.bucket}.>`}subjectForKey(n,h=!1){const u=[];return h?(this.useJsPrefix&&u.push(this.js.apiPrefix),this.editPrefix!==""?u.push(this.editPrefix):u.push(this.prefix)):this.prefix&&u.push(this.prefix),u.push(n),u.join(".")}fullKeyName(n){return this.prefix!==""?`${this.prefix}.${n}`:`${kvSubjectPrefix}.${this.bucket}.${n}`}get prefixLen(){return this._prefixLen===0&&(this._prefixLen=this.prefix.length+1),this._prefixLen}encodeKey(n){const h=[];for(const u of n.split("."))switch(u){case">":case"*":h.push(u);break;default:h.push(this.codec.key.encode(u));break}return h.join(".")}decodeKey(n){const h=[];for(const u of n.split("."))switch(u){case">":case"*":h.push(u);break;default:h.push(this.codec.key.decode(u));break}return h.join(".")}close(){return Promise.resolve()}dataLen(n,h){const u=h&&h.get(JsHeaders.MessageSizeHdr)||"";return u!==""?parseInt(u,10):n.length}smToEntry(n){return new KvStoredEntryImpl(this.bucket,this.prefixLen,n)}jmToEntry(n){const h=this.decodeKey(n.subject.substring(this.prefixLen));return new KvJsMsgEntryImpl(this.bucket,h,n)}async create(n,h){var s;let u;try{const g=await this.put(n,h,{previousSeq:0});return Promise.resolve(g)}catch(g){if(u=g,((s=g==null?void 0:g.api_error)==null?void 0:s.err_code)!==10071)return Promise.reject(g)}let m=0;try{const g=await this.get(n);return(g==null?void 0:g.operation)==="DEL"||(g==null?void 0:g.operation)==="PURGE"?(m=g!==null?g.revision:0,this.update(n,h,m)):Promise.reject(u)}catch(g){return Promise.reject(g)}}update(n,h,u){if(u<=0)throw new Error("version must be greater than 0");return this.put(n,h,{previousSeq:u})}async put(n,h,u={}){var g,x;const m=this.encodeKey(n);this.validateKey(m);const s={};if(u.previousSeq!==void 0){const _=headers();s.headers=_,_.set(PubHeaders.ExpectedLastSubjectSequenceHdr,`${u.previousSeq}`)}try{return(await this.js.publish(this.subjectForKey(m,!0),h,s)).seq}catch(_){const M=_;return M.isJetStreamError()?(M.message=(g=M.api_error)==null?void 0:g.description,M.code=`${(x=M.api_error)==null?void 0:x.code}`,Promise.reject(M)):Promise.reject(_)}}async get(n,h){const u=this.encodeKey(n);this.validateKey(u);let m={last_by_subj:this.subjectForKey(u)};h&&h.revision>0&&(m={seq:h.revision});let s;try{this.direct?s=await this.jsm.direct.getMessage(this.bucketName(),m):s=await this.jsm.streams.getMessage(this.bucketName(),m);const g=this.smToEntry(s);return g.key!==u?null:g}catch(g){if(g.code===ErrorCode.JetStream404NoMessages)return null;throw g}}purge(n,h){return this._deleteOrPurge(n,"PURGE",h)}delete(n,h){return this._deleteOrPurge(n,"DEL",h)}async purgeDeletes(n=30*60*1e3){const h=deferred(),u=[],m=await this.watch({key:">",initializedFn:()=>{h.resolve()}});(async()=>{for await(const _ of m)(_.operation==="DEL"||_.operation==="PURGE")&&u.push(_)})().then(),await h,m.stop();const s=Date.now()-n,g=u.map(_=>{const M=this.subjectForKey(_.key);return _.created.getTime()>=s?this.jsm.streams.purge(this.stream,{filter:M,keep:1}):this.jsm.streams.purge(this.stream,{filter:M,keep:0})}),x=await Promise.all(g);return x.unshift({success:!0,purged:0}),x.reduce((_,M)=>(_.purged+=M.purged,_))}async _deleteOrPurge(n,h,u){if(!this.hasWildcards(n))return this._doDeleteOrPurge(n,h,u);const m=await this.keys(n),s=[];for await(const g of m)s.push(this._doDeleteOrPurge(g,h)),s.length===100&&(await Promise.all(s),s.length=0);s.length>0&&await Promise.all(s)}async _doDeleteOrPurge(n,h,u){const m=this.encodeKey(n);this.validateKey(m);const s=headers();s.set(kvOperationHdr,h),h==="PURGE"&&s.set(JsHeaders.RollupHdr,JsHeaders.RollupValueSubject),u!=null&&u.previousSeq&&s.set(PubHeaders.ExpectedLastSubjectSequenceHdr,`${u.previousSeq}`),await this.js.publish(this.subjectForKey(m,!0),Empty,{headers:s})}_buildCC(n,h,u={}){let s=(Array.isArray(n)?n:[n]).map(_=>{const M=this.encodeKey(_);return this.validateSearchKey(_),this.fullKeyName(M)}),g=DeliverPolicy.LastPerSubject;h===KvWatchInclude.AllHistory&&(g=DeliverPolicy.All),h===KvWatchInclude.UpdatesOnly&&(g=DeliverPolicy.New);let x;return s.length===1&&(x=s[0],s=void 0),Object.assign({deliver_policy:g,ack_policy:AckPolicy.None,filter_subjects:s,filter_subject:x,flow_control:!0,idle_heartbeat:nanos(5*1e3)},u)}remove(n){return this.purge(n)}async history(n={}){const h=n.key??">",u=new QueuedIteratorImpl,m={};m.headers_only=n.headers_only||!1;let s;s=()=>{u.stop()};let g=0;const x=this._buildCC(h,KvWatchInclude.AllHistory,m),_=x.filter_subject,M=consumerOpts(x);M.bindStream(this.stream),M.orderedConsumer(),M.callback((S,E)=>{if(S){u.stop(S);return}if(E){const A=this.jmToEntry(E);u.push(A),u.received++,(s&&g>0&&u.received>=g||E.info.pending===0)&&(u.push(s),s=void 0)}});const b=await this.js.subscribe(_,M);if(s){const{info:{last:S}}=b,E=S.num_pending+S.delivered.consumer_seq;if(E===0||u.received>=E)try{s()}catch(A){u.stop(A)}finally{s=void 0}else g=E}return u._data=b,u.iterClosed.then(()=>{b.unsubscribe()}),b.closed.then(()=>{u.stop()}).catch(S=>{u.stop(S)}),u}canSetWatcherName(){const h=this.js.nc,{ok:u}=h.features.get(Feature.JS_NEW_CONSUMER_CREATE_API);return u}async watch(n={}){const h=n.key??">",u=new QueuedIteratorImpl,m={};m.headers_only=n.headers_only||!1;let s=KvWatchInclude.LastValue;n.include===KvWatchInclude.AllHistory?s=KvWatchInclude.AllHistory:n.include===KvWatchInclude.UpdatesOnly&&(s=KvWatchInclude.UpdatesOnly);const g=n.ignoreDeletes===!0;let x=n.initializedFn,_=0;const M=this._buildCC(h,s,m),b=M.filter_subject,S=consumerOpts(M);this.canSetWatcherName()&&S.consumerName(nuid.next()),S.bindStream(this.stream),n.resumeFromRevision&&n.resumeFromRevision>0&&S.startSequence(n.resumeFromRevision),S.orderedConsumer(),S.callback((A,B)=>{if(A){u.stop(A);return}if(B){const R=this.jmToEntry(B);if(g&&R.operation==="DEL")return;u.push(R),u.received++,x&&(_>0&&u.received>=_||B.info.pending===0)&&(u.push(x),x=void 0)}});const E=await this.js.subscribe(b,S);if(x){const{info:{last:A}}=E,B=A.num_pending+A.delivered.consumer_seq;if(B===0||u.received>=B)try{x()}catch(R){u.stop(R)}finally{x=void 0}else _=B}return u._data=E,u.iterClosed.then(()=>{E.unsubscribe()}),E.closed.then(()=>{u.stop()}).catch(A=>{u.stop(A)}),u}async keys(n=">"){const h=new QueuedIteratorImpl,u=this._buildCC(n,KvWatchInclude.LastValue,{headers_only:!0}),m=u.filter_subject,s=consumerOpts(u);s.bindStream(this.stream),s.orderedConsumer();const g=await this.js.subscribe(m,s);return(async()=>{var _;for await(const M of g){const b=(_=M.headers)==null?void 0:_.get(kvOperationHdr);if(b!=="DEL"&&b!=="PURGE"){const S=this.decodeKey(M.subject.substring(this.prefixLen));h.push(S)}M.info.pending===0&&g.unsubscribe()}})().then(()=>{h.stop()}).catch(_=>{h.stop(_)}),g.info.last.num_pending===0&&g.unsubscribe(),h}purgeBucket(n){return this.jsm.streams.purge(this.bucketName(),n)}destroy(){return this.jsm.streams.delete(this.bucketName())}async status(){var s;const h=((s=this.js.nc.info)==null?void 0:s.cluster)??"",u=this.bucketName(),m=await this.jsm.streams.info(u);return new KvStatusImpl(m,h)}}class KvStatusImpl{constructor(n,h=""){ae(this,"si");ae(this,"cluster");this.si=n,this.cluster=h}get bucket(){return this.si.config.name.startsWith(kvPrefix)?this.si.config.name.substring(kvPrefix.length):this.si.config.name}get values(){return this.si.state.messages}get history(){return this.si.config.max_msgs_per_subject}get ttl(){return millis(this.si.config.max_age)}get bucket_location(){return this.cluster}get backingStore(){return this.si.config.storage}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get description(){return this.si.config.description??""}get maxBucketSize(){return this.si.config.max_bytes}get maxValueSize(){return this.si.config.max_msg_size}get max_bytes(){return this.si.config.max_bytes}get placement(){return this.si.config.placement||{cluster:"",tags:[]}}get placementCluster(){var n;return((n=this.si.config.placement)==null?void 0:n.cluster)??""}get republish(){return this.si.config.republish??{src:"",dest:""}}get streamInfo(){return this.si}get size(){return this.si.state.bytes}get metadata(){return this.si.config.metadata??{}}get compression(){return this.si.config.compression?this.si.config.compression!==StoreCompression.None:!1}}const osPrefix="OBJ_",digestType="SHA-256=";function objectStoreStreamName(c){return validateBucket(c),`${osPrefix}${c}`}function objectStoreBucketName(c){return c.startsWith(osPrefix)?c.substring(4):c}class ObjectStoreStatusImpl{constructor(n){ae(this,"si");ae(this,"backingStore");this.si=n,this.backingStore="JetStream"}get bucket(){return objectStoreBucketName(this.si.config.name)}get description(){return this.si.config.description??""}get ttl(){return this.si.config.max_age}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get sealed(){return this.si.config.sealed}get size(){return this.si.state.bytes}get streamInfo(){return this.si}get metadata(){return this.si.config.metadata}get compression(){return this.si.config.compression?this.si.config.compression!==StoreCompression.None:!1}}function convertStreamSourceDomain(c){if(c===void 0)return;const{domain:n}=c;if(n===void 0)return c;const h=Object.assign({},c);if(delete h.domain,n==="")return h;if(h.external)throw new Error("domain and external are both set");return h.external={api:`$JS.${n}.API`},h}var PullConsumerType;(function(c){c[c.Unset=-1]="Unset",c[c.Consume=0]="Consume",c[c.Fetch=1]="Fetch"})(PullConsumerType||(PullConsumerType={}));var ConsumerEvents;(function(c){c.HeartbeatsMissed="heartbeats_missed",c.ConsumerNotFound="consumer_not_found",c.StreamNotFound="stream_not_found",c.ConsumerDeleted="consumer_deleted",c.OrderedConsumerRecreated="ordered_consumer_recreated"})(ConsumerEvents||(ConsumerEvents={}));var ConsumerDebugEvents;(function(c){c.DebugEvent="debug",c.Discard="discard",c.Reset="reset",c.Next="next"})(ConsumerDebugEvents||(ConsumerDebugEvents={}));const ACK=Uint8Array.of(43,65,67,75),NAK=Uint8Array.of(45,78,65,75),WPI=Uint8Array.of(43,87,80,73),NXT=Uint8Array.of(43,78,88,84),TERM=Uint8Array.of(43,84,69,82,77),SPACE=Uint8Array.of(32);function toJsMsg(c){return new JsMsgImpl(c)}class PullConsumerMessagesImpl extends QueuedIteratorImpl{constructor(h,u,m=!1){super();ae(this,"consumer");ae(this,"opts");ae(this,"sub");ae(this,"monitor");ae(this,"pending");ae(this,"inbox");ae(this,"refilling");ae(this,"pong");ae(this,"callback");ae(this,"timeout");ae(this,"cleanupHandler");ae(this,"listeners");ae(this,"statusIterator");ae(this,"forOrderedConsumer");ae(this,"resetHandler");ae(this,"abortOnMissingResource");ae(this,"bind");this.consumer=h;const s=u;this.opts=this.parseOptions(u,m),this.callback=s.callback||null,this.noIterator=typeof this.callback=="function",this.monitor=null,this.pong=null,this.pending={msgs:0,bytes:0,requests:0},this.refilling=m,this.timeout=null,this.inbox=createInbox(h.api.nc.options.inboxPrefix),this.listeners=[],this.forOrderedConsumer=!1,this.abortOnMissingResource=s.abort_on_missing_resource===!0,this.bind=s.bind===!0,this.start()}start(){const{max_messages:h,max_bytes:u,idle_heartbeat:m,threshold_bytes:s,threshold_messages:g}=this.opts;this.closed().then(_=>{if(this.cleanupHandler)try{this.cleanupHandler(_)}catch{}});const{sub:x}=this;x&&x.unsubscribe(),this.sub=this.consumer.api.nc.subscribe(this.inbox,{callback:(_,M)=>{var S,E,A,B;if(_){this.stop(_);return}if((S=this.monitor)==null||S.work(),M.subject===this.inbox){if(isHeartbeatMsg(M))return;const R=(E=M.headers)==null?void 0:E.code,T=((B=(A=M.headers)==null?void 0:A.description)==null?void 0:B.toLowerCase())||"unknown",{msgsLeft:k,bytesLeft:O}=this.parseDiscard(M.headers);if(k>0||O>0)this.pending.msgs-=k,this.pending.bytes-=O,this.pending.requests--,this.notify(ConsumerDebugEvents.Discard,{msgsLeft:k,bytesLeft:O});else if(R===400){this.stop(new NatsError(T,`${R}`));return}else if(R===409&&T==="consumer deleted"){if(this.notify(ConsumerEvents.ConsumerDeleted,`${R} ${T}`),!this.refilling||this.abortOnMissingResource){const U=new NatsError(T,`${R}`);this.stop(U);return}}else this.notify(ConsumerDebugEvents.DebugEvent,`${R} ${T}`)}else this._push(toJsMsg(M)),this.received++,this.pending.msgs&&this.pending.msgs--,this.pending.bytes&&(this.pending.bytes-=M.size());if(this.pending.msgs===0&&this.pending.bytes===0&&(this.pending.requests=0),this.refilling){if(h&&this.pending.msgs<=g||u&&this.pending.bytes<=s){const R=this.pullOptions();this.pull(R)}}else this.pending.requests===0&&this._push(()=>{this.stop()})}}),this.sub.closed.then(()=>{this.sub.draining&&this._push(()=>{this.stop()})}),m&&(this.monitor=new IdleHeartbeatMonitor(m,_=>(this.notify(ConsumerEvents.HeartbeatsMissed,_),this.resetPending().then(()=>{}).catch(()=>{}),!1),{maxOut:2})),(async()=>{var M;const _=this.consumer.api.nc.status();this.statusIterator=_;for await(const b of _)switch(b.type){case Events.Disconnect:(M=this.monitor)==null||M.cancel();break;case Events.Reconnect:this.resetPending().then(S=>{var E;S&&((E=this.monitor)==null||E.restart())}).catch(()=>{});break}})(),this.pull(this.pullOptions())}_push(h){if(!this.callback)super.push(h);else{const u=typeof h=="function"?h:null;try{u?u():this.callback(h)}catch(m){this.stop(m)}}}notify(h,u){this.listeners.length>0&&this.listeners.forEach(m=>{m.done||m.push({type:h,data:u})})}resetPending(){return this.bind?this.resetPendingNoInfo():this.resetPendingWithInfo()}resetPendingNoInfo(){return this.pending.msgs=0,this.pending.bytes=0,this.pending.requests=0,this.pull(this.pullOptions()),Promise.resolve(!0)}async resetPendingWithInfo(){let h=0,u=0;const m=backoff();let s=0;for(;;){if(this.done)return!1;if(this.consumer.api.nc.isClosed())return console.error("aborting resetPending - connection is closed"),!1;try{return await this.consumer.info(),h=0,this.pending.msgs=0,this.pending.bytes=0,this.pending.requests=0,this.pull(this.pullOptions()),!0}catch(g){if(g.message==="stream not found"){if(u++,this.notify(ConsumerEvents.StreamNotFound,u),!this.refilling||this.abortOnMissingResource)return this.stop(g),!1}else if(g.message==="consumer not found"){if(h++,this.notify(ConsumerEvents.ConsumerNotFound,h),this.resetHandler)try{this.resetHandler()}catch{}if(!this.refilling||this.abortOnMissingResource)return this.stop(g),!1;if(this.forOrderedConsumer)return!1}else h=0,u=0;const x=m.backoff(s),_=delay(x);await Promise.race([_,this.consumer.api.nc.closed()]),_.cancel(),s++}}}pull(h){this.pending.bytes+=h.max_bytes??0,this.pending.msgs+=h.batch??0,this.pending.requests++;const u=this.consumer.api.nc;this._push(()=>{u.publish(`${this.consumer.api.prefix}.CONSUMER.MSG.NEXT.${this.consumer.stream}.${this.consumer.name}`,this.consumer.api.jc.encode(h),{reply:this.inbox}),this.notify(ConsumerDebugEvents.Next,h)})}pullOptions(){const h=this.opts.max_messages-this.pending.msgs,u=this.opts.max_bytes-this.pending.bytes,m=nanos(this.opts.idle_heartbeat),s=nanos(this.opts.expires);return{batch:h,max_bytes:u,idle_heartbeat:m,expires:s}}parseDiscard(h){const u={msgsLeft:0,bytesLeft:0},m=h==null?void 0:h.get(JsHeaders.PendingMessagesHdr);m&&(u.msgsLeft=parseInt(m));const s=h==null?void 0:h.get(JsHeaders.PendingBytesHdr);return s&&(u.bytesLeft=parseInt(s)),u}trackTimeout(h){this.timeout=h}close(){return this.stop(),this.iterClosed}closed(){return this.iterClosed}clearTimers(){var h,u;(h=this.monitor)==null||h.cancel(),this.monitor=null,(u=this.timeout)==null||u.cancel(),this.timeout=null}setCleanupHandler(h){this.cleanupHandler=h}stop(h){var u,m;this.done||((u=this.sub)==null||u.unsubscribe(),this.clearTimers(),(m=this.statusIterator)==null||m.stop(),this._push(()=>{super.stop(h),this.listeners.forEach(s=>{s.stop()})}))}parseOptions(h,u=!1){const m=h||{};if(m.max_messages=m.max_messages||0,m.max_bytes=m.max_bytes||0,m.max_messages!==0&&m.max_bytes!==0)throw new Error("only specify one of max_messages or max_bytes");if(m.max_messages===0&&(m.max_messages=100),m.expires=m.expires||3e4,m.expires<1e3)throw new Error("expires should be at least 1000ms");if(m.idle_heartbeat=m.idle_heartbeat||m.expires/2,m.idle_heartbeat=m.idle_heartbeat>3e4?3e4:m.idle_heartbeat,u){const s=Math.round(m.max_messages*.75)||1;m.threshold_messages=m.threshold_messages||s;const g=Math.round(m.max_bytes*.75)||1;m.threshold_bytes=m.threshold_bytes||g}return m}status(){const h=new QueuedIteratorImpl;return this.listeners.push(h),Promise.resolve(h)}}class OrderedConsumerMessages extends QueuedIteratorImpl{constructor(){super();ae(this,"src");ae(this,"listeners");this.listeners=[]}setSource(h){this.src&&(this.src.resetHandler=void 0,this.src.setCleanupHandler(),this.src.stop()),this.src=h,this.src.setCleanupHandler(u=>{this.stop(u||void 0)}),(async()=>{const u=await this.src.status();for await(const m of u)this.notify(m.type,m.data)})().catch(()=>{})}notify(h,u){this.listeners.length>0&&this.listeners.forEach(m=>{m.done||m.push({type:h,data:u})})}stop(h){var u;this.done||((u=this.src)==null||u.stop(h),super.stop(h),this.listeners.forEach(m=>{m.stop()}))}close(){return this.stop(),this.iterClosed}closed(){return this.iterClosed}status(){const h=new QueuedIteratorImpl;return this.listeners.push(h),Promise.resolve(h)}}class PullConsumerImpl{constructor(n,h){ae(this,"api");ae(this,"_info");ae(this,"stream");ae(this,"name");this.api=n,this._info=h,this.stream=h.stream_name,this.name=h.name}consume(n={max_messages:100,expires:3e4}){return Promise.resolve(new PullConsumerMessagesImpl(this,n,!0))}fetch(n={max_messages:100,expires:3e4}){const h=new PullConsumerMessagesImpl(this,n,!1),u=Math.round(h.opts.expires*1.05),m=timeout(u);return h.closed().catch(()=>{}).finally(()=>{m.cancel()}),m.catch(()=>{h.close().catch()}),h.trackTimeout(m),Promise.resolve(h)}next(n={expires:3e4}){const h=deferred(),u=n;u.max_messages=1;const m=new PullConsumerMessagesImpl(this,u,!1),s=Math.round(m.opts.expires*1.05);s>=6e4&&(async()=>{for await(const x of await m.status())if(x.type===ConsumerEvents.HeartbeatsMissed&&x.data>=2){h.reject(new Error("consumer missed heartbeats"));break}})().catch(),(async()=>{for await(const x of m){h.resolve(x);break}})().catch(()=>{});const g=timeout(s);return m.closed().then(x=>{x?h.reject(x):h.resolve(null)}).catch(x=>{h.reject(x)}).finally(()=>{g.cancel()}),g.catch(x=>{h.resolve(null),m.close().catch()}),m.trackTimeout(g),h}delete(){const{stream_name:n,name:h}=this._info;return this.api.delete(n,h)}info(n=!1){if(n)return Promise.resolve(this._info);const{stream_name:h,name:u}=this._info;return this.api.info(h,u).then(m=>(this._info=m,this._info))}}class OrderedPullConsumerImpl{constructor(n,h,u={}){ae(this,"api");ae(this,"consumerOpts");ae(this,"consumer");ae(this,"opts");ae(this,"cursor");ae(this,"stream");ae(this,"namePrefix");ae(this,"serial");ae(this,"currentConsumer");ae(this,"userCallback");ae(this,"iter");ae(this,"type");ae(this,"startSeq");this.api=n,this.stream=h,this.cursor={stream_seq:1,deliver_seq:0},this.namePrefix=nuid.next(),typeof u.name_prefix=="string"&&(minValidation("name_prefix",u.name_prefix),this.namePrefix=u.name_prefix+this.namePrefix),this.serial=0,this.currentConsumer=null,this.userCallback=null,this.iter=null,this.type=PullConsumerType.Unset,this.consumerOpts=u,this.startSeq=this.consumerOpts.opt_start_seq||0,this.cursor.stream_seq=this.startSeq>0?this.startSeq-1:0}getConsumerOpts(n){this.serial++;const h=`${this.namePrefix}_${this.serial}`;n=n===0?1:n;const u={name:h,deliver_policy:DeliverPolicy.StartSequence,opt_start_seq:n,ack_policy:AckPolicy.None,inactive_threshold:nanos(5*60*1e3),num_replicas:1};return this.consumerOpts.headers_only===!0&&(u.headers_only=!0),Array.isArray(this.consumerOpts.filterSubjects)&&(u.filter_subjects=this.consumerOpts.filterSubjects),typeof this.consumerOpts.filterSubjects=="string"&&(u.filter_subject=this.consumerOpts.filterSubjects),this.consumerOpts.replay_policy&&(u.replay_policy=this.consumerOpts.replay_policy),n===this.startSeq+1&&(u.deliver_policy=this.consumerOpts.deliver_policy||DeliverPolicy.StartSequence,(this.consumerOpts.deliver_policy===DeliverPolicy.LastPerSubject||this.consumerOpts.deliver_policy===DeliverPolicy.New||this.consumerOpts.deliver_policy===DeliverPolicy.Last)&&(delete u.opt_start_seq,u.deliver_policy=this.consumerOpts.deliver_policy),u.deliver_policy===DeliverPolicy.LastPerSubject&&typeof u.filter_subjects>"u"&&typeof u.filter_subject>"u"&&(u.filter_subject=">"),this.consumerOpts.opt_start_time&&(delete u.opt_start_seq,u.deliver_policy=DeliverPolicy.StartTime,u.opt_start_time=this.consumerOpts.opt_start_time),this.consumerOpts.inactive_threshold&&(u.inactive_threshold=nanos(this.consumerOpts.inactive_threshold))),u}async resetConsumer(n=0){var s,g,x,_;(s=this.consumer)==null||s.delete().catch(()=>{}),n=n===0?1:n,this.cursor.deliver_seq=0;const h=this.getConsumerOpts(n);h.max_deliver=1,h.mem_storage=!0;const u=backoff();let m;for(let M=0;;M++)try{m=await this.api.add(this.stream,h),(g=this.iter)==null||g.notify(ConsumerEvents.OrderedConsumerRecreated,m.name);break}catch(b){if(b.message==="stream not found"&&((x=this.iter)==null||x.notify(ConsumerEvents.StreamNotFound,M),this.type===PullConsumerType.Fetch||this.opts.abort_on_missing_resource===!0))return(_=this.iter)==null||_.stop(b),Promise.reject(b);if(n===0&&M>=30)throw b;await delay(u.backoff(M+1))}return m}internalHandler(n){return h=>{var m;if(this.serial!==n)return;const u=h.info.deliverySequence;if(u!==this.cursor.deliver_seq+1){this.notifyOrderedResetAndReset();return}this.cursor.deliver_seq=u,this.cursor.stream_seq=h.info.streamSequence,this.userCallback?this.userCallback(h):(m=this.iter)==null||m.push(h)}}async reset(n={max_messages:100,expires:3e4},h){var _,M;h=h||{};const u=h.fromFetch||!1,m=h.orderedReset||!1;if(this.type===PullConsumerType.Fetch&&m){(_=this.iter)==null||_.src.stop(),await((M=this.iter)==null?void 0:M.closed()),this.currentConsumer=null;return}(this.currentConsumer===null||m)&&(this.currentConsumer=await this.resetConsumer(this.cursor.stream_seq+1)),(this.iter===null||u)&&(this.iter=new OrderedConsumerMessages),this.consumer=new PullConsumerImpl(this.api,this.currentConsumer);const s=n;s.callback=this.internalHandler(this.serial);let g=null;this.type===PullConsumerType.Fetch&&u?g=await this.consumer.fetch(n):this.type===PullConsumerType.Consume&&(g=await this.consumer.consume(n));const x=g;x.forOrderedConsumer=!0,x.resetHandler=()=>{this.notifyOrderedResetAndReset()},this.iter.setSource(x)}notifyOrderedResetAndReset(){var n;(n=this.iter)==null||n.notify(ConsumerDebugEvents.Reset,""),this.reset(this.opts,{orderedReset:!0})}async consume(n={max_messages:100,expires:3e4}){if(n.bind)return Promise.reject(new Error("bind is not supported"));if(this.type===PullConsumerType.Fetch)return Promise.reject(new Error("ordered consumer initialized as fetch"));if(this.type===PullConsumerType.Consume)return Promise.reject(new Error("ordered consumer doesn't support concurrent consume"));const{callback:u}=n;return u&&(this.userCallback=u),this.type=PullConsumerType.Consume,this.opts=n,await this.reset(n),this.iter}async fetch(n={max_messages:100,expires:3e4}){var m;if(n.bind)return Promise.reject(new Error("bind is not supported"));if(this.type===PullConsumerType.Consume)return Promise.reject(new Error("ordered consumer already initialized as consume"));if(((m=this.iter)==null?void 0:m.done)===!1)return Promise.reject(new Error("ordered consumer doesn't support concurrent fetch"));const{callback:u}=n;return u&&(this.userCallback=u),this.type=PullConsumerType.Fetch,this.opts=n,await this.reset(n,{fromFetch:!0}),this.iter}async next(n={expires:3e4}){const h=n;if(h.bind)return Promise.reject(new Error("bind is not supported"));h.max_messages=1;const u=deferred();return h.callback=s=>{this.userCallback=null,u.resolve(s)},(await this.fetch(h)).iterClosed.then(s=>{s&&u.reject(s),u.resolve(null)}).catch(s=>{u.reject(s)}),u}delete(){return this.currentConsumer?this.api.delete(this.stream,this.currentConsumer.name).then(n=>Promise.resolve(n)).catch(n=>Promise.reject(n)).finally(()=>{this.currentConsumer=null}):Promise.resolve(!1)}async info(n){return this.currentConsumer==null?(this.currentConsumer=await this.resetConsumer(this.serial),Promise.resolve(this.currentConsumer)):n&&this.currentConsumer?Promise.resolve(this.currentConsumer):this.api.info(this.stream,this.currentConsumer.name)}}class ConsumersImpl{constructor(n){ae(this,"api");ae(this,"notified");this.api=n,this.notified=!1}checkVersion(){const n=this.api.nc.features.get(Feature.JS_SIMPLIFICATION);return n.ok?Promise.resolve():Promise.reject(new Error(`consumers framework is only supported on servers ${n.min} or better`))}async get(n,h={}){return typeof h=="object"?this.ordered(n,h):(await this.checkVersion(),this.api.info(n,h).then(u=>u.config.deliver_subject!==void 0?Promise.reject(new Error("push consumer not supported")):new PullConsumerImpl(this.api,u)).catch(u=>Promise.reject(u)))}async ordered(n,h){await this.checkVersion();const u=this.api;return new StreamAPIImpl(u.nc,u.opts).info(n).then(s=>Promise.resolve(new OrderedPullConsumerImpl(this.api,n,h))).catch(s=>Promise.reject(s))}}class StreamImpl{constructor(n,h){ae(this,"api");ae(this,"_info");this.api=n,this._info=h}get name(){return this._info.config.name}alternates(){return this.info().then(n=>n.alternates?n.alternates:[])}async best(){if(await this.info(),this._info.alternates){const n=await this.api.info(this._info.alternates[0].name);return new StreamImpl(this.api,n)}else return this}info(n=!1,h){return n?Promise.resolve(this._info):this.api.info(this.name,h).then(u=>(this._info=u,this._info))}getConsumer(n){return new ConsumersImpl(new ConsumerAPIImpl(this.api.nc,this.api.opts)).get(this.name,n)}getMessage(n){return this.api.getMessage(this.name,n)}deleteMessage(n,h){return this.api.deleteMessage(this.name,n,h)}}class StreamAPIImpl extends BaseApiClient{constructor(n,h){super(n,h)}checkStreamConfigVersions(n){const h=this.nc;if(n.metadata){const{min:m,ok:s}=h.features.get(Feature.JS_STREAM_CONSUMER_METADATA);if(!s)throw new Error(`stream 'metadata' requires server ${m}`)}if(n.first_seq){const{min:m,ok:s}=h.features.get(Feature.JS_STREAM_FIRST_SEQ);if(!s)throw new Error(`stream 'first_seq' requires server ${m}`)}if(n.subject_transform){const{min:m,ok:s}=h.features.get(Feature.JS_STREAM_SUBJECT_TRANSFORM);if(!s)throw new Error(`stream 'subject_transform' requires server ${m}`)}if(n.compression){const{min:m,ok:s}=h.features.get(Feature.JS_STREAM_COMPRESSION);if(!s)throw new Error(`stream 'compression' requires server ${m}`)}if(n.consumer_limits){const{min:m,ok:s}=h.features.get(Feature.JS_DEFAULT_CONSUMER_LIMITS);if(!s)throw new Error(`stream 'consumer_limits' requires server ${m}`)}function u(m,s){var x;if((((x=s.subject_transforms)==null?void 0:x.length)||0)>0){const{min:_,ok:M}=h.features.get(Feature.JS_STREAM_SOURCE_SUBJECT_TRANSFORM);if(!M)throw new Error(`${m} 'subject_transforms' requires server ${_}`)}}n.sources&&n.sources.forEach(m=>{u("stream sources",m)}),n.mirror&&u("stream mirror",n.mirror)}async add(n={}){var m;this.checkStreamConfigVersions(n),validateStreamName(n.name),n.mirror=convertStreamSourceDomain(n.mirror),n.sources=(m=n.sources)==null?void 0:m.map(convertStreamSourceDomain);const u=await this._request(`${this.prefix}.STREAM.CREATE.${n.name}`,n);return this._fixInfo(u),u}async delete(n){return validateStreamName(n),(await this._request(`${this.prefix}.STREAM.DELETE.${n}`)).success}async update(n,h={}){var x;if(typeof n=="object"){const _=n;n=_.name,h=_,console.trace("\x1B[33m >> streams.update(config: StreamConfig) api changed to streams.update(name: string, config: StreamUpdateConfig) - this shim will be removed - update your code.  \x1B[0m")}this.checkStreamConfigVersions(h),validateStreamName(n);const u=await this.info(n),m=Object.assign(u.config,h);m.mirror=convertStreamSourceDomain(m.mirror),m.sources=(x=m.sources)==null?void 0:x.map(convertStreamSourceDomain);const g=await this._request(`${this.prefix}.STREAM.UPDATE.${n}`,m);return this._fixInfo(g),g}async info(n,h){validateStreamName(n);const u=`${this.prefix}.STREAM.INFO.${n}`;let s=await this._request(u,h),{total:g,limit:x}=s,_=s.state.subjects?Object.getOwnPropertyNames(s.state.subjects).length:1;if(g&&g>_){const M=[s],b=h||{};let S=0;for(;g>_;){S++,b.offset=x*S;const A=await this._request(u,b);g=A.total,M.push(A);const B=Object.getOwnPropertyNames(A.state.subjects).length;if(_+=B,B<x)break}let E={};for(let A=0;A<M.length;A++)s=M[A],s.state.subjects&&(E=Object.assign(E,s.state.subjects));s.offset=0,s.total=0,s.limit=0,s.state.subjects=E}return this._fixInfo(s),s}list(n=""){const h=n!=null&&n.length?{subject:n}:{},u=s=>{const g=s;return g.streams.forEach(x=>{this._fixInfo(x)}),g.streams},m=`${this.prefix}.STREAM.LIST`;return new ListerImpl(m,u,this,h)}_fixInfo(n){n.config.sealed=n.config.sealed||!1,n.config.deny_delete=n.config.deny_delete||!1,n.config.deny_purge=n.config.deny_purge||!1,n.config.allow_rollup_hdrs=n.config.allow_rollup_hdrs||!1}async purge(n,h){if(h){const{keep:m,seq:s}=h;if(typeof m=="number"&&typeof s=="number")throw new Error("can specify one of keep or seq")}return validateStreamName(n),await this._request(`${this.prefix}.STREAM.PURGE.${n}`,h)}async deleteMessage(n,h,u=!0){validateStreamName(n);const m={seq:h};return u||(m.no_erase=!0),(await this._request(`${this.prefix}.STREAM.MSG.DELETE.${n}`,m)).success}async getMessage(n,h){validateStreamName(n);const m=await this._request(`${this.prefix}.STREAM.MSG.GET.${n}`,h);return new StoredMsgImpl(m)}find(n){return this.findStream(n)}listKvs(){const n=u=>{var _;const s=u.streams.filter(M=>M.config.name.startsWith(kvPrefix));s.forEach(M=>{this._fixInfo(M)});let g="";return s.length&&(g=((_=this.nc.info)==null?void 0:_.cluster)??""),s.map(M=>new KvStatusImpl(M,g))},h=`${this.prefix}.STREAM.LIST`;return new ListerImpl(h,n,this)}listObjectStores(){const n=u=>{const s=u.streams.filter(x=>x.config.name.startsWith(osPrefix));return s.forEach(x=>{this._fixInfo(x)}),s.map(x=>new ObjectStoreStatusImpl(x))},h=`${this.prefix}.STREAM.LIST`;return new ListerImpl(h,n,this)}names(n=""){const h=n!=null&&n.length?{subject:n}:{},u=s=>s.streams,m=`${this.prefix}.STREAM.NAMES`;return new ListerImpl(m,u,this,h)}async get(n){const h=await this.info(n);return Promise.resolve(new StreamImpl(this,h))}}class DirectStreamAPIImpl extends BaseApiClient{constructor(n,h){super(n,h)}async getMessage(n,h){validateStreamName(n);let u=h;const{last_by_subj:m}=u;m&&(u=null);const s=u?this.jc.encode(u):Empty,g=this.opts.apiPrefix||"$JS.API",x=m?`${g}.DIRECT.GET.${n}.${m}`:`${g}.DIRECT.GET.${n}`,_=await this.nc.request(x,s),M=checkJsError(_);if(M)return Promise.reject(M);const b=new DirectMsgImpl(_);return Promise.resolve(b)}async getBatch(n,h){validateStreamName(n);const m=`${this.opts.apiPrefix||"$JS.API"}.DIRECT.GET.${n}`;if(!Array.isArray(h.multi_last)||h.multi_last.length===0)return Promise.reject("multi_last is required");const s=JSON.stringify(h,(_,M)=>_==="up_to_time"&&M instanceof Date?M.toISOString():M),g=new QueuedIteratorImpl,x=await this.nc.requestMany(m,s,{strategy:RequestStrategy.SentinelMsg});return(async()=>{var S,E,A;let _=!1,M=!1,b;for await(const B of x){if(!_){_=!0;const R=((S=B.headers)==null?void 0:S.code)||0;if(R!==0&&R<200||R>299){b=(E=B.headers)==null?void 0:E.description.toLowerCase();break}if(((A=B.headers)==null?void 0:A.get("Nats-Num-Pending"))===""){M=!0;break}}if(B.data.length===0)break;g.push(new DirectMsgImpl(B))}g.push(()=>{if(M)throw new Error("batch direct get not supported by the server");if(b)throw new Error(`bad request: ${b}`);g.stop()})})(),Promise.resolve(g)}}class DirectMsgImpl{constructor(n){ae(this,"data");ae(this,"header");if(!n.headers)throw new Error("headers expected");this.data=n.data,this.header=n.headers}get subject(){return this.header.last(DirectMsgHeaders.Subject)}get seq(){const n=this.header.last(DirectMsgHeaders.Sequence);return typeof n=="string"?parseInt(n):0}get time(){return new Date(Date.parse(this.timestamp))}get timestamp(){return this.header.last(DirectMsgHeaders.TimeStamp)}get stream(){return this.header.last(DirectMsgHeaders.Stream)}json(n){return JSONCodec(n).decode(this.data)}string(){return TD.decode(this.data)}}ae(DirectMsgImpl,"jc");class JetStreamManagerImpl extends BaseApiClient{constructor(h,u){super(h,u);ae(this,"streams");ae(this,"consumers");ae(this,"direct");this.streams=new StreamAPIImpl(h,u),this.consumers=new ConsumerAPIImpl(h,u),this.direct=new DirectStreamAPIImpl(h,u)}async getAccountInfo(){return await this._request(`${this.prefix}.INFO`)}jetstream(){return this.nc.jetstream(this.getOptions())}advisories(){const h=new QueuedIteratorImpl;return this.nc.subscribe("$JS.EVENT.ADVISORY.>",{callback:(u,m)=>{if(u)throw u;try{const s=this.parseJsResponse(m),g=s.type.split("."),x=g[g.length-1];h.push({kind:x,data:s})}catch(s){h.stop(s)}}}),h}}class StoredMsgImpl{constructor(n){ae(this,"_header");ae(this,"smr");this.smr=n}get subject(){return this.smr.message.subject}get seq(){return this.smr.message.seq}get timestamp(){return this.smr.message.time}get time(){return new Date(Date.parse(this.timestamp))}get data(){return this.smr.message.data?this._parse(this.smr.message.data):Empty}get header(){if(!this._header)if(this.smr.message.hdrs){const n=this._parse(this.smr.message.hdrs);this._header=MsgHdrsImpl.decode(n)}else this._header=headers();return this._header}_parse(n){const h=atob(n),u=h.length,m=new Uint8Array(u);for(let s=0;s<u;s++)m[s]=h.charCodeAt(s);return m}json(n){return JSONCodec(n).decode(this.data)}string(){return TD.decode(this.data)}}ae(StoredMsgImpl,"jc");class StreamsImpl{constructor(n){ae(this,"api");this.api=n}get(n){return this.api.info(n).then(h=>new StreamImpl(this.api,h))}}class ObjectInfoImpl{constructor(n){ae(this,"info");ae(this,"hdrs");this.info=n}get name(){return this.info.name}get description(){return this.info.description??""}get headers(){return this.hdrs||(this.hdrs=MsgHdrsImpl.fromRecord(this.info.headers||{})),this.hdrs}get options(){return this.info.options}get bucket(){return this.info.bucket}get chunks(){return this.info.chunks}get deleted(){return this.info.deleted??!1}get digest(){return this.info.digest}get mtime(){return this.info.mtime}get nuid(){return this.info.nuid}get size(){return this.info.size}get revision(){return this.info.revision}get metadata(){return this.info.metadata||{}}isLink(){var n,h;return((n=this.info.options)==null?void 0:n.link)!==void 0&&((h=this.info.options)==null?void 0:h.link)!==null}}function toServerObjectStoreMeta(c){const n={name:c.name,description:c.description??"",options:c.options,metadata:c.metadata};if(c.headers){const h=c.headers;n.headers=h.toRecord()}return n}function emptyReadableStream(){return new ReadableStream({pull(c){c.enqueue(new Uint8Array(0)),c.close()}})}class ObjectStoreImpl{constructor(n,h,u){ae(this,"jsm");ae(this,"js");ae(this,"stream");ae(this,"name");this.name=n,this.jsm=h,this.js=u}_checkNotEmpty(n){return!n||n.length===0?{name:n,error:new Error("name cannot be empty")}:{name:n}}async info(n){const h=await this.rawInfo(n);return h?new ObjectInfoImpl(h):null}async list(){const n=[],h=await this.watch({ignoreDeletes:!0,includeHistory:!0});for await(const u of h){if(u===null)break;n.push(u)}return Promise.resolve(n)}async rawInfo(n){const{name:h,error:u}=this._checkNotEmpty(n);if(u)return Promise.reject(u);const m=this._metaSubject(h);try{const s=await this.jsm.streams.getMessage(this.stream,{last_by_subj:m}),x=JSONCodec().decode(s.data);return x.revision=s.seq,x}catch(s){return s.code==="404"?null:Promise.reject(s)}}async _si(n){try{return await this.jsm.streams.info(this.stream,n)}catch(h){return h.code==="404"?null:Promise.reject(h)}}async seal(){let n=await this._si();return n===null?Promise.reject(new Error("object store not found")):(n.config.sealed=!0,n=await this.jsm.streams.update(this.stream,n.config),Promise.resolve(new ObjectStoreStatusImpl(n)))}async status(n){const h=await this._si(n);return h===null?Promise.reject(new Error("object store not found")):Promise.resolve(new ObjectStoreStatusImpl(h))}destroy(){return this.jsm.streams.delete(this.stream)}async _put(n,h,u){var L;const m=this.js.getOptions();u=u||{timeout:m.timeout},u.timeout=u.timeout||m.timeout,u.previousRevision=u.previousRevision??void 0;const{timeout:s,previousRevision:g}=u,x=this.js.nc.info,_=(x==null?void 0:x.max_payload)||1024;n=n||{},n.options=n.options||{};let M=((L=n.options)==null?void 0:L.max_chunk_size)||128*1024;M=M>_?_:M,n.options.max_chunk_size=M;const b=await this.info(n.name),{name:S,error:E}=this._checkNotEmpty(n.name);if(E)return Promise.reject(E);const A=nuid.next(),B=this._chunkSubject(A),R=this._metaSubject(S),T=Object.assign({bucket:this.name,nuid:A,size:0,chunks:0},toServerObjectStoreMeta(n)),k=deferred(),O=[],U=new DataBuffer;try{const Q=h?h.getReader():null,ie=new SHA256;for(;;){const{done:we,value:ye}=Q?await Q.read():{done:!0,value:void 0};if(we){if(U.size()>0){const a=U.drain();ie.update(a),T.chunks++,T.size+=a.length,O.push(this.js.publish(B,a,{timeout:s}))}await Promise.all(O),O.length=0,T.mtime=new Date().toISOString();const se=ie.digest("base64"),ke=se.length%3,w=ke>0?"=".repeat(ke):"";T.digest=`${digestType}${se}${w}`,T.deleted=!1;const e=headers();typeof g=="number"&&e.set(PubHeaders.ExpectedLastSubjectSequenceHdr,`${g}`),e.set(JsHeaders.RollupHdr,JsHeaders.RollupValueSubject);const r=await this.js.publish(R,JSONCodec().encode(T),{headers:e,timeout:s});if(T.revision=r.seq,b)try{await this.jsm.streams.purge(this.stream,{filter:`$O.${this.name}.C.${b.nuid}`})}catch{}k.resolve(new ObjectInfoImpl(T));break}if(ye)for(U.fill(ye);U.size()>M;){T.chunks++,T.size+=M;const se=U.drain(n.options.max_chunk_size);ie.update(se),O.push(this.js.publish(B,se,{timeout:s}))}}}catch(Q){await this.jsm.streams.purge(this.stream,{filter:B}),k.reject(Q)}return k}putBlob(n,h,u){function m(s){return new ReadableStream({pull(g){g.enqueue(s),g.close()}})}return h===null&&(h=new Uint8Array(0)),this.put(n,m(h),u)}put(n,h,u){var m;return(m=n==null?void 0:n.options)!=null&&m.link?Promise.reject(new Error("link cannot be set when putting the object in bucket")):this._put(n,h,u)}async getBlob(n){async function h(s){const g=new DataBuffer,x=s.getReader();for(;;){const{done:_,value:M}=await x.read();if(_)return g.drain();M&&M.length&&g.fill(M)}}const u=await this.get(n);if(u===null)return Promise.resolve(null);const m=await Promise.all([u.error,h(u.data)]);return m[0]?Promise.reject(m[0]):Promise.resolve(m[1])}async get(n){const h=await this.rawInfo(n);if(h===null||h.deleted)return Promise.resolve(null);if(h.options&&h.options.link){const b=h.options.link.name||"";if(b==="")throw new Error("link is a bucket");return(h.options.link.bucket!==this.name?await ObjectStoreImpl.create(this.js,h.options.link.bucket):this).get(b)}const u=deferred(),m={info:new ObjectInfoImpl(h),error:u};if(h.size===0)return m.data=emptyReadableStream(),u.resolve(null),Promise.resolve(m);let s;const g=consumerOpts();g.orderedConsumer();const x=new SHA256,_=`$O.${this.name}.C.${h.nuid}`,M=await this.js.subscribe(_,g);return(async()=>{for await(const b of M)if(b.data.length>0&&(x.update(b.data),s.enqueue(b.data)),b.info.pending===0){const S=x.digest("base64"),E=S.length%3,A=E>0?"=".repeat(E):"",B=`${digestType}${S}${A}`;B!==h.digest?s.error(new Error(`received a corrupt object, digests do not match received: ${h.digest} calculated ${B}`)):s.close(),M.unsubscribe()}})().then(()=>{u.resolve()}).catch(b=>{s.error(b),u.reject(b)}),m.data=new ReadableStream({start(b){s=b},cancel(){M.unsubscribe()}}),m}linkStore(n,h){if(!(h instanceof ObjectStoreImpl))return Promise.reject("bucket required");const u=h,{name:m,error:s}=this._checkNotEmpty(n);if(s)return Promise.reject(s);const g={name:m,options:{link:{bucket:u.name}}};return this._put(g,null)}async link(n,h){const{name:u,error:m}=this._checkNotEmpty(n);if(m)return Promise.reject(m);if(h.deleted)return Promise.reject(new Error("src object is deleted"));if(h.isLink())return Promise.reject(new Error("src object is a link"));const s=await this.rawInfo(n);if(s!==null&&!s.deleted)return Promise.reject(new Error("an object already exists with that name"));const g={bucket:h.bucket,name:h.name},x={name:u,bucket:h.bucket,options:{link:g}};await this.js.publish(this._metaSubject(n),JSON.stringify(x));const _=await this.info(n);return Promise.resolve(_)}async delete(n){const h=await this.rawInfo(n);if(h===null)return Promise.resolve({purged:0,success:!1});h.deleted=!0,h.size=0,h.chunks=0,h.digest="";const u=JSONCodec(),m=headers();return m.set(JsHeaders.RollupHdr,JsHeaders.RollupValueSubject),await this.js.publish(this._metaSubject(h.name),u.encode(h),{headers:m}),this.jsm.streams.purge(this.stream,{filter:this._chunkSubject(h.nuid)})}async update(n,h={}){const u=await this.rawInfo(n);if(u===null)return Promise.reject(new Error("object not found"));if(u.deleted)return Promise.reject(new Error("cannot update meta for a deleted object"));h.name=h.name??u.name;const{name:m,error:s}=this._checkNotEmpty(h.name);if(s)return Promise.reject(s);if(n!==h.name){const _=await this.info(h.name);if(_&&!_.deleted)return Promise.reject(new Error("an object already exists with that name"))}h.name=m;const g=Object.assign({},u,toServerObjectStoreMeta(h)),x=await this.js.publish(this._metaSubject(g.name),JSON.stringify(g));return n!==h.name&&await this.jsm.streams.purge(this.stream,{filter:this._metaSubject(n)}),Promise.resolve(x)}async watch(n={}){n.includeHistory=n.includeHistory??!1,n.ignoreDeletes=n.ignoreDeletes??!1;let h=!1;const u=new QueuedIteratorImpl,m=this._metaSubjectAll();try{await this.jsm.streams.getMessage(this.stream,{last_by_subj:m})}catch(_){_.code==="404"?(u.push(null),h=!0):u.stop(_)}const s=JSONCodec(),g=consumerOpts();g.orderedConsumer(),n.includeHistory?g.deliverLastPerSubject():(h=!0,g.deliverNew()),g.callback((_,M)=>{var b;if(_){u.stop(_);return}if(M!==null){const S=s.decode(M.data);S.deleted&&n.ignoreDeletes===!0||u.push(S),((b=M.info)==null?void 0:b.pending)===0&&!h&&(h=!0,u.push(null))}});const x=await this.js.subscribe(m,g);return u._data=x,u.iterClosed.then(()=>{x.unsubscribe()}),x.closed.then(()=>{u.stop()}).catch(_=>{u.stop(_)}),u}_chunkSubject(n){return`$O.${this.name}.C.${n}`}_metaSubject(n){return`$O.${this.name}.M.${Base64UrlPaddedCodec.encode(n)}`}_metaSubjectAll(){return`$O.${this.name}.M.>`}async init(n={}){try{this.stream=objectStoreStreamName(this.name)}catch(m){return Promise.reject(m)}const h=(n==null?void 0:n.ttl)||0;delete n.ttl;const u=Object.assign({max_age:h},n);u.name=this.stream,u.allow_direct=!0,u.allow_rollup_hdrs=!0,u.discard=DiscardPolicy.New,u.subjects=[`$O.${this.name}.C.>`,`$O.${this.name}.M.>`],n.placement&&(u.placement=n.placement),n.metadata&&(u.metadata=n.metadata),typeof n.compression=="boolean"&&(u.compression=n.compression?StoreCompression.S2:StoreCompression.None);try{await this.jsm.streams.info(u.name)}catch(m){m.message==="stream not found"&&await this.jsm.streams.add(u)}}static async create(n,h,u={}){const m=await n.jetstreamManager(),s=new ObjectStoreImpl(h,m,n);return await s.init(u),Promise.resolve(s)}}class ViewsImpl{constructor(n){ae(this,"js");this.js=n}kv(n,h={}){const u=this.js,{ok:m,min:s}=u.nc.features.get(Feature.JS_KV);return m?h.bindOnly?Bucket.bind(this.js,n,h):Bucket.create(this.js,n,h):Promise.reject(new Error(`kv is only supported on servers ${s} or better`))}os(n,h={}){var g;if(typeof((g=crypto==null?void 0:crypto.subtle)==null?void 0:g.digest)!="function")return Promise.reject(new Error("objectstore: unable to calculate hashes - crypto.subtle.digest with sha256 support is required"));const u=this.js,{ok:m,min:s}=u.nc.features.get(Feature.JS_OBJECTSTORE);return m?ObjectStoreImpl.create(this.js,n,h):Promise.reject(new Error(`objectstore is only supported on servers ${s} or better`))}}class JetStreamClientImpl extends BaseApiClient{constructor(h,u){super(h,u);ae(this,"consumers");ae(this,"streams");ae(this,"consumerAPI");ae(this,"streamAPI");this.consumerAPI=new ConsumerAPIImpl(h,u),this.streamAPI=new StreamAPIImpl(h,u),this.consumers=new ConsumersImpl(this.consumerAPI),this.streams=new StreamsImpl(this.streamAPI)}jetstreamManager(h){h===void 0&&(h=this.opts.checkAPI);const u=Object.assign({},this.opts,{checkAPI:h});return this.nc.jetstreamManager(u)}get apiPrefix(){return this.prefix}get views(){return new ViewsImpl(this)}async publish(h,u=Empty,m){m=m||{},m.expect=m.expect||{};const s=(m==null?void 0:m.headers)||headers();m&&(m.msgID&&s.set(PubHeaders.MsgIdHdr,m.msgID),m.expect.lastMsgID&&s.set(PubHeaders.ExpectedLastMsgIdHdr,m.expect.lastMsgID),m.expect.streamName&&s.set(PubHeaders.ExpectedStreamHdr,m.expect.streamName),typeof m.expect.lastSequence=="number"&&s.set(PubHeaders.ExpectedLastSeqHdr,`${m.expect.lastSequence}`),typeof m.expect.lastSubjectSequence=="number"&&s.set(PubHeaders.ExpectedLastSubjectSequenceHdr,`${m.expect.lastSubjectSequence}`));const g=m.timeout||this.timeout,x={};g&&(x.timeout=g),m&&(x.headers=s);let{retries:_,retry_delay:M}=m;_=_||1,M=M||250;let b;for(let E=0;E<_;E++)try{b=await this.nc.request(h,u,x);break}catch(A){if(A.code==="503"&&E+1<_)await delay(M);else throw A}const S=this.parseJsResponse(b);if(S.stream==="")throw NatsError.errorForCode(ErrorCode.JetStreamInvalidAck);return S.duplicate=S.duplicate?S.duplicate:!1,S}async pull(h,u,m=0){validateStreamName(h),validateDurableName(u);let s=this.timeout;m>s&&(s=m),m=m<0?0:nanos(m);const g={batch:1,no_wait:m===0,expires:m},x=await this.nc.request(`${this.prefix}.CONSUMER.MSG.NEXT.${h}.${u}`,this.jc.encode(g),{noMux:!0,timeout:s}),_=checkJsError(x);if(_)throw _;return toJsMsg(x)}fetch(h,u,m={}){validateStreamName(h),validateDurableName(u);let s=null;const g=(m.max_bytes??0)>0;let x=0;const _=g?m.max_bytes:0;let M=null;const b={};if(b.batch=m.batch||1,_){const O=this.nc.features.get(Feature.JS_PULL_MAX_BYTES);if(!O.ok)throw new Error(`max_bytes is only supported on servers ${O.min} or better`);b.max_bytes=_}b.no_wait=m.no_wait||!1,b.no_wait&&b.expires&&(b.expires=0);const S=m.expires||0;if(S&&(b.expires=nanos(S)),S===0&&b.no_wait===!1)throw new Error("expires or no_wait is required");const E=m.idle_heartbeat||0;E&&(b.idle_heartbeat=nanos(E),m.delay_heartbeat===!0&&(b.idle_heartbeat=nanos(E*4)));const A=new QueuedIteratorImpl,B=b.batch;let R=0;A.protocolFilterFn=(O,U=!1)=>isHeartbeatMsg(O.msg)?(M==null||M.work(),!1):!0,A.dispatchedFn=O=>{if(O){if(g&&(x+=O.data.length),R++,s&&O.info.pending===0)return;(A.getPending()===1&&O.info.pending===0||B===R||_>0&&x>=_)&&A.stop()}};const T=createInbox(this.nc.options.inboxPrefix),k=this.nc.subscribe(T,{max:m.batch,callback:(O,U)=>{O===null&&(O=checkJsError(U)),O!==null?(s&&(s.cancel(),s=null),isNatsError(O)?A.stop(hideNonTerminalJsErrors(O)===null?void 0:O):A.stop(O)):(M==null||M.work(),A.received++,A.push(toJsMsg(U)))}});return S&&(s=timeout(S),s.catch(()=>{k.isClosed()||(k.drain().catch(()=>{}),s=null),M&&M.cancel()})),(async()=>{try{E&&(M=new IdleHeartbeatMonitor(E,O=>(A.push(()=>{A.err=new NatsError(`${Js409Errors.IdleHeartbeatMissed}: ${O}`,ErrorCode.JetStreamIdleHeartBeat)}),!0)))}catch{}await k.closed,s!==null&&(s.cancel(),s=null),M&&M.cancel(),A.stop()})().catch(),this.nc.publish(`${this.prefix}.CONSUMER.MSG.NEXT.${h}.${u}`,this.jc.encode(b),{reply:T}),A}async pullSubscribe(h,u=consumerOpts()){const m=await this._processOptions(h,u);if(m.ordered)throw new Error("pull subscribers cannot be be ordered");if(m.config.deliver_subject)throw new Error("consumer info specifies deliver_subject - pull consumers cannot have deliver_subject set");const s=m.config.ack_policy;if(s===AckPolicy.None||s===AckPolicy.All)throw new Error("ack policy for pull consumers must be explicit");const g=this._buildTypedSubscriptionOpts(m),x=new JetStreamPullSubscriptionImpl(this,m.deliver,g);x.info=m;try{await this._maybeCreateConsumer(m)}catch(_){throw x.unsubscribe(),_}return x}async subscribe(h,u=consumerOpts()){const m=await this._processOptions(h,u);if(!m.isBind&&!m.config.deliver_subject)throw new Error("push consumer requires deliver_subject");const s=this._buildTypedSubscriptionOpts(m),g=new JetStreamSubscriptionImpl(this,m.deliver,s);g.info=m;try{await this._maybeCreateConsumer(m)}catch(x){throw g.unsubscribe(),x}return g._maybeSetupHbMonitoring(),g}async _processOptions(h,u=consumerOpts()){const m=isConsumerOptsBuilder(u)?u.getOpts():u;if(m.isBind=isConsumerOptsBuilder(u)?u.isBind:!1,m.flow_control={heartbeat_count:0,fc_count:0,consumer_restarts:0},m.ordered){if(m.ordered_consumer_sequence={stream_seq:0,delivery_seq:0},m.config.ack_policy!==AckPolicy.NotSet&&m.config.ack_policy!==AckPolicy.None)throw new NatsError("ordered consumer: ack_policy can only be set to 'none'",ErrorCode.ApiError);if(m.config.durable_name&&m.config.durable_name.length>0)throw new NatsError("ordered consumer: durable_name cannot be set",ErrorCode.ApiError);if(m.config.deliver_subject&&m.config.deliver_subject.length>0)throw new NatsError("ordered consumer: deliver_subject cannot be set",ErrorCode.ApiError);if(m.config.max_deliver!==void 0&&m.config.max_deliver>1)throw new NatsError("ordered consumer: max_deliver cannot be set",ErrorCode.ApiError);if(m.config.deliver_group&&m.config.deliver_group.length>0)throw new NatsError("ordered consumer: deliver_group cannot be set",ErrorCode.ApiError);m.config.deliver_subject=createInbox(this.nc.options.inboxPrefix),m.config.ack_policy=AckPolicy.None,m.config.max_deliver=1,m.config.flow_control=!0,m.config.idle_heartbeat=m.config.idle_heartbeat||nanos(5e3),m.config.ack_wait=nanos(22*60*60*1e3),m.config.mem_storage=!0,m.config.num_replicas=1}if(m.config.ack_policy===AckPolicy.NotSet&&(m.config.ack_policy=AckPolicy.All),m.api=this,m.config=m.config||{},m.stream=m.stream?m.stream:await this.findStream(h),m.attached=!1,m.config.durable_name)try{const s=await this.consumerAPI.info(m.stream,m.config.durable_name);if(s){if(s.config.filter_subject&&s.config.filter_subject!==h)throw new Error("subject does not match consumer");const g=m.config.deliver_group??"";if(g===""&&s.push_bound===!0)throw new Error("duplicate subscription");const x=s.config.deliver_group??"";if(g!==x)throw x===""?new Error("durable requires no queue group"):new Error(`durable requires queue group '${x}'`);m.last=s,m.config=s.config,m.attached=!0,m.config.durable_name||(m.name=s.name)}}catch(s){if(s.code!=="404")throw s}return!m.attached&&m.config.filter_subject===void 0&&m.config.filter_subjects===void 0&&(m.config.filter_subject=h),m.deliver=m.config.deliver_subject||createInbox(this.nc.options.inboxPrefix),m}_buildTypedSubscriptionOpts(h){const u={};return u.adapter=msgAdapter(h.callbackFn===void 0),u.ingestionFilterFn=JetStreamClientImpl.ingestionFn(h.ordered),u.protocolFilterFn=(m,s=!1)=>{const g=m;return isFlowControlMsg(g.msg)?(s||g.msg.respond(),!1):!0},!h.mack&&h.config.ack_policy!==AckPolicy.None&&(u.dispatchedFn=autoAckJsMsg),h.callbackFn&&(u.callback=h.callbackFn),u.max=h.max||0,u.queue=h.queue,u}async _maybeCreateConsumer(h){if(h.attached)return;if(h.isBind)throw new Error(`unable to bind - durable consumer ${h.config.durable_name} doesn't exist in ${h.stream}`);h.config=Object.assign({deliver_policy:DeliverPolicy.All,ack_policy:AckPolicy.Explicit,ack_wait:nanos(30*1e3),replay_policy:ReplayPolicy.Instant},h.config);const u=await this.consumerAPI.add(h.stream,h.config);if(Array.isArray(h.config.filter_subjects&&!Array.isArray(u.config.filter_subjects)))throw new Error("jetstream server doesn't support consumers with multiple filter subjects");h.name=u.name,h.config=u.config,h.last=u}static ingestionFn(h){return(u,m)=>{var _;const s=m;if(!u)return{ingest:!1,protocol:!1};const g=u;if(checkJsError(g.msg)||(_=s.monitor)==null||_.work(),isHeartbeatMsg(g.msg)){const M=h?s._checkHbOrderConsumer(g.msg):!0;return h||s.info.flow_control.heartbeat_count++,{ingest:M,protocol:!0}}else if(isFlowControlMsg(g.msg))return s.info.flow_control.fc_count++,{ingest:!0,protocol:!0};return{ingest:h?s._checkOrderedConsumer(u):!0,protocol:!1}}}}class NatsConnectionImpl{constructor(n){ae(this,"options");ae(this,"protocol");ae(this,"draining");ae(this,"listeners");ae(this,"_services");this.draining=!1,this.options=parseOptions(n),this.listeners=[]}static connect(n={}){return new Promise((h,u)=>{const m=new NatsConnectionImpl(n);ProtocolHandler.connect(m.options,m).then(s=>{m.protocol=s,async function(){for await(const g of s.status())m.listeners.forEach(x=>{x.push(g)})}(),h(m)}).catch(s=>{u(s)})})}closed(){return this.protocol.closed}async close(){await this.protocol.close()}_check(n,h,u){if(this.isClosed())throw NatsError.errorForCode(ErrorCode.ConnectionClosed);if(h&&this.isDraining()||u&&this.protocol.noMorePublishing)throw NatsError.errorForCode(ErrorCode.ConnectionDraining);if(n=n||"",n.length===0)throw NatsError.errorForCode(ErrorCode.BadSubject)}publish(n,h,u){this._check(n,!1,!0),this.protocol.publish(n,h,u)}publishMessage(n){return this.publish(n.subject,n.data,{reply:n.reply,headers:n.headers})}respondMessage(n){return n.reply?(this.publish(n.reply,n.data,{reply:n.reply,headers:n.headers}),!0):!1}subscribe(n,h={}){this._check(n,!0,!1);const u=new SubscriptionImpl(this.protocol,n,h);return this.protocol.subscribe(u),u}_resub(n,h,u){this._check(h,!0,!1);const m=n;m.max=u,u&&(m.max=u+m.received),this.protocol.resub(m,h)}requestMany(n,h=Empty,u={maxWait:1e3,maxMessages:-1}){const m=!this.protocol.options.noAsyncTraces;try{this._check(n,!0,!0)}catch(_){return Promise.reject(_)}if(u.strategy=u.strategy||RequestStrategy.Timer,u.maxWait=u.maxWait||1e3,u.maxWait<1)return Promise.reject(new NatsError("timeout",ErrorCode.InvalidOption));const s=new QueuedIteratorImpl;function g(_){s.push(()=>{s.stop(_)})}function x(_,M){_||M===null?g(_===null?void 0:_):s.push(M)}if(u.noMux){const _=m?new Error().stack:null;let M=typeof u.maxMessages=="number"&&u.maxMessages>0?u.maxMessages:-1;const b=this.subscribe(createInbox(this.options.inboxPrefix),{callback:(B,R)=>{var T,k;if(((T=R==null?void 0:R.data)==null?void 0:T.length)===0&&((k=R==null?void 0:R.headers)==null?void 0:k.status)===ErrorCode.NoResponders&&(B=NatsError.errorForCode(ErrorCode.NoResponders)),B){_&&(B.stack+=`

${_}`),S(B);return}x(null,R),u.strategy===RequestStrategy.Count&&(M--,M===0&&S()),u.strategy===RequestStrategy.JitterTimer&&(A(),E=setTimeout(()=>{S()},300)),u.strategy===RequestStrategy.SentinelMsg&&R&&R.data.length===0&&S()}});b.closed.then(()=>{g()}).catch(B=>{s.stop(B)});const S=B=>{B&&s.push(()=>{throw B}),A(),b.drain().then(()=>{g()}).catch(R=>{g()})};s.iterClosed.then(()=>{A(),b==null||b.unsubscribe()}).catch(B=>{A(),b==null||b.unsubscribe()});try{this.publish(n,h,{reply:b.getSubject()})}catch(B){S(B)}let E=setTimeout(()=>{S()},u.maxWait);const A=()=>{E&&clearTimeout(E)}}else{const _=u;_.callback=x,s.iterClosed.then(()=>{M.cancel()}).catch(b=>{M.cancel(b)});const M=new RequestMany(this.protocol.muxSubscriptions,n,_);this.protocol.request(M);try{this.publish(n,h,{reply:`${this.protocol.muxSubscriptions.baseInbox}${M.token}`,headers:u.headers})}catch(b){M.cancel(b)}}return Promise.resolve(s)}request(n,h,u={timeout:1e3,noMux:!1}){try{this._check(n,!0,!0)}catch(s){return Promise.reject(s)}const m=!this.protocol.options.noAsyncTraces;if(u.timeout=u.timeout||1e3,u.timeout<1)return Promise.reject(new NatsError("timeout",ErrorCode.InvalidOption));if(!u.noMux&&u.reply)return Promise.reject(new NatsError("reply can only be used with noMux",ErrorCode.InvalidOption));if(u.noMux){const s=u.reply?u.reply:createInbox(this.options.inboxPrefix),g=deferred(),x=m?new Error:null,_=this.subscribe(s,{max:1,timeout:u.timeout,callback:(M,b)=>{M?(x&&M.code!==ErrorCode.Timeout&&(M.stack+=`

${x.stack}`),g.reject(M)):(M=isRequestError(b),M?(x&&(M.stack+=`

${x.stack}`),g.reject(M)):g.resolve(b))}});return _.requestSubject=n,this.protocol.publish(n,h,{reply:s,headers:u.headers}),g}else{const s=new RequestOne(this.protocol.muxSubscriptions,n,u,m);this.protocol.request(s);try{this.publish(n,h,{reply:`${this.protocol.muxSubscriptions.baseInbox}${s.token}`,headers:u.headers})}catch(x){s.cancel(x)}const g=Promise.race([s.timer,s.deferred]);return g.catch(()=>{s.cancel()}),g}}flush(){return this.isClosed()?Promise.reject(NatsError.errorForCode(ErrorCode.ConnectionClosed)):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(NatsError.errorForCode(ErrorCode.ConnectionClosed)):this.isDraining()?Promise.reject(NatsError.errorForCode(ErrorCode.ConnectionDraining)):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){const n=this.protocol.getServer();return n?n.listen:""}status(){const n=new QueuedIteratorImpl;return n.iterClosed.then(()=>{const h=this.listeners.indexOf(n);this.listeners.splice(h,1)}),this.listeners.push(n),n}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}async context(){return(await this.request("$SYS.REQ.USER.INFO")).json((h,u)=>h==="time"?new Date(Date.parse(u)):u)}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}async jetstreamManager(n={}){const h=new JetStreamManagerImpl(this,n);if(n.checkAPI!==!1)try{await h.getAccountInfo()}catch(u){const m=u;throw m.code===ErrorCode.NoResponders&&(m.code=ErrorCode.JetStreamNotEnabled),m}return h}jetstream(n={}){return new JetStreamClientImpl(this,n)}getServerVersion(){const n=this.info;return n?parseSemVer(n.version):void 0}async rtt(){if(!this.protocol._closed&&!this.protocol.connected)throw NatsError.errorForCode(ErrorCode.Disconnect);const n=Date.now();return await this.flush(),Date.now()-n}get features(){return this.protocol.features}get services(){return this._services||(this._services=new ServicesFactory(this)),this._services}reconnect(){return this.isClosed()?Promise.reject(NatsError.errorForCode(ErrorCode.ConnectionClosed)):this.isDraining()?Promise.reject(NatsError.errorForCode(ErrorCode.ConnectionDraining)):this.protocol.reconnect()}}class ServicesFactory{constructor(n){ae(this,"nc");this.nc=n}add(n){try{return new ServiceImpl(this.nc,n).start()}catch(h){return Promise.reject(h)}}client(n,h){return new ServiceClientImpl(this.nc,n,h)}}class KvStoredEntryImpl{constructor(n,h,u){ae(this,"bucket");ae(this,"sm");ae(this,"prefixLen");this.bucket=n,this.prefixLen=h,this.sm=u}get key(){return this.sm.subject.substring(this.prefixLen)}get value(){return this.sm.data}get delta(){return 0}get created(){return this.sm.time}get revision(){return this.sm.seq}get operation(){return this.sm.header.get(kvOperationHdr)||"PUT"}get length(){const n=this.sm.header.get(JsHeaders.MessageSizeHdr)||"";return n!==""?parseInt(n,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class KvJsMsgEntryImpl{constructor(n,h,u){ae(this,"bucket");ae(this,"key");ae(this,"sm");this.bucket=n,this.key=h,this.sm=u}get value(){return this.sm.data}get created(){return new Date(millis(this.sm.info.timestampNanos))}get revision(){return this.sm.seq}get operation(){var n;return((n=this.sm.headers)==null?void 0:n.get(kvOperationHdr))||"PUT"}get delta(){return this.sm.info.pending}get length(){var h;const n=((h=this.sm.headers)==null?void 0:h.get(JsHeaders.MessageSizeHdr))||"";return n!==""?parseInt(n,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class JetStreamSubscriptionImpl extends TypedSubscription{constructor(h,u,m){super(h.nc,u,m);ae(this,"js");ae(this,"monitor");this.js=h,this.monitor=null,this.sub.closed.then(()=>{this.monitor&&this.monitor.cancel()})}set info(h){this.sub.info=h}get info(){return this.sub.info}_resetOrderedConsumer(h){if(this.info===null||this.sub.isClosed())return;const u=createInbox(this.js.nc.options.inboxPrefix);this.js.nc._resub(this.sub,u);const s=this.info;s.config.name=nuid.next(),s.ordered_consumer_sequence.delivery_seq=0,s.flow_control.heartbeat_count=0,s.flow_control.fc_count=0,s.flow_control.consumer_restarts++,s.deliver=u,s.config.deliver_subject=u,s.config.deliver_policy=DeliverPolicy.StartSequence,s.config.opt_start_seq=h;const g={};g.stream_name=this.info.stream,g.config=s.config;const x=`${s.api.prefix}.CONSUMER.CREATE.${s.stream}`;this.js._request(x,g,{retries:-1}).then(_=>{const M=_,b=this.sub.info;b.last=M,this.info.config=M.config,this.info.name=M.name}).catch(_=>{const M=new NatsError(`unable to recreate ordered consumer ${s.stream} at seq ${h}`,ErrorCode.RequestError,_);this.sub.callback(M,{})})}_maybeSetupHbMonitoring(){var u,m;const h=((m=(u=this.info)==null?void 0:u.config)==null?void 0:m.idle_heartbeat)||0;h&&this._setupHbMonitoring(millis(h))}_setupHbMonitoring(h,u=0){const m={cancelAfter:0,maxOut:2};u&&(m.cancelAfter=u);const s=this.sub,g=x=>{var b,S,E,A;const _=newJsErrorMsg(409,`${Js409Errors.IdleHeartbeatMissed}: ${x}`,this.sub.subject);if(!((b=this.info)==null?void 0:b.ordered))this.sub.callback(null,_);else{if(!this.js.nc.protocol.connected)return!1;const B=((E=(S=this.info)==null?void 0:S.ordered_consumer_sequence)==null?void 0:E.stream_seq)||0;return this._resetOrderedConsumer(B+1),(A=this.monitor)==null||A.restart(),!1}return!s.noIterator};this.monitor=new IdleHeartbeatMonitor(h,g,m)}_checkHbOrderConsumer(h){const u=h.headers.get(JsHeaders.ConsumerStalledHdr);u!==""&&this.js.nc.publish(u);const m=parseInt(h.headers.get(JsHeaders.LastConsumerSeqHdr),10),s=this.info.ordered_consumer_sequence;return this.info.flow_control.heartbeat_count++,m!==s.delivery_seq&&this._resetOrderedConsumer(s.stream_seq+1),!1}_checkOrderedConsumer(h){const u=this.info.ordered_consumer_sequence,m=h.info.streamSequence,s=h.info.deliverySequence;return s!=u.delivery_seq+1?(this._resetOrderedConsumer(u.stream_seq+1),!1):(u.delivery_seq=s,u.stream_seq=m,!0)}async destroy(){this.isClosed()||await this.drain();const h=this.sub.info,u=h.config.durable_name||h.name,m=`${h.api.prefix}.CONSUMER.DELETE.${h.stream}.${u}`;await h.api._request(m)}async consumerInfo(){const h=this.sub.info,u=h.config.durable_name||h.name,m=`${h.api.prefix}.CONSUMER.INFO.${h.stream}.${u}`,s=await h.api._request(m);return h.last=s,s}}class JetStreamPullSubscriptionImpl extends JetStreamSubscriptionImpl{constructor(n,h,u){super(n,h,u)}pull(n={batch:1}){const{stream:h,config:u,name:m}=this.sub.info,s=u.durable_name??m,g={};if(g.batch=n.batch||1,g.no_wait=n.no_wait||!1,(n.max_bytes??0)>0){const M=this.js.nc.features.get(Feature.JS_PULL_MAX_BYTES);if(!M.ok)throw new Error(`max_bytes is only supported on servers ${M.min} or better`);g.max_bytes=n.max_bytes}let x=0;n.expires&&n.expires>0&&(x=n.expires,g.expires=nanos(x));let _=0;if(n.idle_heartbeat&&n.idle_heartbeat>0&&(_=n.idle_heartbeat,g.idle_heartbeat=nanos(_)),_&&x===0)throw new Error("idle_heartbeat requires expires");if(_>x)throw new Error("expires must be greater than idle_heartbeat");if(this.info){this.monitor&&this.monitor.cancel(),x&&_&&(this.monitor?this.monitor._change(_,x):this._setupHbMonitoring(_,x));const M=this.info.api,b=`${M.prefix}.CONSUMER.MSG.NEXT.${h}.${s}`,S=this.sub.subject;M.nc.publish(b,M.jc.encode(g),{reply:S})}}}function msgAdapter(c){return c?iterMsgAdapter:cbMsgAdapter}function cbMsgAdapter(c,n){return c?[c,null]:(c=checkJsError(n),c?[c,null]:[null,toJsMsg(n)])}function iterMsgAdapter(c,n){if(c)return[c,null];const h=checkJsError(n);return h!==null?[hideNonTerminalJsErrors(h),null]:[null,toJsMsg(n)]}function hideNonTerminalJsErrors(c){if(c!==null)switch(c.code){case ErrorCode.JetStream404NoMessages:case ErrorCode.JetStream408RequestTimeout:return null;case ErrorCode.JetStream409:return isTerminal409(c)?c:null;default:return c}return null}function autoAckJsMsg(c){c&&c.ack()}function parseInfo(c){const n=c.split(".");if(n.length===9&&n.splice(2,0,"_",""),n.length<11||n[0]!=="$JS"||n[1]!=="ACK")throw new Error("not js message");const h={};return h.domain=n[2]==="_"?"":n[2],h.account_hash=n[3],h.stream=n[4],h.consumer=n[5],h.redeliveryCount=parseInt(n[6],10),h.redelivered=h.redeliveryCount>1,h.streamSequence=parseInt(n[7],10),h.deliverySequence=parseInt(n[8],10),h.timestampNanos=parseInt(n[9],10),h.pending=parseInt(n[10],10),h}class JsMsgImpl{constructor(n){ae(this,"msg");ae(this,"di");ae(this,"didAck");this.msg=n,this.didAck=!1}get subject(){return this.msg.subject}get sid(){return this.msg.sid}get data(){return this.msg.data}get headers(){return this.msg.headers}get info(){return this.di||(this.di=parseInfo(this.reply)),this.di}get redelivered(){return this.info.redeliveryCount>1}get reply(){return this.msg.reply||""}get seq(){return this.info.streamSequence}doAck(n){this.didAck||(this.didAck=!this.isWIP(n),this.msg.respond(n))}isWIP(n){return n.length===4&&n[0]===WPI[0]&&n[1]===WPI[1]&&n[2]===WPI[2]&&n[3]===WPI[3]}async ackAck(){var h;const n=deferred();if(this.didAck)n.resolve(!1);else if(this.didAck=!0,this.msg.reply){const m=this.msg.publisher,s=!((h=m.options)!=null&&h.noAsyncTraces),g=new RequestOne(m.muxSubscriptions,this.msg.reply,{timeout:1e3},s);m.request(g);try{m.publish(this.msg.reply,ACK,{reply:`${m.muxSubscriptions.baseInbox}${g.token}`})}catch(x){g.cancel(x)}try{await Promise.race([g.timer,g.deferred]),n.resolve(!0)}catch(x){g.cancel(x),n.reject(x)}}else n.resolve(!1);return n}ack(){this.doAck(ACK)}nak(n){let h=NAK;n&&(h=StringCodec().encode(`-NAK ${JSON.stringify({delay:nanos(n)})}`)),this.doAck(h)}working(){this.doAck(WPI)}next(n,h={batch:1}){const u={};u.batch=h.batch||1,u.no_wait=h.no_wait||!1,h.expires&&h.expires>0&&(u.expires=nanos(h.expires));const m=JSONCodec().encode(u),s=DataBuffer.concat(NXT,SPACE,m),g=n?{reply:n}:void 0;this.msg.respond(s,g)}term(n=""){let h=TERM;(n==null?void 0:n.length)>0&&(h=StringCodec().encode(`+TERM ${n}`)),this.doAck(h)}json(){return this.msg.json()}string(){return this.msg.string()}}const VERSION="1.27.0",LANG="nats.ws";class WsTransport{constructor(){ae(this,"version");ae(this,"lang");ae(this,"closeError");ae(this,"connected");ae(this,"done");ae(this,"socket");ae(this,"options");ae(this,"socketClosed");ae(this,"encrypted");ae(this,"peeked");ae(this,"yields");ae(this,"signal");ae(this,"closedNotification");this.version=VERSION,this.lang=LANG,this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=deferred(),this.closedNotification=deferred()}async connect(n,h){const u=deferred();if(h.tls)return u.reject(new NatsError("tls",ErrorCode.InvalidOption)),u;this.options=h;const m=n.src;if(h.wsFactory){const{socket:s,encrypted:g}=await h.wsFactory(n.src,h);this.socket=s,this.encrypted=g}else this.encrypted=m.indexOf("wss://")===0,this.socket=new WebSocket(m);return this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.isDiscarded()},this.socket.onmessage=s=>{if(this.isDiscarded())return;if(this.yields.push(new Uint8Array(s.data)),this.peeked){this.signal.resolve();return}const g=DataBuffer.concat(...this.yields),x=extractProtocolMessage(g);if(x!==""){const _=INFO.exec(x);if(!_){h.debug&&console.error("!!!",render(g)),u.reject(new Error("unexpected response from server"));return}try{const M=JSON.parse(_[1]);checkOptions(M,this.options),this.peeked=!0,this.connected=!0,this.signal.resolve(),u.resolve()}catch(M){u.reject(M);return}}},this.socket.onclose=s=>{if(this.isDiscarded())return;this.socketClosed=!0;let g;this.done||(s.wasClean||(g=new Error(s.reason)),this._closed(g))},this.socket.onerror=s=>{if(this.isDiscarded())return;const g=s,x=new NatsError(g.message,ErrorCode.Unknown,new Error(g.error));u.reject(x)},u}disconnect(){this._closed(void 0,!0)}async _closed(n,h=!0){if(!this.isDiscarded()&&this.connected&&!this.done){if(this.closeError=n,!n)for(;!this.socketClosed&&this.socket.bufferedAmount>0;)await delay(100);this.done=!0;try{this.socket.close(n?1002:1e3,n?n.message:void 0)}catch{}h&&this.closedNotification.resolve(n)}}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}async*iterate(){for(;;){if(this.isDiscarded())return;this.yields.length===0&&await this.signal;const n=this.yields;this.yields=[];for(let h=0;h<n.length;h++)this.options.debug&&console.info(`> ${render(n[h])}`),yield n[h];if(this.done)break;this.yields.length===0&&(n.length=0,this.yields=n,this.signal=deferred())}}isEncrypted(){return this.connected&&this.encrypted}send(n){if(!this.isDiscarded())try{this.socket.send(n.buffer),this.options.debug&&console.info(`< ${render(n)}`);return}catch(h){this.options.debug&&console.error(`!!! ${render(n)}: ${h}`)}}close(n){return this._closed(n,!1)}closed(){return this.closedNotification}isDiscarded(){return this.done?(this.discard(),!0):!1}discard(){var n;this.done=!0;try{(n=this.socket)==null||n.close()}catch{}}}function wsUrlParseFn(c,n){/^(.*:\/\/)(.*)/.test(c)||(typeof n=="boolean"?c=`${n===!0?"https":"http"}://${c}`:c=`https://${c}`);let u=new URL(c);const m=u.protocol.toLowerCase();m==="ws:"&&(n=!1),m==="wss:"&&(n=!0),m!=="https:"&&m!=="http"&&(c=c.replace(/^(.*:\/\/)(.*)/gm,"$2"),u=new URL(`http://${c}`));let s,g;const x=u.hostname,_=u.pathname,M=u.search||"";switch(m){case"http:":case"ws:":case"nats:":g=u.port||"80",s="ws:";break;case"https:":case"wss:":case"tls:":g=u.port||"443",s="wss:";break;default:g=u.port||n===!0?"443":"80",s=n===!0?"wss:":"ws:";break}return`${s}//${x}:${g}${_}${M}`}function connect$1(c={}){return setTransportFactory({defaultPort:443,urlParseFn:wsUrlParseFn,factory:()=>new WsTransport}),NatsConnectionImpl.connect(c)}function bufferMessages(c,n){const{delayMs:h=500,noBufferCount:u=5}=n||{};let m=[],s,g=0;const x=()=>setTimeout(()=>{c(m),m=[],s=void 0},h);return _=>{if(g<u){c(_),g++;return}m.push(..._),s===void 0&&(s=x())}}let key$2=0;function createMessageId(){return`${key$2++}-${Date.now()}`}function decode$2(c){return new Uint8Array(c).buffer}function decodeMessage(c){const n=decode$2(c.data);return{id:createMessageId(),timestamp:new Date().toISOString(),subject:c.subject,data:n}}function liveSubscribe({subject:c,buffer:n,onError:h,onMessages:u},m){const s=n?bufferMessages(x=>u(x,c),n):u;return m.subscribe(c,{callback:(x,_)=>{if(x){h("NATS subscription error.",x);return}const M=decodeMessage(_);s([M],c)}})}function subscribe(c,n){const h=liveSubscribe(c,n);return{unsubscribe:()=>h.unsubscribe()}}function createAuthenticator(c){return credsAuthenticator(new TextEncoder().encode(c))}var buffer$1={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62,revLookup[95]=63;function getLens(c){var n=c.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=c.indexOf("=");h===-1&&(h=n);var u=h===n?0:4-h%4;return[h,u]}function byteLength(c){var n=getLens(c),h=n[0],u=n[1];return(h+u)*3/4-u}function _byteLength(c,n,h){return(n+h)*3/4-h}function toByteArray(c){var n,h=getLens(c),u=h[0],m=h[1],s=new Arr(_byteLength(c,u,m)),g=0,x=m>0?u-4:u,_;for(_=0;_<x;_+=4)n=revLookup[c.charCodeAt(_)]<<18|revLookup[c.charCodeAt(_+1)]<<12|revLookup[c.charCodeAt(_+2)]<<6|revLookup[c.charCodeAt(_+3)],s[g++]=n>>16&255,s[g++]=n>>8&255,s[g++]=n&255;return m===2&&(n=revLookup[c.charCodeAt(_)]<<2|revLookup[c.charCodeAt(_+1)]>>4,s[g++]=n&255),m===1&&(n=revLookup[c.charCodeAt(_)]<<10|revLookup[c.charCodeAt(_+1)]<<4|revLookup[c.charCodeAt(_+2)]>>2,s[g++]=n>>8&255,s[g++]=n&255),s}function tripletToBase64(c){return lookup[c>>18&63]+lookup[c>>12&63]+lookup[c>>6&63]+lookup[c&63]}function encodeChunk(c,n,h){for(var u,m=[],s=n;s<h;s+=3)u=(c[s]<<16&16711680)+(c[s+1]<<8&65280)+(c[s+2]&255),m.push(tripletToBase64(u));return m.join("")}function fromByteArray(c){for(var n,h=c.length,u=h%3,m=[],s=16383,g=0,x=h-u;g<x;g+=s)m.push(encodeChunk(c,g,g+s>x?x:g+s));return u===1?(n=c[h-1],m.push(lookup[n>>2]+lookup[n<<4&63]+"==")):u===2&&(n=(c[h-2]<<8)+c[h-1],m.push(lookup[n>>10]+lookup[n>>4&63]+lookup[n<<2&63]+"=")),m.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(c,n,h,u,m){var s,g,x=m*8-u-1,_=(1<<x)-1,M=_>>1,b=-7,S=h?m-1:0,E=h?-1:1,A=c[n+S];for(S+=E,s=A&(1<<-b)-1,A>>=-b,b+=x;b>0;s=s*256+c[n+S],S+=E,b-=8);for(g=s&(1<<-b)-1,s>>=-b,b+=u;b>0;g=g*256+c[n+S],S+=E,b-=8);if(s===0)s=1-M;else{if(s===_)return g?NaN:(A?-1:1)*(1/0);g=g+Math.pow(2,u),s=s-M}return(A?-1:1)*g*Math.pow(2,s-u)},ieee754.write=function(c,n,h,u,m,s){var g,x,_,M=s*8-m-1,b=(1<<M)-1,S=b>>1,E=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=u?0:s-1,B=u?1:-1,R=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,g=b):(g=Math.floor(Math.log(n)/Math.LN2),n*(_=Math.pow(2,-g))<1&&(g--,_*=2),g+S>=1?n+=E/_:n+=E*Math.pow(2,1-S),n*_>=2&&(g++,_/=2),g+S>=b?(x=0,g=b):g+S>=1?(x=(n*_-1)*Math.pow(2,m),g=g+S):(x=n*Math.pow(2,S-1)*Math.pow(2,m),g=0));m>=8;c[h+A]=x&255,A+=B,x/=256,m-=8);for(g=g<<m|x,M+=m;M>0;c[h+A]=g&255,A+=B,g/=256,M-=8);c[h+A-B]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(c){const n=base64Js,h=ieee754,u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=b,c.SlowBuffer=Q,c.INSPECT_MAX_BYTES=50;const m=2147483647;c.kMaxLength=m;const{Uint8Array:s,ArrayBuffer:g,SharedArrayBuffer:x}=globalThis;b.TYPED_ARRAY_SUPPORT=_(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{const K=new s(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,s.prototype),Object.setPrototypeOf(K,P),K.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function M(K){if(K>m)throw new RangeError('The value "'+K+'" is invalid for option "size"');const P=new s(K);return Object.setPrototypeOf(P,b.prototype),P}function b(K,P,D){if(typeof K=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(K)}return S(K,P,D)}b.poolSize=8192;function S(K,P,D){if(typeof K=="string")return R(K,P);if(g.isView(K))return k(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Le(K,g)||K&&Le(K.buffer,g)||typeof x<"u"&&(Le(K,x)||K&&Le(K.buffer,x)))return O(K,P,D);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Y=K.valueOf&&K.valueOf();if(Y!=null&&Y!==K)return b.from(Y,P,D);const oe=U(K);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return b.from(K[Symbol.toPrimitive]("string"),P,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}b.from=function(K,P,D){return S(K,P,D)},Object.setPrototypeOf(b.prototype,s.prototype),Object.setPrototypeOf(b,s);function E(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function A(K,P,D){return E(K),K<=0?M(K):P!==void 0?typeof D=="string"?M(K).fill(P,D):M(K).fill(P):M(K)}b.alloc=function(K,P,D){return A(K,P,D)};function B(K){return E(K),M(K<0?0:L(K)|0)}b.allocUnsafe=function(K){return B(K)},b.allocUnsafeSlow=function(K){return B(K)};function R(K,P){if((typeof P!="string"||P==="")&&(P="utf8"),!b.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const D=ie(K,P)|0;let Y=M(D);const oe=Y.write(K,P);return oe!==D&&(Y=Y.slice(0,oe)),Y}function T(K){const P=K.length<0?0:L(K.length)|0,D=M(P);for(let Y=0;Y<P;Y+=1)D[Y]=K[Y]&255;return D}function k(K){if(Le(K,s)){const P=new s(K);return O(P.buffer,P.byteOffset,P.byteLength)}return T(K)}function O(K,P,D){if(P<0||K.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<P+(D||0))throw new RangeError('"length" is outside of buffer bounds');let Y;return P===void 0&&D===void 0?Y=new s(K):D===void 0?Y=new s(K,P):Y=new s(K,P,D),Object.setPrototypeOf(Y,b.prototype),Y}function U(K){if(b.isBuffer(K)){const P=L(K.length)|0,D=M(P);return D.length===0||K.copy(D,0,0,P),D}if(K.length!==void 0)return typeof K.length!="number"||lt(K.length)?M(0):T(K);if(K.type==="Buffer"&&Array.isArray(K.data))return T(K.data)}function L(K){if(K>=m)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m.toString(16)+" bytes");return K|0}function Q(K){return+K!=K&&(K=0),b.alloc(+K)}b.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==b.prototype},b.compare=function(P,D){if(Le(P,s)&&(P=b.from(P,P.offset,P.byteLength)),Le(D,s)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(P)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===D)return 0;let Y=P.length,oe=D.length;for(let Re=0,ce=Math.min(Y,oe);Re<ce;++Re)if(P[Re]!==D[Re]){Y=P[Re],oe=D[Re];break}return Y<oe?-1:oe<Y?1:0},b.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(P,D){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return b.alloc(0);let Y;if(D===void 0)for(D=0,Y=0;Y<P.length;++Y)D+=P[Y].length;const oe=b.allocUnsafe(D);let Re=0;for(Y=0;Y<P.length;++Y){let ce=P[Y];if(Le(ce,s))Re+ce.length>oe.length?(b.isBuffer(ce)||(ce=b.from(ce)),ce.copy(oe,Re)):s.prototype.set.call(oe,ce,Re);else if(b.isBuffer(ce))ce.copy(oe,Re);else throw new TypeError('"list" argument must be an Array of Buffers');Re+=ce.length}return oe};function ie(K,P){if(b.isBuffer(K))return K.length;if(g.isView(K)||Le(K,g))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const D=K.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&D===0)return 0;let oe=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return ut(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return ht(K).length;default:if(oe)return Y?-1:ut(K).length;P=(""+P).toLowerCase(),oe=!0}}b.byteLength=ie;function we(K,P,D){let Y=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,P>>>=0,D<=P))return"";for(K||(K="utf8");;)switch(K){case"hex":return q(this,P,D);case"utf8":case"utf-8":return v(this,P,D);case"ascii":return t(this,P,D);case"latin1":case"binary":return p(this,P,D);case"base64":return d(this,P,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,P,D);default:if(Y)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),Y=!0}}b.prototype._isBuffer=!0;function ye(K,P,D){const Y=K[P];K[P]=K[D],K[D]=Y}b.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<P;D+=2)ye(this,D,D+1);return this},b.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<P;D+=4)ye(this,D,D+3),ye(this,D+1,D+2);return this},b.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<P;D+=8)ye(this,D,D+7),ye(this,D+1,D+6),ye(this,D+2,D+5),ye(this,D+3,D+4);return this},b.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?v(this,0,P):we.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(P){if(!b.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:b.compare(this,P)===0},b.prototype.inspect=function(){let P="";const D=c.INSPECT_MAX_BYTES;return P=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(P+=" ... "),"<Buffer "+P+">"},u&&(b.prototype[u]=b.prototype.inspect),b.prototype.compare=function(P,D,Y,oe,Re){if(Le(P,s)&&(P=b.from(P,P.offset,P.byteLength)),!b.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(D===void 0&&(D=0),Y===void 0&&(Y=P?P.length:0),oe===void 0&&(oe=0),Re===void 0&&(Re=this.length),D<0||Y>P.length||oe<0||Re>this.length)throw new RangeError("out of range index");if(oe>=Re&&D>=Y)return 0;if(oe>=Re)return-1;if(D>=Y)return 1;if(D>>>=0,Y>>>=0,oe>>>=0,Re>>>=0,this===P)return 0;let ce=Re-oe,Te=Y-D;const ft=Math.min(ce,Te),Pe=this.slice(oe,Re),Ue=P.slice(D,Y);for(let ot=0;ot<ft;++ot)if(Pe[ot]!==Ue[ot]){ce=Pe[ot],Te=Ue[ot];break}return ce<Te?-1:Te<ce?1:0};function se(K,P,D,Y,oe){if(K.length===0)return-1;if(typeof D=="string"?(Y=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,lt(D)&&(D=oe?0:K.length-1),D<0&&(D=K.length+D),D>=K.length){if(oe)return-1;D=K.length-1}else if(D<0)if(oe)D=0;else return-1;if(typeof P=="string"&&(P=b.from(P,Y)),b.isBuffer(P))return P.length===0?-1:ke(K,P,D,Y,oe);if(typeof P=="number")return P=P&255,typeof s.prototype.indexOf=="function"?oe?s.prototype.indexOf.call(K,P,D):s.prototype.lastIndexOf.call(K,P,D):ke(K,[P],D,Y,oe);throw new TypeError("val must be string, number or Buffer")}function ke(K,P,D,Y,oe){let Re=1,ce=K.length,Te=P.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(K.length<2||P.length<2)return-1;Re=2,ce/=2,Te/=2,D/=2}function ft(Ue,ot){return Re===1?Ue[ot]:Ue.readUInt16BE(ot*Re)}let Pe;if(oe){let Ue=-1;for(Pe=D;Pe<ce;Pe++)if(ft(K,Pe)===ft(P,Ue===-1?0:Pe-Ue)){if(Ue===-1&&(Ue=Pe),Pe-Ue+1===Te)return Ue*Re}else Ue!==-1&&(Pe-=Pe-Ue),Ue=-1}else for(D+Te>ce&&(D=ce-Te),Pe=D;Pe>=0;Pe--){let Ue=!0;for(let ot=0;ot<Te;ot++)if(ft(K,Pe+ot)!==ft(P,ot)){Ue=!1;break}if(Ue)return Pe}return-1}b.prototype.includes=function(P,D,Y){return this.indexOf(P,D,Y)!==-1},b.prototype.indexOf=function(P,D,Y){return se(this,P,D,Y,!0)},b.prototype.lastIndexOf=function(P,D,Y){return se(this,P,D,Y,!1)};function w(K,P,D,Y){D=Number(D)||0;const oe=K.length-D;Y?(Y=Number(Y),Y>oe&&(Y=oe)):Y=oe;const Re=P.length;Y>Re/2&&(Y=Re/2);let ce;for(ce=0;ce<Y;++ce){const Te=parseInt(P.substr(ce*2,2),16);if(lt(Te))return ce;K[D+ce]=Te}return ce}function e(K,P,D,Y){return Ie(ut(P,K.length-D),K,D,Y)}function r(K,P,D,Y){return Ie(Ce(P),K,D,Y)}function a(K,P,D,Y){return Ie(ht(P),K,D,Y)}function o(K,P,D,Y){return Ie(je(P,K.length-D),K,D,Y)}b.prototype.write=function(P,D,Y,oe){if(D===void 0)oe="utf8",Y=this.length,D=0;else if(Y===void 0&&typeof D=="string")oe=D,Y=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(Y)?(Y=Y>>>0,oe===void 0&&(oe="utf8")):(oe=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Re=this.length-D;if((Y===void 0||Y>Re)&&(Y=Re),P.length>0&&(Y<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");let ce=!1;for(;;)switch(oe){case"hex":return w(this,P,D,Y);case"utf8":case"utf-8":return e(this,P,D,Y);case"ascii":case"latin1":case"binary":return r(this,P,D,Y);case"base64":return a(this,P,D,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o(this,P,D,Y);default:if(ce)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),ce=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(K,P,D){return P===0&&D===K.length?n.fromByteArray(K):n.fromByteArray(K.slice(P,D))}function v(K,P,D){D=Math.min(K.length,D);const Y=[];let oe=P;for(;oe<D;){const Re=K[oe];let ce=null,Te=Re>239?4:Re>223?3:Re>191?2:1;if(oe+Te<=D){let ft,Pe,Ue,ot;switch(Te){case 1:Re<128&&(ce=Re);break;case 2:ft=K[oe+1],(ft&192)===128&&(ot=(Re&31)<<6|ft&63,ot>127&&(ce=ot));break;case 3:ft=K[oe+1],Pe=K[oe+2],(ft&192)===128&&(Pe&192)===128&&(ot=(Re&15)<<12|(ft&63)<<6|Pe&63,ot>2047&&(ot<55296||ot>57343)&&(ce=ot));break;case 4:ft=K[oe+1],Pe=K[oe+2],Ue=K[oe+3],(ft&192)===128&&(Pe&192)===128&&(Ue&192)===128&&(ot=(Re&15)<<18|(ft&63)<<12|(Pe&63)<<6|Ue&63,ot>65535&&ot<1114112&&(ce=ot))}}ce===null?(ce=65533,Te=1):ce>65535&&(ce-=65536,Y.push(ce>>>10&1023|55296),ce=56320|ce&1023),Y.push(ce),oe+=Te}return l(Y)}const y=4096;function l(K){const P=K.length;if(P<=y)return String.fromCharCode.apply(String,K);let D="",Y=0;for(;Y<P;)D+=String.fromCharCode.apply(String,K.slice(Y,Y+=y));return D}function t(K,P,D){let Y="";D=Math.min(K.length,D);for(let oe=P;oe<D;++oe)Y+=String.fromCharCode(K[oe]&127);return Y}function p(K,P,D){let Y="";D=Math.min(K.length,D);for(let oe=P;oe<D;++oe)Y+=String.fromCharCode(K[oe]);return Y}function q(K,P,D){const Y=K.length;(!P||P<0)&&(P=0),(!D||D<0||D>Y)&&(D=Y);let oe="";for(let Re=P;Re<D;++Re)oe+=$e[K[Re]];return oe}function I(K,P,D){const Y=K.slice(P,D);let oe="";for(let Re=0;Re<Y.length-1;Re+=2)oe+=String.fromCharCode(Y[Re]+Y[Re+1]*256);return oe}b.prototype.slice=function(P,D){const Y=this.length;P=~~P,D=D===void 0?Y:~~D,P<0?(P+=Y,P<0&&(P=0)):P>Y&&(P=Y),D<0?(D+=Y,D<0&&(D=0)):D>Y&&(D=Y),D<P&&(D=P);const oe=this.subarray(P,D);return Object.setPrototypeOf(oe,b.prototype),oe};function $(K,P,D){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+P>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(P,D,Y){P=P>>>0,D=D>>>0,Y||$(P,D,this.length);let oe=this[P],Re=1,ce=0;for(;++ce<D&&(Re*=256);)oe+=this[P+ce]*Re;return oe},b.prototype.readUintBE=b.prototype.readUIntBE=function(P,D,Y){P=P>>>0,D=D>>>0,Y||$(P,D,this.length);let oe=this[P+--D],Re=1;for(;D>0&&(Re*=256);)oe+=this[P+--D]*Re;return oe},b.prototype.readUint8=b.prototype.readUInt8=function(P,D){return P=P>>>0,D||$(P,1,this.length),this[P]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(P,D){return P=P>>>0,D||$(P,2,this.length),this[P]|this[P+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(P,D){return P=P>>>0,D||$(P,2,this.length),this[P]<<8|this[P+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(P,D){return P=P>>>0,D||$(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(P,D){return P=P>>>0,D||$(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},b.prototype.readBigUInt64LE=ze(function(P){P=P>>>0,qe(P,"offset");const D=this[P],Y=this[P+7];(D===void 0||Y===void 0)&&nt(P,this.length-8);const oe=D+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,Re=this[++P]+this[++P]*2**8+this[++P]*2**16+Y*2**24;return BigInt(oe)+(BigInt(Re)<<BigInt(32))}),b.prototype.readBigUInt64BE=ze(function(P){P=P>>>0,qe(P,"offset");const D=this[P],Y=this[P+7];(D===void 0||Y===void 0)&&nt(P,this.length-8);const oe=D*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],Re=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+Y;return(BigInt(oe)<<BigInt(32))+BigInt(Re)}),b.prototype.readIntLE=function(P,D,Y){P=P>>>0,D=D>>>0,Y||$(P,D,this.length);let oe=this[P],Re=1,ce=0;for(;++ce<D&&(Re*=256);)oe+=this[P+ce]*Re;return Re*=128,oe>=Re&&(oe-=Math.pow(2,8*D)),oe},b.prototype.readIntBE=function(P,D,Y){P=P>>>0,D=D>>>0,Y||$(P,D,this.length);let oe=D,Re=1,ce=this[P+--oe];for(;oe>0&&(Re*=256);)ce+=this[P+--oe]*Re;return Re*=128,ce>=Re&&(ce-=Math.pow(2,8*D)),ce},b.prototype.readInt8=function(P,D){return P=P>>>0,D||$(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},b.prototype.readInt16LE=function(P,D){P=P>>>0,D||$(P,2,this.length);const Y=this[P]|this[P+1]<<8;return Y&32768?Y|4294901760:Y},b.prototype.readInt16BE=function(P,D){P=P>>>0,D||$(P,2,this.length);const Y=this[P+1]|this[P]<<8;return Y&32768?Y|4294901760:Y},b.prototype.readInt32LE=function(P,D){return P=P>>>0,D||$(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},b.prototype.readInt32BE=function(P,D){return P=P>>>0,D||$(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},b.prototype.readBigInt64LE=ze(function(P){P=P>>>0,qe(P,"offset");const D=this[P],Y=this[P+7];(D===void 0||Y===void 0)&&nt(P,this.length-8);const oe=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(Y<<24);return(BigInt(oe)<<BigInt(32))+BigInt(D+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),b.prototype.readBigInt64BE=ze(function(P){P=P>>>0,qe(P,"offset");const D=this[P],Y=this[P+7];(D===void 0||Y===void 0)&&nt(P,this.length-8);const oe=(D<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(oe)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+Y)}),b.prototype.readFloatLE=function(P,D){return P=P>>>0,D||$(P,4,this.length),h.read(this,P,!0,23,4)},b.prototype.readFloatBE=function(P,D){return P=P>>>0,D||$(P,4,this.length),h.read(this,P,!1,23,4)},b.prototype.readDoubleLE=function(P,D){return P=P>>>0,D||$(P,8,this.length),h.read(this,P,!0,52,8)},b.prototype.readDoubleBE=function(P,D){return P=P>>>0,D||$(P,8,this.length),h.read(this,P,!1,52,8)};function G(K,P,D,Y,oe,Re){if(!b.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>oe||P<Re)throw new RangeError('"value" argument is out of bounds');if(D+Y>K.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(P,D,Y,oe){if(P=+P,D=D>>>0,Y=Y>>>0,!oe){const Te=Math.pow(2,8*Y)-1;G(this,P,D,Y,Te,0)}let Re=1,ce=0;for(this[D]=P&255;++ce<Y&&(Re*=256);)this[D+ce]=P/Re&255;return D+Y},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(P,D,Y,oe){if(P=+P,D=D>>>0,Y=Y>>>0,!oe){const Te=Math.pow(2,8*Y)-1;G(this,P,D,Y,Te,0)}let Re=Y-1,ce=1;for(this[D+Re]=P&255;--Re>=0&&(ce*=256);)this[D+Re]=P/ce&255;return D+Y},b.prototype.writeUint8=b.prototype.writeUInt8=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,1,255,0),this[D]=P&255,D+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,2,65535,0),this[D]=P&255,this[D+1]=P>>>8,D+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,2,65535,0),this[D]=P>>>8,this[D+1]=P&255,D+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,4,4294967295,0),this[D+3]=P>>>24,this[D+2]=P>>>16,this[D+1]=P>>>8,this[D]=P&255,D+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,4,4294967295,0),this[D]=P>>>24,this[D+1]=P>>>16,this[D+2]=P>>>8,this[D+3]=P&255,D+4};function V(K,P,D,Y,oe){Ae(P,Y,oe,K,D,7);let Re=Number(P&BigInt(4294967295));K[D++]=Re,Re=Re>>8,K[D++]=Re,Re=Re>>8,K[D++]=Re,Re=Re>>8,K[D++]=Re;let ce=Number(P>>BigInt(32)&BigInt(4294967295));return K[D++]=ce,ce=ce>>8,K[D++]=ce,ce=ce>>8,K[D++]=ce,ce=ce>>8,K[D++]=ce,D}function N(K,P,D,Y,oe){Ae(P,Y,oe,K,D,7);let Re=Number(P&BigInt(4294967295));K[D+7]=Re,Re=Re>>8,K[D+6]=Re,Re=Re>>8,K[D+5]=Re,Re=Re>>8,K[D+4]=Re;let ce=Number(P>>BigInt(32)&BigInt(4294967295));return K[D+3]=ce,ce=ce>>8,K[D+2]=ce,ce=ce>>8,K[D+1]=ce,ce=ce>>8,K[D]=ce,D+8}b.prototype.writeBigUInt64LE=ze(function(P,D=0){return V(this,P,D,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=ze(function(P,D=0){return N(this,P,D,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(P,D,Y,oe){if(P=+P,D=D>>>0,!oe){const ft=Math.pow(2,8*Y-1);G(this,P,D,Y,ft-1,-ft)}let Re=0,ce=1,Te=0;for(this[D]=P&255;++Re<Y&&(ce*=256);)P<0&&Te===0&&this[D+Re-1]!==0&&(Te=1),this[D+Re]=(P/ce>>0)-Te&255;return D+Y},b.prototype.writeIntBE=function(P,D,Y,oe){if(P=+P,D=D>>>0,!oe){const ft=Math.pow(2,8*Y-1);G(this,P,D,Y,ft-1,-ft)}let Re=Y-1,ce=1,Te=0;for(this[D+Re]=P&255;--Re>=0&&(ce*=256);)P<0&&Te===0&&this[D+Re+1]!==0&&(Te=1),this[D+Re]=(P/ce>>0)-Te&255;return D+Y},b.prototype.writeInt8=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,1,127,-128),P<0&&(P=255+P+1),this[D]=P&255,D+1},b.prototype.writeInt16LE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,2,32767,-32768),this[D]=P&255,this[D+1]=P>>>8,D+2},b.prototype.writeInt16BE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,2,32767,-32768),this[D]=P>>>8,this[D+1]=P&255,D+2},b.prototype.writeInt32LE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,4,2147483647,-2147483648),this[D]=P&255,this[D+1]=P>>>8,this[D+2]=P>>>16,this[D+3]=P>>>24,D+4},b.prototype.writeInt32BE=function(P,D,Y){return P=+P,D=D>>>0,Y||G(this,P,D,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[D]=P>>>24,this[D+1]=P>>>16,this[D+2]=P>>>8,this[D+3]=P&255,D+4},b.prototype.writeBigInt64LE=ze(function(P,D=0){return V(this,P,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=ze(function(P,D=0){return N(this,P,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function W(K,P,D,Y,oe,Re){if(D+Y>K.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function Z(K,P,D,Y,oe){return P=+P,D=D>>>0,oe||W(K,P,D,4),h.write(K,P,D,Y,23,4),D+4}b.prototype.writeFloatLE=function(P,D,Y){return Z(this,P,D,!0,Y)},b.prototype.writeFloatBE=function(P,D,Y){return Z(this,P,D,!1,Y)};function ne(K,P,D,Y,oe){return P=+P,D=D>>>0,oe||W(K,P,D,8),h.write(K,P,D,Y,52,8),D+8}b.prototype.writeDoubleLE=function(P,D,Y){return ne(this,P,D,!0,Y)},b.prototype.writeDoubleBE=function(P,D,Y){return ne(this,P,D,!1,Y)},b.prototype.copy=function(P,D,Y,oe){if(!b.isBuffer(P))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!oe&&oe!==0&&(oe=this.length),D>=P.length&&(D=P.length),D||(D=0),oe>0&&oe<Y&&(oe=Y),oe===Y||P.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),P.length-D<oe-Y&&(oe=P.length-D+Y);const Re=oe-Y;return this===P&&typeof s.prototype.copyWithin=="function"?this.copyWithin(D,Y,oe):s.prototype.set.call(P,this.subarray(Y,oe),D),Re},b.prototype.fill=function(P,D,Y,oe){if(typeof P=="string"){if(typeof D=="string"?(oe=D,D=0,Y=this.length):typeof Y=="string"&&(oe=Y,Y=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!b.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(P.length===1){const ce=P.charCodeAt(0);(oe==="utf8"&&ce<128||oe==="latin1")&&(P=ce)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(D<0||this.length<D||this.length<Y)throw new RangeError("Out of range index");if(Y<=D)return this;D=D>>>0,Y=Y===void 0?this.length:Y>>>0,P||(P=0);let Re;if(typeof P=="number")for(Re=D;Re<Y;++Re)this[Re]=P;else{const ce=b.isBuffer(P)?P:b.from(P,oe),Te=ce.length;if(Te===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Re=0;Re<Y-D;++Re)this[Re+D]=ce[Re%Te]}return this};const ee={};function z(K,P,D){ee[K]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:oe,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}z("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(K,P){return`The "${K}" argument must be of type number. Received type ${typeof P}`},TypeError),z("ERR_OUT_OF_RANGE",function(K,P,D){let Y=`The value of "${K}" is out of range.`,oe=D;return Number.isInteger(D)&&Math.abs(D)>2**32?oe=ue(String(D)):typeof D=="bigint"&&(oe=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(oe=ue(oe)),oe+="n"),Y+=` It must be ${P}. Received ${oe}`,Y},RangeError);function ue(K){let P="",D=K.length;const Y=K[0]==="-"?1:0;for(;D>=Y+4;D-=3)P=`_${K.slice(D-3,D)}${P}`;return`${K.slice(0,D)}${P}`}function Ze(K,P,D){qe(P,"offset"),(K[P]===void 0||K[P+D]===void 0)&&nt(P,K.length-(D+1))}function Ae(K,P,D,Y,oe,Re){if(K>D||K<P){const ce=typeof P=="bigint"?"n":"";let Te;throw P===0||P===BigInt(0)?Te=`>= 0${ce} and < 2${ce} ** ${(Re+1)*8}${ce}`:Te=`>= -(2${ce} ** ${(Re+1)*8-1}${ce}) and < 2 ** ${(Re+1)*8-1}${ce}`,new ee.ERR_OUT_OF_RANGE("value",Te,K)}Ze(Y,oe,Re)}function qe(K,P){if(typeof K!="number")throw new ee.ERR_INVALID_ARG_TYPE(P,"number",K)}function nt(K,P,D){throw Math.floor(K)!==K?(qe(K,D),new ee.ERR_OUT_OF_RANGE("offset","an integer",K)):P<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${P}`,K)}const Ne=/[^+/0-9A-Za-z-_]/g;function ve(K){if(K=K.split("=")[0],K=K.trim().replace(Ne,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function ut(K,P){P=P||1/0;let D;const Y=K.length;let oe=null;const Re=[];for(let ce=0;ce<Y;++ce){if(D=K.charCodeAt(ce),D>55295&&D<57344){if(!oe){if(D>56319){(P-=3)>-1&&Re.push(239,191,189);continue}else if(ce+1===Y){(P-=3)>-1&&Re.push(239,191,189);continue}oe=D;continue}if(D<56320){(P-=3)>-1&&Re.push(239,191,189),oe=D;continue}D=(oe-55296<<10|D-56320)+65536}else oe&&(P-=3)>-1&&Re.push(239,191,189);if(oe=null,D<128){if((P-=1)<0)break;Re.push(D)}else if(D<2048){if((P-=2)<0)break;Re.push(D>>6|192,D&63|128)}else if(D<65536){if((P-=3)<0)break;Re.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((P-=4)<0)break;Re.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return Re}function Ce(K){const P=[];for(let D=0;D<K.length;++D)P.push(K.charCodeAt(D)&255);return P}function je(K,P){let D,Y,oe;const Re=[];for(let ce=0;ce<K.length&&!((P-=2)<0);++ce)D=K.charCodeAt(ce),Y=D>>8,oe=D%256,Re.push(oe),Re.push(Y);return Re}function ht(K){return n.toByteArray(ve(K))}function Ie(K,P,D,Y){let oe;for(oe=0;oe<Y&&!(oe+D>=P.length||oe>=K.length);++oe)P[oe+D]=K[oe];return oe}function Le(K,P){return K instanceof P||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===P.name}function lt(K){return K!==K}const $e=function(){const K="0123456789abcdef",P=new Array(256);for(let D=0;D<16;++D){const Y=D*16;for(let oe=0;oe<16;++oe)P[Y+oe]=K[D]+K[oe]}return P}();function ze(K){return typeof BigInt>"u"?bt:K}function bt(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer=buffer$1.Buffer,Blob=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1=buffer$1.Buffer,File=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob$1=buffer$1.atob,btoa$1=buffer$1.btoa,constants$1=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode;var dist=Object.freeze({__proto__:null,Blob,BlobOptions,Buffer:Buffer$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$1,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode}),commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function getAugmentedNamespace(c){if(c.__esModule)return c;var n=c.default;if(typeof n=="function"){var h=function u(){return this instanceof u?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};h.prototype=n.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(c).forEach(function(u){var m=Object.getOwnPropertyDescriptor(c,u);Object.defineProperty(h,u,m.get?m:{enumerable:!0,get:function(){return c[u]}})}),h}var base64url$3={exports:{}},base64url$2={},padString$1={};Object.defineProperty(padString$1,"__esModule",{value:!0});function padString(c){var n=4,h=c.length,u=h%n;if(!u)return c;var m=h,s=n-u,g=h+s,x=Buffer.alloc(g);for(x.write(c);s--;)x.write("=",m++);return x.toString()}padString$1.default=padString,Object.defineProperty(base64url$2,"__esModule",{value:!0});var pad_string_1=padString$1;function encode$1(c,n){return n===void 0&&(n="utf8"),Buffer.isBuffer(c)?fromBase64(c.toString("base64")):fromBase64(Buffer.from(c,n).toString("base64"))}function decode$1(c,n){return n===void 0&&(n="utf8"),Buffer.from(toBase64(c),"base64").toString(n)}function toBase64(c){return c=c.toString(),pad_string_1.default(c).replace(/\-/g,"+").replace(/_/g,"/")}function fromBase64(c){return c.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBuffer$1(c){return Buffer.from(toBase64(c),"base64")}var base64url$1=encode$1;base64url$1.encode=encode$1,base64url$1.decode=decode$1,base64url$1.toBase64=toBase64,base64url$1.fromBase64=fromBase64,base64url$1.toBuffer=toBuffer$1,base64url$2.default=base64url$1,function(c){c.exports=base64url$2.default,c.exports.default=c.exports}(base64url$3);var base64urlExports=base64url$3.exports,base64url=getDefaultExportFromCjs$1(base64urlExports);function toDate(c){const n=Object.prototype.toString.call(c);return c instanceof Date||typeof c=="object"&&n==="[object Date]"?new c.constructor(+c):typeof c=="number"||n==="[object Number]"||typeof c=="string"||n==="[object String]"?new Date(c):new Date(NaN)}function constructFrom(c,n){return c instanceof Date?new c.constructor(n):new Date(n)}function addMilliseconds(c,n){const h=+toDate(c);return constructFrom(c,h+n)}const millisecondsInHour=36e5;function addHours(c,n){return addMilliseconds(c,n*millisecondsInHour)}var lib={};function commonjsRequire(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}},cryptoBrowserify={};function getDefaultExportFromCjs(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var browser$c={exports:{}},process=browser$c.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(c){if(cachedSetTimeout===setTimeout)return setTimeout(c,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(c,0);try{return cachedSetTimeout(c,0)}catch{try{return cachedSetTimeout.call(null,c,0)}catch{return cachedSetTimeout.call(this,c,0)}}}function runClearTimeout(c){if(cachedClearTimeout===clearTimeout)return clearTimeout(c);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(c);try{return cachedClearTimeout(c)}catch{try{return cachedClearTimeout.call(null,c)}catch{return cachedClearTimeout.call(this,c)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var c=runTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,runClearTimeout(c)}}process.nextTick=function(c){var n=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)n[h-1]=arguments[h];queue.push(new Item(c,n)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(c,n){this.fun=c,this.array=n}Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={};function noop(){}process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(c){return[]},process.binding=function(c){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(c){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var browserExports=browser$c.exports;const process$1=getDefaultExportFromCjs(browserExports);var browser$b={exports:{}},safeBuffer$1={exports:{}},require$$0$1=getAugmentedNamespace(dist);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(c,n){var h=require$$0$1,u=h.Buffer;function m(g,x){for(var _ in g)x[_]=g[_]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?c.exports=h:(m(h,n),n.Buffer=s);function s(g,x,_){return u(g,x,_)}s.prototype=Object.create(u.prototype),m(u,s),s.from=function(g,x,_){if(typeof g=="number")throw new TypeError("Argument must not be a number");return u(g,x,_)},s.alloc=function(g,x,_){if(typeof g!="number")throw new TypeError("Argument must be a number");var M=u(g);return x!==void 0?typeof _=="string"?M.fill(x,_):M.fill(x):M.fill(0),M},s.allocUnsafe=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return u(g)},s.allocUnsafeSlow=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return h.SlowBuffer(g)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b.exports;hasRequiredBrowser$b=1;var c=65536,n=4294967295;function h(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var u=requireSafeBuffer$1().Buffer,m=commonjsGlobal.crypto||commonjsGlobal.msCrypto;m&&m.getRandomValues?browser$b.exports=s:browser$b.exports=h;function s(g,x){if(g>n)throw new RangeError("requested too many random bytes");var _=u.allocUnsafe(g);if(g>0)if(g>c)for(var M=0;M<g;M+=c)m.getRandomValues(_.slice(M,M+c));else m.getRandomValues(_);return typeof x=="function"?process$1.nextTick(function(){x(null,_)}):_}return browser$b.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(n,h){h&&(n.super_=h,n.prototype=Object.create(h.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(n,h){if(h){n.super_=h;var u=function(){};u.prototype=h.prototype,n.prototype=new u,n.prototype.constructor=n}}),inherits_browser.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var c=typeof Reflect=="object"?Reflect:null,n=c&&typeof c.apply=="function"?c.apply:function(Q,ie,we){return Function.prototype.apply.call(Q,ie,we)},h;c&&typeof c.ownKeys=="function"?h=c.ownKeys:Object.getOwnPropertySymbols?h=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:h=function(Q){return Object.getOwnPropertyNames(Q)};function u(L){console&&console.warn&&console.warn(L)}var m=Number.isNaN||function(Q){return Q!==Q};function s(){s.init.call(this)}events.exports=s,events.exports.once=k,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var g=10;function x(L){if(typeof L!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(L){if(typeof L!="number"||L<0||m(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");g=L}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||m(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};function _(L){return L._maxListeners===void 0?s.defaultMaxListeners:L._maxListeners}s.prototype.getMaxListeners=function(){return _(this)},s.prototype.emit=function(Q){for(var ie=[],we=1;we<arguments.length;we++)ie.push(arguments[we]);var ye=Q==="error",se=this._events;if(se!==void 0)ye=ye&&se.error===void 0;else if(!ye)return!1;if(ye){var ke;if(ie.length>0&&(ke=ie[0]),ke instanceof Error)throw ke;var w=new Error("Unhandled error."+(ke?" ("+ke.message+")":""));throw w.context=ke,w}var e=se[Q];if(e===void 0)return!1;if(typeof e=="function")n(e,this,ie);else for(var r=e.length,a=B(e,r),we=0;we<r;++we)n(a[we],this,ie);return!0};function M(L,Q,ie,we){var ye,se,ke;if(x(ie),se=L._events,se===void 0?(se=L._events=Object.create(null),L._eventsCount=0):(se.newListener!==void 0&&(L.emit("newListener",Q,ie.listener?ie.listener:ie),se=L._events),ke=se[Q]),ke===void 0)ke=se[Q]=ie,++L._eventsCount;else if(typeof ke=="function"?ke=se[Q]=we?[ie,ke]:[ke,ie]:we?ke.unshift(ie):ke.push(ie),ye=_(L),ye>0&&ke.length>ye&&!ke.warned){ke.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+ke.length+" "+String(Q)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=L,w.type=Q,w.count=ke.length,u(w)}return L}s.prototype.addListener=function(Q,ie){return M(this,Q,ie,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(Q,ie){return M(this,Q,ie,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(L,Q,ie){var we={fired:!1,wrapFn:void 0,target:L,type:Q,listener:ie},ye=b.bind(we);return ye.listener=ie,we.wrapFn=ye,ye}s.prototype.once=function(Q,ie){return x(ie),this.on(Q,S(this,Q,ie)),this},s.prototype.prependOnceListener=function(Q,ie){return x(ie),this.prependListener(Q,S(this,Q,ie)),this},s.prototype.removeListener=function(Q,ie){var we,ye,se,ke,w;if(x(ie),ye=this._events,ye===void 0)return this;if(we=ye[Q],we===void 0)return this;if(we===ie||we.listener===ie)--this._eventsCount===0?this._events=Object.create(null):(delete ye[Q],ye.removeListener&&this.emit("removeListener",Q,we.listener||ie));else if(typeof we!="function"){for(se=-1,ke=we.length-1;ke>=0;ke--)if(we[ke]===ie||we[ke].listener===ie){w=we[ke].listener,se=ke;break}if(se<0)return this;se===0?we.shift():R(we,se),we.length===1&&(ye[Q]=we[0]),ye.removeListener!==void 0&&this.emit("removeListener",Q,w||ie)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(Q){var ie,we,ye;if(we=this._events,we===void 0)return this;if(we.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):we[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete we[Q]),this;if(arguments.length===0){var se=Object.keys(we),ke;for(ye=0;ye<se.length;++ye)ke=se[ye],ke!=="removeListener"&&this.removeAllListeners(ke);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ie=we[Q],typeof ie=="function")this.removeListener(Q,ie);else if(ie!==void 0)for(ye=ie.length-1;ye>=0;ye--)this.removeListener(Q,ie[ye]);return this};function E(L,Q,ie){var we=L._events;if(we===void 0)return[];var ye=we[Q];return ye===void 0?[]:typeof ye=="function"?ie?[ye.listener||ye]:[ye]:ie?T(ye):B(ye,ye.length)}s.prototype.listeners=function(Q){return E(this,Q,!0)},s.prototype.rawListeners=function(Q){return E(this,Q,!1)},s.listenerCount=function(L,Q){return typeof L.listenerCount=="function"?L.listenerCount(Q):A.call(L,Q)},s.prototype.listenerCount=A;function A(L){var Q=this._events;if(Q!==void 0){var ie=Q[L];if(typeof ie=="function")return 1;if(ie!==void 0)return ie.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function B(L,Q){for(var ie=new Array(Q),we=0;we<Q;++we)ie[we]=L[we];return ie}function R(L,Q){for(;Q+1<L.length;Q++)L[Q]=L[Q+1];L.pop()}function T(L){for(var Q=new Array(L.length),ie=0;ie<Q.length;++ie)Q[ie]=L[ie].listener||L[ie];return Q}function k(L,Q){return new Promise(function(ie,we){function ye(ke){L.removeListener(Q,se),we(ke)}function se(){typeof L.removeListener=="function"&&L.removeListener("error",ye),ie([].slice.call(arguments))}U(L,Q,se,{once:!0}),Q!=="error"&&O(L,ye,{once:!0})})}function O(L,Q,ie){typeof L.on=="function"&&U(L,"error",Q,ie)}function U(L,Q,ie,we){if(typeof L.on=="function")we.once?L.once(Q,ie):L.on(Q,ie);else if(typeof L.addEventListener=="function")L.addEventListener(Q,function ye(se){we.once&&L.removeEventListener(Q,ye),ie(se)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof L)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$2={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},h=Symbol("test"),u=Object(h);if(typeof h=="string"||Object.prototype.toString.call(h)!=="[object Symbol]"||Object.prototype.toString.call(u)!=="[object Symbol]")return!1;var m=42;n[h]=m;for(h in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var s=Object.getOwnPropertySymbols(n);if(s.length!==1||s[0]!==h||!Object.prototype.propertyIsEnumerable.call(n,h))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(n,h);if(g.value!==m||g.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var c=requireShams$1();return shams=function(){return c()&&!!Symbol.toStringTag},shams}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var c=typeof Symbol<"u"&&Symbol,n=requireShams$1();return hasSymbols=function(){return typeof c!="function"||typeof Symbol!="function"||typeof c("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var c={__proto__:null,foo:{}},n=Object;return hasProto=function(){return{__proto__:c}.foo===c.foo&&!(c instanceof n)},hasProto}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var c="Function.prototype.bind called on incompatible ",n=Object.prototype.toString,h=Math.max,u="[object Function]",m=function(_,M){for(var b=[],S=0;S<_.length;S+=1)b[S]=_[S];for(var E=0;E<M.length;E+=1)b[E+_.length]=M[E];return b},s=function(_,M){for(var b=[],S=M,E=0;S<_.length;S+=1,E+=1)b[E]=_[S];return b},g=function(x,_){for(var M="",b=0;b<x.length;b+=1)M+=x[b],b+1<x.length&&(M+=_);return M};return implementation=function(_){var M=this;if(typeof M!="function"||n.apply(M)!==u)throw new TypeError(c+M);for(var b=s(arguments,1),S,E=function(){if(this instanceof S){var k=M.apply(this,m(b,arguments));return Object(k)===k?k:this}return M.apply(_,m(b,arguments))},A=h(0,M.length-b.length),B=[],R=0;R<A;R++)B[R]="$"+R;if(S=Function("binder","return function ("+g(B,",")+"){ return binder.apply(this,arguments); }")(E),M.prototype){var T=function(){};T.prototype=M.prototype,S.prototype=new T,T.prototype=null}return S},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var c=requireImplementation();return functionBind=Function.prototype.bind||c,functionBind}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var c=Function.prototype.call,n=Object.prototype.hasOwnProperty,h=requireFunctionBind();return hasown=h.call(c,n),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var c,n=requireEsErrors(),h=require_eval(),u=requireRange(),m=requireRef(),s=requireSyntax(),g=requireType(),x=requireUri(),_=Function,M=function(v){try{return _('"use strict"; return ('+v+").constructor;")()}catch{}},b=Object.getOwnPropertyDescriptor;if(b)try{b({},"")}catch{b=null}var S=function(){throw new g},E=b?function(){try{return arguments.callee,S}catch{try{return b(arguments,"callee").get}catch{return S}}}():S,A=requireHasSymbols()(),B=requireHasProto()(),R=Object.getPrototypeOf||(B?function(v){return v.__proto__}:null),T={},k=typeof Uint8Array>"u"||!R?c:R(Uint8Array),O={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?c:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?c:ArrayBuffer,"%ArrayIteratorPrototype%":A&&R?R([][Symbol.iterator]()):c,"%AsyncFromSyncIteratorPrototype%":c,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":typeof Atomics>"u"?c:Atomics,"%BigInt%":typeof BigInt>"u"?c:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?c:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?c:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?c:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":h,"%Float32Array%":typeof Float32Array>"u"?c:Float32Array,"%Float64Array%":typeof Float64Array>"u"?c:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?c:FinalizationRegistry,"%Function%":_,"%GeneratorFunction%":T,"%Int8Array%":typeof Int8Array>"u"?c:Int8Array,"%Int16Array%":typeof Int16Array>"u"?c:Int16Array,"%Int32Array%":typeof Int32Array>"u"?c:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&R?R(R([][Symbol.iterator]())):c,"%JSON%":typeof JSON=="object"?JSON:c,"%Map%":typeof Map>"u"?c:Map,"%MapIteratorPrototype%":typeof Map>"u"||!A||!R?c:R(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?c:Promise,"%Proxy%":typeof Proxy>"u"?c:Proxy,"%RangeError%":u,"%ReferenceError%":m,"%Reflect%":typeof Reflect>"u"?c:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?c:Set,"%SetIteratorPrototype%":typeof Set>"u"||!A||!R?c:R(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?c:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&R?R(""[Symbol.iterator]()):c,"%Symbol%":A?Symbol:c,"%SyntaxError%":s,"%ThrowTypeError%":E,"%TypedArray%":k,"%TypeError%":g,"%Uint8Array%":typeof Uint8Array>"u"?c:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?c:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?c:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?c:Uint32Array,"%URIError%":x,"%WeakMap%":typeof WeakMap>"u"?c:WeakMap,"%WeakRef%":typeof WeakRef>"u"?c:WeakRef,"%WeakSet%":typeof WeakSet>"u"?c:WeakSet};if(R)try{null.error}catch(v){var U=R(R(v));O["%Error.prototype%"]=U}var L=function v(y){var l;if(y==="%AsyncFunction%")l=M("async function () {}");else if(y==="%GeneratorFunction%")l=M("function* () {}");else if(y==="%AsyncGeneratorFunction%")l=M("async function* () {}");else if(y==="%AsyncGenerator%"){var t=v("%AsyncGeneratorFunction%");t&&(l=t.prototype)}else if(y==="%AsyncIteratorPrototype%"){var p=v("%AsyncGenerator%");p&&R&&(l=R(p.prototype))}return O[y]=l,l},Q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=requireFunctionBind(),we=requireHasown(),ye=ie.call(Function.call,Array.prototype.concat),se=ie.call(Function.apply,Array.prototype.splice),ke=ie.call(Function.call,String.prototype.replace),w=ie.call(Function.call,String.prototype.slice),e=ie.call(Function.call,RegExp.prototype.exec),r=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,a=/\\(\\)?/g,o=function(y){var l=w(y,0,1),t=w(y,-1);if(l==="%"&&t!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(t==="%"&&l!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var p=[];return ke(y,r,function(q,I,$,G){p[p.length]=$?ke(G,a,"$1"):I||q}),p},d=function(y,l){var t=y,p;if(we(Q,t)&&(p=Q[t],t="%"+p[0]+"%"),we(O,t)){var q=O[t];if(q===T&&(q=L(t)),typeof q>"u"&&!l)throw new g("intrinsic "+y+" exists, but is not available. Please file an issue!");return{alias:p,name:t,value:q}}throw new s("intrinsic "+y+" does not exist!")};return getIntrinsic=function(y,l){if(typeof y!="string"||y.length===0)throw new g("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof l!="boolean")throw new g('"allowMissing" argument must be a boolean');if(e(/^%?[^%]*%?$/,y)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var t=o(y),p=t.length>0?t[0]:"",q=d("%"+p+"%",l),I=q.name,$=q.value,G=!1,V=q.alias;V&&(p=V[0],se(t,ye([0,1],V)));for(var N=1,W=!0;N<t.length;N+=1){var Z=t[N],ne=w(Z,0,1),ee=w(Z,-1);if((ne==='"'||ne==="'"||ne==="`"||ee==='"'||ee==="'"||ee==="`")&&ne!==ee)throw new s("property names with quotes must have matching quotes");if((Z==="constructor"||!W)&&(G=!0),p+="."+Z,I="%"+p+"%",we(O,I))$=O[I];else if($!=null){if(!(Z in $)){if(!l)throw new g("base intrinsic for "+y+" exists, but the property is not available.");return}if(b&&N+1>=t.length){var z=b($,Z);W=!!z,W&&"get"in z&&!("originalValue"in z.get)?$=z.get:$=$[Z]}else W=we($,Z),$=$[Z];W&&!G&&(O[I]=$)}}return $},getIntrinsic}var callBind={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var c=requireGetIntrinsic(),n=c("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return esDefineProperty=n,esDefineProperty}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var c=requireGetIntrinsic(),n=c("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}return gopd=n,gopd}var defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var c=requireEsDefineProperty(),n=requireSyntax(),h=requireType(),u=requireGopd();return defineDataProperty=function(s,g,x){if(!s||typeof s!="object"&&typeof s!="function")throw new h("`obj` must be an object or a function`");if(typeof g!="string"&&typeof g!="symbol")throw new h("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new h("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new h("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new h("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new h("`loose`, if provided, must be a boolean");var _=arguments.length>3?arguments[3]:null,M=arguments.length>4?arguments[4]:null,b=arguments.length>5?arguments[5]:null,S=arguments.length>6?arguments[6]:!1,E=!!u&&u(s,g);if(c)c(s,g,{configurable:b===null&&E?E.configurable:!b,enumerable:_===null&&E?E.enumerable:!_,value:x,writable:M===null&&E?E.writable:!M});else if(S||!_&&!M&&!b)s[g]=x;else throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var c=requireEsDefineProperty(),n=function(){return!!c};return n.hasArrayLengthDefineBug=function(){if(!c)return null;try{return c([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=n,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var c=requireGetIntrinsic(),n=requireDefineDataProperty(),h=requireHasPropertyDescriptors()(),u=requireGopd(),m=requireType(),s=c("%Math.floor%");return setFunctionLength=function(x,_){if(typeof x!="function")throw new m("`fn` is not a function");if(typeof _!="number"||_<0||_>4294967295||s(_)!==_)throw new m("`length` must be a positive 32-bit integer");var M=arguments.length>2&&!!arguments[2],b=!0,S=!0;if("length"in x&&u){var E=u(x,"length");E&&!E.configurable&&(b=!1),E&&!E.writable&&(S=!1)}return(b||S||!M)&&(h?n(x,"length",_,!0,!0):n(x,"length",_)),x},setFunctionLength}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(c){var n=requireFunctionBind(),h=requireGetIntrinsic(),u=requireSetFunctionLength(),m=requireType(),s=h("%Function.prototype.apply%"),g=h("%Function.prototype.call%"),x=h("%Reflect.apply%",!0)||n.call(g,s),_=requireEsDefineProperty(),M=h("%Math.max%");c.exports=function(E){if(typeof E!="function")throw new m("a function is required");var A=x(n,g,arguments);return u(A,1+M(0,E.length-(arguments.length-1)),!0)};var b=function(){return x(n,s,arguments)};_?_(c.exports,"apply",{value:b}):c.exports.apply=b}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var c=requireGetIntrinsic(),n=requireCallBind(),h=n(c("String.prototype.indexOf"));return callBound=function(m,s){var g=c(m,!!s);return typeof g=="function"&&h(m,".prototype.")>-1?n(g):g},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var c=requireShams()(),n=requireCallBound(),h=n("Object.prototype.toString"),u=function(x){return c&&x&&typeof x=="object"&&Symbol.toStringTag in x?!1:h(x)==="[object Arguments]"},m=function(x){return u(x)?!0:x!==null&&typeof x=="object"&&typeof x.length=="number"&&x.length>=0&&h(x)!=="[object Array]"&&h(x.callee)==="[object Function]"},s=function(){return u(arguments)}();return u.isLegacyArguments=m,isArguments=s?u:m,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var c=Object.prototype.toString,n=Function.prototype.toString,h=/^\s*(?:function)?\*/,u=requireShams()(),m=Object.getPrototypeOf,s=function(){if(!u)return!1;try{return Function("return function*() {}")()}catch{}},g;return isGeneratorFunction=function(_){if(typeof _!="function")return!1;if(h.test(n.call(_)))return!0;if(!u){var M=c.call(_);return M==="[object GeneratorFunction]"}if(!m)return!1;if(typeof g>"u"){var b=s();g=b?m(b):!1}return m(_)===g},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var c=Function.prototype.toString,n=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,h,u;if(typeof n=="function"&&typeof Object.defineProperty=="function")try{h=Object.defineProperty({},"length",{get:function(){throw u}}),u={},n(function(){throw 42},null,h)}catch(O){O!==u&&(n=null)}else n=null;var m=/^\s*class\b/,s=function(U){try{var L=c.call(U);return m.test(L)}catch{return!1}},g=function(U){try{return s(U)?!1:(c.call(U),!0)}catch{return!1}},x=Object.prototype.toString,_="[object Object]",M="[object Function]",b="[object GeneratorFunction]",S="[object HTMLAllCollection]",E="[object HTML document.all class]",A="[object HTMLCollection]",B=typeof Symbol=="function"&&!!Symbol.toStringTag,R=!(0 in[,]),T=function(){return!1};if(typeof document=="object"){var k=document.all;x.call(k)===x.call(document.all)&&(T=function(U){if((R||!U)&&(typeof U>"u"||typeof U=="object"))try{var L=x.call(U);return(L===S||L===E||L===A||L===_)&&U("")==null}catch{}return!1})}return isCallable=n?function(U){if(T(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;try{n(U,null,h)}catch(L){if(L!==u)return!1}return!s(U)&&g(U)}:function(U){if(T(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;if(B)return g(U);if(s(U))return!1;var L=x.call(U);return L!==M&&L!==b&&!/^\[object HTML/.test(L)?!1:g(U)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var c=requireIsCallable(),n=Object.prototype.toString,h=Object.prototype.hasOwnProperty,u=function(_,M,b){for(var S=0,E=_.length;S<E;S++)h.call(_,S)&&(b==null?M(_[S],S,_):M.call(b,_[S],S,_))},m=function(_,M,b){for(var S=0,E=_.length;S<E;S++)b==null?M(_.charAt(S),S,_):M.call(b,_.charAt(S),S,_)},s=function(_,M,b){for(var S in _)h.call(_,S)&&(b==null?M(_[S],S,_):M.call(b,_[S],S,_))},g=function(_,M,b){if(!c(M))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=b),n.call(_)==="[object Array]"?u(_,M,S):typeof _=="string"?m(_,M,S):s(_,M,S)};return forEach_1=g,forEach_1}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var c=requirePossibleTypedArrayNames(),n=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var u=[],m=0;m<c.length;m++)typeof n[c[m]]=="function"&&(u[u.length]=c[m]);return u},availableTypedArrays}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var c=requireForEach(),n=requireAvailableTypedArrays(),h=requireCallBind(),u=requireCallBound(),m=requireGopd(),s=u("Object.prototype.toString"),g=requireShams()(),x=typeof globalThis>"u"?commonjsGlobal:globalThis,_=n(),M=u("String.prototype.slice"),b=Object.getPrototypeOf,S=u("Array.prototype.indexOf",!0)||function(T,k){for(var O=0;O<T.length;O+=1)if(T[O]===k)return O;return-1},E={__proto__:null};g&&m&&b?c(_,function(R){var T=new x[R];if(Symbol.toStringTag in T){var k=b(T),O=m(k,Symbol.toStringTag);if(!O){var U=b(k);O=m(U,Symbol.toStringTag)}E["$"+R]=h(O.get)}}):c(_,function(R){var T=new x[R],k=T.slice||T.set;k&&(E["$"+R]=h(k))});var A=function(T){var k=!1;return c(E,function(O,U){if(!k)try{"$"+O(T)===U&&(k=M(U,1))}catch{}}),k},B=function(T){var k=!1;return c(E,function(O,U){if(!k)try{O(T),k=M(U,1)}catch{}}),k};return whichTypedArray=function(T){if(!T||typeof T!="object")return!1;if(!g){var k=M(s(T),8,-1);return S(_,k)>-1?k:k!=="Object"?!1:B(T)}return m?A(T):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var c=requireWhichTypedArray();return isTypedArray=function(h){return!!c(h)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(c){var n=requireIsArguments(),h=requireIsGeneratorFunction(),u=requireWhichTypedArray(),m=requireIsTypedArray();function s(ve){return ve.call.bind(ve)}var g=typeof BigInt<"u",x=typeof Symbol<"u",_=s(Object.prototype.toString),M=s(Number.prototype.valueOf),b=s(String.prototype.valueOf),S=s(Boolean.prototype.valueOf);if(g)var E=s(BigInt.prototype.valueOf);if(x)var A=s(Symbol.prototype.valueOf);function B(ve,ut){if(typeof ve!="object")return!1;try{return ut(ve),!0}catch{return!1}}c.isArgumentsObject=n,c.isGeneratorFunction=h,c.isTypedArray=m;function R(ve){return typeof Promise<"u"&&ve instanceof Promise||ve!==null&&typeof ve=="object"&&typeof ve.then=="function"&&typeof ve.catch=="function"}c.isPromise=R;function T(ve){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ve):m(ve)||I(ve)}c.isArrayBufferView=T;function k(ve){return u(ve)==="Uint8Array"}c.isUint8Array=k;function O(ve){return u(ve)==="Uint8ClampedArray"}c.isUint8ClampedArray=O;function U(ve){return u(ve)==="Uint16Array"}c.isUint16Array=U;function L(ve){return u(ve)==="Uint32Array"}c.isUint32Array=L;function Q(ve){return u(ve)==="Int8Array"}c.isInt8Array=Q;function ie(ve){return u(ve)==="Int16Array"}c.isInt16Array=ie;function we(ve){return u(ve)==="Int32Array"}c.isInt32Array=we;function ye(ve){return u(ve)==="Float32Array"}c.isFloat32Array=ye;function se(ve){return u(ve)==="Float64Array"}c.isFloat64Array=se;function ke(ve){return u(ve)==="BigInt64Array"}c.isBigInt64Array=ke;function w(ve){return u(ve)==="BigUint64Array"}c.isBigUint64Array=w;function e(ve){return _(ve)==="[object Map]"}e.working=typeof Map<"u"&&e(new Map);function r(ve){return typeof Map>"u"?!1:e.working?e(ve):ve instanceof Map}c.isMap=r;function a(ve){return _(ve)==="[object Set]"}a.working=typeof Set<"u"&&a(new Set);function o(ve){return typeof Set>"u"?!1:a.working?a(ve):ve instanceof Set}c.isSet=o;function d(ve){return _(ve)==="[object WeakMap]"}d.working=typeof WeakMap<"u"&&d(new WeakMap);function v(ve){return typeof WeakMap>"u"?!1:d.working?d(ve):ve instanceof WeakMap}c.isWeakMap=v;function y(ve){return _(ve)==="[object WeakSet]"}y.working=typeof WeakSet<"u"&&y(new WeakSet);function l(ve){return y(ve)}c.isWeakSet=l;function t(ve){return _(ve)==="[object ArrayBuffer]"}t.working=typeof ArrayBuffer<"u"&&t(new ArrayBuffer);function p(ve){return typeof ArrayBuffer>"u"?!1:t.working?t(ve):ve instanceof ArrayBuffer}c.isArrayBuffer=p;function q(ve){return _(ve)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function I(ve){return typeof DataView>"u"?!1:q.working?q(ve):ve instanceof DataView}c.isDataView=I;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function G(ve){return _(ve)==="[object SharedArrayBuffer]"}function V(ve){return typeof $>"u"?!1:(typeof G.working>"u"&&(G.working=G(new $)),G.working?G(ve):ve instanceof $)}c.isSharedArrayBuffer=V;function N(ve){return _(ve)==="[object AsyncFunction]"}c.isAsyncFunction=N;function W(ve){return _(ve)==="[object Map Iterator]"}c.isMapIterator=W;function Z(ve){return _(ve)==="[object Set Iterator]"}c.isSetIterator=Z;function ne(ve){return _(ve)==="[object Generator]"}c.isGeneratorObject=ne;function ee(ve){return _(ve)==="[object WebAssembly.Module]"}c.isWebAssemblyCompiledModule=ee;function z(ve){return B(ve,M)}c.isNumberObject=z;function ue(ve){return B(ve,b)}c.isStringObject=ue;function Ze(ve){return B(ve,S)}c.isBooleanObject=Ze;function Ae(ve){return g&&B(ve,E)}c.isBigIntObject=Ae;function qe(ve){return x&&B(ve,A)}c.isSymbolObject=qe;function nt(ve){return z(ve)||ue(ve)||Ze(ve)||Ae(ve)||qe(ve)}c.isBoxedPrimitive=nt;function Ne(ve){return typeof Uint8Array<"u"&&(p(ve)||V(ve))}c.isAnyArrayBuffer=Ne,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ve){Object.defineProperty(c,ve,{enumerable:!1,value:function(){throw new Error(ve+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,function(c){var n={},h=Object.getOwnPropertyDescriptors||function($){for(var G=Object.keys($),V={},N=0;N<G.length;N++)V[G[N]]=Object.getOwnPropertyDescriptor($,G[N]);return V},u=/%[sdj%]/g;c.format=function(I){if(!ie(I)){for(var $=[],G=0;G<arguments.length;G++)$.push(x(arguments[G]));return $.join(" ")}for(var G=1,V=arguments,N=V.length,W=String(I).replace(u,function(ne){if(ne==="%%")return"%";if(G>=N)return ne;switch(ne){case"%s":return String(V[G++]);case"%d":return Number(V[G++]);case"%j":try{return JSON.stringify(V[G++])}catch{return"[Circular]"}default:return ne}}),Z=V[G];G<N;Z=V[++G])U(Z)||!ke(Z)?W+=" "+Z:W+=" "+x(Z);return W},c.deprecate=function(I,$){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return I;if(typeof process$1>"u")return function(){return c.deprecate(I,$).apply(this,arguments)};var G=!1;function V(){if(!G){if(process$1.throwDeprecation)throw new Error($);process$1.traceDeprecation?console.trace($):console.error($),G=!0}return I.apply(this,arguments)}return V};var m={},s=/^$/;if(n.NODE_DEBUG){var g=n.NODE_DEBUG;g=g.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+g+"$","i")}c.debuglog=function(I){if(I=I.toUpperCase(),!m[I])if(s.test(I)){var $=process$1.pid;m[I]=function(){var G=c.format.apply(c,arguments);console.error("%s %d: %s",I,$,G)}}else m[I]=function(){};return m[I]};function x(I,$){var G={seen:[],stylize:M};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),O($)?G.showHidden=$:$&&c._extend(G,$),ye(G.showHidden)&&(G.showHidden=!1),ye(G.depth)&&(G.depth=2),ye(G.colors)&&(G.colors=!1),ye(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=_),S(G,I,G.depth)}c.inspect=x,x.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},x.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function _(I,$){var G=x.styles[$];return G?"\x1B["+x.colors[G][0]+"m"+I+"\x1B["+x.colors[G][1]+"m":I}function M(I,$){return I}function b(I){var $={};return I.forEach(function(G,V){$[G]=!0}),$}function S(I,$,G){if(I.customInspect&&$&&r($.inspect)&&$.inspect!==c.inspect&&!($.constructor&&$.constructor.prototype===$)){var V=$.inspect(G,I);return ie(V)||(V=S(I,V,G)),V}var N=E(I,$);if(N)return N;var W=Object.keys($),Z=b(W);if(I.showHidden&&(W=Object.getOwnPropertyNames($)),e($)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return A($);if(W.length===0){if(r($)){var ne=$.name?": "+$.name:"";return I.stylize("[Function"+ne+"]","special")}if(se($))return I.stylize(RegExp.prototype.toString.call($),"regexp");if(w($))return I.stylize(Date.prototype.toString.call($),"date");if(e($))return A($)}var ee="",z=!1,ue=["{","}"];if(k($)&&(z=!0,ue=["[","]"]),r($)){var Ze=$.name?": "+$.name:"";ee=" [Function"+Ze+"]"}if(se($)&&(ee=" "+RegExp.prototype.toString.call($)),w($)&&(ee=" "+Date.prototype.toUTCString.call($)),e($)&&(ee=" "+A($)),W.length===0&&(!z||$.length==0))return ue[0]+ee+ue[1];if(G<0)return se($)?I.stylize(RegExp.prototype.toString.call($),"regexp"):I.stylize("[Object]","special");I.seen.push($);var Ae;return z?Ae=B(I,$,G,Z,W):Ae=W.map(function(qe){return R(I,$,G,Z,qe,z)}),I.seen.pop(),T(Ae,ee,ue)}function E(I,$){if(ye($))return I.stylize("undefined","undefined");if(ie($)){var G="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return I.stylize(G,"string")}if(Q($))return I.stylize(""+$,"number");if(O($))return I.stylize(""+$,"boolean");if(U($))return I.stylize("null","null")}function A(I){return"["+Error.prototype.toString.call(I)+"]"}function B(I,$,G,V,N){for(var W=[],Z=0,ne=$.length;Z<ne;++Z)l($,String(Z))?W.push(R(I,$,G,V,String(Z),!0)):W.push("");return N.forEach(function(ee){ee.match(/^\d+$/)||W.push(R(I,$,G,V,ee,!0))}),W}function R(I,$,G,V,N,W){var Z,ne,ee;if(ee=Object.getOwnPropertyDescriptor($,N)||{value:$[N]},ee.get?ee.set?ne=I.stylize("[Getter/Setter]","special"):ne=I.stylize("[Getter]","special"):ee.set&&(ne=I.stylize("[Setter]","special")),l(V,N)||(Z="["+N+"]"),ne||(I.seen.indexOf(ee.value)<0?(U(G)?ne=S(I,ee.value,null):ne=S(I,ee.value,G-1),ne.indexOf(`
`)>-1&&(W?ne=ne.split(`
`).map(function(z){return"  "+z}).join(`
`).slice(2):ne=`
`+ne.split(`
`).map(function(z){return"   "+z}).join(`
`))):ne=I.stylize("[Circular]","special")),ye(Z)){if(W&&N.match(/^\d+$/))return ne;Z=JSON.stringify(""+N),Z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.slice(1,-1),Z=I.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=I.stylize(Z,"string"))}return Z+": "+ne}function T(I,$,G){var V=I.reduce(function(N,W){return W.indexOf(`
`)>=0,N+W.replace(/\u001b\[\d\d?m/g,"").length+1},0);return V>60?G[0]+($===""?"":$+`
 `)+" "+I.join(`,
  `)+" "+G[1]:G[0]+$+" "+I.join(", ")+" "+G[1]}c.types=requireTypes();function k(I){return Array.isArray(I)}c.isArray=k;function O(I){return typeof I=="boolean"}c.isBoolean=O;function U(I){return I===null}c.isNull=U;function L(I){return I==null}c.isNullOrUndefined=L;function Q(I){return typeof I=="number"}c.isNumber=Q;function ie(I){return typeof I=="string"}c.isString=ie;function we(I){return typeof I=="symbol"}c.isSymbol=we;function ye(I){return I===void 0}c.isUndefined=ye;function se(I){return ke(I)&&o(I)==="[object RegExp]"}c.isRegExp=se,c.types.isRegExp=se;function ke(I){return typeof I=="object"&&I!==null}c.isObject=ke;function w(I){return ke(I)&&o(I)==="[object Date]"}c.isDate=w,c.types.isDate=w;function e(I){return ke(I)&&(o(I)==="[object Error]"||I instanceof Error)}c.isError=e,c.types.isNativeError=e;function r(I){return typeof I=="function"}c.isFunction=r;function a(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||typeof I>"u"}c.isPrimitive=a,c.isBuffer=requireIsBufferBrowser();function o(I){return Object.prototype.toString.call(I)}function d(I){return I<10?"0"+I.toString(10):I.toString(10)}var v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function y(){var I=new Date,$=[d(I.getHours()),d(I.getMinutes()),d(I.getSeconds())].join(":");return[I.getDate(),v[I.getMonth()],$].join(" ")}c.log=function(){console.log("%s - %s",y(),c.format.apply(c,arguments))},c.inherits=requireInherits_browser(),c._extend=function(I,$){if(!$||!ke($))return I;for(var G=Object.keys($),V=G.length;V--;)I[G[V]]=$[G[V]];return I};function l(I,$){return Object.prototype.hasOwnProperty.call(I,$)}var t=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;c.promisify=function($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');if(t&&$[t]){var G=$[t];if(typeof G!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(G,t,{value:G,enumerable:!1,writable:!1,configurable:!0}),G}function G(){for(var V,N,W=new Promise(function(ee,z){V=ee,N=z}),Z=[],ne=0;ne<arguments.length;ne++)Z.push(arguments[ne]);Z.push(function(ee,z){ee?N(ee):V(z)});try{$.apply(this,Z)}catch(ee){N(ee)}return W}return Object.setPrototypeOf(G,Object.getPrototypeOf($)),t&&Object.defineProperty(G,t,{value:G,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(G,h($))},c.promisify.custom=t;function p(I,$){if(!I){var G=new Error("Promise was rejected with a falsy value");G.reason=I,I=G}return $(I)}function q(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function $(){for(var G=[],V=0;V<arguments.length;V++)G.push(arguments[V]);var N=G.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,Z=function(){return N.apply(W,arguments)};I.apply(this,G).then(function(ne){process$1.nextTick(Z.bind(null,null,ne))},function(ne){process$1.nextTick(p.bind(null,ne,Z))})}return Object.setPrototypeOf($,Object.getPrototypeOf(I)),Object.defineProperties($,h(I)),$}c.callbackify=q}(util$2)),util$2}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function c(B,R){var T=Object.keys(B);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(B);R&&(k=k.filter(function(O){return Object.getOwnPropertyDescriptor(B,O).enumerable})),T.push.apply(T,k)}return T}function n(B){for(var R=1;R<arguments.length;R++){var T=arguments[R]!=null?arguments[R]:{};R%2?c(Object(T),!0).forEach(function(k){h(B,k,T[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(T)):c(Object(T)).forEach(function(k){Object.defineProperty(B,k,Object.getOwnPropertyDescriptor(T,k))})}return B}function h(B,R,T){return R=g(R),R in B?Object.defineProperty(B,R,{value:T,enumerable:!0,configurable:!0,writable:!0}):B[R]=T,B}function u(B,R){if(!(B instanceof R))throw new TypeError("Cannot call a class as a function")}function m(B,R){for(var T=0;T<R.length;T++){var k=R[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(B,g(k.key),k)}}function s(B,R,T){return R&&m(B.prototype,R),Object.defineProperty(B,"prototype",{writable:!1}),B}function g(B){var R=x(B,"string");return typeof R=="symbol"?R:String(R)}function x(B,R){if(typeof B!="object"||B===null)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var k=T.call(B,R||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(B)}var _=require$$0$1,M=_.Buffer,b=requireUtil$1(),S=b.inspect,E=S&&S.custom||"inspect";function A(B,R,T){M.prototype.copy.call(B,R,T)}return buffer_list=function(){function B(){u(this,B),this.head=null,this.tail=null,this.length=0}return s(B,[{key:"push",value:function(T){var k={data:T,next:null};this.length>0?this.tail.next=k:this.head=k,this.tail=k,++this.length}},{key:"unshift",value:function(T){var k={data:T,next:this.head};this.length===0&&(this.tail=k),this.head=k,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var k=this.head,O=""+k.data;k=k.next;)O+=T+k.data;return O}},{key:"concat",value:function(T){if(this.length===0)return M.alloc(0);for(var k=M.allocUnsafe(T>>>0),O=this.head,U=0;O;)A(O.data,k,U),U+=O.data.length,O=O.next;return k}},{key:"consume",value:function(T,k){var O;return T<this.head.data.length?(O=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):T===this.head.data.length?O=this.shift():O=k?this._getString(T):this._getBuffer(T),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var k=this.head,O=1,U=k.data;for(T-=U.length;k=k.next;){var L=k.data,Q=T>L.length?L.length:T;if(Q===L.length?U+=L:U+=L.slice(0,T),T-=Q,T===0){Q===L.length?(++O,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=L.slice(Q));break}++O}return this.length-=O,U}},{key:"_getBuffer",value:function(T){var k=M.allocUnsafe(T),O=this.head,U=1;for(O.data.copy(k),T-=O.data.length;O=O.next;){var L=O.data,Q=T>L.length?L.length:T;if(L.copy(k,k.length-T,0,Q),T-=Q,T===0){Q===L.length?(++U,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=L.slice(Q));break}++U}return this.length-=U,k}},{key:E,value:function(T,k){return S(this,n(n({},k),{},{depth:0,customInspect:!1}))}}]),B}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function c(g,x){var _=this,M=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return M||b?(x?x(g):g&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(m,this,g)):process$1.nextTick(m,this,g)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(g||null,function(S){!x&&S?_._writableState?_._writableState.errorEmitted?process$1.nextTick(h,_):(_._writableState.errorEmitted=!0,process$1.nextTick(n,_,S)):process$1.nextTick(n,_,S):x?(process$1.nextTick(h,_),x(S)):process$1.nextTick(h,_)}),this)}function n(g,x){m(g,x),h(g)}function h(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function u(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function m(g,x){g.emit("error",x)}function s(g,x){var _=g._readableState,M=g._writableState;_&&_.autoDestroy||M&&M.autoDestroy?g.destroy(x):g.emit("error",x)}return destroy_1$1={destroy:c,undestroy:u,errorOrDestroy:s},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function c(x,_){x.prototype=Object.create(_.prototype),x.prototype.constructor=x,x.__proto__=_}var n={};function h(x,_,M){M||(M=Error);function b(E,A,B){return typeof _=="string"?_:_(E,A,B)}var S=function(E){c(A,E);function A(B,R,T){return E.call(this,b(B,R,T))||this}return A}(M);S.prototype.name=M.name,S.prototype.code=x,n[x]=S}function u(x,_){if(Array.isArray(x)){var M=x.length;return x=x.map(function(b){return String(b)}),M>2?"one of ".concat(_," ").concat(x.slice(0,M-1).join(", "),", or ")+x[M-1]:M===2?"one of ".concat(_," ").concat(x[0]," or ").concat(x[1]):"of ".concat(_," ").concat(x[0])}else return"of ".concat(_," ").concat(String(x))}function m(x,_,M){return x.substr(0,_.length)===_}function s(x,_,M){return(M===void 0||M>x.length)&&(M=x.length),x.substring(M-_.length,M)===_}function g(x,_,M){return typeof M!="number"&&(M=0),M+_.length>x.length?!1:x.indexOf(_,M)!==-1}return h("ERR_INVALID_OPT_VALUE",function(x,_){return'The value "'+_+'" is invalid for option "'+x+'"'},TypeError),h("ERR_INVALID_ARG_TYPE",function(x,_,M){var b;typeof _=="string"&&m(_,"not ")?(b="must not be",_=_.replace(/^not /,"")):b="must be";var S;if(s(x," argument"))S="The ".concat(x," ").concat(b," ").concat(u(_,"type"));else{var E=g(x,".")?"property":"argument";S='The "'.concat(x,'" ').concat(E," ").concat(b," ").concat(u(_,"type"))}return S+=". Received type ".concat(typeof M),S},TypeError),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),h("ERR_METHOD_NOT_IMPLEMENTED",function(x){return"The "+x+" method is not implemented"}),h("ERR_STREAM_PREMATURE_CLOSE","Premature close"),h("ERR_STREAM_DESTROYED",function(x){return"Cannot call "+x+" after a stream was destroyed"}),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),h("ERR_STREAM_WRITE_AFTER_END","write after end"),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_UNKNOWN_ENCODING",function(x){return"Unknown encoding: "+x},TypeError),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=n,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var c=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function n(u,m,s){return u.highWaterMark!=null?u.highWaterMark:m?u[s]:null}function h(u,m,s,g){var x=n(m,g,s);if(x!=null){if(!(isFinite(x)&&Math.floor(x)===x)||x<0){var _=g?s:"highWaterMark";throw new c(_,x)}return Math.floor(x)}return u.objectMode?16:16*1024}return state={getHighWaterMark:h},state}var browser$a,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a;hasRequiredBrowser$a=1,browser$a=c;function c(h,u){if(n("noDeprecation"))return h;var m=!1;function s(){if(!m){if(n("throwDeprecation"))throw new Error(u);n("traceDeprecation")?console.trace(u):console.warn(u),m=!0}return h.apply(this,arguments)}return s}function n(h){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var u=commonjsGlobal.localStorage[h];return u==null?!1:String(u).toLowerCase()==="true"}return browser$a}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=ye;function c(V){var N=this;this.next=null,this.entry=null,this.finish=function(){G(N,V)}}var n;ye.WritableState=ie;var h={deprecate:requireBrowser$a()},u=requireStreamBrowser$1(),m=require$$0$1.Buffer,s=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function g(V){return m.from(V)}function x(V){return m.isBuffer(V)||V instanceof s}var _=requireDestroy$1(),M=requireState(),b=M.getHighWaterMark,S=requireErrorsBrowser().codes,E=S.ERR_INVALID_ARG_TYPE,A=S.ERR_METHOD_NOT_IMPLEMENTED,B=S.ERR_MULTIPLE_CALLBACK,R=S.ERR_STREAM_CANNOT_PIPE,T=S.ERR_STREAM_DESTROYED,k=S.ERR_STREAM_NULL_VALUES,O=S.ERR_STREAM_WRITE_AFTER_END,U=S.ERR_UNKNOWN_ENCODING,L=_.errorOrDestroy;requireInherits_browser()(ye,u);function Q(){}function ie(V,N,W){n=n||require_stream_duplex$1(),V=V||{},typeof W!="boolean"&&(W=N instanceof n),this.objectMode=!!V.objectMode,W&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=b(this,V,"writableHighWaterMark",W),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Z=V.decodeStrings===!1;this.decodeStrings=!Z,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){d(N,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}ie.prototype.getBuffer=function(){for(var N=this.bufferedRequest,W=[];N;)W.push(N),N=N.next;return W},function(){try{Object.defineProperty(ie.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var we;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(we=Function.prototype[Symbol.hasInstance],Object.defineProperty(ye,Symbol.hasInstance,{value:function(N){return we.call(this,N)?!0:this!==ye?!1:N&&N._writableState instanceof ie}})):we=function(N){return N instanceof this};function ye(V){n=n||require_stream_duplex$1();var N=this instanceof n;if(!N&&!we.call(ye,this))return new ye(V);this._writableState=new ie(V,this,N),this.writable=!0,V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final)),u.call(this)}ye.prototype.pipe=function(){L(this,new R)};function se(V,N){var W=new O;L(V,W),process$1.nextTick(N,W)}function ke(V,N,W,Z){var ne;return W===null?ne=new k:typeof W!="string"&&!N.objectMode&&(ne=new E("chunk",["string","Buffer"],W)),ne?(L(V,ne),process$1.nextTick(Z,ne),!1):!0}ye.prototype.write=function(V,N,W){var Z=this._writableState,ne=!1,ee=!Z.objectMode&&x(V);return ee&&!m.isBuffer(V)&&(V=g(V)),typeof N=="function"&&(W=N,N=null),ee?N="buffer":N||(N=Z.defaultEncoding),typeof W!="function"&&(W=Q),Z.ending?se(this,W):(ee||ke(this,Z,V,W))&&(Z.pendingcb++,ne=e(this,Z,ee,V,N,W)),ne},ye.prototype.cork=function(){this._writableState.corked++},ye.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,!V.writing&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&l(this,V))},ye.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())>-1))throw new U(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function w(V,N,W){return!V.objectMode&&V.decodeStrings!==!1&&typeof N=="string"&&(N=m.from(N,W)),N}Object.defineProperty(ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function e(V,N,W,Z,ne,ee){if(!W){var z=w(N,Z,ne);Z!==z&&(W=!0,ne="buffer",Z=z)}var ue=N.objectMode?1:Z.length;N.length+=ue;var Ze=N.length<N.highWaterMark;if(Ze||(N.needDrain=!0),N.writing||N.corked){var Ae=N.lastBufferedRequest;N.lastBufferedRequest={chunk:Z,encoding:ne,isBuf:W,callback:ee,next:null},Ae?Ae.next=N.lastBufferedRequest:N.bufferedRequest=N.lastBufferedRequest,N.bufferedRequestCount+=1}else r(V,N,!1,ue,Z,ne,ee);return Ze}function r(V,N,W,Z,ne,ee,z){N.writelen=Z,N.writecb=z,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new T("write")):W?V._writev(ne,N.onwrite):V._write(ne,ee,N.onwrite),N.sync=!1}function a(V,N,W,Z,ne){--N.pendingcb,W?(process$1.nextTick(ne,Z),process$1.nextTick(I,V,N),V._writableState.errorEmitted=!0,L(V,Z)):(ne(Z),V._writableState.errorEmitted=!0,L(V,Z),I(V,N))}function o(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}function d(V,N){var W=V._writableState,Z=W.sync,ne=W.writecb;if(typeof ne!="function")throw new B;if(o(W),N)a(V,W,Z,N,ne);else{var ee=t(W)||V.destroyed;!ee&&!W.corked&&!W.bufferProcessing&&W.bufferedRequest&&l(V,W),Z?process$1.nextTick(v,V,W,ee,ne):v(V,W,ee,ne)}}function v(V,N,W,Z){W||y(V,N),N.pendingcb--,Z(),I(V,N)}function y(V,N){N.length===0&&N.needDrain&&(N.needDrain=!1,V.emit("drain"))}function l(V,N){N.bufferProcessing=!0;var W=N.bufferedRequest;if(V._writev&&W&&W.next){var Z=N.bufferedRequestCount,ne=new Array(Z),ee=N.corkedRequestsFree;ee.entry=W;for(var z=0,ue=!0;W;)ne[z]=W,W.isBuf||(ue=!1),W=W.next,z+=1;ne.allBuffers=ue,r(V,N,!0,N.length,ne,"",ee.finish),N.pendingcb++,N.lastBufferedRequest=null,ee.next?(N.corkedRequestsFree=ee.next,ee.next=null):N.corkedRequestsFree=new c(N),N.bufferedRequestCount=0}else{for(;W;){var Ze=W.chunk,Ae=W.encoding,qe=W.callback,nt=N.objectMode?1:Ze.length;if(r(V,N,!1,nt,Ze,Ae,qe),W=W.next,N.bufferedRequestCount--,N.writing)break}W===null&&(N.lastBufferedRequest=null)}N.bufferedRequest=W,N.bufferProcessing=!1}ye.prototype._write=function(V,N,W){W(new A("_write()"))},ye.prototype._writev=null,ye.prototype.end=function(V,N,W){var Z=this._writableState;return typeof V=="function"?(W=V,V=null,N=null):typeof N=="function"&&(W=N,N=null),V!=null&&this.write(V,N),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||$(this,Z,W),this},Object.defineProperty(ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function t(V){return V.ending&&V.length===0&&V.bufferedRequest===null&&!V.finished&&!V.writing}function p(V,N){V._final(function(W){N.pendingcb--,W&&L(V,W),N.prefinished=!0,V.emit("prefinish"),I(V,N)})}function q(V,N){!N.prefinished&&!N.finalCalled&&(typeof V._final=="function"&&!N.destroyed?(N.pendingcb++,N.finalCalled=!0,process$1.nextTick(p,V,N)):(N.prefinished=!0,V.emit("prefinish")))}function I(V,N){var W=t(N);if(W&&(q(V,N),N.pendingcb===0&&(N.finished=!0,V.emit("finish"),N.autoDestroy))){var Z=V._readableState;(!Z||Z.autoDestroy&&Z.endEmitted)&&V.destroy()}return W}function $(V,N,W){N.ending=!0,I(V,N),W&&(N.finished?process$1.nextTick(W):V.once("finish",W)),N.ended=!0,V.writable=!1}function G(V,N,W){var Z=V.entry;for(V.entry=null;Z;){var ne=Z.callback;N.pendingcb--,ne(W),Z=Z.next}N.corkedRequestsFree.next=V}return Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),ye.prototype.destroy=_.destroy,ye.prototype._undestroy=_.undestroy,ye.prototype._destroy=function(V,N){N(V)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var c=Object.keys||function(M){var b=[];for(var S in M)b.push(S);return b};_stream_duplex$1=g;var n=require_stream_readable$1(),h=require_stream_writable$1();requireInherits_browser()(g,n);for(var u=c(h.prototype),m=0;m<u.length;m++){var s=u[m];g.prototype[s]||(g.prototype[s]=h.prototype[s])}function g(M){if(!(this instanceof g))return new g(M);n.call(this,M),h.call(this,M),this.allowHalfOpen=!0,M&&(M.readable===!1&&(this.readable=!1),M.writable===!1&&(this.writable=!1),M.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",x)))}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function x(){this._writableState.ended||process$1.nextTick(_,this)}function _(M){M.end()}return Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var c=requireSafeBuffer$1().Buffer,n=c.isEncoding||function(k){switch(k=""+k,k&&k.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function h(k){if(!k)return"utf8";for(var O;;)switch(k){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return k;default:if(O)return;k=(""+k).toLowerCase(),O=!0}}function u(k){var O=h(k);if(typeof O!="string"&&(c.isEncoding===n||!n(k)))throw new Error("Unknown encoding: "+k);return O||k}string_decoder.StringDecoder=m;function m(k){this.encoding=u(k);var O;switch(this.encoding){case"utf16le":this.text=S,this.end=E,O=4;break;case"utf8":this.fillLast=_,O=4;break;case"base64":this.text=A,this.end=B,O=3;break;default:this.write=R,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(O)}m.prototype.write=function(k){if(k.length===0)return"";var O,U;if(this.lastNeed){if(O=this.fillLast(k),O===void 0)return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<k.length?O?O+this.text(k,U):this.text(k,U):O||""},m.prototype.end=b,m.prototype.text=M,m.prototype.fillLast=function(k){if(this.lastNeed<=k.length)return k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,k.length),this.lastNeed-=k.length};function s(k){return k<=127?0:k>>5===6?2:k>>4===14?3:k>>3===30?4:k>>6===2?-1:-2}function g(k,O,U){var L=O.length-1;if(L<U)return 0;var Q=s(O[L]);return Q>=0?(Q>0&&(k.lastNeed=Q-1),Q):--L<U||Q===-2?0:(Q=s(O[L]),Q>=0?(Q>0&&(k.lastNeed=Q-2),Q):--L<U||Q===-2?0:(Q=s(O[L]),Q>=0?(Q>0&&(Q===2?Q=0:k.lastNeed=Q-3),Q):0))}function x(k,O,U){if((O[0]&192)!==128)return k.lastNeed=0,"�";if(k.lastNeed>1&&O.length>1){if((O[1]&192)!==128)return k.lastNeed=1,"�";if(k.lastNeed>2&&O.length>2&&(O[2]&192)!==128)return k.lastNeed=2,"�"}}function _(k){var O=this.lastTotal-this.lastNeed,U=x(this,k);if(U!==void 0)return U;if(this.lastNeed<=k.length)return k.copy(this.lastChar,O,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,O,0,k.length),this.lastNeed-=k.length}function M(k,O){var U=g(this,k,O);if(!this.lastNeed)return k.toString("utf8",O);this.lastTotal=U;var L=k.length-(U-this.lastNeed);return k.copy(this.lastChar,0,L),k.toString("utf8",O,L)}function b(k){var O=k&&k.length?this.write(k):"";return this.lastNeed?O+"�":O}function S(k,O){if((k.length-O)%2===0){var U=k.toString("utf16le",O);if(U){var L=U.charCodeAt(U.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=k[k.length-1],k.toString("utf16le",O,k.length-1)}function E(k){var O=k&&k.length?this.write(k):"";if(this.lastNeed){var U=this.lastTotal-this.lastNeed;return O+this.lastChar.toString("utf16le",0,U)}return O}function A(k,O){var U=(k.length-O)%3;return U===0?k.toString("base64",O):(this.lastNeed=3-U,this.lastTotal=3,U===1?this.lastChar[0]=k[k.length-1]:(this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1]),k.toString("base64",O,k.length-U))}function B(k){var O=k&&k.length?this.write(k):"";return this.lastNeed?O+this.lastChar.toString("base64",0,3-this.lastNeed):O}function R(k){return k.toString(this.encoding)}function T(k){return k&&k.length?this.write(k):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var c=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function n(s){var g=!1;return function(){if(!g){g=!0;for(var x=arguments.length,_=new Array(x),M=0;M<x;M++)_[M]=arguments[M];s.apply(this,_)}}}function h(){}function u(s){return s.setHeader&&typeof s.abort=="function"}function m(s,g,x){if(typeof g=="function")return m(s,null,g);g||(g={}),x=n(x||h);var _=g.readable||g.readable!==!1&&s.readable,M=g.writable||g.writable!==!1&&s.writable,b=function(){s.writable||E()},S=s._writableState&&s._writableState.finished,E=function(){M=!1,S=!0,_||x.call(s)},A=s._readableState&&s._readableState.endEmitted,B=function(){_=!1,A=!0,M||x.call(s)},R=function(U){x.call(s,U)},T=function(){var U;if(_&&!A)return(!s._readableState||!s._readableState.ended)&&(U=new c),x.call(s,U);if(M&&!S)return(!s._writableState||!s._writableState.ended)&&(U=new c),x.call(s,U)},k=function(){s.req.on("finish",E)};return u(s)?(s.on("complete",E),s.on("abort",T),s.req?k():s.on("request",k)):M&&!s._writableState&&(s.on("end",b),s.on("close",b)),s.on("end",B),s.on("finish",E),g.error!==!1&&s.on("error",R),s.on("close",T),function(){s.removeListener("complete",E),s.removeListener("abort",T),s.removeListener("request",k),s.req&&s.req.removeListener("finish",E),s.removeListener("end",b),s.removeListener("close",b),s.removeListener("finish",E),s.removeListener("end",B),s.removeListener("error",R),s.removeListener("close",T)}}return endOfStream=m,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var c;function n(U,L,Q){return L=h(L),L in U?Object.defineProperty(U,L,{value:Q,enumerable:!0,configurable:!0,writable:!0}):U[L]=Q,U}function h(U){var L=u(U,"string");return typeof L=="symbol"?L:String(L)}function u(U,L){if(typeof U!="object"||U===null)return U;var Q=U[Symbol.toPrimitive];if(Q!==void 0){var ie=Q.call(U,L||"default");if(typeof ie!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(U)}var m=requireEndOfStream(),s=Symbol("lastResolve"),g=Symbol("lastReject"),x=Symbol("error"),_=Symbol("ended"),M=Symbol("lastPromise"),b=Symbol("handlePromise"),S=Symbol("stream");function E(U,L){return{value:U,done:L}}function A(U){var L=U[s];if(L!==null){var Q=U[S].read();Q!==null&&(U[M]=null,U[s]=null,U[g]=null,L(E(Q,!1)))}}function B(U){process$1.nextTick(A,U)}function R(U,L){return function(Q,ie){U.then(function(){if(L[_]){Q(E(void 0,!0));return}L[b](Q,ie)},ie)}}var T=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((c={get stream(){return this[S]},next:function(){var L=this,Q=this[x];if(Q!==null)return Promise.reject(Q);if(this[_])return Promise.resolve(E(void 0,!0));if(this[S].destroyed)return new Promise(function(se,ke){process$1.nextTick(function(){L[x]?ke(L[x]):se(E(void 0,!0))})});var ie=this[M],we;if(ie)we=new Promise(R(ie,this));else{var ye=this[S].read();if(ye!==null)return Promise.resolve(E(ye,!1));we=new Promise(this[b])}return this[M]=we,we}},n(c,Symbol.asyncIterator,function(){return this}),n(c,"return",function(){var L=this;return new Promise(function(Q,ie){L[S].destroy(null,function(we){if(we){ie(we);return}Q(E(void 0,!0))})})}),c),T),O=function(L){var Q,ie=Object.create(k,(Q={},n(Q,S,{value:L,writable:!0}),n(Q,s,{value:null,writable:!0}),n(Q,g,{value:null,writable:!0}),n(Q,x,{value:null,writable:!0}),n(Q,_,{value:L._readableState.endEmitted,writable:!0}),n(Q,b,{value:function(ye,se){var ke=ie[S].read();ke?(ie[M]=null,ie[s]=null,ie[g]=null,ye(E(ke,!1))):(ie[s]=ye,ie[g]=se)},writable:!0}),Q));return ie[M]=null,m(L,function(we){if(we&&we.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ye=ie[g];ye!==null&&(ie[M]=null,ie[s]=null,ie[g]=null,ye(we)),ie[x]=we;return}var se=ie[s];se!==null&&(ie[M]=null,ie[s]=null,ie[g]=null,se(E(void 0,!0))),ie[_]=!0}),L.on("readable",B.bind(null,ie)),ie};return async_iterator=O,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=se;var c;se.ReadableState=ye,requireEvents().EventEmitter;var n=function(z,ue){return z.listeners(ue).length},h=requireStreamBrowser$1(),u=require$$0$1.Buffer,m=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(ee){return u.from(ee)}function g(ee){return u.isBuffer(ee)||ee instanceof m}var x=requireUtil$1(),_;x&&x.debuglog?_=x.debuglog("stream"):_=function(){};var M=requireBuffer_list(),b=requireDestroy$1(),S=requireState(),E=S.getHighWaterMark,A=requireErrorsBrowser().codes,B=A.ERR_INVALID_ARG_TYPE,R=A.ERR_STREAM_PUSH_AFTER_EOF,T=A.ERR_METHOD_NOT_IMPLEMENTED,k=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,U,L;requireInherits_browser()(se,h);var Q=b.errorOrDestroy,ie=["error","close","destroy","pause","resume"];function we(ee,z,ue){if(typeof ee.prependListener=="function")return ee.prependListener(z,ue);!ee._events||!ee._events[z]?ee.on(z,ue):Array.isArray(ee._events[z])?ee._events[z].unshift(ue):ee._events[z]=[ue,ee._events[z]]}function ye(ee,z,ue){c=c||require_stream_duplex$1(),ee=ee||{},typeof ue!="boolean"&&(ue=z instanceof c),this.objectMode=!!ee.objectMode,ue&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=E(this,ee,"readableHighWaterMark",ue),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(O||(O=requireString_decoder().StringDecoder),this.decoder=new O(ee.encoding),this.encoding=ee.encoding)}function se(ee){if(c=c||require_stream_duplex$1(),!(this instanceof se))return new se(ee);var z=this instanceof c;this._readableState=new ye(ee,this,z),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),h.call(this)}Object.defineProperty(se.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(z){this._readableState&&(this._readableState.destroyed=z)}}),se.prototype.destroy=b.destroy,se.prototype._undestroy=b.undestroy,se.prototype._destroy=function(ee,z){z(ee)},se.prototype.push=function(ee,z){var ue=this._readableState,Ze;return ue.objectMode?Ze=!0:typeof ee=="string"&&(z=z||ue.defaultEncoding,z!==ue.encoding&&(ee=u.from(ee,z),z=""),Ze=!0),ke(this,ee,z,!1,Ze)},se.prototype.unshift=function(ee){return ke(this,ee,null,!0,!1)};function ke(ee,z,ue,Ze,Ae){_("readableAddChunk",z);var qe=ee._readableState;if(z===null)qe.reading=!1,d(ee,qe);else{var nt;if(Ae||(nt=e(qe,z)),nt)Q(ee,nt);else if(qe.objectMode||z&&z.length>0)if(typeof z!="string"&&!qe.objectMode&&Object.getPrototypeOf(z)!==u.prototype&&(z=s(z)),Ze)qe.endEmitted?Q(ee,new k):w(ee,qe,z,!0);else if(qe.ended)Q(ee,new R);else{if(qe.destroyed)return!1;qe.reading=!1,qe.decoder&&!ue?(z=qe.decoder.write(z),qe.objectMode||z.length!==0?w(ee,qe,z,!1):l(ee,qe)):w(ee,qe,z,!1)}else Ze||(qe.reading=!1,l(ee,qe))}return!qe.ended&&(qe.length<qe.highWaterMark||qe.length===0)}function w(ee,z,ue,Ze){z.flowing&&z.length===0&&!z.sync?(z.awaitDrain=0,ee.emit("data",ue)):(z.length+=z.objectMode?1:ue.length,Ze?z.buffer.unshift(ue):z.buffer.push(ue),z.needReadable&&v(ee)),l(ee,z)}function e(ee,z){var ue;return!g(z)&&typeof z!="string"&&z!==void 0&&!ee.objectMode&&(ue=new B("chunk",["string","Buffer","Uint8Array"],z)),ue}se.prototype.isPaused=function(){return this._readableState.flowing===!1},se.prototype.setEncoding=function(ee){O||(O=requireString_decoder().StringDecoder);var z=new O(ee);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;for(var ue=this._readableState.buffer.head,Ze="";ue!==null;)Ze+=z.write(ue.data),ue=ue.next;return this._readableState.buffer.clear(),Ze!==""&&this._readableState.buffer.push(Ze),this._readableState.length=Ze.length,this};var r=1073741824;function a(ee){return ee>=r?ee=r:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee}function o(ee,z){return ee<=0||z.length===0&&z.ended?0:z.objectMode?1:ee!==ee?z.flowing&&z.length?z.buffer.head.data.length:z.length:(ee>z.highWaterMark&&(z.highWaterMark=a(ee)),ee<=z.length?ee:z.ended?z.length:(z.needReadable=!0,0))}se.prototype.read=function(ee){_("read",ee),ee=parseInt(ee,10);var z=this._readableState,ue=ee;if(ee!==0&&(z.emittedReadable=!1),ee===0&&z.needReadable&&((z.highWaterMark!==0?z.length>=z.highWaterMark:z.length>0)||z.ended))return _("read: emitReadable",z.length,z.ended),z.length===0&&z.ended?W(this):v(this),null;if(ee=o(ee,z),ee===0&&z.ended)return z.length===0&&W(this),null;var Ze=z.needReadable;_("need readable",Ze),(z.length===0||z.length-ee<z.highWaterMark)&&(Ze=!0,_("length less than watermark",Ze)),z.ended||z.reading?(Ze=!1,_("reading or ended",Ze)):Ze&&(_("do read"),z.reading=!0,z.sync=!0,z.length===0&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(ee=o(ue,z)));var Ae;return ee>0?Ae=N(ee,z):Ae=null,Ae===null?(z.needReadable=z.length<=z.highWaterMark,ee=0):(z.length-=ee,z.awaitDrain=0),z.length===0&&(z.ended||(z.needReadable=!0),ue!==ee&&z.ended&&W(this)),Ae!==null&&this.emit("data",Ae),Ae};function d(ee,z){if(_("onEofChunk"),!z.ended){if(z.decoder){var ue=z.decoder.end();ue&&ue.length&&(z.buffer.push(ue),z.length+=z.objectMode?1:ue.length)}z.ended=!0,z.sync?v(ee):(z.needReadable=!1,z.emittedReadable||(z.emittedReadable=!0,y(ee)))}}function v(ee){var z=ee._readableState;_("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(_("emitReadable",z.flowing),z.emittedReadable=!0,process$1.nextTick(y,ee))}function y(ee){var z=ee._readableState;_("emitReadable_",z.destroyed,z.length,z.ended),!z.destroyed&&(z.length||z.ended)&&(ee.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,V(ee)}function l(ee,z){z.readingMore||(z.readingMore=!0,process$1.nextTick(t,ee,z))}function t(ee,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&z.length===0);){var ue=z.length;if(_("maybeReadMore read 0"),ee.read(0),ue===z.length)break}z.readingMore=!1}se.prototype._read=function(ee){Q(this,new T("_read()"))},se.prototype.pipe=function(ee,z){var ue=this,Ze=this._readableState;switch(Ze.pipesCount){case 0:Ze.pipes=ee;break;case 1:Ze.pipes=[Ze.pipes,ee];break;default:Ze.pipes.push(ee);break}Ze.pipesCount+=1,_("pipe count=%d opts=%j",Ze.pipesCount,z);var Ae=(!z||z.end!==!1)&&ee!==process$1.stdout&&ee!==process$1.stderr,qe=Ae?Ne:lt;Ze.endEmitted?process$1.nextTick(qe):ue.once("end",qe),ee.on("unpipe",nt);function nt($e,ze){_("onunpipe"),$e===ue&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,Ce())}function Ne(){_("onend"),ee.end()}var ve=p(ue);ee.on("drain",ve);var ut=!1;function Ce(){_("cleanup"),ee.removeListener("close",Ie),ee.removeListener("finish",Le),ee.removeListener("drain",ve),ee.removeListener("error",ht),ee.removeListener("unpipe",nt),ue.removeListener("end",Ne),ue.removeListener("end",lt),ue.removeListener("data",je),ut=!0,Ze.awaitDrain&&(!ee._writableState||ee._writableState.needDrain)&&ve()}ue.on("data",je);function je($e){_("ondata");var ze=ee.write($e);_("dest.write",ze),ze===!1&&((Ze.pipesCount===1&&Ze.pipes===ee||Ze.pipesCount>1&&ne(Ze.pipes,ee)!==-1)&&!ut&&(_("false write response, pause",Ze.awaitDrain),Ze.awaitDrain++),ue.pause())}function ht($e){_("onerror",$e),lt(),ee.removeListener("error",ht),n(ee,"error")===0&&Q(ee,$e)}we(ee,"error",ht);function Ie(){ee.removeListener("finish",Le),lt()}ee.once("close",Ie);function Le(){_("onfinish"),ee.removeListener("close",Ie),lt()}ee.once("finish",Le);function lt(){_("unpipe"),ue.unpipe(ee)}return ee.emit("pipe",ue),Ze.flowing||(_("pipe resume"),ue.resume()),ee};function p(ee){return function(){var ue=ee._readableState;_("pipeOnDrain",ue.awaitDrain),ue.awaitDrain&&ue.awaitDrain--,ue.awaitDrain===0&&n(ee,"data")&&(ue.flowing=!0,V(ee))}}se.prototype.unpipe=function(ee){var z=this._readableState,ue={hasUnpiped:!1};if(z.pipesCount===0)return this;if(z.pipesCount===1)return ee&&ee!==z.pipes?this:(ee||(ee=z.pipes),z.pipes=null,z.pipesCount=0,z.flowing=!1,ee&&ee.emit("unpipe",this,ue),this);if(!ee){var Ze=z.pipes,Ae=z.pipesCount;z.pipes=null,z.pipesCount=0,z.flowing=!1;for(var qe=0;qe<Ae;qe++)Ze[qe].emit("unpipe",this,{hasUnpiped:!1});return this}var nt=ne(z.pipes,ee);return nt===-1?this:(z.pipes.splice(nt,1),z.pipesCount-=1,z.pipesCount===1&&(z.pipes=z.pipes[0]),ee.emit("unpipe",this,ue),this)},se.prototype.on=function(ee,z){var ue=h.prototype.on.call(this,ee,z),Ze=this._readableState;return ee==="data"?(Ze.readableListening=this.listenerCount("readable")>0,Ze.flowing!==!1&&this.resume()):ee==="readable"&&!Ze.endEmitted&&!Ze.readableListening&&(Ze.readableListening=Ze.needReadable=!0,Ze.flowing=!1,Ze.emittedReadable=!1,_("on readable",Ze.length,Ze.reading),Ze.length?v(this):Ze.reading||process$1.nextTick(I,this)),ue},se.prototype.addListener=se.prototype.on,se.prototype.removeListener=function(ee,z){var ue=h.prototype.removeListener.call(this,ee,z);return ee==="readable"&&process$1.nextTick(q,this),ue},se.prototype.removeAllListeners=function(ee){var z=h.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&process$1.nextTick(q,this),z};function q(ee){var z=ee._readableState;z.readableListening=ee.listenerCount("readable")>0,z.resumeScheduled&&!z.paused?z.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function I(ee){_("readable nexttick read 0"),ee.read(0)}se.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(_("resume"),ee.flowing=!ee.readableListening,$(this,ee)),ee.paused=!1,this};function $(ee,z){z.resumeScheduled||(z.resumeScheduled=!0,process$1.nextTick(G,ee,z))}function G(ee,z){_("resume",z.reading),z.reading||ee.read(0),z.resumeScheduled=!1,ee.emit("resume"),V(ee),z.flowing&&!z.reading&&ee.read(0)}se.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function V(ee){var z=ee._readableState;for(_("flow",z.flowing);z.flowing&&ee.read()!==null;);}se.prototype.wrap=function(ee){var z=this,ue=this._readableState,Ze=!1;ee.on("end",function(){if(_("wrapped end"),ue.decoder&&!ue.ended){var nt=ue.decoder.end();nt&&nt.length&&z.push(nt)}z.push(null)}),ee.on("data",function(nt){if(_("wrapped data"),ue.decoder&&(nt=ue.decoder.write(nt)),!(ue.objectMode&&nt==null)&&!(!ue.objectMode&&(!nt||!nt.length))){var Ne=z.push(nt);Ne||(Ze=!0,ee.pause())}});for(var Ae in ee)this[Ae]===void 0&&typeof ee[Ae]=="function"&&(this[Ae]=function(Ne){return function(){return ee[Ne].apply(ee,arguments)}}(Ae));for(var qe=0;qe<ie.length;qe++)ee.on(ie[qe],this.emit.bind(this,ie[qe]));return this._read=function(nt){_("wrapped _read",nt),Ze&&(Ze=!1,ee.resume())},this},typeof Symbol=="function"&&(se.prototype[Symbol.asyncIterator]=function(){return U===void 0&&(U=requireAsync_iterator()),U(this)}),Object.defineProperty(se.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(se.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(se.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(z){this._readableState&&(this._readableState.flowing=z)}}),se._fromList=N,Object.defineProperty(se.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function N(ee,z){if(z.length===0)return null;var ue;return z.objectMode?ue=z.buffer.shift():!ee||ee>=z.length?(z.decoder?ue=z.buffer.join(""):z.buffer.length===1?ue=z.buffer.first():ue=z.buffer.concat(z.length),z.buffer.clear()):ue=z.buffer.consume(ee,z.decoder),ue}function W(ee){var z=ee._readableState;_("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,process$1.nextTick(Z,z,ee))}function Z(ee,z){if(_("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,z.readable=!1,z.emit("end"),ee.autoDestroy)){var ue=z._writableState;(!ue||ue.autoDestroy&&ue.finished)&&z.destroy()}}typeof Symbol=="function"&&(se.from=function(ee,z){return L===void 0&&(L=requireFromBrowser()),L(se,ee,z)});function ne(ee,z){for(var ue=0,Ze=ee.length;ue<Ze;ue++)if(ee[ue]===z)return ue;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=x;var c=requireErrorsBrowser().codes,n=c.ERR_METHOD_NOT_IMPLEMENTED,h=c.ERR_MULTIPLE_CALLBACK,u=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=c.ERR_TRANSFORM_WITH_LENGTH_0,s=require_stream_duplex$1();requireInherits_browser()(x,s);function g(b,S){var E=this._transformState;E.transforming=!1;var A=E.writecb;if(A===null)return this.emit("error",new h);E.writechunk=null,E.writecb=null,S!=null&&this.push(S),A(b);var B=this._readableState;B.reading=!1,(B.needReadable||B.length<B.highWaterMark)&&this._read(B.highWaterMark)}function x(b){if(!(this instanceof x))return new x(b);s.call(this,b),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",_)}function _(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,E){M(b,S,E)}):M(this,null,null)}x.prototype.push=function(b,S){return this._transformState.needTransform=!1,s.prototype.push.call(this,b,S)},x.prototype._transform=function(b,S,E){E(new n("_transform()"))},x.prototype._write=function(b,S,E){var A=this._transformState;if(A.writecb=E,A.writechunk=b,A.writeencoding=S,!A.transforming){var B=this._readableState;(A.needTransform||B.needReadable||B.length<B.highWaterMark)&&this._read(B.highWaterMark)}},x.prototype._read=function(b){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},x.prototype._destroy=function(b,S){s.prototype._destroy.call(this,b,function(E){S(E)})};function M(b,S,E){if(S)return b.emit("error",S);if(E!=null&&b.push(E),b._writableState.length)throw new m;if(b._transformState.transforming)throw new u;return b.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=n;var c=require_stream_transform$1();requireInherits_browser()(n,c);function n(h){if(!(this instanceof n))return new n(h);c.call(this,h)}return n.prototype._transform=function(h,u,m){m(null,h)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var c;function n(E){var A=!1;return function(){A||(A=!0,E.apply(void 0,arguments))}}var h=requireErrorsBrowser().codes,u=h.ERR_MISSING_ARGS,m=h.ERR_STREAM_DESTROYED;function s(E){if(E)throw E}function g(E){return E.setHeader&&typeof E.abort=="function"}function x(E,A,B,R){R=n(R);var T=!1;E.on("close",function(){T=!0}),c===void 0&&(c=requireEndOfStream()),c(E,{readable:A,writable:B},function(O){if(O)return R(O);T=!0,R()});var k=!1;return function(O){if(!T&&!k){if(k=!0,g(E))return E.abort();if(typeof E.destroy=="function")return E.destroy();R(O||new m("pipe"))}}}function _(E){E()}function M(E,A){return E.pipe(A)}function b(E){return!E.length||typeof E[E.length-1]!="function"?s:E.pop()}function S(){for(var E=arguments.length,A=new Array(E),B=0;B<E;B++)A[B]=arguments[B];var R=b(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new u("streams");var T,k=A.map(function(O,U){var L=U<A.length-1,Q=U>0;return x(O,L,Q,function(ie){T||(T=ie),ie&&k.forEach(_),!L&&(k.forEach(_),R(T))})});return A.reduce(M)}return pipeline_1=S,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=h;var c=requireEvents().EventEmitter,n=requireInherits_browser();n(h,c),h.Readable=require_stream_readable$1(),h.Writable=require_stream_writable$1(),h.Duplex=require_stream_duplex$1(),h.Transform=require_stream_transform$1(),h.PassThrough=require_stream_passthrough$1(),h.finished=requireEndOfStream(),h.pipeline=requirePipeline(),h.Stream=h;function h(){c.call(this)}return h.prototype.pipe=function(u,m){var s=this;function g(A){u.writable&&u.write(A)===!1&&s.pause&&s.pause()}s.on("data",g);function x(){s.readable&&s.resume&&s.resume()}u.on("drain",x),!u._isStdio&&(!m||m.end!==!1)&&(s.on("end",M),s.on("close",b));var _=!1;function M(){_||(_=!0,u.end())}function b(){_||(_=!0,typeof u.destroy=="function"&&u.destroy())}function S(A){if(E(),c.listenerCount(this,"error")===0)throw A}s.on("error",S),u.on("error",S);function E(){s.removeListener("data",g),u.removeListener("drain",x),s.removeListener("end",M),s.removeListener("close",b),s.removeListener("error",S),u.removeListener("error",S),s.removeListener("end",E),s.removeListener("close",E),u.removeListener("close",E)}return s.on("end",E),s.on("close",E),u.on("close",E),u.emit("pipe",s),u},streamBrowserify}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var c=requireSafeBuffer$1().Buffer,n=requireStreamBrowserify().Transform,h=requireInherits_browser();function u(s,g){if(!c.isBuffer(s)&&typeof s!="string")throw new TypeError(g+" must be a string or a buffer")}function m(s){n.call(this),this._block=c.allocUnsafe(s),this._blockSize=s,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return h(m,n),m.prototype._transform=function(s,g,x){var _=null;try{this.update(s,g)}catch(M){_=M}x(_)},m.prototype._flush=function(s){var g=null;try{this.push(this.digest())}catch(x){g=x}s(g)},m.prototype.update=function(s,g){if(u(s,"Data"),this._finalized)throw new Error("Digest already called");c.isBuffer(s)||(s=c.from(s,g));for(var x=this._block,_=0;this._blockOffset+s.length-_>=this._blockSize;){for(var M=this._blockOffset;M<this._blockSize;)x[M++]=s[_++];this._update(),this._blockOffset=0}for(;_<s.length;)x[this._blockOffset++]=s[_++];for(var b=0,S=s.length*8;S>0;++b)this._length[b]+=S,S=this._length[b]/4294967296|0,S>0&&(this._length[b]-=4294967296*S);return this},m.prototype._update=function(){throw new Error("_update is not implemented")},m.prototype.digest=function(s){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var g=this._digest();s!==void 0&&(g=g.toString(s)),this._block.fill(0),this._blockOffset=0;for(var x=0;x<4;++x)this._length[x]=0;return g},m.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=m,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var c=requireInherits_browser(),n=requireHashBase(),h=requireSafeBuffer$1().Buffer,u=new Array(16);function m(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}c(m,n),m.prototype._update=function(){for(var b=u,S=0;S<16;++S)b[S]=this._block.readInt32LE(S*4);var E=this._a,A=this._b,B=this._c,R=this._d;E=g(E,A,B,R,b[0],3614090360,7),R=g(R,E,A,B,b[1],3905402710,12),B=g(B,R,E,A,b[2],606105819,17),A=g(A,B,R,E,b[3],3250441966,22),E=g(E,A,B,R,b[4],4118548399,7),R=g(R,E,A,B,b[5],1200080426,12),B=g(B,R,E,A,b[6],2821735955,17),A=g(A,B,R,E,b[7],4249261313,22),E=g(E,A,B,R,b[8],1770035416,7),R=g(R,E,A,B,b[9],2336552879,12),B=g(B,R,E,A,b[10],4294925233,17),A=g(A,B,R,E,b[11],2304563134,22),E=g(E,A,B,R,b[12],1804603682,7),R=g(R,E,A,B,b[13],4254626195,12),B=g(B,R,E,A,b[14],2792965006,17),A=g(A,B,R,E,b[15],1236535329,22),E=x(E,A,B,R,b[1],4129170786,5),R=x(R,E,A,B,b[6],3225465664,9),B=x(B,R,E,A,b[11],643717713,14),A=x(A,B,R,E,b[0],3921069994,20),E=x(E,A,B,R,b[5],3593408605,5),R=x(R,E,A,B,b[10],38016083,9),B=x(B,R,E,A,b[15],3634488961,14),A=x(A,B,R,E,b[4],3889429448,20),E=x(E,A,B,R,b[9],568446438,5),R=x(R,E,A,B,b[14],3275163606,9),B=x(B,R,E,A,b[3],4107603335,14),A=x(A,B,R,E,b[8],1163531501,20),E=x(E,A,B,R,b[13],2850285829,5),R=x(R,E,A,B,b[2],4243563512,9),B=x(B,R,E,A,b[7],1735328473,14),A=x(A,B,R,E,b[12],2368359562,20),E=_(E,A,B,R,b[5],4294588738,4),R=_(R,E,A,B,b[8],2272392833,11),B=_(B,R,E,A,b[11],1839030562,16),A=_(A,B,R,E,b[14],4259657740,23),E=_(E,A,B,R,b[1],2763975236,4),R=_(R,E,A,B,b[4],1272893353,11),B=_(B,R,E,A,b[7],4139469664,16),A=_(A,B,R,E,b[10],3200236656,23),E=_(E,A,B,R,b[13],681279174,4),R=_(R,E,A,B,b[0],3936430074,11),B=_(B,R,E,A,b[3],3572445317,16),A=_(A,B,R,E,b[6],76029189,23),E=_(E,A,B,R,b[9],3654602809,4),R=_(R,E,A,B,b[12],3873151461,11),B=_(B,R,E,A,b[15],530742520,16),A=_(A,B,R,E,b[2],3299628645,23),E=M(E,A,B,R,b[0],4096336452,6),R=M(R,E,A,B,b[7],1126891415,10),B=M(B,R,E,A,b[14],2878612391,15),A=M(A,B,R,E,b[5],4237533241,21),E=M(E,A,B,R,b[12],1700485571,6),R=M(R,E,A,B,b[3],2399980690,10),B=M(B,R,E,A,b[10],4293915773,15),A=M(A,B,R,E,b[1],2240044497,21),E=M(E,A,B,R,b[8],1873313359,6),R=M(R,E,A,B,b[15],4264355552,10),B=M(B,R,E,A,b[6],2734768916,15),A=M(A,B,R,E,b[13],1309151649,21),E=M(E,A,B,R,b[4],4149444226,6),R=M(R,E,A,B,b[11],3174756917,10),B=M(B,R,E,A,b[2],718787259,15),A=M(A,B,R,E,b[9],3951481745,21),this._a=this._a+E|0,this._b=this._b+A|0,this._c=this._c+B|0,this._d=this._d+R|0},m.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var b=h.allocUnsafe(16);return b.writeInt32LE(this._a,0),b.writeInt32LE(this._b,4),b.writeInt32LE(this._c,8),b.writeInt32LE(this._d,12),b};function s(b,S){return b<<S|b>>>32-S}function g(b,S,E,A,B,R,T){return s(b+(S&E|~S&A)+B+R|0,T)+S|0}function x(b,S,E,A,B,R,T){return s(b+(S&A|E&~A)+B+R|0,T)+S|0}function _(b,S,E,A,B,R,T){return s(b+(S^E^A)+B+R|0,T)+S|0}function M(b,S,E,A,B,R,T){return s(b+(E^(S|~A))+B+R|0,T)+S|0}return md5_js=m,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var c=require$$0$1.Buffer,n=requireInherits_browser(),h=requireHashBase(),u=new Array(16),m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],x=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],_=[0,1518500249,1859775393,2400959708,2840853838],M=[1352829926,1548603684,1836072691,2053994217,0];function b(){h.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}n(b,h),b.prototype._update=function(){for(var k=u,O=0;O<16;++O)k[O]=this._block.readInt32LE(O*4);for(var U=this._a|0,L=this._b|0,Q=this._c|0,ie=this._d|0,we=this._e|0,ye=this._a|0,se=this._b|0,ke=this._c|0,w=this._d|0,e=this._e|0,r=0;r<80;r+=1){var a,o;r<16?(a=E(U,L,Q,ie,we,k[m[r]],_[0],g[r]),o=T(ye,se,ke,w,e,k[s[r]],M[0],x[r])):r<32?(a=A(U,L,Q,ie,we,k[m[r]],_[1],g[r]),o=R(ye,se,ke,w,e,k[s[r]],M[1],x[r])):r<48?(a=B(U,L,Q,ie,we,k[m[r]],_[2],g[r]),o=B(ye,se,ke,w,e,k[s[r]],M[2],x[r])):r<64?(a=R(U,L,Q,ie,we,k[m[r]],_[3],g[r]),o=A(ye,se,ke,w,e,k[s[r]],M[3],x[r])):(a=T(U,L,Q,ie,we,k[m[r]],_[4],g[r]),o=E(ye,se,ke,w,e,k[s[r]],M[4],x[r])),U=we,we=ie,ie=S(Q,10),Q=L,L=a,ye=e,e=w,w=S(ke,10),ke=se,se=o}var d=this._b+Q+w|0;this._b=this._c+ie+e|0,this._c=this._d+we+ye|0,this._d=this._e+U+se|0,this._e=this._a+L+ke|0,this._a=d},b.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var k=c.alloc?c.alloc(20):new c(20);return k.writeInt32LE(this._a,0),k.writeInt32LE(this._b,4),k.writeInt32LE(this._c,8),k.writeInt32LE(this._d,12),k.writeInt32LE(this._e,16),k};function S(k,O){return k<<O|k>>>32-O}function E(k,O,U,L,Q,ie,we,ye){return S(k+(O^U^L)+ie+we|0,ye)+Q|0}function A(k,O,U,L,Q,ie,we,ye){return S(k+(O&U|~O&L)+ie+we|0,ye)+Q|0}function B(k,O,U,L,Q,ie,we,ye){return S(k+((O|~U)^L)+ie+we|0,ye)+Q|0}function R(k,O,U,L,Q,ie,we,ye){return S(k+(O&L|U&~L)+ie+we|0,ye)+Q|0}function T(k,O,U,L,Q,ie,we,ye){return S(k+(O^(U|~L))+ie+we|0,ye)+Q|0}return ripemd160=b,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var c=requireSafeBuffer$1().Buffer;function n(h,u){this._block=c.alloc(h),this._finalSize=u,this._blockSize=h,this._len=0}return n.prototype.update=function(h,u){typeof h=="string"&&(u=u||"utf8",h=c.from(h,u));for(var m=this._block,s=this._blockSize,g=h.length,x=this._len,_=0;_<g;){for(var M=x%s,b=Math.min(g-_,s-M),S=0;S<b;S++)m[M+S]=h[_+S];x+=b,_+=b,x%s===0&&this._update(m)}return this._len+=g,this},n.prototype.digest=function(h){var u=this._len%this._blockSize;this._block[u]=128,this._block.fill(0,u+1),u>=this._finalSize&&(this._update(this._block),this._block.fill(0));var m=this._len*8;if(m<=4294967295)this._block.writeUInt32BE(m,this._blockSize-4);else{var s=(m&4294967295)>>>0,g=(m-s)/4294967296;this._block.writeUInt32BE(g,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var x=this._hash();return h?x.toString(h):x},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=n,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var c=requireInherits_browser(),n=requireHash$1(),h=requireSafeBuffer$1().Buffer,u=[1518500249,1859775393,-1894007588,-899497514],m=new Array(80);function s(){this.init(),this._w=m,n.call(this,64,56)}c(s,n),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function g(M){return M<<5|M>>>27}function x(M){return M<<30|M>>>2}function _(M,b,S,E){return M===0?b&S|~b&E:M===2?b&S|b&E|S&E:b^S^E}return s.prototype._update=function(M){for(var b=this._w,S=this._a|0,E=this._b|0,A=this._c|0,B=this._d|0,R=this._e|0,T=0;T<16;++T)b[T]=M.readInt32BE(T*4);for(;T<80;++T)b[T]=b[T-3]^b[T-8]^b[T-14]^b[T-16];for(var k=0;k<80;++k){var O=~~(k/20),U=g(S)+_(O,E,A,B)+R+b[k]+u[O]|0;R=B,B=A,A=x(E),E=S,S=U}this._a=S+this._a|0,this._b=E+this._b|0,this._c=A+this._c|0,this._d=B+this._d|0,this._e=R+this._e|0},s.prototype._hash=function(){var M=h.allocUnsafe(20);return M.writeInt32BE(this._a|0,0),M.writeInt32BE(this._b|0,4),M.writeInt32BE(this._c|0,8),M.writeInt32BE(this._d|0,12),M.writeInt32BE(this._e|0,16),M},sha$1=s,sha$1}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var c=requireInherits_browser(),n=requireHash$1(),h=requireSafeBuffer$1().Buffer,u=[1518500249,1859775393,-1894007588,-899497514],m=new Array(80);function s(){this.init(),this._w=m,n.call(this,64,56)}c(s,n),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function g(b){return b<<1|b>>>31}function x(b){return b<<5|b>>>27}function _(b){return b<<30|b>>>2}function M(b,S,E,A){return b===0?S&E|~S&A:b===2?S&E|S&A|E&A:S^E^A}return s.prototype._update=function(b){for(var S=this._w,E=this._a|0,A=this._b|0,B=this._c|0,R=this._d|0,T=this._e|0,k=0;k<16;++k)S[k]=b.readInt32BE(k*4);for(;k<80;++k)S[k]=g(S[k-3]^S[k-8]^S[k-14]^S[k-16]);for(var O=0;O<80;++O){var U=~~(O/20),L=x(E)+M(U,A,B,R)+T+S[O]+u[U]|0;T=R,R=B,B=_(A),A=E,E=L}this._a=E+this._a|0,this._b=A+this._b|0,this._c=B+this._c|0,this._d=R+this._d|0,this._e=T+this._e|0},s.prototype._hash=function(){var b=h.allocUnsafe(20);return b.writeInt32BE(this._a|0,0),b.writeInt32BE(this._b|0,4),b.writeInt32BE(this._c|0,8),b.writeInt32BE(this._d|0,12),b.writeInt32BE(this._e|0,16),b},sha1$1=s,sha1$1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var c=requireInherits_browser(),n=requireHash$1(),h=requireSafeBuffer$1().Buffer,u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=new Array(64);function s(){this.init(),this._w=m,n.call(this,64,56)}c(s,n),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function g(E,A,B){return B^E&(A^B)}function x(E,A,B){return E&A|B&(E|A)}function _(E){return(E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10)}function M(E){return(E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7)}function b(E){return(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3}function S(E){return(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10}return s.prototype._update=function(E){for(var A=this._w,B=this._a|0,R=this._b|0,T=this._c|0,k=this._d|0,O=this._e|0,U=this._f|0,L=this._g|0,Q=this._h|0,ie=0;ie<16;++ie)A[ie]=E.readInt32BE(ie*4);for(;ie<64;++ie)A[ie]=S(A[ie-2])+A[ie-7]+b(A[ie-15])+A[ie-16]|0;for(var we=0;we<64;++we){var ye=Q+M(O)+g(O,U,L)+u[we]+A[we]|0,se=_(B)+x(B,R,T)|0;Q=L,L=U,U=O,O=k+ye|0,k=T,T=R,R=B,B=ye+se|0}this._a=B+this._a|0,this._b=R+this._b|0,this._c=T+this._c|0,this._d=k+this._d|0,this._e=O+this._e|0,this._f=U+this._f|0,this._g=L+this._g|0,this._h=Q+this._h|0},s.prototype._hash=function(){var E=h.allocUnsafe(32);return E.writeInt32BE(this._a,0),E.writeInt32BE(this._b,4),E.writeInt32BE(this._c,8),E.writeInt32BE(this._d,12),E.writeInt32BE(this._e,16),E.writeInt32BE(this._f,20),E.writeInt32BE(this._g,24),E.writeInt32BE(this._h,28),E},sha256$1=s,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var c=requireInherits_browser(),n=requireSha256(),h=requireHash$1(),u=requireSafeBuffer$1().Buffer,m=new Array(64);function s(){this.init(),this._w=m,h.call(this,64,56)}return c(s,n),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var g=u.allocUnsafe(28);return g.writeInt32BE(this._a,0),g.writeInt32BE(this._b,4),g.writeInt32BE(this._c,8),g.writeInt32BE(this._d,12),g.writeInt32BE(this._e,16),g.writeInt32BE(this._f,20),g.writeInt32BE(this._g,24),g},sha224$1=s,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var c=requireInherits_browser(),n=requireHash$1(),h=requireSafeBuffer$1().Buffer,u=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],m=new Array(160);function s(){this.init(),this._w=m,n.call(this,128,112)}c(s,n),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function g(R,T,k){return k^R&(T^k)}function x(R,T,k){return R&T|k&(R|T)}function _(R,T){return(R>>>28|T<<4)^(T>>>2|R<<30)^(T>>>7|R<<25)}function M(R,T){return(R>>>14|T<<18)^(R>>>18|T<<14)^(T>>>9|R<<23)}function b(R,T){return(R>>>1|T<<31)^(R>>>8|T<<24)^R>>>7}function S(R,T){return(R>>>1|T<<31)^(R>>>8|T<<24)^(R>>>7|T<<25)}function E(R,T){return(R>>>19|T<<13)^(T>>>29|R<<3)^R>>>6}function A(R,T){return(R>>>19|T<<13)^(T>>>29|R<<3)^(R>>>6|T<<26)}function B(R,T){return R>>>0<T>>>0?1:0}return s.prototype._update=function(R){for(var T=this._w,k=this._ah|0,O=this._bh|0,U=this._ch|0,L=this._dh|0,Q=this._eh|0,ie=this._fh|0,we=this._gh|0,ye=this._hh|0,se=this._al|0,ke=this._bl|0,w=this._cl|0,e=this._dl|0,r=this._el|0,a=this._fl|0,o=this._gl|0,d=this._hl|0,v=0;v<32;v+=2)T[v]=R.readInt32BE(v*4),T[v+1]=R.readInt32BE(v*4+4);for(;v<160;v+=2){var y=T[v-30],l=T[v-15*2+1],t=b(y,l),p=S(l,y);y=T[v-2*2],l=T[v-2*2+1];var q=E(y,l),I=A(l,y),$=T[v-7*2],G=T[v-7*2+1],V=T[v-16*2],N=T[v-16*2+1],W=p+G|0,Z=t+$+B(W,p)|0;W=W+I|0,Z=Z+q+B(W,I)|0,W=W+N|0,Z=Z+V+B(W,N)|0,T[v]=Z,T[v+1]=W}for(var ne=0;ne<160;ne+=2){Z=T[ne],W=T[ne+1];var ee=x(k,O,U),z=x(se,ke,w),ue=_(k,se),Ze=_(se,k),Ae=M(Q,r),qe=M(r,Q),nt=u[ne],Ne=u[ne+1],ve=g(Q,ie,we),ut=g(r,a,o),Ce=d+qe|0,je=ye+Ae+B(Ce,d)|0;Ce=Ce+ut|0,je=je+ve+B(Ce,ut)|0,Ce=Ce+Ne|0,je=je+nt+B(Ce,Ne)|0,Ce=Ce+W|0,je=je+Z+B(Ce,W)|0;var ht=Ze+z|0,Ie=ue+ee+B(ht,Ze)|0;ye=we,d=o,we=ie,o=a,ie=Q,a=r,r=e+Ce|0,Q=L+je+B(r,e)|0,L=U,e=w,U=O,w=ke,O=k,ke=se,se=Ce+ht|0,k=je+Ie+B(se,Ce)|0}this._al=this._al+se|0,this._bl=this._bl+ke|0,this._cl=this._cl+w|0,this._dl=this._dl+e|0,this._el=this._el+r|0,this._fl=this._fl+a|0,this._gl=this._gl+o|0,this._hl=this._hl+d|0,this._ah=this._ah+k+B(this._al,se)|0,this._bh=this._bh+O+B(this._bl,ke)|0,this._ch=this._ch+U+B(this._cl,w)|0,this._dh=this._dh+L+B(this._dl,e)|0,this._eh=this._eh+Q+B(this._el,r)|0,this._fh=this._fh+ie+B(this._fl,a)|0,this._gh=this._gh+we+B(this._gl,o)|0,this._hh=this._hh+ye+B(this._hl,d)|0},s.prototype._hash=function(){var R=h.allocUnsafe(64);function T(k,O,U){R.writeInt32BE(k,U),R.writeInt32BE(O,U+4)}return T(this._ah,this._al,0),T(this._bh,this._bl,8),T(this._ch,this._cl,16),T(this._dh,this._dl,24),T(this._eh,this._el,32),T(this._fh,this._fl,40),T(this._gh,this._gl,48),T(this._hh,this._hl,56),R},sha512$1=s,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var c=requireInherits_browser(),n=requireSha512(),h=requireHash$1(),u=requireSafeBuffer$1().Buffer,m=new Array(160);function s(){this.init(),this._w=m,h.call(this,128,112)}return c(s,n),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var g=u.allocUnsafe(48);function x(_,M,b){g.writeInt32BE(_,b),g.writeInt32BE(M,b+4)}return x(this._ah,this._al,0),x(this._bh,this._bl,8),x(this._ch,this._cl,16),x(this._dh,this._dl,24),x(this._eh,this._el,32),x(this._fh,this._fl,40),g},sha384$1=s,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var c=sha_js.exports=function(h){h=h.toLowerCase();var u=c[h];if(!u)throw new Error(h+" is not supported (we accept pull requests)");return new u};return c.sha=requireSha$1(),c.sha1=requireSha1(),c.sha224=requireSha224(),c.sha256=requireSha256(),c.sha384=requireSha384(),c.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var c=requireSafeBuffer$1().Buffer,n=requireStreamBrowserify().Transform,h=requireString_decoder().StringDecoder,u=requireInherits_browser();function m(s){n.call(this),this.hashMode=typeof s=="string",this.hashMode?this[s]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return u(m,n),m.prototype.update=function(s,g,x){typeof s=="string"&&(s=c.from(s,g));var _=this._update(s);return this.hashMode?this:(x&&(_=this._toString(_,x)),_)},m.prototype.setAutoPadding=function(){},m.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},m.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},m.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},m.prototype._transform=function(s,g,x){var _;try{this.hashMode?this._update(s):this.push(this._update(s))}catch(M){_=M}finally{x(_)}},m.prototype._flush=function(s){var g;try{this.push(this.__final())}catch(x){g=x}s(g)},m.prototype._finalOrDigest=function(s){var g=this.__final()||c.alloc(0);return s&&(g=this._toString(g,s,!0)),g},m.prototype._toString=function(s,g,x){if(this._decoder||(this._decoder=new h(g),this._encoding=g),this._encoding!==g)throw new Error("can't switch encodings");var _=this._decoder.write(s);return x&&(_+=this._decoder.end()),_},cipherBase=m,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var c=requireInherits_browser(),n=requireMd5_js(),h=requireRipemd160(),u=requireSha_js(),m=requireCipherBase();function s(g){m.call(this,"digest"),this._hash=g}return c(s,m),s.prototype._update=function(g){this._hash.update(g)},s.prototype._final=function(){return this._hash.digest()},browser$9=function(x){return x=x.toLowerCase(),x==="md5"?new n:x==="rmd160"||x==="ripemd160"?new h:new s(u(x))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var c=requireInherits_browser(),n=requireSafeBuffer$1().Buffer,h=requireCipherBase(),u=n.alloc(128),m=64;function s(g,x){h.call(this,"digest"),typeof x=="string"&&(x=n.from(x)),this._alg=g,this._key=x,x.length>m?x=g(x):x.length<m&&(x=n.concat([x,u],m));for(var _=this._ipad=n.allocUnsafe(m),M=this._opad=n.allocUnsafe(m),b=0;b<m;b++)_[b]=x[b]^54,M[b]=x[b]^92;this._hash=[_]}return c(s,h),s.prototype._update=function(g){this._hash.push(g)},s.prototype._final=function(){var g=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,g]))},legacy=s,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var c=requireMd5_js();return md5=function(n){return new c().update(n).digest()},md5}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var c=requireInherits_browser(),n=requireLegacy(),h=requireCipherBase(),u=requireSafeBuffer$1().Buffer,m=requireMd5(),s=requireRipemd160(),g=requireSha_js(),x=u.alloc(128);function _(M,b){h.call(this,"digest"),typeof b=="string"&&(b=u.from(b));var S=M==="sha512"||M==="sha384"?128:64;if(this._alg=M,this._key=b,b.length>S){var E=M==="rmd160"?new s:g(M);b=E.update(b).digest()}else b.length<S&&(b=u.concat([b,x],S));for(var A=this._ipad=u.allocUnsafe(S),B=this._opad=u.allocUnsafe(S),R=0;R<S;R++)A[R]=b[R]^54,B[R]=b[R]^92;this._hash=M==="rmd160"?new s:g(M),this._hash.update(A)}return c(_,h),_.prototype._update=function(M){this._hash.update(M)},_.prototype._final=function(){var M=this._hash.digest(),b=this._alg==="rmd160"?new s:g(this._alg);return b.update(this._opad).update(M).digest()},browser$8=function(b,S){return b=b.toLowerCase(),b==="rmd160"||b==="ripemd160"?new _("rmd160",S):b==="md5"?new n(m,S):new _(b,S)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"};var require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var c=Math.pow(2,30)-1;return precondition=function(n,h){if(typeof n!="number")throw new TypeError("Iterations not a number");if(n<0)throw new TypeError("Bad iterations");if(typeof h!="number")throw new TypeError("Key length not a number");if(h<0||h>c||h!==h)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var c;if(commonjsGlobal.process&&commonjsGlobal.process.browser)c="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var n=parseInt(process$1.version.split(".")[0].slice(1),10);c=n>=6?"utf-8":"binary"}else c="utf-8";return defaultEncoding_1=c,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var c=requireSafeBuffer$1().Buffer;return toBuffer=function(n,h,u){if(c.isBuffer(n))return n;if(typeof n=="string")return c.from(n,h);if(ArrayBuffer.isView(n))return c.from(n.buffer);throw new TypeError(u+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var c=requireMd5(),n=requireRipemd160(),h=requireSha_js(),u=requireSafeBuffer$1().Buffer,m=requirePrecondition(),s=requireDefaultEncoding(),g=requireToBuffer(),x=u.alloc(128),_={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function M(E,A,B){var R=b(E),T=E==="sha512"||E==="sha384"?128:64;A.length>T?A=R(A):A.length<T&&(A=u.concat([A,x],T));for(var k=u.allocUnsafe(T+_[E]),O=u.allocUnsafe(T+_[E]),U=0;U<T;U++)k[U]=A[U]^54,O[U]=A[U]^92;var L=u.allocUnsafe(T+B+4);k.copy(L,0,0,T),this.ipad1=L,this.ipad2=k,this.opad=O,this.alg=E,this.blocksize=T,this.hash=R,this.size=_[E]}M.prototype.run=function(E,A){E.copy(A,this.blocksize);var B=this.hash(A);return B.copy(this.opad,this.blocksize),this.hash(this.opad)};function b(E){function A(R){return h(E).update(R).digest()}function B(R){return new n().update(R).digest()}return E==="rmd160"||E==="ripemd160"?B:E==="md5"?c:A}function S(E,A,B,R,T){m(B,R),E=g(E,s,"Password"),A=g(A,s,"Salt"),T=T||"sha1";var k=new M(T,E,A.length),O=u.allocUnsafe(R),U=u.allocUnsafe(A.length+4);A.copy(U,0,0,A.length);for(var L=0,Q=_[T],ie=Math.ceil(R/Q),we=1;we<=ie;we++){U.writeUInt32BE(we,A.length);for(var ye=k.run(U,k.ipad1),se=ye,ke=1;ke<B;ke++){se=k.run(se,k.ipad2);for(var w=0;w<Q;w++)ye[w]^=se[w]}ye.copy(O,L),L+=Q}return O}return syncBrowser=S,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var c=requireSafeBuffer$1().Buffer,n=requirePrecondition(),h=requireDefaultEncoding(),u=requireSyncBrowser(),m=requireToBuffer(),s,g=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,x={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},_=[];function M(B){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!g||!g.importKey||!g.deriveBits)return Promise.resolve(!1);if(_[B]!==void 0)return _[B];s=s||c.alloc(8);var R=E(s,s,10,128,B).then(function(){return!0}).catch(function(){return!1});return _[B]=R,R}var b;function S(){return b||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?b=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?b=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?b=commonjsGlobal.setImmediate:b=commonjsGlobal.setTimeout,b)}function E(B,R,T,k,O){return g.importKey("raw",B,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return g.deriveBits({name:"PBKDF2",salt:R,iterations:T,hash:{name:O}},U,k<<3)}).then(function(U){return c.from(U)})}function A(B,R){B.then(function(T){S()(function(){R(null,T)})},function(T){S()(function(){R(T)})})}return async=function(B,R,T,k,O,U){typeof O=="function"&&(U=O,O=void 0),O=O||"sha1";var L=x[O.toLowerCase()];if(!L||typeof commonjsGlobal.Promise!="function"){S()(function(){var Q;try{Q=u(B,R,T,k,O)}catch(ie){return U(ie)}U(null,Q)});return}if(n(T,k),B=m(B,h,"Password"),R=m(R,h,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");A(M(L).then(function(Q){return Q?E(B,R,T,k,L):u(B,R,T,k,O)}),U)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(m,s){var g=m[0+s]<<24|m[1+s]<<16|m[2+s]<<8|m[3+s];return g>>>0},utils$3.writeUInt32BE=function(m,s,g){m[0+g]=s>>>24,m[1+g]=s>>>16&255,m[2+g]=s>>>8&255,m[3+g]=s&255},utils$3.ip=function(m,s,g,x){for(var _=0,M=0,b=6;b>=0;b-=2){for(var S=0;S<=24;S+=8)_<<=1,_|=s>>>S+b&1;for(var S=0;S<=24;S+=8)_<<=1,_|=m>>>S+b&1}for(var b=6;b>=0;b-=2){for(var S=1;S<=25;S+=8)M<<=1,M|=s>>>S+b&1;for(var S=1;S<=25;S+=8)M<<=1,M|=m>>>S+b&1}g[x+0]=_>>>0,g[x+1]=M>>>0},utils$3.rip=function(m,s,g,x){for(var _=0,M=0,b=0;b<4;b++)for(var S=24;S>=0;S-=8)_<<=1,_|=s>>>S+b&1,_<<=1,_|=m>>>S+b&1;for(var b=4;b<8;b++)for(var S=24;S>=0;S-=8)M<<=1,M|=s>>>S+b&1,M<<=1,M|=m>>>S+b&1;g[x+0]=_>>>0,g[x+1]=M>>>0},utils$3.pc1=function(m,s,g,x){for(var _=0,M=0,b=7;b>=5;b--){for(var S=0;S<=24;S+=8)_<<=1,_|=s>>S+b&1;for(var S=0;S<=24;S+=8)_<<=1,_|=m>>S+b&1}for(var S=0;S<=24;S+=8)_<<=1,_|=s>>S+b&1;for(var b=1;b<=3;b++){for(var S=0;S<=24;S+=8)M<<=1,M|=s>>S+b&1;for(var S=0;S<=24;S+=8)M<<=1,M|=m>>S+b&1}for(var S=0;S<=24;S+=8)M<<=1,M|=m>>S+b&1;g[x+0]=_>>>0,g[x+1]=M>>>0},utils$3.r28shl=function(m,s){return m<<s&268435455|m>>>28-s};var c=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(m,s,g,x){for(var _=0,M=0,b=c.length>>>1,S=0;S<b;S++)_<<=1,_|=m>>>c[S]&1;for(var S=b;S<c.length;S++)M<<=1,M|=s>>>c[S]&1;g[x+0]=_>>>0,g[x+1]=M>>>0},utils$3.expand=function(m,s,g){var x=0,_=0;x=(m&1)<<5|m>>>27;for(var M=23;M>=15;M-=4)x<<=6,x|=m>>>M&63;for(var M=11;M>=3;M-=4)_|=m>>>M&63,_<<=6;_|=(m&31)<<1|m>>>31,s[g+0]=x>>>0,s[g+1]=_>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(m,s){for(var g=0,x=0;x<4;x++){var _=m>>>18-x*6&63,M=n[x*64+_];g<<=4,g|=M}for(var x=0;x<4;x++){var _=s>>>18-x*6&63,M=n[4*64+x*64+_];g<<=4,g|=M}return g>>>0};var h=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(m){for(var s=0,g=0;g<h.length;g++)s<<=1,s|=m>>>h[g]&1;return s>>>0},utils$3.padSplit=function(m,s,g){for(var x=m.toString(2);x.length<s;)x="0"+x;for(var _=[],M=0;M<s;M+=g)_.push(x.slice(M,M+g));return _.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=c;function c(n,h){if(!n)throw new Error(h||"Assertion failed")}return c.equal=function(h,u,m){if(h!=u)throw new Error(m||"Assertion failed: "+h+" != "+u)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var c=requireMinimalisticAssert();function n(h){this.options=h,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=h.padding!==!1}return cipher=n,n.prototype._init=function(){},n.prototype.update=function(u){return u.length===0?[]:this.type==="decrypt"?this._updateDecrypt(u):this._updateEncrypt(u)},n.prototype._buffer=function(u,m){for(var s=Math.min(this.buffer.length-this.bufferOff,u.length-m),g=0;g<s;g++)this.buffer[this.bufferOff+g]=u[m+g];return this.bufferOff+=s,s},n.prototype._flushBuffer=function(u,m){return this._update(this.buffer,0,u,m),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(u){var m=0,s=0,g=(this.bufferOff+u.length)/this.blockSize|0,x=new Array(g*this.blockSize);this.bufferOff!==0&&(m+=this._buffer(u,m),this.bufferOff===this.buffer.length&&(s+=this._flushBuffer(x,s)));for(var _=u.length-(u.length-m)%this.blockSize;m<_;m+=this.blockSize)this._update(u,m,x,s),s+=this.blockSize;for(;m<u.length;m++,this.bufferOff++)this.buffer[this.bufferOff]=u[m];return x},n.prototype._updateDecrypt=function(u){for(var m=0,s=0,g=Math.ceil((this.bufferOff+u.length)/this.blockSize)-1,x=new Array(g*this.blockSize);g>0;g--)m+=this._buffer(u,m),s+=this._flushBuffer(x,s);return m+=this._buffer(u,m),x},n.prototype.final=function(u){var m;u&&(m=this.update(u));var s;return this.type==="encrypt"?s=this._finalEncrypt():s=this._finalDecrypt(),m?m.concat(s):s},n.prototype._pad=function(u,m){if(m===0)return!1;for(;m<u.length;)u[m++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var u=new Array(this.blockSize);return this._update(this.buffer,0,u,0),u},n.prototype._unpad=function(u){return u},n.prototype._finalDecrypt=function(){c.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var u=new Array(this.blockSize);return this._flushBuffer(u,0),this._unpad(u)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var c=requireMinimalisticAssert(),n=requireInherits_browser(),h=requireUtils$3(),u=requireCipher();function m(){this.tmp=new Array(2),this.keys=null}function s(x){u.call(this,x);var _=new m;this._desState=_,this.deriveKeys(_,x.key)}n(s,u),des=s,s.create=function(_){return new s(_)};var g=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return s.prototype.deriveKeys=function(_,M){_.keys=new Array(16*2),c.equal(M.length,this.blockSize,"Invalid key length");var b=h.readUInt32BE(M,0),S=h.readUInt32BE(M,4);h.pc1(b,S,_.tmp,0),b=_.tmp[0],S=_.tmp[1];for(var E=0;E<_.keys.length;E+=2){var A=g[E>>>1];b=h.r28shl(b,A),S=h.r28shl(S,A),h.pc2(b,S,_.keys,E)}},s.prototype._update=function(_,M,b,S){var E=this._desState,A=h.readUInt32BE(_,M),B=h.readUInt32BE(_,M+4);h.ip(A,B,E.tmp,0),A=E.tmp[0],B=E.tmp[1],this.type==="encrypt"?this._encrypt(E,A,B,E.tmp,0):this._decrypt(E,A,B,E.tmp,0),A=E.tmp[0],B=E.tmp[1],h.writeUInt32BE(b,A,S),h.writeUInt32BE(b,B,S+4)},s.prototype._pad=function(_,M){if(this.padding===!1)return!1;for(var b=_.length-M,S=M;S<_.length;S++)_[S]=b;return!0},s.prototype._unpad=function(_){if(this.padding===!1)return _;for(var M=_[_.length-1],b=_.length-M;b<_.length;b++)c.equal(_[b],M);return _.slice(0,_.length-M)},s.prototype._encrypt=function(_,M,b,S,E){for(var A=M,B=b,R=0;R<_.keys.length;R+=2){var T=_.keys[R],k=_.keys[R+1];h.expand(B,_.tmp,0),T^=_.tmp[0],k^=_.tmp[1];var O=h.substitute(T,k),U=h.permute(O),L=B;B=(A^U)>>>0,A=L}h.rip(B,A,S,E)},s.prototype._decrypt=function(_,M,b,S,E){for(var A=b,B=M,R=_.keys.length-2;R>=0;R-=2){var T=_.keys[R],k=_.keys[R+1];h.expand(A,_.tmp,0),T^=_.tmp[0],k^=_.tmp[1];var O=h.substitute(T,k),U=h.permute(O),L=A;A=(B^U)>>>0,B=L}h.rip(A,B,S,E)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var c=requireMinimalisticAssert(),n=requireInherits_browser(),h={};function u(s){c.equal(s.length,8,"Invalid IV length"),this.iv=new Array(8);for(var g=0;g<this.iv.length;g++)this.iv[g]=s[g]}function m(s){function g(b){s.call(this,b),this._cbcInit()}n(g,s);for(var x=Object.keys(h),_=0;_<x.length;_++){var M=x[_];g.prototype[M]=h[M]}return g.create=function(S){return new g(S)},g}return cbc$1.instantiate=m,h._cbcInit=function(){var g=new u(this.options.iv);this._cbcState=g},h._update=function(g,x,_,M){var b=this._cbcState,S=this.constructor.super_.prototype,E=b.iv;if(this.type==="encrypt"){for(var A=0;A<this.blockSize;A++)E[A]^=g[x+A];S._update.call(this,E,0,_,M);for(var A=0;A<this.blockSize;A++)E[A]=_[M+A]}else{S._update.call(this,g,x,_,M);for(var A=0;A<this.blockSize;A++)_[M+A]^=E[A];for(var A=0;A<this.blockSize;A++)E[A]=g[x+A]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var c=requireMinimalisticAssert(),n=requireInherits_browser(),h=requireCipher(),u=requireDes$1();function m(g,x){c.equal(x.length,24,"Invalid key length");var _=x.slice(0,8),M=x.slice(8,16),b=x.slice(16,24);g==="encrypt"?this.ciphers=[u.create({type:"encrypt",key:_}),u.create({type:"decrypt",key:M}),u.create({type:"encrypt",key:b})]:this.ciphers=[u.create({type:"decrypt",key:b}),u.create({type:"encrypt",key:M}),u.create({type:"decrypt",key:_})]}function s(g){h.call(this,g);var x=new m(this.type,this.options.key);this._edeState=x}return n(s,h),ede=s,s.create=function(x){return new s(x)},s.prototype._update=function(x,_,M,b){var S=this._edeState;S.ciphers[0]._update(x,_,M,b),S.ciphers[1]._update(M,b,M,b),S.ciphers[2]._update(M,b,M,b)},s.prototype._pad=u.prototype._pad,s.prototype._unpad=u.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var c=requireCipherBase(),n=requireDes(),h=requireInherits_browser(),u=requireSafeBuffer$1().Buffer,m={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};m.des=m["des-cbc"],m.des3=m["des-ede3-cbc"],browserifyDes=s,h(s,c);function s(g){c.call(this);var x=g.mode.toLowerCase(),_=m[x],M;g.decrypt?M="decrypt":M="encrypt";var b=g.key;u.isBuffer(b)||(b=u.from(b)),(x==="des-ede"||x==="des-ede-cbc")&&(b=u.concat([b,b.slice(0,8)]));var S=g.iv;u.isBuffer(S)||(S=u.from(S)),this._des=_.create({key:b,iv:S,type:M})}return s.prototype._update=function(g){return u.from(this._des.update(g))},s.prototype._final=function(){return u.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(c,n){return c._cipher.encryptBlock(n)},ecb.decrypt=function(c,n){return c._cipher.decryptBlock(n)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(n,h){for(var u=Math.min(n.length,h.length),m=new Buffer(u),s=0;s<u;++s)m[s]=n[s]^h[s];return m}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var c=requireBufferXor();return cbc.encrypt=function(n,h){var u=c(h,n._prev);return n._prev=n._cipher.encryptBlock(u),n._prev},cbc.decrypt=function(n,h){var u=n._prev;n._prev=h;var m=n._cipher.decryptBlock(h);return c(m,u)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var c=requireSafeBuffer$1().Buffer,n=requireBufferXor();function h(u,m,s){var g=m.length,x=n(m,u._cache);return u._cache=u._cache.slice(g),u._prev=c.concat([u._prev,s?m:x]),x}return cfb.encrypt=function(u,m,s){for(var g=c.allocUnsafe(0),x;m.length;)if(u._cache.length===0&&(u._cache=u._cipher.encryptBlock(u._prev),u._prev=c.allocUnsafe(0)),u._cache.length<=m.length)x=u._cache.length,g=c.concat([g,h(u,m.slice(0,x),s)]),m=m.slice(x);else{g=c.concat([g,h(u,m,s)]);break}return g},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var c=requireSafeBuffer$1().Buffer;function n(h,u,m){var s=h._cipher.encryptBlock(h._prev),g=s[0]^u;return h._prev=c.concat([h._prev.slice(1),c.from([m?u:g])]),g}return cfb8.encrypt=function(h,u,m){for(var s=u.length,g=c.allocUnsafe(s),x=-1;++x<s;)g[x]=n(h,u[x],m);return g},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var c=requireSafeBuffer$1().Buffer;function n(u,m,s){for(var g,x=-1,_=8,M=0,b,S;++x<_;)g=u._cipher.encryptBlock(u._prev),b=m&1<<7-x?128:0,S=g[0]^b,M+=(S&128)>>x%8,u._prev=h(u._prev,s?b:S);return M}function h(u,m){var s=u.length,g=-1,x=c.allocUnsafe(u.length);for(u=c.concat([u,c.from([m])]);++g<s;)x[g]=u[g]<<1|u[g+1]>>7;return x}return cfb1.encrypt=function(u,m,s){for(var g=m.length,x=c.allocUnsafe(g),_=-1;++_<g;)x[_]=n(u,m[_],s);return x},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var c=requireBufferXor();function n(h){return h._prev=h._cipher.encryptBlock(h._prev),h._prev}return ofb.encrypt=function(h,u){for(;h._cache.length<u.length;)h._cache=Buffer.concat([h._cache,n(h)]);var m=h._cache.slice(0,u.length);return h._cache=h._cache.slice(u.length),c(u,m)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function c(n){for(var h=n.length,u;h--;)if(u=n.readUInt8(h),u===255)n.writeUInt8(0,h);else{u++,n.writeUInt8(u,h);break}}return incr32_1=c,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var c=requireBufferXor(),n=requireSafeBuffer$1().Buffer,h=requireIncr32();function u(s){var g=s._cipher.encryptBlockRaw(s._prev);return h(s._prev),g}var m=16;return ctr.encrypt=function(s,g){var x=Math.ceil(g.length/m),_=s._cache.length;s._cache=n.concat([s._cache,n.allocUnsafe(x*m)]);for(var M=0;M<x;M++){var b=u(s),S=_+M*m;s._cache.writeUInt32BE(b[0],S+0),s._cache.writeUInt32BE(b[1],S+4),s._cache.writeUInt32BE(b[2],S+8),s._cache.writeUInt32BE(b[3],S+12)}var E=s._cache.slice(0,g.length);return s._cache=s._cache.slice(g.length),c(g,E)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"};var require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var c={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},n=require$$2;for(var h in n)n[h].module=c[n[h].mode];return modes_1=n,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var c=requireSafeBuffer$1().Buffer;function n(x){c.isBuffer(x)||(x=c.from(x));for(var _=x.length/4|0,M=new Array(_),b=0;b<_;b++)M[b]=x.readUInt32BE(b*4);return M}function h(x){for(var _=0;_<x.length;x++)x[_]=0}function u(x,_,M,b,S){for(var E=M[0],A=M[1],B=M[2],R=M[3],T=x[0]^_[0],k=x[1]^_[1],O=x[2]^_[2],U=x[3]^_[3],L,Q,ie,we,ye=4,se=1;se<S;se++)L=E[T>>>24]^A[k>>>16&255]^B[O>>>8&255]^R[U&255]^_[ye++],Q=E[k>>>24]^A[O>>>16&255]^B[U>>>8&255]^R[T&255]^_[ye++],ie=E[O>>>24]^A[U>>>16&255]^B[T>>>8&255]^R[k&255]^_[ye++],we=E[U>>>24]^A[T>>>16&255]^B[k>>>8&255]^R[O&255]^_[ye++],T=L,k=Q,O=ie,U=we;return L=(b[T>>>24]<<24|b[k>>>16&255]<<16|b[O>>>8&255]<<8|b[U&255])^_[ye++],Q=(b[k>>>24]<<24|b[O>>>16&255]<<16|b[U>>>8&255]<<8|b[T&255])^_[ye++],ie=(b[O>>>24]<<24|b[U>>>16&255]<<16|b[T>>>8&255]<<8|b[k&255])^_[ye++],we=(b[U>>>24]<<24|b[T>>>16&255]<<16|b[k>>>8&255]<<8|b[O&255])^_[ye++],L=L>>>0,Q=Q>>>0,ie=ie>>>0,we=we>>>0,[L,Q,ie,we]}var m=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var x=new Array(256),_=0;_<256;_++)_<128?x[_]=_<<1:x[_]=_<<1^283;for(var M=[],b=[],S=[[],[],[],[]],E=[[],[],[],[]],A=0,B=0,R=0;R<256;++R){var T=B^B<<1^B<<2^B<<3^B<<4;T=T>>>8^T&255^99,M[A]=T,b[T]=A;var k=x[A],O=x[k],U=x[O],L=x[T]*257^T*16843008;S[0][A]=L<<24|L>>>8,S[1][A]=L<<16|L>>>16,S[2][A]=L<<8|L>>>24,S[3][A]=L,L=U*16843009^O*65537^k*257^A*16843008,E[0][T]=L<<24|L>>>8,E[1][T]=L<<16|L>>>16,E[2][T]=L<<8|L>>>24,E[3][T]=L,A===0?A=B=1:(A=k^x[x[x[U^k]]],B^=x[x[B]])}return{SBOX:M,INV_SBOX:b,SUB_MIX:S,INV_SUB_MIX:E}}();function g(x){this._key=n(x),this._reset()}return g.blockSize=4*4,g.keySize=256/8,g.prototype.blockSize=g.blockSize,g.prototype.keySize=g.keySize,g.prototype._reset=function(){for(var x=this._key,_=x.length,M=_+6,b=(M+1)*4,S=[],E=0;E<_;E++)S[E]=x[E];for(E=_;E<b;E++){var A=S[E-1];E%_===0?(A=A<<8|A>>>24,A=s.SBOX[A>>>24]<<24|s.SBOX[A>>>16&255]<<16|s.SBOX[A>>>8&255]<<8|s.SBOX[A&255],A^=m[E/_|0]<<24):_>6&&E%_===4&&(A=s.SBOX[A>>>24]<<24|s.SBOX[A>>>16&255]<<16|s.SBOX[A>>>8&255]<<8|s.SBOX[A&255]),S[E]=S[E-_]^A}for(var B=[],R=0;R<b;R++){var T=b-R,k=S[T-(R%4?0:4)];R<4||T<=4?B[R]=k:B[R]=s.INV_SUB_MIX[0][s.SBOX[k>>>24]]^s.INV_SUB_MIX[1][s.SBOX[k>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[k>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[k&255]]}this._nRounds=M,this._keySchedule=S,this._invKeySchedule=B},g.prototype.encryptBlockRaw=function(x){return x=n(x),u(x,this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},g.prototype.encryptBlock=function(x){var _=this.encryptBlockRaw(x),M=c.allocUnsafe(16);return M.writeUInt32BE(_[0],0),M.writeUInt32BE(_[1],4),M.writeUInt32BE(_[2],8),M.writeUInt32BE(_[3],12),M},g.prototype.decryptBlock=function(x){x=n(x);var _=x[1];x[1]=x[3],x[3]=_;var M=u(x,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),b=c.allocUnsafe(16);return b.writeUInt32BE(M[0],0),b.writeUInt32BE(M[3],4),b.writeUInt32BE(M[2],8),b.writeUInt32BE(M[1],12),b},g.prototype.scrub=function(){h(this._keySchedule),h(this._invKeySchedule),h(this._key)},aes.AES=g,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var c=requireSafeBuffer$1().Buffer,n=c.alloc(16,0);function h(s){return[s.readUInt32BE(0),s.readUInt32BE(4),s.readUInt32BE(8),s.readUInt32BE(12)]}function u(s){var g=c.allocUnsafe(16);return g.writeUInt32BE(s[0]>>>0,0),g.writeUInt32BE(s[1]>>>0,4),g.writeUInt32BE(s[2]>>>0,8),g.writeUInt32BE(s[3]>>>0,12),g}function m(s){this.h=s,this.state=c.alloc(16,0),this.cache=c.allocUnsafe(0)}return m.prototype.ghash=function(s){for(var g=-1;++g<s.length;)this.state[g]^=s[g];this._multiply()},m.prototype._multiply=function(){for(var s=h(this.h),g=[0,0,0,0],x,_,M,b=-1;++b<128;){for(_=(this.state[~~(b/8)]&1<<7-b%8)!==0,_&&(g[0]^=s[0],g[1]^=s[1],g[2]^=s[2],g[3]^=s[3]),M=(s[3]&1)!==0,x=3;x>0;x--)s[x]=s[x]>>>1|(s[x-1]&1)<<31;s[0]=s[0]>>>1,M&&(s[0]=s[0]^225<<24)}this.state=u(g)},m.prototype.update=function(s){this.cache=c.concat([this.cache,s]);for(var g;this.cache.length>=16;)g=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(g)},m.prototype.final=function(s,g){return this.cache.length&&this.ghash(c.concat([this.cache,n],16)),this.ghash(u([0,s,0,g])),this.state},ghash=m,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var c=requireAes(),n=requireSafeBuffer$1().Buffer,h=requireCipherBase(),u=requireInherits_browser(),m=requireGhash(),s=requireBufferXor(),g=requireIncr32();function x(b,S){var E=0;b.length!==S.length&&E++;for(var A=Math.min(b.length,S.length),B=0;B<A;++B)E+=b[B]^S[B];return E}function _(b,S,E){if(S.length===12)return b._finID=n.concat([S,n.from([0,0,0,1])]),n.concat([S,n.from([0,0,0,2])]);var A=new m(E),B=S.length,R=B%16;A.update(S),R&&(R=16-R,A.update(n.alloc(R,0))),A.update(n.alloc(8,0));var T=B*8,k=n.alloc(8);k.writeUIntBE(T,0,8),A.update(k),b._finID=A.state;var O=n.from(b._finID);return g(O),O}function M(b,S,E,A){h.call(this);var B=n.alloc(4,0);this._cipher=new c.AES(S);var R=this._cipher.encryptBlock(B);this._ghash=new m(R),E=_(this,E,R),this._prev=n.from(E),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=A,this._alen=0,this._len=0,this._mode=b,this._authTag=null,this._called=!1}return u(M,h),M.prototype._update=function(b){if(!this._called&&this._alen){var S=16-this._alen%16;S<16&&(S=n.alloc(S,0),this._ghash.update(S))}this._called=!0;var E=this._mode.encrypt(this,b);return this._decrypt?this._ghash.update(b):this._ghash.update(E),this._len+=b.length,E},M.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var b=s(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&x(b,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=b,this._cipher.scrub()},M.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},M.prototype.setAuthTag=function(S){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=S},M.prototype.setAAD=function(S){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(S),this._alen+=S.length},authCipher=M,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var c=requireAes(),n=requireSafeBuffer$1().Buffer,h=requireCipherBase(),u=requireInherits_browser();function m(s,g,x,_){h.call(this),this._cipher=new c.AES(g),this._prev=n.from(x),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=_,this._mode=s}return u(m,h),m.prototype._update=function(s){return this._mode.encrypt(this,s,this._decrypt)},m.prototype._final=function(){this._cipher.scrub()},streamCipher=m,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var c=requireSafeBuffer$1().Buffer,n=requireMd5_js();function h(u,m,s,g){if(c.isBuffer(u)||(u=c.from(u,"binary")),m&&(c.isBuffer(m)||(m=c.from(m,"binary")),m.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var x=s/8,_=c.alloc(x),M=c.alloc(g||0),b=c.alloc(0);x>0||g>0;){var S=new n;S.update(b),S.update(u),m&&S.update(m),b=S.digest();var E=0;if(x>0){var A=_.length-x;E=Math.min(x,b.length),b.copy(_,A,0,E),x-=E}if(E<b.length&&g>0){var B=M.length-g,R=Math.min(g,b.length-E);b.copy(M,B,E,E+R),g-=R}}return b.fill(0),{key:_,iv:M}}return evp_bytestokey=h,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var c=requireModes$1(),n=requireAuthCipher(),h=requireSafeBuffer$1().Buffer,u=requireStreamCipher(),m=requireCipherBase(),s=requireAes(),g=requireEvp_bytestokey(),x=requireInherits_browser();function _(A,B,R){m.call(this),this._cache=new b,this._cipher=new s.AES(B),this._prev=h.from(R),this._mode=A,this._autopadding=!0}x(_,m),_.prototype._update=function(A){this._cache.add(A);for(var B,R,T=[];B=this._cache.get();)R=this._mode.encrypt(this,B),T.push(R);return h.concat(T)};var M=h.alloc(16,16);_.prototype._final=function(){var A=this._cache.flush();if(this._autopadding)return A=this._mode.encrypt(this,A),this._cipher.scrub(),A;if(!A.equals(M))throw this._cipher.scrub(),new Error("data not multiple of block length")},_.prototype.setAutoPadding=function(A){return this._autopadding=!!A,this};function b(){this.cache=h.allocUnsafe(0)}b.prototype.add=function(A){this.cache=h.concat([this.cache,A])},b.prototype.get=function(){if(this.cache.length>15){var A=this.cache.slice(0,16);return this.cache=this.cache.slice(16),A}return null},b.prototype.flush=function(){for(var A=16-this.cache.length,B=h.allocUnsafe(A),R=-1;++R<A;)B.writeUInt8(A,R);return h.concat([this.cache,B])};function S(A,B,R){var T=c[A.toLowerCase()];if(!T)throw new TypeError("invalid suite type");if(typeof B=="string"&&(B=h.from(B)),B.length!==T.key/8)throw new TypeError("invalid key length "+B.length);if(typeof R=="string"&&(R=h.from(R)),T.mode!=="GCM"&&R.length!==T.iv)throw new TypeError("invalid iv length "+R.length);return T.type==="stream"?new u(T.module,B,R):T.type==="auth"?new n(T.module,B,R):new _(T.module,B,R)}function E(A,B){var R=c[A.toLowerCase()];if(!R)throw new TypeError("invalid suite type");var T=g(B,!1,R.key,R.iv);return S(A,T.key,T.iv)}return encrypter.createCipheriv=S,encrypter.createCipher=E,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var c=requireAuthCipher(),n=requireSafeBuffer$1().Buffer,h=requireModes$1(),u=requireStreamCipher(),m=requireCipherBase(),s=requireAes(),g=requireEvp_bytestokey(),x=requireInherits_browser();function _(A,B,R){m.call(this),this._cache=new M,this._last=void 0,this._cipher=new s.AES(B),this._prev=n.from(R),this._mode=A,this._autopadding=!0}x(_,m),_.prototype._update=function(A){this._cache.add(A);for(var B,R,T=[];B=this._cache.get(this._autopadding);)R=this._mode.decrypt(this,B),T.push(R);return n.concat(T)},_.prototype._final=function(){var A=this._cache.flush();if(this._autopadding)return b(this._mode.decrypt(this,A));if(A)throw new Error("data not multiple of block length")},_.prototype.setAutoPadding=function(A){return this._autopadding=!!A,this};function M(){this.cache=n.allocUnsafe(0)}M.prototype.add=function(A){this.cache=n.concat([this.cache,A])},M.prototype.get=function(A){var B;if(A){if(this.cache.length>16)return B=this.cache.slice(0,16),this.cache=this.cache.slice(16),B}else if(this.cache.length>=16)return B=this.cache.slice(0,16),this.cache=this.cache.slice(16),B;return null},M.prototype.flush=function(){if(this.cache.length)return this.cache};function b(A){var B=A[15];if(B<1||B>16)throw new Error("unable to decrypt data");for(var R=-1;++R<B;)if(A[R+(16-B)]!==B)throw new Error("unable to decrypt data");if(B!==16)return A.slice(0,16-B)}function S(A,B,R){var T=h[A.toLowerCase()];if(!T)throw new TypeError("invalid suite type");if(typeof R=="string"&&(R=n.from(R)),T.mode!=="GCM"&&R.length!==T.iv)throw new TypeError("invalid iv length "+R.length);if(typeof B=="string"&&(B=n.from(B)),B.length!==T.key/8)throw new TypeError("invalid key length "+B.length);return T.type==="stream"?new u(T.module,B,R,!0):T.type==="auth"?new c(T.module,B,R,!0):new _(T.module,B,R)}function E(A,B){var R=h[A.toLowerCase()];if(!R)throw new TypeError("invalid suite type");var T=g(B,!1,R.key,R.iv);return S(A,T.key,T.iv)}return decrypter.createDecipher=E,decrypter.createDecipheriv=S,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var c=requireEncrypter(),n=requireDecrypter(),h=require$$2;function u(){return Object.keys(h)}return browser$5.createCipher=browser$5.Cipher=c.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=c.createCipheriv,browser$5.createDecipher=browser$5.Decipher=n.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=n.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=u,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(c){c["des-ecb"]={key:8,iv:0},c["des-cbc"]=c.des={key:8,iv:8},c["des-ede3-cbc"]=c.des3={key:24,iv:8},c["des-ede3"]={key:24,iv:0},c["des-ede-cbc"]={key:16,iv:8},c["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var c=requireBrowserifyDes(),n=requireBrowser$6(),h=requireModes$1(),u=requireModes(),m=requireEvp_bytestokey();function s(b,S){b=b.toLowerCase();var E,A;if(h[b])E=h[b].key,A=h[b].iv;else if(u[b])E=u[b].key*8,A=u[b].iv;else throw new TypeError("invalid suite type");var B=m(S,!1,E,A);return x(b,B.key,B.iv)}function g(b,S){b=b.toLowerCase();var E,A;if(h[b])E=h[b].key,A=h[b].iv;else if(u[b])E=u[b].key*8,A=u[b].iv;else throw new TypeError("invalid suite type");var B=m(S,!1,E,A);return _(b,B.key,B.iv)}function x(b,S,E){if(b=b.toLowerCase(),h[b])return n.createCipheriv(b,S,E);if(u[b])return new c({key:S,iv:E,mode:b});throw new TypeError("invalid suite type")}function _(b,S,E){if(b=b.toLowerCase(),h[b])return n.createDecipheriv(b,S,E);if(u[b])return new c({key:S,iv:E,mode:b,decrypt:!0});throw new TypeError("invalid suite type")}function M(){return Object.keys(u).concat(n.getCiphers())}return browser$6.createCipher=browser$6.Cipher=s,browser$6.createCipheriv=browser$6.Cipheriv=x,browser$6.createDecipher=browser$6.Decipher=g,browser$6.createDecipheriv=browser$6.Decipheriv=_,browser$6.listCiphers=browser$6.getCiphers=M,browser$6}var browser$4={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(c){(function(n,h){function u(w,e){if(!w)throw new Error(e||"Assertion failed")}function m(w,e){w.super_=e;var r=function(){};r.prototype=e.prototype,w.prototype=new r,w.prototype.constructor=w}function s(w,e,r){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((e==="le"||e==="be")&&(r=e,e=10),this._init(w||0,e||10,r||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(e){return e instanceof s?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,r){return e.cmp(r)>0?e:r},s.min=function(e,r){return e.cmp(r)<0?e:r},s.prototype._init=function(e,r,a){if(typeof e=="number")return this._initNumber(e,r,a);if(typeof e=="object")return this._initArray(e,r,a);r==="hex"&&(r=16),u(r===(r|0)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;e[0]==="-"&&(o++,this.negative=1),o<e.length&&(r===16?this._parseHex(e,o,a):(this._parseBase(e,r,o),a==="le"&&this._initArray(this.toArray(),r,a)))},s.prototype._initNumber=function(e,r,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(u(e<9007199254740992),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),r,a)},s.prototype._initArray=function(e,r,a){if(u(typeof e.length=="number"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,v,y=0;if(a==="be")for(o=e.length-1,d=0;o>=0;o-=3)v=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(a==="le")for(o=0,d=0;o<e.length;o+=3)v=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function x(w,e){var r=w.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(w,e,r){var a=x(w,r);return r-1>=e&&(a|=x(w,r-1)<<4),a}s.prototype._parseHex=function(e,r,a){this.length=Math.ceil((e.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,v=0,y;if(a==="be")for(o=e.length-1;o>=r;o-=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8;else{var l=e.length-r;for(o=l%2===0?r+1:r;o<e.length;o+=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8}this.strip()};function M(w,e,r,a){for(var o=0,d=Math.min(w.length,r),v=e;v<d;v++){var y=w.charCodeAt(v)-48;o*=a,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(e,r,a){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var v=e.length-a,y=v%o,l=Math.min(v,v-y)+a,t=0,p=a;p<l;p+=o)t=M(e,p,p+o,r),this.imuln(d),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t);if(y!==0){var q=1;for(t=M(e,p,e.length,r),p=0;p<y;p++)q*=r;this.imuln(q),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++)e.words[r]=this.words[r];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,r){e=e||10,r=r|0||1;var a;if(e===16||e==="hex"){a="";for(var o=0,d=0,v=0;v<this.length;v++){var y=this.words[v],l=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||v!==this.length-1?a=b[6-l.length]+l+a:a=l+a,o+=2,o>=26&&(o-=26,v--)}for(d!==0&&(a=d.toString(16)+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(e===(e|0)&&e>=2&&e<=36){var t=S[e],p=E[e];a="";var q=this.clone();for(q.negative=0;!q.isZero();){var I=q.modn(p).toString(e);q=q.idivn(p),q.isZero()?a=I+a:a=b[t-I.length]+I+a}for(this.isZero()&&(a="0"+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return this.length===2?e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?e+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,r){return u(typeof g<"u"),this.toArrayLike(g,e,r)},s.prototype.toArray=function(e,r){return this.toArrayLike(Array,e,r)},s.prototype.toArrayLike=function(e,r,a){var o=this.byteLength(),d=a||Math.max(1,o);u(o<=d,"byte array longer than desired length"),u(d>0,"Requested array length <= 0"),this.strip();var v=r==="le",y=new e(d),l,t,p=this.clone();if(v){for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[t]=l;for(;t<d;t++)y[t]=0}else{for(t=0;t<d-o;t++)y[t]=0;for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[d-t-1]=l}return y},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var r=e,a=0;return r>=4096&&(a+=13,r>>>=13),r>=64&&(a+=7,r>>>=7),r>=8&&(a+=4,r>>>=4),r>=2&&(a+=2,r>>>=2),a+r},s.prototype._zeroBits=function(e){if(e===0)return 26;var r=e,a=0;return r&8191||(a+=13,r>>>=13),r&127||(a+=7,r>>>=7),r&15||(a+=4,r>>>=4),r&3||(a+=2,r>>>=2),r&1||a++,a},s.prototype.bitLength=function(){var e=this.words[this.length-1],r=this._countBits(e);return(this.length-1)*26+r};function A(w){for(var e=new Array(w.bitLength()),r=0;r<e.length;r++){var a=r/26|0,o=r%26;e[r]=(w.words[a]&1<<o)>>>o}return e}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,r=0;r<this.length;r++){var a=this._zeroBits(this.words[r]);if(e+=a,a!==26)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]|e.words[r];return this.strip()},s.prototype.ior=function(e){return u((this.negative|e.negative)===0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var r;this.length>e.length?r=e:r=this;for(var a=0;a<r.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=r.length,this.strip()},s.prototype.iand=function(e){return u((this.negative|e.negative)===0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var r,a;this.length>e.length?(r=this,a=e):(r=e,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(e){return u((this.negative|e.negative)===0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){u(typeof e=="number"&&e>=0);var r=Math.ceil(e/26)|0,a=e%26;this._expand(r),a>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return a>0&&(this.words[o]=~this.words[o]&67108863>>26-a),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,r){u(typeof e=="number"&&e>=0);var a=e/26|0,o=e%26;return this._expand(a+1),r?this.words[a]=this.words[a]|1<<o:this.words[a]=this.words[a]&~(1<<o),this.strip()},s.prototype.iadd=function(e){var r;if(this.negative!==0&&e.negative===0)return this.negative=0,r=this.isub(e),this.negative^=1,this._normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,r=this.isub(e),e.negative=1,r._normSign();var a,o;this.length>e.length?(a=this,o=e):(a=e,o=this);for(var d=0,v=0;v<o.length;v++)r=(a.words[v]|0)+(o.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;for(;d!==0&&v<a.length;v++)r=(a.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;if(this.length=a.length,d!==0)this.words[this.length]=d,this.length++;else if(a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this},s.prototype.add=function(e){var r;return e.negative!==0&&this.negative===0?(e.negative=0,r=this.sub(e),e.negative^=1,r):e.negative===0&&this.negative!==0?(this.negative=0,r=e.sub(this),this.negative=1,r):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);return e.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a=this.cmp(e);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;a>0?(o=this,d=e):(o=e,d=this);for(var v=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;for(;v!==0&&y<o.length;y++)r=(o.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;if(v===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};function B(w,e,r){r.negative=e.negative^w.negative;var a=w.length+e.length|0;r.length=a,a=a-1|0;var o=w.words[0]|0,d=e.words[0]|0,v=o*d,y=v&67108863,l=v/67108864|0;r.words[0]=y;for(var t=1;t<a;t++){for(var p=l>>>26,q=l&67108863,I=Math.min(t,e.length-1),$=Math.max(0,t-w.length+1);$<=I;$++){var G=t-$|0;o=w.words[G]|0,d=e.words[$]|0,v=o*d+q,p+=v/67108864|0,q=v&67108863}r.words[t]=q|0,l=p|0}return l!==0?r.words[t]=l|0:r.length--,r.strip()}var R=function(e,r,a){var o=e.words,d=r.words,v=a.words,y=0,l,t,p,q=o[0]|0,I=q&8191,$=q>>>13,G=o[1]|0,V=G&8191,N=G>>>13,W=o[2]|0,Z=W&8191,ne=W>>>13,ee=o[3]|0,z=ee&8191,ue=ee>>>13,Ze=o[4]|0,Ae=Ze&8191,qe=Ze>>>13,nt=o[5]|0,Ne=nt&8191,ve=nt>>>13,ut=o[6]|0,Ce=ut&8191,je=ut>>>13,ht=o[7]|0,Ie=ht&8191,Le=ht>>>13,lt=o[8]|0,$e=lt&8191,ze=lt>>>13,bt=o[9]|0,K=bt&8191,P=bt>>>13,D=d[0]|0,Y=D&8191,oe=D>>>13,Re=d[1]|0,ce=Re&8191,Te=Re>>>13,ft=d[2]|0,Pe=ft&8191,Ue=ft>>>13,ot=d[3]|0,He=ot&8191,Ve=ot>>>13,pt=d[4]|0,Fe=pt&8191,Ge=pt>>>13,mt=d[5]|0,Ke=mt&8191,We=mt>>>13,vt=d[6]|0,Oe=vt&8191,Je=vt>>>13,j=d[7]|0,F=j&8191,H=j>>>13,C=d[8]|0,J=C&8191,he=C>>>13,xe=d[9]|0,de=xe&8191,ge=xe>>>13;a.negative=e.negative^r.negative,a.length=19,l=Math.imul(I,Y),t=Math.imul(I,oe),t=t+Math.imul($,Y)|0,p=Math.imul($,oe);var tt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,l=Math.imul(V,Y),t=Math.imul(V,oe),t=t+Math.imul(N,Y)|0,p=Math.imul(N,oe),l=l+Math.imul(I,ce)|0,t=t+Math.imul(I,Te)|0,t=t+Math.imul($,ce)|0,p=p+Math.imul($,Te)|0;var Xe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(Z,Y),t=Math.imul(Z,oe),t=t+Math.imul(ne,Y)|0,p=Math.imul(ne,oe),l=l+Math.imul(V,ce)|0,t=t+Math.imul(V,Te)|0,t=t+Math.imul(N,ce)|0,p=p+Math.imul(N,Te)|0,l=l+Math.imul(I,Pe)|0,t=t+Math.imul(I,Ue)|0,t=t+Math.imul($,Pe)|0,p=p+Math.imul($,Ue)|0;var ct=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(ct>>>26)|0,ct&=67108863,l=Math.imul(z,Y),t=Math.imul(z,oe),t=t+Math.imul(ue,Y)|0,p=Math.imul(ue,oe),l=l+Math.imul(Z,ce)|0,t=t+Math.imul(Z,Te)|0,t=t+Math.imul(ne,ce)|0,p=p+Math.imul(ne,Te)|0,l=l+Math.imul(V,Pe)|0,t=t+Math.imul(V,Ue)|0,t=t+Math.imul(N,Pe)|0,p=p+Math.imul(N,Ue)|0,l=l+Math.imul(I,He)|0,t=t+Math.imul(I,Ve)|0,t=t+Math.imul($,He)|0,p=p+Math.imul($,Ve)|0;var rt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(rt>>>26)|0,rt&=67108863,l=Math.imul(Ae,Y),t=Math.imul(Ae,oe),t=t+Math.imul(qe,Y)|0,p=Math.imul(qe,oe),l=l+Math.imul(z,ce)|0,t=t+Math.imul(z,Te)|0,t=t+Math.imul(ue,ce)|0,p=p+Math.imul(ue,Te)|0,l=l+Math.imul(Z,Pe)|0,t=t+Math.imul(Z,Ue)|0,t=t+Math.imul(ne,Pe)|0,p=p+Math.imul(ne,Ue)|0,l=l+Math.imul(V,He)|0,t=t+Math.imul(V,Ve)|0,t=t+Math.imul(N,He)|0,p=p+Math.imul(N,Ve)|0,l=l+Math.imul(I,Fe)|0,t=t+Math.imul(I,Ge)|0,t=t+Math.imul($,Fe)|0,p=p+Math.imul($,Ge)|0;var st=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(st>>>26)|0,st&=67108863,l=Math.imul(Ne,Y),t=Math.imul(Ne,oe),t=t+Math.imul(ve,Y)|0,p=Math.imul(ve,oe),l=l+Math.imul(Ae,ce)|0,t=t+Math.imul(Ae,Te)|0,t=t+Math.imul(qe,ce)|0,p=p+Math.imul(qe,Te)|0,l=l+Math.imul(z,Pe)|0,t=t+Math.imul(z,Ue)|0,t=t+Math.imul(ue,Pe)|0,p=p+Math.imul(ue,Ue)|0,l=l+Math.imul(Z,He)|0,t=t+Math.imul(Z,Ve)|0,t=t+Math.imul(ne,He)|0,p=p+Math.imul(ne,Ve)|0,l=l+Math.imul(V,Fe)|0,t=t+Math.imul(V,Ge)|0,t=t+Math.imul(N,Fe)|0,p=p+Math.imul(N,Ge)|0,l=l+Math.imul(I,Ke)|0,t=t+Math.imul(I,We)|0,t=t+Math.imul($,Ke)|0,p=p+Math.imul($,We)|0;var at=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(at>>>26)|0,at&=67108863,l=Math.imul(Ce,Y),t=Math.imul(Ce,oe),t=t+Math.imul(je,Y)|0,p=Math.imul(je,oe),l=l+Math.imul(Ne,ce)|0,t=t+Math.imul(Ne,Te)|0,t=t+Math.imul(ve,ce)|0,p=p+Math.imul(ve,Te)|0,l=l+Math.imul(Ae,Pe)|0,t=t+Math.imul(Ae,Ue)|0,t=t+Math.imul(qe,Pe)|0,p=p+Math.imul(qe,Ue)|0,l=l+Math.imul(z,He)|0,t=t+Math.imul(z,Ve)|0,t=t+Math.imul(ue,He)|0,p=p+Math.imul(ue,Ve)|0,l=l+Math.imul(Z,Fe)|0,t=t+Math.imul(Z,Ge)|0,t=t+Math.imul(ne,Fe)|0,p=p+Math.imul(ne,Ge)|0,l=l+Math.imul(V,Ke)|0,t=t+Math.imul(V,We)|0,t=t+Math.imul(N,Ke)|0,p=p+Math.imul(N,We)|0,l=l+Math.imul(I,Oe)|0,t=t+Math.imul(I,Je)|0,t=t+Math.imul($,Oe)|0,p=p+Math.imul($,Je)|0;var X=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(X>>>26)|0,X&=67108863,l=Math.imul(Ie,Y),t=Math.imul(Ie,oe),t=t+Math.imul(Le,Y)|0,p=Math.imul(Le,oe),l=l+Math.imul(Ce,ce)|0,t=t+Math.imul(Ce,Te)|0,t=t+Math.imul(je,ce)|0,p=p+Math.imul(je,Te)|0,l=l+Math.imul(Ne,Pe)|0,t=t+Math.imul(Ne,Ue)|0,t=t+Math.imul(ve,Pe)|0,p=p+Math.imul(ve,Ue)|0,l=l+Math.imul(Ae,He)|0,t=t+Math.imul(Ae,Ve)|0,t=t+Math.imul(qe,He)|0,p=p+Math.imul(qe,Ve)|0,l=l+Math.imul(z,Fe)|0,t=t+Math.imul(z,Ge)|0,t=t+Math.imul(ue,Fe)|0,p=p+Math.imul(ue,Ge)|0,l=l+Math.imul(Z,Ke)|0,t=t+Math.imul(Z,We)|0,t=t+Math.imul(ne,Ke)|0,p=p+Math.imul(ne,We)|0,l=l+Math.imul(V,Oe)|0,t=t+Math.imul(V,Je)|0,t=t+Math.imul(N,Oe)|0,p=p+Math.imul(N,Je)|0,l=l+Math.imul(I,F)|0,t=t+Math.imul(I,H)|0,t=t+Math.imul($,F)|0,p=p+Math.imul($,H)|0;var re=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(re>>>26)|0,re&=67108863,l=Math.imul($e,Y),t=Math.imul($e,oe),t=t+Math.imul(ze,Y)|0,p=Math.imul(ze,oe),l=l+Math.imul(Ie,ce)|0,t=t+Math.imul(Ie,Te)|0,t=t+Math.imul(Le,ce)|0,p=p+Math.imul(Le,Te)|0,l=l+Math.imul(Ce,Pe)|0,t=t+Math.imul(Ce,Ue)|0,t=t+Math.imul(je,Pe)|0,p=p+Math.imul(je,Ue)|0,l=l+Math.imul(Ne,He)|0,t=t+Math.imul(Ne,Ve)|0,t=t+Math.imul(ve,He)|0,p=p+Math.imul(ve,Ve)|0,l=l+Math.imul(Ae,Fe)|0,t=t+Math.imul(Ae,Ge)|0,t=t+Math.imul(qe,Fe)|0,p=p+Math.imul(qe,Ge)|0,l=l+Math.imul(z,Ke)|0,t=t+Math.imul(z,We)|0,t=t+Math.imul(ue,Ke)|0,p=p+Math.imul(ue,We)|0,l=l+Math.imul(Z,Oe)|0,t=t+Math.imul(Z,Je)|0,t=t+Math.imul(ne,Oe)|0,p=p+Math.imul(ne,Je)|0,l=l+Math.imul(V,F)|0,t=t+Math.imul(V,H)|0,t=t+Math.imul(N,F)|0,p=p+Math.imul(N,H)|0,l=l+Math.imul(I,J)|0,t=t+Math.imul(I,he)|0,t=t+Math.imul($,J)|0,p=p+Math.imul($,he)|0;var te=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(te>>>26)|0,te&=67108863,l=Math.imul(K,Y),t=Math.imul(K,oe),t=t+Math.imul(P,Y)|0,p=Math.imul(P,oe),l=l+Math.imul($e,ce)|0,t=t+Math.imul($e,Te)|0,t=t+Math.imul(ze,ce)|0,p=p+Math.imul(ze,Te)|0,l=l+Math.imul(Ie,Pe)|0,t=t+Math.imul(Ie,Ue)|0,t=t+Math.imul(Le,Pe)|0,p=p+Math.imul(Le,Ue)|0,l=l+Math.imul(Ce,He)|0,t=t+Math.imul(Ce,Ve)|0,t=t+Math.imul(je,He)|0,p=p+Math.imul(je,Ve)|0,l=l+Math.imul(Ne,Fe)|0,t=t+Math.imul(Ne,Ge)|0,t=t+Math.imul(ve,Fe)|0,p=p+Math.imul(ve,Ge)|0,l=l+Math.imul(Ae,Ke)|0,t=t+Math.imul(Ae,We)|0,t=t+Math.imul(qe,Ke)|0,p=p+Math.imul(qe,We)|0,l=l+Math.imul(z,Oe)|0,t=t+Math.imul(z,Je)|0,t=t+Math.imul(ue,Oe)|0,p=p+Math.imul(ue,Je)|0,l=l+Math.imul(Z,F)|0,t=t+Math.imul(Z,H)|0,t=t+Math.imul(ne,F)|0,p=p+Math.imul(ne,H)|0,l=l+Math.imul(V,J)|0,t=t+Math.imul(V,he)|0,t=t+Math.imul(N,J)|0,p=p+Math.imul(N,he)|0,l=l+Math.imul(I,de)|0,t=t+Math.imul(I,ge)|0,t=t+Math.imul($,de)|0,p=p+Math.imul($,ge)|0;var fe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(fe>>>26)|0,fe&=67108863,l=Math.imul(K,ce),t=Math.imul(K,Te),t=t+Math.imul(P,ce)|0,p=Math.imul(P,Te),l=l+Math.imul($e,Pe)|0,t=t+Math.imul($e,Ue)|0,t=t+Math.imul(ze,Pe)|0,p=p+Math.imul(ze,Ue)|0,l=l+Math.imul(Ie,He)|0,t=t+Math.imul(Ie,Ve)|0,t=t+Math.imul(Le,He)|0,p=p+Math.imul(Le,Ve)|0,l=l+Math.imul(Ce,Fe)|0,t=t+Math.imul(Ce,Ge)|0,t=t+Math.imul(je,Fe)|0,p=p+Math.imul(je,Ge)|0,l=l+Math.imul(Ne,Ke)|0,t=t+Math.imul(Ne,We)|0,t=t+Math.imul(ve,Ke)|0,p=p+Math.imul(ve,We)|0,l=l+Math.imul(Ae,Oe)|0,t=t+Math.imul(Ae,Je)|0,t=t+Math.imul(qe,Oe)|0,p=p+Math.imul(qe,Je)|0,l=l+Math.imul(z,F)|0,t=t+Math.imul(z,H)|0,t=t+Math.imul(ue,F)|0,p=p+Math.imul(ue,H)|0,l=l+Math.imul(Z,J)|0,t=t+Math.imul(Z,he)|0,t=t+Math.imul(ne,J)|0,p=p+Math.imul(ne,he)|0,l=l+Math.imul(V,de)|0,t=t+Math.imul(V,ge)|0,t=t+Math.imul(N,de)|0,p=p+Math.imul(N,ge)|0;var le=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(le>>>26)|0,le&=67108863,l=Math.imul(K,Pe),t=Math.imul(K,Ue),t=t+Math.imul(P,Pe)|0,p=Math.imul(P,Ue),l=l+Math.imul($e,He)|0,t=t+Math.imul($e,Ve)|0,t=t+Math.imul(ze,He)|0,p=p+Math.imul(ze,Ve)|0,l=l+Math.imul(Ie,Fe)|0,t=t+Math.imul(Ie,Ge)|0,t=t+Math.imul(Le,Fe)|0,p=p+Math.imul(Le,Ge)|0,l=l+Math.imul(Ce,Ke)|0,t=t+Math.imul(Ce,We)|0,t=t+Math.imul(je,Ke)|0,p=p+Math.imul(je,We)|0,l=l+Math.imul(Ne,Oe)|0,t=t+Math.imul(Ne,Je)|0,t=t+Math.imul(ve,Oe)|0,p=p+Math.imul(ve,Je)|0,l=l+Math.imul(Ae,F)|0,t=t+Math.imul(Ae,H)|0,t=t+Math.imul(qe,F)|0,p=p+Math.imul(qe,H)|0,l=l+Math.imul(z,J)|0,t=t+Math.imul(z,he)|0,t=t+Math.imul(ue,J)|0,p=p+Math.imul(ue,he)|0,l=l+Math.imul(Z,de)|0,t=t+Math.imul(Z,ge)|0,t=t+Math.imul(ne,de)|0,p=p+Math.imul(ne,ge)|0;var pe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(pe>>>26)|0,pe&=67108863,l=Math.imul(K,He),t=Math.imul(K,Ve),t=t+Math.imul(P,He)|0,p=Math.imul(P,Ve),l=l+Math.imul($e,Fe)|0,t=t+Math.imul($e,Ge)|0,t=t+Math.imul(ze,Fe)|0,p=p+Math.imul(ze,Ge)|0,l=l+Math.imul(Ie,Ke)|0,t=t+Math.imul(Ie,We)|0,t=t+Math.imul(Le,Ke)|0,p=p+Math.imul(Le,We)|0,l=l+Math.imul(Ce,Oe)|0,t=t+Math.imul(Ce,Je)|0,t=t+Math.imul(je,Oe)|0,p=p+Math.imul(je,Je)|0,l=l+Math.imul(Ne,F)|0,t=t+Math.imul(Ne,H)|0,t=t+Math.imul(ve,F)|0,p=p+Math.imul(ve,H)|0,l=l+Math.imul(Ae,J)|0,t=t+Math.imul(Ae,he)|0,t=t+Math.imul(qe,J)|0,p=p+Math.imul(qe,he)|0,l=l+Math.imul(z,de)|0,t=t+Math.imul(z,ge)|0,t=t+Math.imul(ue,de)|0,p=p+Math.imul(ue,ge)|0;var Se=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Se>>>26)|0,Se&=67108863,l=Math.imul(K,Fe),t=Math.imul(K,Ge),t=t+Math.imul(P,Fe)|0,p=Math.imul(P,Ge),l=l+Math.imul($e,Ke)|0,t=t+Math.imul($e,We)|0,t=t+Math.imul(ze,Ke)|0,p=p+Math.imul(ze,We)|0,l=l+Math.imul(Ie,Oe)|0,t=t+Math.imul(Ie,Je)|0,t=t+Math.imul(Le,Oe)|0,p=p+Math.imul(Le,Je)|0,l=l+Math.imul(Ce,F)|0,t=t+Math.imul(Ce,H)|0,t=t+Math.imul(je,F)|0,p=p+Math.imul(je,H)|0,l=l+Math.imul(Ne,J)|0,t=t+Math.imul(Ne,he)|0,t=t+Math.imul(ve,J)|0,p=p+Math.imul(ve,he)|0,l=l+Math.imul(Ae,de)|0,t=t+Math.imul(Ae,ge)|0,t=t+Math.imul(qe,de)|0,p=p+Math.imul(qe,ge)|0;var Ee=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,l=Math.imul(K,Ke),t=Math.imul(K,We),t=t+Math.imul(P,Ke)|0,p=Math.imul(P,We),l=l+Math.imul($e,Oe)|0,t=t+Math.imul($e,Je)|0,t=t+Math.imul(ze,Oe)|0,p=p+Math.imul(ze,Je)|0,l=l+Math.imul(Ie,F)|0,t=t+Math.imul(Ie,H)|0,t=t+Math.imul(Le,F)|0,p=p+Math.imul(Le,H)|0,l=l+Math.imul(Ce,J)|0,t=t+Math.imul(Ce,he)|0,t=t+Math.imul(je,J)|0,p=p+Math.imul(je,he)|0,l=l+Math.imul(Ne,de)|0,t=t+Math.imul(Ne,ge)|0,t=t+Math.imul(ve,de)|0,p=p+Math.imul(ve,ge)|0;var me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(me>>>26)|0,me&=67108863,l=Math.imul(K,Oe),t=Math.imul(K,Je),t=t+Math.imul(P,Oe)|0,p=Math.imul(P,Je),l=l+Math.imul($e,F)|0,t=t+Math.imul($e,H)|0,t=t+Math.imul(ze,F)|0,p=p+Math.imul(ze,H)|0,l=l+Math.imul(Ie,J)|0,t=t+Math.imul(Ie,he)|0,t=t+Math.imul(Le,J)|0,p=p+Math.imul(Le,he)|0,l=l+Math.imul(Ce,de)|0,t=t+Math.imul(Ce,ge)|0,t=t+Math.imul(je,de)|0,p=p+Math.imul(je,ge)|0;var _e=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(_e>>>26)|0,_e&=67108863,l=Math.imul(K,F),t=Math.imul(K,H),t=t+Math.imul(P,F)|0,p=Math.imul(P,H),l=l+Math.imul($e,J)|0,t=t+Math.imul($e,he)|0,t=t+Math.imul(ze,J)|0,p=p+Math.imul(ze,he)|0,l=l+Math.imul(Ie,de)|0,t=t+Math.imul(Ie,ge)|0,t=t+Math.imul(Le,de)|0,p=p+Math.imul(Le,ge)|0;var De=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(De>>>26)|0,De&=67108863,l=Math.imul(K,J),t=Math.imul(K,he),t=t+Math.imul(P,J)|0,p=Math.imul(P,he),l=l+Math.imul($e,de)|0,t=t+Math.imul($e,ge)|0,t=t+Math.imul(ze,de)|0,p=p+Math.imul(ze,ge)|0;var Me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Me>>>26)|0,Me&=67108863,l=Math.imul(K,de),t=Math.imul(K,ge),t=t+Math.imul(P,de)|0,p=Math.imul(P,ge);var Be=(y+l|0)+((t&8191)<<13)|0;return y=(p+(t>>>13)|0)+(Be>>>26)|0,Be&=67108863,v[0]=tt,v[1]=Xe,v[2]=ct,v[3]=rt,v[4]=st,v[5]=at,v[6]=X,v[7]=re,v[8]=te,v[9]=fe,v[10]=le,v[11]=pe,v[12]=Se,v[13]=Ee,v[14]=me,v[15]=_e,v[16]=De,v[17]=Me,v[18]=Be,y!==0&&(v[19]=y,a.length++),a};Math.imul||(R=B);function T(w,e,r){r.negative=e.negative^w.negative,r.length=w.length+e.length;for(var a=0,o=0,d=0;d<r.length-1;d++){var v=o;o=0;for(var y=a&67108863,l=Math.min(d,e.length-1),t=Math.max(0,d-w.length+1);t<=l;t++){var p=d-t,q=w.words[p]|0,I=e.words[t]|0,$=q*I,G=$&67108863;v=v+($/67108864|0)|0,G=G+y|0,y=G&67108863,v=v+(G>>>26)|0,o+=v>>>26,v&=67108863}r.words[d]=y,a=v,v=o}return a!==0?r.words[d]=a:r.length--,r.strip()}function k(w,e,r){var a=new O;return a.mulp(w,e,r)}s.prototype.mulTo=function(e,r){var a,o=this.length+e.length;return this.length===10&&e.length===10?a=R(this,e,r):o<63?a=B(this,e,r):o<1024?a=T(this,e,r):a=k(this,e,r),a};function O(w,e){this.x=w,this.y=e}O.prototype.makeRBT=function(e){for(var r=new Array(e),a=s.prototype._countBits(e)-1,o=0;o<e;o++)r[o]=this.revBin(o,a,e);return r},O.prototype.revBin=function(e,r,a){if(e===0||e===a-1)return e;for(var o=0,d=0;d<r;d++)o|=(e&1)<<r-d-1,e>>=1;return o},O.prototype.permute=function(e,r,a,o,d,v){for(var y=0;y<v;y++)o[y]=r[e[y]],d[y]=a[e[y]]},O.prototype.transform=function(e,r,a,o,d,v){this.permute(v,e,r,a,o,d);for(var y=1;y<d;y<<=1)for(var l=y<<1,t=Math.cos(2*Math.PI/l),p=Math.sin(2*Math.PI/l),q=0;q<d;q+=l)for(var I=t,$=p,G=0;G<y;G++){var V=a[q+G],N=o[q+G],W=a[q+G+y],Z=o[q+G+y],ne=I*W-$*Z;Z=I*Z+$*W,W=ne,a[q+G]=V+W,o[q+G]=N+Z,a[q+G+y]=V-W,o[q+G+y]=N-Z,G!==l&&(ne=t*I-p*$,$=t*$+p*I,I=ne)}},O.prototype.guessLen13b=function(e,r){var a=Math.max(r,e)|1,o=a&1,d=0;for(a=a/2|0;a;a=a>>>1)d++;return 1<<d+1+o},O.prototype.conjugate=function(e,r,a){if(!(a<=1))for(var o=0;o<a/2;o++){var d=e[o];e[o]=e[a-o-1],e[a-o-1]=d,d=r[o],r[o]=-r[a-o-1],r[a-o-1]=-d}},O.prototype.normalize13b=function(e,r){for(var a=0,o=0;o<r/2;o++){var d=Math.round(e[2*o+1]/r)*8192+Math.round(e[2*o]/r)+a;e[o]=d&67108863,d<67108864?a=0:a=d/67108864|0}return e},O.prototype.convert13b=function(e,r,a,o){for(var d=0,v=0;v<r;v++)d=d+(e[v]|0),a[2*v]=d&8191,d=d>>>13,a[2*v+1]=d&8191,d=d>>>13;for(v=2*r;v<o;++v)a[v]=0;u(d===0),u((d&-8192)===0)},O.prototype.stub=function(e){for(var r=new Array(e),a=0;a<e;a++)r[a]=0;return r},O.prototype.mulp=function(e,r,a){var o=2*this.guessLen13b(e.length,r.length),d=this.makeRBT(o),v=this.stub(o),y=new Array(o),l=new Array(o),t=new Array(o),p=new Array(o),q=new Array(o),I=new Array(o),$=a.words;$.length=o,this.convert13b(e.words,e.length,y,o),this.convert13b(r.words,r.length,p,o),this.transform(y,v,l,t,o,d),this.transform(p,v,q,I,o,d);for(var G=0;G<o;G++){var V=l[G]*q[G]-t[G]*I[G];t[G]=l[G]*I[G]+t[G]*q[G],l[G]=V}return this.conjugate(l,t,o),this.transform(l,t,$,v,o,d),this.conjugate($,v,o),this.normalize13b($,o),a.negative=e.negative^r.negative,a.length=e.length+r.length,a.strip()},s.prototype.mul=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),this.mulTo(e,r)},s.prototype.mulf=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),k(this,e,r)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){u(typeof e=="number"),u(e<67108864);for(var r=0,a=0;a<this.length;a++){var o=(this.words[a]|0)*e,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[a]=d&67108863}return r!==0&&(this.words[a]=r,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var r=A(e);if(r.length===0)return new s(1);for(var a=this,o=0;o<r.length&&r[o]===0;o++,a=a.sqr());if(++o<r.length)for(var d=a.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(a=a.mul(d));return a},s.prototype.iushln=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var v=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,l=(this.words[d]|0)-y<<r;this.words[d]=l|v,v=y>>>26-r}v&&(this.words[d]=v,this.length++)}if(a!==0){for(d=this.length-1;d>=0;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(e){return u(this.negative===0),this.iushln(e)},s.prototype.iushrn=function(e,r,a){u(typeof e=="number"&&e>=0);var o;r?o=(r-r%26)/26:o=0;var d=e%26,v=Math.min((e-d)/26,this.length),y=67108863^67108863>>>d<<d,l=a;if(o-=v,o=Math.max(0,o),l){for(var t=0;t<v;t++)l.words[t]=this.words[t];l.length=v}if(v!==0)if(this.length>v)for(this.length-=v,t=0;t<this.length;t++)this.words[t]=this.words[t+v];else this.words[0]=0,this.length=1;var p=0;for(t=this.length-1;t>=0&&(p!==0||t>=o);t--){var q=this.words[t]|0;this.words[t]=p<<26-d|q>>>d,p=q&y}return l&&p!==0&&(l.words[l.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,r,a){return u(this.negative===0),this.iushrn(e,r,a)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return!1;var d=this.words[a];return!!(d&o)},s.prototype.imaskn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(r!==0&&a++,this.length=Math.min(a,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return u(typeof e=="number"),u(e<67108864),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(e){if(u(typeof e=="number"),u(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,r,a){var o=e.length+a,d;this._expand(o);var v,y=0;for(d=0;d<e.length;d++){v=(this.words[d+a]|0)+y;var l=(e.words[d]|0)*r;v-=l&67108863,y=(v>>26)-(l/67108864|0),this.words[d+a]=v&67108863}for(;d<this.length-a;d++)v=(this.words[d+a]|0)+y,y=v>>26,this.words[d+a]=v&67108863;if(y===0)return this.strip();for(u(y===-1),y=0,d=0;d<this.length;d++)v=-(this.words[d]|0)+y,y=v>>26,this.words[d]=v&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,r){var a=this.length-e.length,o=this.clone(),d=e,v=d.words[d.length-1]|0,y=this._countBits(v);a=26-y,a!==0&&(d=d.ushln(a),o.iushln(a),v=d.words[d.length-1]|0);var l=o.length-d.length,t;if(r!=="mod"){t=new s(null),t.length=l+1,t.words=new Array(t.length);for(var p=0;p<t.length;p++)t.words[p]=0}var q=o.clone()._ishlnsubmul(d,1,l);q.negative===0&&(o=q,t&&(t.words[l]=1));for(var I=l-1;I>=0;I--){var $=(o.words[d.length+I]|0)*67108864+(o.words[d.length+I-1]|0);for($=Math.min($/v|0,67108863),o._ishlnsubmul(d,$,I);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(d,1,I),o.isZero()||(o.negative^=1);t&&(t.words[I]=$)}return t&&t.strip(),o.strip(),r!=="div"&&a!==0&&o.iushrn(a),{div:t||null,mod:o}},s.prototype.divmod=function(e,r,a){if(u(!e.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,v;return this.negative!==0&&e.negative===0?(v=this.neg().divmod(e,r),r!=="mod"&&(o=v.div.neg()),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.iadd(e)),{div:o,mod:d}):this.negative===0&&e.negative!==0?(v=this.divmod(e.neg(),r),r!=="mod"&&(o=v.div.neg()),{div:o,mod:v.mod}):this.negative&e.negative?(v=this.neg().divmod(e.neg(),r),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.isub(e)),{div:v.div,mod:d}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:e.length===1?r==="div"?{div:this.divn(e.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,r)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var a=r.div.negative!==0?r.mod.isub(e):r.mod,o=e.ushrn(1),d=e.andln(1),v=a.cmp(o);return v<0||d===1&&v===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(e){u(e<=67108863);for(var r=(1<<26)%e,a=0,o=this.length-1;o>=0;o--)a=(r*a+(this.words[o]|0))%e;return a},s.prototype.idivn=function(e){u(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var o=(this.words[a]|0)+r*67108864;this.words[a]=o/e|0,r=o%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=new s(0),y=new s(1),l=0;r.isEven()&&a.isEven();)r.iushrn(1),a.iushrn(1),++l;for(var t=a.clone(),p=r.clone();!r.isZero();){for(var q=0,I=1;!(r.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(r.iushrn(q);q-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(t),d.isub(p)),o.iushrn(1),d.iushrn(1);for(var $=0,G=1;!(a.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(a.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(t),y.isub(p)),v.iushrn(1),y.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(v),d.isub(y)):(a.isub(r),v.isub(o),y.isub(d))}return{a:v,b:y,gcd:a.iushln(l)}},s.prototype._invmp=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=a.clone();r.cmpn(1)>0&&a.cmpn(1)>0;){for(var y=0,l=1;!(r.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(v),o.iushrn(1);for(var t=0,p=1;!(a.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(a.iushrn(t);t-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(d)):(a.isub(r),d.isub(o))}var q;return r.cmpn(1)===0?q=o:q=d,q.cmpn(0)<0&&q.iadd(e),q},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone(),a=e.clone();r.negative=0,a.negative=0;for(var o=0;r.isEven()&&a.isEven();o++)r.iushrn(1),a.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=r.cmp(a);if(d<0){var v=r;r=a,a=v}else if(d===0||a.cmpn(1)===0)break;r.isub(a)}while(!0);return a.iushln(o)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){u(typeof e=="number");var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return this._expand(a+1),this.words[a]|=o,this;for(var d=o,v=a;d!==0&&v<this.length;v++){var y=this.words[v]|0;y+=d,d=y>>>26,y&=67108863,this.words[v]=y}return d!==0&&(this.words[v]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1)a=1;else{r&&(e=-e),u(e<=67108863,"Number is too big");var o=this.words[0]|0;a=o===e?0:o<e?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var r=0,a=this.length-1;a>=0;a--){var o=this.words[a]|0,d=e.words[a]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(e){return this.cmpn(e)===1},s.prototype.gt=function(e){return this.cmp(e)===1},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return this.cmpn(e)===-1},s.prototype.lt=function(e){return this.cmp(e)===-1},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return this.cmpn(e)===0},s.prototype.eq=function(e){return this.cmp(e)===0},s.red=function(e){return new se(e)},s.prototype.toRed=function(e){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return u(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return u(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var U={k256:null,p224:null,p192:null,p25519:null};function L(w,e){this.name=w,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},L.prototype.ireduce=function(e){var r=e,a;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),a=r.bitLength();while(a>this.n);var o=a<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},L.prototype.split=function(e,r){e.iushrn(this.n,0,r)},L.prototype.imulK=function(e){return e.imul(this.k)};function Q(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(Q,L),Q.prototype.split=function(e,r){for(var a=4194303,o=Math.min(e.length,9),d=0;d<o;d++)r.words[d]=e.words[d];if(r.length=o,e.length<=9){e.words[0]=0,e.length=1;return}var v=e.words[9];for(r.words[r.length++]=v&a,d=10;d<e.length;d++){var y=e.words[d]|0;e.words[d-10]=(y&a)<<4|v>>>22,v=y}v>>>=22,e.words[d-10]=v,v===0&&e.length>10?e.length-=10:e.length-=9},Q.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,a=0;a<e.length;a++){var o=e.words[a]|0;r+=o*977,e.words[a]=r&67108863,r=o*64+(r/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e};function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ie,L);function we(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(we,L);function ye(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ye,L),ye.prototype.imulK=function(e){for(var r=0,a=0;a<e.length;a++){var o=(e.words[a]|0)*19+r,d=o&67108863;o>>>=26,e.words[a]=d,r=o}return r!==0&&(e.words[e.length++]=r),e},s._prime=function(e){if(U[e])return U[e];var r;if(e==="k256")r=new Q;else if(e==="p224")r=new ie;else if(e==="p192")r=new we;else if(e==="p25519")r=new ye;else throw new Error("Unknown prime "+e);return U[e]=r,r};function se(w){if(typeof w=="string"){var e=s._prime(w);this.m=e.p,this.prime=e}else u(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}se.prototype._verify1=function(e){u(e.negative===0,"red works only with positives"),u(e.red,"red works only with red numbers")},se.prototype._verify2=function(e,r){u((e.negative|r.negative)===0,"red works only with positives"),u(e.red&&e.red===r.red,"red works only with red numbers")},se.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},se.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},se.prototype.add=function(e,r){this._verify2(e,r);var a=e.add(r);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},se.prototype.iadd=function(e,r){this._verify2(e,r);var a=e.iadd(r);return a.cmp(this.m)>=0&&a.isub(this.m),a},se.prototype.sub=function(e,r){this._verify2(e,r);var a=e.sub(r);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},se.prototype.isub=function(e,r){this._verify2(e,r);var a=e.isub(r);return a.cmpn(0)<0&&a.iadd(this.m),a},se.prototype.shl=function(e,r){return this._verify1(e),this.imod(e.ushln(r))},se.prototype.imul=function(e,r){return this._verify2(e,r),this.imod(e.imul(r))},se.prototype.mul=function(e,r){return this._verify2(e,r),this.imod(e.mul(r))},se.prototype.isqr=function(e){return this.imul(e,e.clone())},se.prototype.sqr=function(e){return this.mul(e,e)},se.prototype.sqrt=function(e){if(e.isZero())return e.clone();var r=this.m.andln(3);if(u(r%2===1),r===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(e,a)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);u(!o.isZero());var v=new s(1).toRed(this),y=v.redNeg(),l=this.m.subn(1).iushrn(1),t=this.m.bitLength();for(t=new s(2*t*t).toRed(this);this.pow(t,l).cmp(y)!==0;)t.redIAdd(y);for(var p=this.pow(t,o),q=this.pow(e,o.addn(1).iushrn(1)),I=this.pow(e,o),$=d;I.cmp(v)!==0;){for(var G=I,V=0;G.cmp(v)!==0;V++)G=G.redSqr();u(V<$);var N=this.pow(p,new s(1).iushln($-V-1));q=q.redMul(N),p=N.redSqr(),I=I.redMul(p),$=V}return q},se.prototype.invm=function(e){var r=e._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},se.prototype.pow=function(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var a=4,o=new Array(1<<a);o[0]=new s(1).toRed(this),o[1]=e;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],e);var v=o[0],y=0,l=0,t=r.bitLength()%26;for(t===0&&(t=26),d=r.length-1;d>=0;d--){for(var p=r.words[d],q=t-1;q>=0;q--){var I=p>>q&1;if(v!==o[0]&&(v=this.sqr(v)),I===0&&y===0){l=0;continue}y<<=1,y|=I,l++,!(l!==a&&(d!==0||q!==0))&&(v=this.mul(v,o[y]),l=0,y=0)}t=26}return v},se.prototype.convertTo=function(e){var r=e.umod(this.m);return r===e?r.clone():r},se.prototype.convertFrom=function(e){var r=e.clone();return r.red=null,r},s.mont=function(e){return new ke(e)};function ke(w){se.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(ke,se),ke.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},ke.prototype.convertFrom=function(e){var r=this.imod(e.mul(this.rinv));return r.red=null,r},ke.prototype.imul=function(e,r){if(e.isZero()||r.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.mul=function(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var a=e.mul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.invm=function(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,commonjsGlobal)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(c){(function(n,h){function u(w,e){if(!w)throw new Error(e||"Assertion failed")}function m(w,e){w.super_=e;var r=function(){};r.prototype=e.prototype,w.prototype=new r,w.prototype.constructor=w}function s(w,e,r){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((e==="le"||e==="be")&&(r=e,e=10),this._init(w||0,e||10,r||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(e){return e instanceof s?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,r){return e.cmp(r)>0?e:r},s.min=function(e,r){return e.cmp(r)<0?e:r},s.prototype._init=function(e,r,a){if(typeof e=="number")return this._initNumber(e,r,a);if(typeof e=="object")return this._initArray(e,r,a);r==="hex"&&(r=16),u(r===(r|0)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;e[0]==="-"&&(o++,this.negative=1),o<e.length&&(r===16?this._parseHex(e,o,a):(this._parseBase(e,r,o),a==="le"&&this._initArray(this.toArray(),r,a)))},s.prototype._initNumber=function(e,r,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(u(e<9007199254740992),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),r,a)},s.prototype._initArray=function(e,r,a){if(u(typeof e.length=="number"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,v,y=0;if(a==="be")for(o=e.length-1,d=0;o>=0;o-=3)v=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(a==="le")for(o=0,d=0;o<e.length;o+=3)v=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function x(w,e){var r=w.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(w,e,r){var a=x(w,r);return r-1>=e&&(a|=x(w,r-1)<<4),a}s.prototype._parseHex=function(e,r,a){this.length=Math.ceil((e.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,v=0,y;if(a==="be")for(o=e.length-1;o>=r;o-=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8;else{var l=e.length-r;for(o=l%2===0?r+1:r;o<e.length;o+=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8}this.strip()};function M(w,e,r,a){for(var o=0,d=Math.min(w.length,r),v=e;v<d;v++){var y=w.charCodeAt(v)-48;o*=a,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(e,r,a){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var v=e.length-a,y=v%o,l=Math.min(v,v-y)+a,t=0,p=a;p<l;p+=o)t=M(e,p,p+o,r),this.imuln(d),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t);if(y!==0){var q=1;for(t=M(e,p,e.length,r),p=0;p<y;p++)q*=r;this.imuln(q),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++)e.words[r]=this.words[r];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,r){e=e||10,r=r|0||1;var a;if(e===16||e==="hex"){a="";for(var o=0,d=0,v=0;v<this.length;v++){var y=this.words[v],l=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||v!==this.length-1?a=b[6-l.length]+l+a:a=l+a,o+=2,o>=26&&(o-=26,v--)}for(d!==0&&(a=d.toString(16)+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(e===(e|0)&&e>=2&&e<=36){var t=S[e],p=E[e];a="";var q=this.clone();for(q.negative=0;!q.isZero();){var I=q.modn(p).toString(e);q=q.idivn(p),q.isZero()?a=I+a:a=b[t-I.length]+I+a}for(this.isZero()&&(a="0"+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return this.length===2?e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?e+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,r){return u(typeof g<"u"),this.toArrayLike(g,e,r)},s.prototype.toArray=function(e,r){return this.toArrayLike(Array,e,r)},s.prototype.toArrayLike=function(e,r,a){var o=this.byteLength(),d=a||Math.max(1,o);u(o<=d,"byte array longer than desired length"),u(d>0,"Requested array length <= 0"),this.strip();var v=r==="le",y=new e(d),l,t,p=this.clone();if(v){for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[t]=l;for(;t<d;t++)y[t]=0}else{for(t=0;t<d-o;t++)y[t]=0;for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[d-t-1]=l}return y},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var r=e,a=0;return r>=4096&&(a+=13,r>>>=13),r>=64&&(a+=7,r>>>=7),r>=8&&(a+=4,r>>>=4),r>=2&&(a+=2,r>>>=2),a+r},s.prototype._zeroBits=function(e){if(e===0)return 26;var r=e,a=0;return r&8191||(a+=13,r>>>=13),r&127||(a+=7,r>>>=7),r&15||(a+=4,r>>>=4),r&3||(a+=2,r>>>=2),r&1||a++,a},s.prototype.bitLength=function(){var e=this.words[this.length-1],r=this._countBits(e);return(this.length-1)*26+r};function A(w){for(var e=new Array(w.bitLength()),r=0;r<e.length;r++){var a=r/26|0,o=r%26;e[r]=(w.words[a]&1<<o)>>>o}return e}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,r=0;r<this.length;r++){var a=this._zeroBits(this.words[r]);if(e+=a,a!==26)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]|e.words[r];return this.strip()},s.prototype.ior=function(e){return u((this.negative|e.negative)===0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var r;this.length>e.length?r=e:r=this;for(var a=0;a<r.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=r.length,this.strip()},s.prototype.iand=function(e){return u((this.negative|e.negative)===0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var r,a;this.length>e.length?(r=this,a=e):(r=e,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(e){return u((this.negative|e.negative)===0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){u(typeof e=="number"&&e>=0);var r=Math.ceil(e/26)|0,a=e%26;this._expand(r),a>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return a>0&&(this.words[o]=~this.words[o]&67108863>>26-a),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,r){u(typeof e=="number"&&e>=0);var a=e/26|0,o=e%26;return this._expand(a+1),r?this.words[a]=this.words[a]|1<<o:this.words[a]=this.words[a]&~(1<<o),this.strip()},s.prototype.iadd=function(e){var r;if(this.negative!==0&&e.negative===0)return this.negative=0,r=this.isub(e),this.negative^=1,this._normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,r=this.isub(e),e.negative=1,r._normSign();var a,o;this.length>e.length?(a=this,o=e):(a=e,o=this);for(var d=0,v=0;v<o.length;v++)r=(a.words[v]|0)+(o.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;for(;d!==0&&v<a.length;v++)r=(a.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;if(this.length=a.length,d!==0)this.words[this.length]=d,this.length++;else if(a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this},s.prototype.add=function(e){var r;return e.negative!==0&&this.negative===0?(e.negative=0,r=this.sub(e),e.negative^=1,r):e.negative===0&&this.negative!==0?(this.negative=0,r=e.sub(this),this.negative=1,r):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);return e.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a=this.cmp(e);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;a>0?(o=this,d=e):(o=e,d=this);for(var v=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;for(;v!==0&&y<o.length;y++)r=(o.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;if(v===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};function B(w,e,r){r.negative=e.negative^w.negative;var a=w.length+e.length|0;r.length=a,a=a-1|0;var o=w.words[0]|0,d=e.words[0]|0,v=o*d,y=v&67108863,l=v/67108864|0;r.words[0]=y;for(var t=1;t<a;t++){for(var p=l>>>26,q=l&67108863,I=Math.min(t,e.length-1),$=Math.max(0,t-w.length+1);$<=I;$++){var G=t-$|0;o=w.words[G]|0,d=e.words[$]|0,v=o*d+q,p+=v/67108864|0,q=v&67108863}r.words[t]=q|0,l=p|0}return l!==0?r.words[t]=l|0:r.length--,r.strip()}var R=function(e,r,a){var o=e.words,d=r.words,v=a.words,y=0,l,t,p,q=o[0]|0,I=q&8191,$=q>>>13,G=o[1]|0,V=G&8191,N=G>>>13,W=o[2]|0,Z=W&8191,ne=W>>>13,ee=o[3]|0,z=ee&8191,ue=ee>>>13,Ze=o[4]|0,Ae=Ze&8191,qe=Ze>>>13,nt=o[5]|0,Ne=nt&8191,ve=nt>>>13,ut=o[6]|0,Ce=ut&8191,je=ut>>>13,ht=o[7]|0,Ie=ht&8191,Le=ht>>>13,lt=o[8]|0,$e=lt&8191,ze=lt>>>13,bt=o[9]|0,K=bt&8191,P=bt>>>13,D=d[0]|0,Y=D&8191,oe=D>>>13,Re=d[1]|0,ce=Re&8191,Te=Re>>>13,ft=d[2]|0,Pe=ft&8191,Ue=ft>>>13,ot=d[3]|0,He=ot&8191,Ve=ot>>>13,pt=d[4]|0,Fe=pt&8191,Ge=pt>>>13,mt=d[5]|0,Ke=mt&8191,We=mt>>>13,vt=d[6]|0,Oe=vt&8191,Je=vt>>>13,j=d[7]|0,F=j&8191,H=j>>>13,C=d[8]|0,J=C&8191,he=C>>>13,xe=d[9]|0,de=xe&8191,ge=xe>>>13;a.negative=e.negative^r.negative,a.length=19,l=Math.imul(I,Y),t=Math.imul(I,oe),t=t+Math.imul($,Y)|0,p=Math.imul($,oe);var tt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,l=Math.imul(V,Y),t=Math.imul(V,oe),t=t+Math.imul(N,Y)|0,p=Math.imul(N,oe),l=l+Math.imul(I,ce)|0,t=t+Math.imul(I,Te)|0,t=t+Math.imul($,ce)|0,p=p+Math.imul($,Te)|0;var Xe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(Z,Y),t=Math.imul(Z,oe),t=t+Math.imul(ne,Y)|0,p=Math.imul(ne,oe),l=l+Math.imul(V,ce)|0,t=t+Math.imul(V,Te)|0,t=t+Math.imul(N,ce)|0,p=p+Math.imul(N,Te)|0,l=l+Math.imul(I,Pe)|0,t=t+Math.imul(I,Ue)|0,t=t+Math.imul($,Pe)|0,p=p+Math.imul($,Ue)|0;var ct=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(ct>>>26)|0,ct&=67108863,l=Math.imul(z,Y),t=Math.imul(z,oe),t=t+Math.imul(ue,Y)|0,p=Math.imul(ue,oe),l=l+Math.imul(Z,ce)|0,t=t+Math.imul(Z,Te)|0,t=t+Math.imul(ne,ce)|0,p=p+Math.imul(ne,Te)|0,l=l+Math.imul(V,Pe)|0,t=t+Math.imul(V,Ue)|0,t=t+Math.imul(N,Pe)|0,p=p+Math.imul(N,Ue)|0,l=l+Math.imul(I,He)|0,t=t+Math.imul(I,Ve)|0,t=t+Math.imul($,He)|0,p=p+Math.imul($,Ve)|0;var rt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(rt>>>26)|0,rt&=67108863,l=Math.imul(Ae,Y),t=Math.imul(Ae,oe),t=t+Math.imul(qe,Y)|0,p=Math.imul(qe,oe),l=l+Math.imul(z,ce)|0,t=t+Math.imul(z,Te)|0,t=t+Math.imul(ue,ce)|0,p=p+Math.imul(ue,Te)|0,l=l+Math.imul(Z,Pe)|0,t=t+Math.imul(Z,Ue)|0,t=t+Math.imul(ne,Pe)|0,p=p+Math.imul(ne,Ue)|0,l=l+Math.imul(V,He)|0,t=t+Math.imul(V,Ve)|0,t=t+Math.imul(N,He)|0,p=p+Math.imul(N,Ve)|0,l=l+Math.imul(I,Fe)|0,t=t+Math.imul(I,Ge)|0,t=t+Math.imul($,Fe)|0,p=p+Math.imul($,Ge)|0;var st=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(st>>>26)|0,st&=67108863,l=Math.imul(Ne,Y),t=Math.imul(Ne,oe),t=t+Math.imul(ve,Y)|0,p=Math.imul(ve,oe),l=l+Math.imul(Ae,ce)|0,t=t+Math.imul(Ae,Te)|0,t=t+Math.imul(qe,ce)|0,p=p+Math.imul(qe,Te)|0,l=l+Math.imul(z,Pe)|0,t=t+Math.imul(z,Ue)|0,t=t+Math.imul(ue,Pe)|0,p=p+Math.imul(ue,Ue)|0,l=l+Math.imul(Z,He)|0,t=t+Math.imul(Z,Ve)|0,t=t+Math.imul(ne,He)|0,p=p+Math.imul(ne,Ve)|0,l=l+Math.imul(V,Fe)|0,t=t+Math.imul(V,Ge)|0,t=t+Math.imul(N,Fe)|0,p=p+Math.imul(N,Ge)|0,l=l+Math.imul(I,Ke)|0,t=t+Math.imul(I,We)|0,t=t+Math.imul($,Ke)|0,p=p+Math.imul($,We)|0;var at=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(at>>>26)|0,at&=67108863,l=Math.imul(Ce,Y),t=Math.imul(Ce,oe),t=t+Math.imul(je,Y)|0,p=Math.imul(je,oe),l=l+Math.imul(Ne,ce)|0,t=t+Math.imul(Ne,Te)|0,t=t+Math.imul(ve,ce)|0,p=p+Math.imul(ve,Te)|0,l=l+Math.imul(Ae,Pe)|0,t=t+Math.imul(Ae,Ue)|0,t=t+Math.imul(qe,Pe)|0,p=p+Math.imul(qe,Ue)|0,l=l+Math.imul(z,He)|0,t=t+Math.imul(z,Ve)|0,t=t+Math.imul(ue,He)|0,p=p+Math.imul(ue,Ve)|0,l=l+Math.imul(Z,Fe)|0,t=t+Math.imul(Z,Ge)|0,t=t+Math.imul(ne,Fe)|0,p=p+Math.imul(ne,Ge)|0,l=l+Math.imul(V,Ke)|0,t=t+Math.imul(V,We)|0,t=t+Math.imul(N,Ke)|0,p=p+Math.imul(N,We)|0,l=l+Math.imul(I,Oe)|0,t=t+Math.imul(I,Je)|0,t=t+Math.imul($,Oe)|0,p=p+Math.imul($,Je)|0;var X=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(X>>>26)|0,X&=67108863,l=Math.imul(Ie,Y),t=Math.imul(Ie,oe),t=t+Math.imul(Le,Y)|0,p=Math.imul(Le,oe),l=l+Math.imul(Ce,ce)|0,t=t+Math.imul(Ce,Te)|0,t=t+Math.imul(je,ce)|0,p=p+Math.imul(je,Te)|0,l=l+Math.imul(Ne,Pe)|0,t=t+Math.imul(Ne,Ue)|0,t=t+Math.imul(ve,Pe)|0,p=p+Math.imul(ve,Ue)|0,l=l+Math.imul(Ae,He)|0,t=t+Math.imul(Ae,Ve)|0,t=t+Math.imul(qe,He)|0,p=p+Math.imul(qe,Ve)|0,l=l+Math.imul(z,Fe)|0,t=t+Math.imul(z,Ge)|0,t=t+Math.imul(ue,Fe)|0,p=p+Math.imul(ue,Ge)|0,l=l+Math.imul(Z,Ke)|0,t=t+Math.imul(Z,We)|0,t=t+Math.imul(ne,Ke)|0,p=p+Math.imul(ne,We)|0,l=l+Math.imul(V,Oe)|0,t=t+Math.imul(V,Je)|0,t=t+Math.imul(N,Oe)|0,p=p+Math.imul(N,Je)|0,l=l+Math.imul(I,F)|0,t=t+Math.imul(I,H)|0,t=t+Math.imul($,F)|0,p=p+Math.imul($,H)|0;var re=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(re>>>26)|0,re&=67108863,l=Math.imul($e,Y),t=Math.imul($e,oe),t=t+Math.imul(ze,Y)|0,p=Math.imul(ze,oe),l=l+Math.imul(Ie,ce)|0,t=t+Math.imul(Ie,Te)|0,t=t+Math.imul(Le,ce)|0,p=p+Math.imul(Le,Te)|0,l=l+Math.imul(Ce,Pe)|0,t=t+Math.imul(Ce,Ue)|0,t=t+Math.imul(je,Pe)|0,p=p+Math.imul(je,Ue)|0,l=l+Math.imul(Ne,He)|0,t=t+Math.imul(Ne,Ve)|0,t=t+Math.imul(ve,He)|0,p=p+Math.imul(ve,Ve)|0,l=l+Math.imul(Ae,Fe)|0,t=t+Math.imul(Ae,Ge)|0,t=t+Math.imul(qe,Fe)|0,p=p+Math.imul(qe,Ge)|0,l=l+Math.imul(z,Ke)|0,t=t+Math.imul(z,We)|0,t=t+Math.imul(ue,Ke)|0,p=p+Math.imul(ue,We)|0,l=l+Math.imul(Z,Oe)|0,t=t+Math.imul(Z,Je)|0,t=t+Math.imul(ne,Oe)|0,p=p+Math.imul(ne,Je)|0,l=l+Math.imul(V,F)|0,t=t+Math.imul(V,H)|0,t=t+Math.imul(N,F)|0,p=p+Math.imul(N,H)|0,l=l+Math.imul(I,J)|0,t=t+Math.imul(I,he)|0,t=t+Math.imul($,J)|0,p=p+Math.imul($,he)|0;var te=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(te>>>26)|0,te&=67108863,l=Math.imul(K,Y),t=Math.imul(K,oe),t=t+Math.imul(P,Y)|0,p=Math.imul(P,oe),l=l+Math.imul($e,ce)|0,t=t+Math.imul($e,Te)|0,t=t+Math.imul(ze,ce)|0,p=p+Math.imul(ze,Te)|0,l=l+Math.imul(Ie,Pe)|0,t=t+Math.imul(Ie,Ue)|0,t=t+Math.imul(Le,Pe)|0,p=p+Math.imul(Le,Ue)|0,l=l+Math.imul(Ce,He)|0,t=t+Math.imul(Ce,Ve)|0,t=t+Math.imul(je,He)|0,p=p+Math.imul(je,Ve)|0,l=l+Math.imul(Ne,Fe)|0,t=t+Math.imul(Ne,Ge)|0,t=t+Math.imul(ve,Fe)|0,p=p+Math.imul(ve,Ge)|0,l=l+Math.imul(Ae,Ke)|0,t=t+Math.imul(Ae,We)|0,t=t+Math.imul(qe,Ke)|0,p=p+Math.imul(qe,We)|0,l=l+Math.imul(z,Oe)|0,t=t+Math.imul(z,Je)|0,t=t+Math.imul(ue,Oe)|0,p=p+Math.imul(ue,Je)|0,l=l+Math.imul(Z,F)|0,t=t+Math.imul(Z,H)|0,t=t+Math.imul(ne,F)|0,p=p+Math.imul(ne,H)|0,l=l+Math.imul(V,J)|0,t=t+Math.imul(V,he)|0,t=t+Math.imul(N,J)|0,p=p+Math.imul(N,he)|0,l=l+Math.imul(I,de)|0,t=t+Math.imul(I,ge)|0,t=t+Math.imul($,de)|0,p=p+Math.imul($,ge)|0;var fe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(fe>>>26)|0,fe&=67108863,l=Math.imul(K,ce),t=Math.imul(K,Te),t=t+Math.imul(P,ce)|0,p=Math.imul(P,Te),l=l+Math.imul($e,Pe)|0,t=t+Math.imul($e,Ue)|0,t=t+Math.imul(ze,Pe)|0,p=p+Math.imul(ze,Ue)|0,l=l+Math.imul(Ie,He)|0,t=t+Math.imul(Ie,Ve)|0,t=t+Math.imul(Le,He)|0,p=p+Math.imul(Le,Ve)|0,l=l+Math.imul(Ce,Fe)|0,t=t+Math.imul(Ce,Ge)|0,t=t+Math.imul(je,Fe)|0,p=p+Math.imul(je,Ge)|0,l=l+Math.imul(Ne,Ke)|0,t=t+Math.imul(Ne,We)|0,t=t+Math.imul(ve,Ke)|0,p=p+Math.imul(ve,We)|0,l=l+Math.imul(Ae,Oe)|0,t=t+Math.imul(Ae,Je)|0,t=t+Math.imul(qe,Oe)|0,p=p+Math.imul(qe,Je)|0,l=l+Math.imul(z,F)|0,t=t+Math.imul(z,H)|0,t=t+Math.imul(ue,F)|0,p=p+Math.imul(ue,H)|0,l=l+Math.imul(Z,J)|0,t=t+Math.imul(Z,he)|0,t=t+Math.imul(ne,J)|0,p=p+Math.imul(ne,he)|0,l=l+Math.imul(V,de)|0,t=t+Math.imul(V,ge)|0,t=t+Math.imul(N,de)|0,p=p+Math.imul(N,ge)|0;var le=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(le>>>26)|0,le&=67108863,l=Math.imul(K,Pe),t=Math.imul(K,Ue),t=t+Math.imul(P,Pe)|0,p=Math.imul(P,Ue),l=l+Math.imul($e,He)|0,t=t+Math.imul($e,Ve)|0,t=t+Math.imul(ze,He)|0,p=p+Math.imul(ze,Ve)|0,l=l+Math.imul(Ie,Fe)|0,t=t+Math.imul(Ie,Ge)|0,t=t+Math.imul(Le,Fe)|0,p=p+Math.imul(Le,Ge)|0,l=l+Math.imul(Ce,Ke)|0,t=t+Math.imul(Ce,We)|0,t=t+Math.imul(je,Ke)|0,p=p+Math.imul(je,We)|0,l=l+Math.imul(Ne,Oe)|0,t=t+Math.imul(Ne,Je)|0,t=t+Math.imul(ve,Oe)|0,p=p+Math.imul(ve,Je)|0,l=l+Math.imul(Ae,F)|0,t=t+Math.imul(Ae,H)|0,t=t+Math.imul(qe,F)|0,p=p+Math.imul(qe,H)|0,l=l+Math.imul(z,J)|0,t=t+Math.imul(z,he)|0,t=t+Math.imul(ue,J)|0,p=p+Math.imul(ue,he)|0,l=l+Math.imul(Z,de)|0,t=t+Math.imul(Z,ge)|0,t=t+Math.imul(ne,de)|0,p=p+Math.imul(ne,ge)|0;var pe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(pe>>>26)|0,pe&=67108863,l=Math.imul(K,He),t=Math.imul(K,Ve),t=t+Math.imul(P,He)|0,p=Math.imul(P,Ve),l=l+Math.imul($e,Fe)|0,t=t+Math.imul($e,Ge)|0,t=t+Math.imul(ze,Fe)|0,p=p+Math.imul(ze,Ge)|0,l=l+Math.imul(Ie,Ke)|0,t=t+Math.imul(Ie,We)|0,t=t+Math.imul(Le,Ke)|0,p=p+Math.imul(Le,We)|0,l=l+Math.imul(Ce,Oe)|0,t=t+Math.imul(Ce,Je)|0,t=t+Math.imul(je,Oe)|0,p=p+Math.imul(je,Je)|0,l=l+Math.imul(Ne,F)|0,t=t+Math.imul(Ne,H)|0,t=t+Math.imul(ve,F)|0,p=p+Math.imul(ve,H)|0,l=l+Math.imul(Ae,J)|0,t=t+Math.imul(Ae,he)|0,t=t+Math.imul(qe,J)|0,p=p+Math.imul(qe,he)|0,l=l+Math.imul(z,de)|0,t=t+Math.imul(z,ge)|0,t=t+Math.imul(ue,de)|0,p=p+Math.imul(ue,ge)|0;var Se=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Se>>>26)|0,Se&=67108863,l=Math.imul(K,Fe),t=Math.imul(K,Ge),t=t+Math.imul(P,Fe)|0,p=Math.imul(P,Ge),l=l+Math.imul($e,Ke)|0,t=t+Math.imul($e,We)|0,t=t+Math.imul(ze,Ke)|0,p=p+Math.imul(ze,We)|0,l=l+Math.imul(Ie,Oe)|0,t=t+Math.imul(Ie,Je)|0,t=t+Math.imul(Le,Oe)|0,p=p+Math.imul(Le,Je)|0,l=l+Math.imul(Ce,F)|0,t=t+Math.imul(Ce,H)|0,t=t+Math.imul(je,F)|0,p=p+Math.imul(je,H)|0,l=l+Math.imul(Ne,J)|0,t=t+Math.imul(Ne,he)|0,t=t+Math.imul(ve,J)|0,p=p+Math.imul(ve,he)|0,l=l+Math.imul(Ae,de)|0,t=t+Math.imul(Ae,ge)|0,t=t+Math.imul(qe,de)|0,p=p+Math.imul(qe,ge)|0;var Ee=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,l=Math.imul(K,Ke),t=Math.imul(K,We),t=t+Math.imul(P,Ke)|0,p=Math.imul(P,We),l=l+Math.imul($e,Oe)|0,t=t+Math.imul($e,Je)|0,t=t+Math.imul(ze,Oe)|0,p=p+Math.imul(ze,Je)|0,l=l+Math.imul(Ie,F)|0,t=t+Math.imul(Ie,H)|0,t=t+Math.imul(Le,F)|0,p=p+Math.imul(Le,H)|0,l=l+Math.imul(Ce,J)|0,t=t+Math.imul(Ce,he)|0,t=t+Math.imul(je,J)|0,p=p+Math.imul(je,he)|0,l=l+Math.imul(Ne,de)|0,t=t+Math.imul(Ne,ge)|0,t=t+Math.imul(ve,de)|0,p=p+Math.imul(ve,ge)|0;var me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(me>>>26)|0,me&=67108863,l=Math.imul(K,Oe),t=Math.imul(K,Je),t=t+Math.imul(P,Oe)|0,p=Math.imul(P,Je),l=l+Math.imul($e,F)|0,t=t+Math.imul($e,H)|0,t=t+Math.imul(ze,F)|0,p=p+Math.imul(ze,H)|0,l=l+Math.imul(Ie,J)|0,t=t+Math.imul(Ie,he)|0,t=t+Math.imul(Le,J)|0,p=p+Math.imul(Le,he)|0,l=l+Math.imul(Ce,de)|0,t=t+Math.imul(Ce,ge)|0,t=t+Math.imul(je,de)|0,p=p+Math.imul(je,ge)|0;var _e=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(_e>>>26)|0,_e&=67108863,l=Math.imul(K,F),t=Math.imul(K,H),t=t+Math.imul(P,F)|0,p=Math.imul(P,H),l=l+Math.imul($e,J)|0,t=t+Math.imul($e,he)|0,t=t+Math.imul(ze,J)|0,p=p+Math.imul(ze,he)|0,l=l+Math.imul(Ie,de)|0,t=t+Math.imul(Ie,ge)|0,t=t+Math.imul(Le,de)|0,p=p+Math.imul(Le,ge)|0;var De=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(De>>>26)|0,De&=67108863,l=Math.imul(K,J),t=Math.imul(K,he),t=t+Math.imul(P,J)|0,p=Math.imul(P,he),l=l+Math.imul($e,de)|0,t=t+Math.imul($e,ge)|0,t=t+Math.imul(ze,de)|0,p=p+Math.imul(ze,ge)|0;var Me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Me>>>26)|0,Me&=67108863,l=Math.imul(K,de),t=Math.imul(K,ge),t=t+Math.imul(P,de)|0,p=Math.imul(P,ge);var Be=(y+l|0)+((t&8191)<<13)|0;return y=(p+(t>>>13)|0)+(Be>>>26)|0,Be&=67108863,v[0]=tt,v[1]=Xe,v[2]=ct,v[3]=rt,v[4]=st,v[5]=at,v[6]=X,v[7]=re,v[8]=te,v[9]=fe,v[10]=le,v[11]=pe,v[12]=Se,v[13]=Ee,v[14]=me,v[15]=_e,v[16]=De,v[17]=Me,v[18]=Be,y!==0&&(v[19]=y,a.length++),a};Math.imul||(R=B);function T(w,e,r){r.negative=e.negative^w.negative,r.length=w.length+e.length;for(var a=0,o=0,d=0;d<r.length-1;d++){var v=o;o=0;for(var y=a&67108863,l=Math.min(d,e.length-1),t=Math.max(0,d-w.length+1);t<=l;t++){var p=d-t,q=w.words[p]|0,I=e.words[t]|0,$=q*I,G=$&67108863;v=v+($/67108864|0)|0,G=G+y|0,y=G&67108863,v=v+(G>>>26)|0,o+=v>>>26,v&=67108863}r.words[d]=y,a=v,v=o}return a!==0?r.words[d]=a:r.length--,r.strip()}function k(w,e,r){var a=new O;return a.mulp(w,e,r)}s.prototype.mulTo=function(e,r){var a,o=this.length+e.length;return this.length===10&&e.length===10?a=R(this,e,r):o<63?a=B(this,e,r):o<1024?a=T(this,e,r):a=k(this,e,r),a};function O(w,e){this.x=w,this.y=e}O.prototype.makeRBT=function(e){for(var r=new Array(e),a=s.prototype._countBits(e)-1,o=0;o<e;o++)r[o]=this.revBin(o,a,e);return r},O.prototype.revBin=function(e,r,a){if(e===0||e===a-1)return e;for(var o=0,d=0;d<r;d++)o|=(e&1)<<r-d-1,e>>=1;return o},O.prototype.permute=function(e,r,a,o,d,v){for(var y=0;y<v;y++)o[y]=r[e[y]],d[y]=a[e[y]]},O.prototype.transform=function(e,r,a,o,d,v){this.permute(v,e,r,a,o,d);for(var y=1;y<d;y<<=1)for(var l=y<<1,t=Math.cos(2*Math.PI/l),p=Math.sin(2*Math.PI/l),q=0;q<d;q+=l)for(var I=t,$=p,G=0;G<y;G++){var V=a[q+G],N=o[q+G],W=a[q+G+y],Z=o[q+G+y],ne=I*W-$*Z;Z=I*Z+$*W,W=ne,a[q+G]=V+W,o[q+G]=N+Z,a[q+G+y]=V-W,o[q+G+y]=N-Z,G!==l&&(ne=t*I-p*$,$=t*$+p*I,I=ne)}},O.prototype.guessLen13b=function(e,r){var a=Math.max(r,e)|1,o=a&1,d=0;for(a=a/2|0;a;a=a>>>1)d++;return 1<<d+1+o},O.prototype.conjugate=function(e,r,a){if(!(a<=1))for(var o=0;o<a/2;o++){var d=e[o];e[o]=e[a-o-1],e[a-o-1]=d,d=r[o],r[o]=-r[a-o-1],r[a-o-1]=-d}},O.prototype.normalize13b=function(e,r){for(var a=0,o=0;o<r/2;o++){var d=Math.round(e[2*o+1]/r)*8192+Math.round(e[2*o]/r)+a;e[o]=d&67108863,d<67108864?a=0:a=d/67108864|0}return e},O.prototype.convert13b=function(e,r,a,o){for(var d=0,v=0;v<r;v++)d=d+(e[v]|0),a[2*v]=d&8191,d=d>>>13,a[2*v+1]=d&8191,d=d>>>13;for(v=2*r;v<o;++v)a[v]=0;u(d===0),u((d&-8192)===0)},O.prototype.stub=function(e){for(var r=new Array(e),a=0;a<e;a++)r[a]=0;return r},O.prototype.mulp=function(e,r,a){var o=2*this.guessLen13b(e.length,r.length),d=this.makeRBT(o),v=this.stub(o),y=new Array(o),l=new Array(o),t=new Array(o),p=new Array(o),q=new Array(o),I=new Array(o),$=a.words;$.length=o,this.convert13b(e.words,e.length,y,o),this.convert13b(r.words,r.length,p,o),this.transform(y,v,l,t,o,d),this.transform(p,v,q,I,o,d);for(var G=0;G<o;G++){var V=l[G]*q[G]-t[G]*I[G];t[G]=l[G]*I[G]+t[G]*q[G],l[G]=V}return this.conjugate(l,t,o),this.transform(l,t,$,v,o,d),this.conjugate($,v,o),this.normalize13b($,o),a.negative=e.negative^r.negative,a.length=e.length+r.length,a.strip()},s.prototype.mul=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),this.mulTo(e,r)},s.prototype.mulf=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),k(this,e,r)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){u(typeof e=="number"),u(e<67108864);for(var r=0,a=0;a<this.length;a++){var o=(this.words[a]|0)*e,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[a]=d&67108863}return r!==0&&(this.words[a]=r,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var r=A(e);if(r.length===0)return new s(1);for(var a=this,o=0;o<r.length&&r[o]===0;o++,a=a.sqr());if(++o<r.length)for(var d=a.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(a=a.mul(d));return a},s.prototype.iushln=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var v=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,l=(this.words[d]|0)-y<<r;this.words[d]=l|v,v=y>>>26-r}v&&(this.words[d]=v,this.length++)}if(a!==0){for(d=this.length-1;d>=0;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(e){return u(this.negative===0),this.iushln(e)},s.prototype.iushrn=function(e,r,a){u(typeof e=="number"&&e>=0);var o;r?o=(r-r%26)/26:o=0;var d=e%26,v=Math.min((e-d)/26,this.length),y=67108863^67108863>>>d<<d,l=a;if(o-=v,o=Math.max(0,o),l){for(var t=0;t<v;t++)l.words[t]=this.words[t];l.length=v}if(v!==0)if(this.length>v)for(this.length-=v,t=0;t<this.length;t++)this.words[t]=this.words[t+v];else this.words[0]=0,this.length=1;var p=0;for(t=this.length-1;t>=0&&(p!==0||t>=o);t--){var q=this.words[t]|0;this.words[t]=p<<26-d|q>>>d,p=q&y}return l&&p!==0&&(l.words[l.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,r,a){return u(this.negative===0),this.iushrn(e,r,a)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return!1;var d=this.words[a];return!!(d&o)},s.prototype.imaskn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(r!==0&&a++,this.length=Math.min(a,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return u(typeof e=="number"),u(e<67108864),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(e){if(u(typeof e=="number"),u(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,r,a){var o=e.length+a,d;this._expand(o);var v,y=0;for(d=0;d<e.length;d++){v=(this.words[d+a]|0)+y;var l=(e.words[d]|0)*r;v-=l&67108863,y=(v>>26)-(l/67108864|0),this.words[d+a]=v&67108863}for(;d<this.length-a;d++)v=(this.words[d+a]|0)+y,y=v>>26,this.words[d+a]=v&67108863;if(y===0)return this.strip();for(u(y===-1),y=0,d=0;d<this.length;d++)v=-(this.words[d]|0)+y,y=v>>26,this.words[d]=v&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,r){var a=this.length-e.length,o=this.clone(),d=e,v=d.words[d.length-1]|0,y=this._countBits(v);a=26-y,a!==0&&(d=d.ushln(a),o.iushln(a),v=d.words[d.length-1]|0);var l=o.length-d.length,t;if(r!=="mod"){t=new s(null),t.length=l+1,t.words=new Array(t.length);for(var p=0;p<t.length;p++)t.words[p]=0}var q=o.clone()._ishlnsubmul(d,1,l);q.negative===0&&(o=q,t&&(t.words[l]=1));for(var I=l-1;I>=0;I--){var $=(o.words[d.length+I]|0)*67108864+(o.words[d.length+I-1]|0);for($=Math.min($/v|0,67108863),o._ishlnsubmul(d,$,I);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(d,1,I),o.isZero()||(o.negative^=1);t&&(t.words[I]=$)}return t&&t.strip(),o.strip(),r!=="div"&&a!==0&&o.iushrn(a),{div:t||null,mod:o}},s.prototype.divmod=function(e,r,a){if(u(!e.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,v;return this.negative!==0&&e.negative===0?(v=this.neg().divmod(e,r),r!=="mod"&&(o=v.div.neg()),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.iadd(e)),{div:o,mod:d}):this.negative===0&&e.negative!==0?(v=this.divmod(e.neg(),r),r!=="mod"&&(o=v.div.neg()),{div:o,mod:v.mod}):this.negative&e.negative?(v=this.neg().divmod(e.neg(),r),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.isub(e)),{div:v.div,mod:d}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:e.length===1?r==="div"?{div:this.divn(e.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,r)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var a=r.div.negative!==0?r.mod.isub(e):r.mod,o=e.ushrn(1),d=e.andln(1),v=a.cmp(o);return v<0||d===1&&v===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(e){u(e<=67108863);for(var r=(1<<26)%e,a=0,o=this.length-1;o>=0;o--)a=(r*a+(this.words[o]|0))%e;return a},s.prototype.idivn=function(e){u(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var o=(this.words[a]|0)+r*67108864;this.words[a]=o/e|0,r=o%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=new s(0),y=new s(1),l=0;r.isEven()&&a.isEven();)r.iushrn(1),a.iushrn(1),++l;for(var t=a.clone(),p=r.clone();!r.isZero();){for(var q=0,I=1;!(r.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(r.iushrn(q);q-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(t),d.isub(p)),o.iushrn(1),d.iushrn(1);for(var $=0,G=1;!(a.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(a.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(t),y.isub(p)),v.iushrn(1),y.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(v),d.isub(y)):(a.isub(r),v.isub(o),y.isub(d))}return{a:v,b:y,gcd:a.iushln(l)}},s.prototype._invmp=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=a.clone();r.cmpn(1)>0&&a.cmpn(1)>0;){for(var y=0,l=1;!(r.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(v),o.iushrn(1);for(var t=0,p=1;!(a.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(a.iushrn(t);t-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(d)):(a.isub(r),d.isub(o))}var q;return r.cmpn(1)===0?q=o:q=d,q.cmpn(0)<0&&q.iadd(e),q},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone(),a=e.clone();r.negative=0,a.negative=0;for(var o=0;r.isEven()&&a.isEven();o++)r.iushrn(1),a.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=r.cmp(a);if(d<0){var v=r;r=a,a=v}else if(d===0||a.cmpn(1)===0)break;r.isub(a)}while(!0);return a.iushln(o)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){u(typeof e=="number");var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return this._expand(a+1),this.words[a]|=o,this;for(var d=o,v=a;d!==0&&v<this.length;v++){var y=this.words[v]|0;y+=d,d=y>>>26,y&=67108863,this.words[v]=y}return d!==0&&(this.words[v]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1)a=1;else{r&&(e=-e),u(e<=67108863,"Number is too big");var o=this.words[0]|0;a=o===e?0:o<e?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var r=0,a=this.length-1;a>=0;a--){var o=this.words[a]|0,d=e.words[a]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(e){return this.cmpn(e)===1},s.prototype.gt=function(e){return this.cmp(e)===1},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return this.cmpn(e)===-1},s.prototype.lt=function(e){return this.cmp(e)===-1},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return this.cmpn(e)===0},s.prototype.eq=function(e){return this.cmp(e)===0},s.red=function(e){return new se(e)},s.prototype.toRed=function(e){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return u(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return u(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var U={k256:null,p224:null,p192:null,p25519:null};function L(w,e){this.name=w,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},L.prototype.ireduce=function(e){var r=e,a;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),a=r.bitLength();while(a>this.n);var o=a<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},L.prototype.split=function(e,r){e.iushrn(this.n,0,r)},L.prototype.imulK=function(e){return e.imul(this.k)};function Q(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(Q,L),Q.prototype.split=function(e,r){for(var a=4194303,o=Math.min(e.length,9),d=0;d<o;d++)r.words[d]=e.words[d];if(r.length=o,e.length<=9){e.words[0]=0,e.length=1;return}var v=e.words[9];for(r.words[r.length++]=v&a,d=10;d<e.length;d++){var y=e.words[d]|0;e.words[d-10]=(y&a)<<4|v>>>22,v=y}v>>>=22,e.words[d-10]=v,v===0&&e.length>10?e.length-=10:e.length-=9},Q.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,a=0;a<e.length;a++){var o=e.words[a]|0;r+=o*977,e.words[a]=r&67108863,r=o*64+(r/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e};function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ie,L);function we(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(we,L);function ye(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ye,L),ye.prototype.imulK=function(e){for(var r=0,a=0;a<e.length;a++){var o=(e.words[a]|0)*19+r,d=o&67108863;o>>>=26,e.words[a]=d,r=o}return r!==0&&(e.words[e.length++]=r),e},s._prime=function(e){if(U[e])return U[e];var r;if(e==="k256")r=new Q;else if(e==="p224")r=new ie;else if(e==="p192")r=new we;else if(e==="p25519")r=new ye;else throw new Error("Unknown prime "+e);return U[e]=r,r};function se(w){if(typeof w=="string"){var e=s._prime(w);this.m=e.p,this.prime=e}else u(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}se.prototype._verify1=function(e){u(e.negative===0,"red works only with positives"),u(e.red,"red works only with red numbers")},se.prototype._verify2=function(e,r){u((e.negative|r.negative)===0,"red works only with positives"),u(e.red&&e.red===r.red,"red works only with red numbers")},se.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},se.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},se.prototype.add=function(e,r){this._verify2(e,r);var a=e.add(r);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},se.prototype.iadd=function(e,r){this._verify2(e,r);var a=e.iadd(r);return a.cmp(this.m)>=0&&a.isub(this.m),a},se.prototype.sub=function(e,r){this._verify2(e,r);var a=e.sub(r);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},se.prototype.isub=function(e,r){this._verify2(e,r);var a=e.isub(r);return a.cmpn(0)<0&&a.iadd(this.m),a},se.prototype.shl=function(e,r){return this._verify1(e),this.imod(e.ushln(r))},se.prototype.imul=function(e,r){return this._verify2(e,r),this.imod(e.imul(r))},se.prototype.mul=function(e,r){return this._verify2(e,r),this.imod(e.mul(r))},se.prototype.isqr=function(e){return this.imul(e,e.clone())},se.prototype.sqr=function(e){return this.mul(e,e)},se.prototype.sqrt=function(e){if(e.isZero())return e.clone();var r=this.m.andln(3);if(u(r%2===1),r===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(e,a)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);u(!o.isZero());var v=new s(1).toRed(this),y=v.redNeg(),l=this.m.subn(1).iushrn(1),t=this.m.bitLength();for(t=new s(2*t*t).toRed(this);this.pow(t,l).cmp(y)!==0;)t.redIAdd(y);for(var p=this.pow(t,o),q=this.pow(e,o.addn(1).iushrn(1)),I=this.pow(e,o),$=d;I.cmp(v)!==0;){for(var G=I,V=0;G.cmp(v)!==0;V++)G=G.redSqr();u(V<$);var N=this.pow(p,new s(1).iushln($-V-1));q=q.redMul(N),p=N.redSqr(),I=I.redMul(p),$=V}return q},se.prototype.invm=function(e){var r=e._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},se.prototype.pow=function(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var a=4,o=new Array(1<<a);o[0]=new s(1).toRed(this),o[1]=e;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],e);var v=o[0],y=0,l=0,t=r.bitLength()%26;for(t===0&&(t=26),d=r.length-1;d>=0;d--){for(var p=r.words[d],q=t-1;q>=0;q--){var I=p>>q&1;if(v!==o[0]&&(v=this.sqr(v)),I===0&&y===0){l=0;continue}y<<=1,y|=I,l++,!(l!==a&&(d!==0||q!==0))&&(v=this.mul(v,o[y]),l=0,y=0)}t=26}return v},se.prototype.convertTo=function(e){var r=e.umod(this.m);return r===e?r.clone():r},se.prototype.convertFrom=function(e){var r=e.clone();return r.red=null,r},s.mont=function(e){return new ke(e)};function ke(w){se.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(ke,se),ke.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},ke.prototype.convertFrom=function(e){var r=this.imod(e.mul(this.rinv));return r.red=null,r},ke.prototype.imul=function(e,r){if(e.isZero()||r.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.mul=function(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var a=e.mul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.invm=function(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,commonjsGlobal)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var c;brorand.exports=function(m){return c||(c=new n(null)),c.generate(m)};function n(u){this.rand=u}if(brorand.exports.Rand=n,n.prototype.generate=function(m){return this._rand(m)},n.prototype._rand=function(m){if(this.rand.getBytes)return this.rand.getBytes(m);for(var s=new Uint8Array(m),g=0;g<s.length;g++)s[g]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(m){var s=new Uint8Array(m);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(m){var s=new Uint8Array(m);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var h=requireCryptoBrowserify();if(typeof h.randomBytes!="function")throw new Error("Not supported");n.prototype._rand=function(m){return h.randomBytes(m)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var c=requireBn$5(),n=requireBrorand();function h(u){this.rand=u||new n.Rand}return mr=h,h.create=function(m){return new h(m)},h.prototype._randbelow=function(m){var s=m.bitLength(),g=Math.ceil(s/8);do var x=new c(this.rand.generate(g));while(x.cmp(m)>=0);return x},h.prototype._randrange=function(m,s){var g=s.sub(m);return m.add(this._randbelow(g))},h.prototype.test=function(m,s,g){var x=m.bitLength(),_=c.mont(m),M=new c(1).toRed(_);s||(s=Math.max(1,x/48|0));for(var b=m.subn(1),S=0;!b.testn(S);S++);for(var E=m.shrn(S),A=b.toRed(_),B=!0;s>0;s--){var R=this._randrange(new c(2),b);g&&g(R);var T=R.toRed(_).redPow(E);if(!(T.cmp(M)===0||T.cmp(A)===0)){for(var k=1;k<S;k++){if(T=T.redSqr(),T.cmp(M)===0)return!1;if(T.cmp(A)===0)break}if(k===S)return!1}}return B},h.prototype.getDivisor=function(m,s){var g=m.bitLength(),x=c.mont(m),_=new c(1).toRed(x);s||(s=Math.max(1,g/48|0));for(var M=m.subn(1),b=0;!M.testn(b);b++);for(var S=m.shrn(b),E=M.toRed(x);s>0;s--){var A=this._randrange(new c(2),M),B=m.gcd(A);if(B.cmpn(1)!==0)return B;var R=A.toRed(x).redPow(S);if(!(R.cmp(_)===0||R.cmp(E)===0)){for(var T=1;T<b;T++){if(R=R.redSqr(),R.cmp(_)===0)return R.fromRed().subn(1).gcd(m);if(R.cmp(E)===0)break}if(T===b)return R=R.redSqr(),R.fromRed().subn(1).gcd(m)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var c=requireBrowser$b();generatePrime=T,T.simpleSieve=B,T.fermatTest=R;var n=requireBn$6(),h=new n(24),u=requireMr(),m=new u,s=new n(1),g=new n(2),x=new n(5);new n(16),new n(8);var _=new n(10),M=new n(3);new n(7);var b=new n(11),S=new n(4);new n(12);var E=null;function A(){if(E!==null)return E;var k=1048576,O=[];O[0]=2;for(var U=1,L=3;L<k;L+=2){for(var Q=Math.ceil(Math.sqrt(L)),ie=0;ie<U&&O[ie]<=Q&&L%O[ie]!==0;ie++);U!==ie&&O[ie]<=Q||(O[U++]=L)}return E=O,O}function B(k){for(var O=A(),U=0;U<O.length;U++)if(k.modn(O[U])===0)return k.cmpn(O[U])===0;return!0}function R(k){var O=n.mont(k);return g.toRed(O).redPow(k.subn(1)).fromRed().cmpn(1)===0}function T(k,O){if(k<16)return O===2||O===5?new n([140,123]):new n([140,39]);O=new n(O);for(var U,L;;){for(U=new n(c(Math.ceil(k/8)));U.bitLength()>k;)U.ishrn(1);if(U.isEven()&&U.iadd(s),U.testn(1)||U.iadd(g),O.cmp(g)){if(!O.cmp(x))for(;U.mod(_).cmp(M);)U.iadd(S)}else for(;U.mod(h).cmp(b);)U.iadd(S);if(L=U.shrn(1),B(L)&&B(U)&&R(L)&&R(U)&&m.test(L)&&m.test(U))return U}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"};var require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18},dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var c=requireBn$6(),n=requireMr(),h=new n,u=new c(24),m=new c(11),s=new c(10),g=new c(3),x=new c(7),_=requireGeneratePrime(),M=requireBrowser$b();dh=B;function b(T,k){return k=k||"utf8",Buffer.isBuffer(T)||(T=new Buffer(T,k)),this._pub=new c(T),this}function S(T,k){return k=k||"utf8",Buffer.isBuffer(T)||(T=new Buffer(T,k)),this._priv=new c(T),this}var E={};function A(T,k){var O=k.toString("hex"),U=[O,T.toString(16)].join("_");if(U in E)return E[U];var L=0;if(T.isEven()||!_.simpleSieve||!_.fermatTest(T)||!h.test(T))return L+=1,O==="02"||O==="05"?L+=8:L+=4,E[U]=L,L;h.test(T.shrn(1))||(L+=2);var Q;switch(O){case"02":T.mod(u).cmp(m)&&(L+=8);break;case"05":Q=T.mod(s),Q.cmp(g)&&Q.cmp(x)&&(L+=8);break;default:L+=4}return E[U]=L,L}function B(T,k,O){this.setGenerator(k),this.__prime=new c(T),this._prime=c.mont(this.__prime),this._primeLen=T.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,O?(this.setPublicKey=b,this.setPrivateKey=S):this._primeCode=8}Object.defineProperty(B.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=A(this.__prime,this.__gen)),this._primeCode}}),B.prototype.generateKeys=function(){return this._priv||(this._priv=new c(M(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},B.prototype.computeSecret=function(T){T=new c(T),T=T.toRed(this._prime);var k=T.redPow(this._priv).fromRed(),O=new Buffer(k.toArray()),U=this.getPrime();if(O.length<U.length){var L=new Buffer(U.length-O.length);L.fill(0),O=Buffer.concat([L,O])}return O},B.prototype.getPublicKey=function(k){return R(this._pub,k)},B.prototype.getPrivateKey=function(k){return R(this._priv,k)},B.prototype.getPrime=function(T){return R(this.__prime,T)},B.prototype.getGenerator=function(T){return R(this._gen,T)},B.prototype.setGenerator=function(T,k){return k=k||"utf8",Buffer.isBuffer(T)||(T=new Buffer(T,k)),this.__gen=T,this._gen=new c(T),this};function R(T,k){var O=new Buffer(T.toArray());return k?O.toString(k):O}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var c=requireGeneratePrime(),n=require$$1$1,h=requireDh();function u(g){var x=new Buffer(n[g].prime,"hex"),_=new Buffer(n[g].gen,"hex");return new h(x,_)}var m={binary:!0,hex:!0,base64:!0};function s(g,x,_,M){return Buffer.isBuffer(x)||m[x]===void 0?s(g,"binary",x,_):(x=x||"binary",M=M||"binary",_=_||new Buffer([2]),Buffer.isBuffer(_)||(_=new Buffer(_,M)),typeof g=="number"?new h(c(g,_),_,!0):(Buffer.isBuffer(g)||(g=new Buffer(g,x)),new h(g,_,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=u,browser$4.createDiffieHellman=browser$4.DiffieHellman=s,browser$4}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:c}:processNextickArgs.exports=process$1;function c(n,h,u,m){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,g,x;switch(s){case 0:case 1:return process$1.nextTick(n);case 2:return process$1.nextTick(function(){n.call(null,h)});case 3:return process$1.nextTick(function(){n.call(null,h,u)});case 4:return process$1.nextTick(function(){n.call(null,h,u,m)});default:for(g=new Array(s-1),x=0;x<g.length;)g[x++]=arguments[x];return process$1.nextTick(function(){n.apply(null,g)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var c={}.toString;return isarray=Array.isArray||function(n){return c.call(n)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(c,n){var h=require$$0$1,u=h.Buffer;function m(g,x){for(var _ in g)x[_]=g[_]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?c.exports=h:(m(h,n),n.Buffer=s);function s(g,x,_){return u(g,x,_)}m(u,s),s.from=function(g,x,_){if(typeof g=="number")throw new TypeError("Argument must not be a number");return u(g,x,_)},s.alloc=function(g,x,_){if(typeof g!="number")throw new TypeError("Argument must be a number");var M=u(g);return x!==void 0?typeof _=="string"?M.fill(x,_):M.fill(x):M.fill(0),M},s.allocUnsafe=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return u(g)},s.allocUnsafeSlow=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return h.SlowBuffer(g)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$1={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$1;hasRequiredUtil=1;function c(R){return Array.isArray?Array.isArray(R):B(R)==="[object Array]"}util$1.isArray=c;function n(R){return typeof R=="boolean"}util$1.isBoolean=n;function h(R){return R===null}util$1.isNull=h;function u(R){return R==null}util$1.isNullOrUndefined=u;function m(R){return typeof R=="number"}util$1.isNumber=m;function s(R){return typeof R=="string"}util$1.isString=s;function g(R){return typeof R=="symbol"}util$1.isSymbol=g;function x(R){return R===void 0}util$1.isUndefined=x;function _(R){return B(R)==="[object RegExp]"}util$1.isRegExp=_;function M(R){return typeof R=="object"&&R!==null}util$1.isObject=M;function b(R){return B(R)==="[object Date]"}util$1.isDate=b;function S(R){return B(R)==="[object Error]"||R instanceof Error}util$1.isError=S;function E(R){return typeof R=="function"}util$1.isFunction=E;function A(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}util$1.isPrimitive=A,util$1.isBuffer=require$$0$1.Buffer.isBuffer;function B(R){return Object.prototype.toString.call(R)}return util$1}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(c){function n(s,g){if(!(s instanceof g))throw new TypeError("Cannot call a class as a function")}var h=requireSafeBuffer().Buffer,u=requireUtil$1();function m(s,g,x){s.copy(g,x)}c.exports=function(){function s(){n(this,s),this.head=null,this.tail=null,this.length=0}return s.prototype.push=function(x){var _={data:x,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length},s.prototype.unshift=function(x){var _={data:x,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length},s.prototype.shift=function(){if(this.length!==0){var x=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,x}},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(x){if(this.length===0)return"";for(var _=this.head,M=""+_.data;_=_.next;)M+=x+_.data;return M},s.prototype.concat=function(x){if(this.length===0)return h.alloc(0);for(var _=h.allocUnsafe(x>>>0),M=this.head,b=0;M;)m(M.data,_,b),b+=M.data.length,M=M.next;return _},s}(),u&&u.inspect&&u.inspect.custom&&(c.exports.prototype[u.inspect.custom]=function(){var s=u.inspect({length:this.length});return this.constructor.name+" "+s})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var c=requireProcessNextickArgs();function n(m,s){var g=this,x=this._readableState&&this._readableState.destroyed,_=this._writableState&&this._writableState.destroyed;return x||_?(s?s(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(u,this,m)):c.nextTick(u,this,m)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(m||null,function(M){!s&&M?g._writableState?g._writableState.errorEmitted||(g._writableState.errorEmitted=!0,c.nextTick(u,g,M)):c.nextTick(u,g,M):s&&s(M)}),this)}function h(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(m,s){m.emit("error",s)}return destroy_1={destroy:n,undestroy:h},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var c=requireProcessNextickArgs();_stream_writable=R;function n(v){var y=this;this.next=null,this.entry=null,this.finish=function(){d(y,v)}}var h=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:c.nextTick,u;R.WritableState=A;var m=Object.create(requireUtil());m.inherits=requireInherits_browser();var s={deprecate:requireBrowser$a()},g=requireStreamBrowser(),x=requireSafeBuffer().Buffer,_=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function M(v){return x.from(v)}function b(v){return x.isBuffer(v)||v instanceof _}var S=requireDestroy();m.inherits(R,g);function E(){}function A(v,y){u=u||require_stream_duplex(),v=v||{};var l=y instanceof u;this.objectMode=!!v.objectMode,l&&(this.objectMode=this.objectMode||!!v.writableObjectMode);var t=v.highWaterMark,p=v.writableHighWaterMark,q=this.objectMode?16:16*1024;t||t===0?this.highWaterMark=t:l&&(p||p===0)?this.highWaterMark=p:this.highWaterMark=q,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=v.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=v.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($){we(y,$)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}A.prototype.getBuffer=function(){for(var y=this.bufferedRequest,l=[];y;)l.push(y),y=y.next;return l},function(){try{Object.defineProperty(A.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var B;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(v){return B.call(this,v)?!0:this!==R?!1:v&&v._writableState instanceof A}})):B=function(v){return v instanceof this};function R(v){if(u=u||require_stream_duplex(),!B.call(R,this)&&!(this instanceof u))return new R(v);this._writableState=new A(v,this),this.writable=!0,v&&(typeof v.write=="function"&&(this._write=v.write),typeof v.writev=="function"&&(this._writev=v.writev),typeof v.destroy=="function"&&(this._destroy=v.destroy),typeof v.final=="function"&&(this._final=v.final)),g.call(this)}R.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function T(v,y){var l=new Error("write after end");v.emit("error",l),c.nextTick(y,l)}function k(v,y,l,t){var p=!0,q=!1;return l===null?q=new TypeError("May not write null values to stream"):typeof l!="string"&&l!==void 0&&!y.objectMode&&(q=new TypeError("Invalid non-string/buffer chunk")),q&&(v.emit("error",q),c.nextTick(t,q),p=!1),p}R.prototype.write=function(v,y,l){var t=this._writableState,p=!1,q=!t.objectMode&&b(v);return q&&!x.isBuffer(v)&&(v=M(v)),typeof y=="function"&&(l=y,y=null),q?y="buffer":y||(y=t.defaultEncoding),typeof l!="function"&&(l=E),t.ended?T(this,l):(q||k(this,t,v,l))&&(t.pendingcb++,p=U(this,t,q,v,y,l)),p},R.prototype.cork=function(){var v=this._writableState;v.corked++},R.prototype.uncork=function(){var v=this._writableState;v.corked&&(v.corked--,!v.writing&&!v.corked&&!v.bufferProcessing&&v.bufferedRequest&&ke(this,v))},R.prototype.setDefaultEncoding=function(y){if(typeof y=="string"&&(y=y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((y+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+y);return this._writableState.defaultEncoding=y,this};function O(v,y,l){return!v.objectMode&&v.decodeStrings!==!1&&typeof y=="string"&&(y=x.from(y,l)),y}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function U(v,y,l,t,p,q){if(!l){var I=O(y,t,p);t!==I&&(l=!0,p="buffer",t=I)}var $=y.objectMode?1:t.length;y.length+=$;var G=y.length<y.highWaterMark;if(G||(y.needDrain=!0),y.writing||y.corked){var V=y.lastBufferedRequest;y.lastBufferedRequest={chunk:t,encoding:p,isBuf:l,callback:q,next:null},V?V.next=y.lastBufferedRequest:y.bufferedRequest=y.lastBufferedRequest,y.bufferedRequestCount+=1}else L(v,y,!1,$,t,p,q);return G}function L(v,y,l,t,p,q,I){y.writelen=t,y.writecb=I,y.writing=!0,y.sync=!0,l?v._writev(p,y.onwrite):v._write(p,q,y.onwrite),y.sync=!1}function Q(v,y,l,t,p){--y.pendingcb,l?(c.nextTick(p,t),c.nextTick(a,v,y),v._writableState.errorEmitted=!0,v.emit("error",t)):(p(t),v._writableState.errorEmitted=!0,v.emit("error",t),a(v,y))}function ie(v){v.writing=!1,v.writecb=null,v.length-=v.writelen,v.writelen=0}function we(v,y){var l=v._writableState,t=l.sync,p=l.writecb;if(ie(l),y)Q(v,l,t,y,p);else{var q=w(l);!q&&!l.corked&&!l.bufferProcessing&&l.bufferedRequest&&ke(v,l),t?h(ye,v,l,q,p):ye(v,l,q,p)}}function ye(v,y,l,t){l||se(v,y),y.pendingcb--,t(),a(v,y)}function se(v,y){y.length===0&&y.needDrain&&(y.needDrain=!1,v.emit("drain"))}function ke(v,y){y.bufferProcessing=!0;var l=y.bufferedRequest;if(v._writev&&l&&l.next){var t=y.bufferedRequestCount,p=new Array(t),q=y.corkedRequestsFree;q.entry=l;for(var I=0,$=!0;l;)p[I]=l,l.isBuf||($=!1),l=l.next,I+=1;p.allBuffers=$,L(v,y,!0,y.length,p,"",q.finish),y.pendingcb++,y.lastBufferedRequest=null,q.next?(y.corkedRequestsFree=q.next,q.next=null):y.corkedRequestsFree=new n(y),y.bufferedRequestCount=0}else{for(;l;){var G=l.chunk,V=l.encoding,N=l.callback,W=y.objectMode?1:G.length;if(L(v,y,!1,W,G,V,N),l=l.next,y.bufferedRequestCount--,y.writing)break}l===null&&(y.lastBufferedRequest=null)}y.bufferedRequest=l,y.bufferProcessing=!1}R.prototype._write=function(v,y,l){l(new Error("_write() is not implemented"))},R.prototype._writev=null,R.prototype.end=function(v,y,l){var t=this._writableState;typeof v=="function"?(l=v,v=null,y=null):typeof y=="function"&&(l=y,y=null),v!=null&&this.write(v,y),t.corked&&(t.corked=1,this.uncork()),t.ending||o(this,t,l)};function w(v){return v.ending&&v.length===0&&v.bufferedRequest===null&&!v.finished&&!v.writing}function e(v,y){v._final(function(l){y.pendingcb--,l&&v.emit("error",l),y.prefinished=!0,v.emit("prefinish"),a(v,y)})}function r(v,y){!y.prefinished&&!y.finalCalled&&(typeof v._final=="function"?(y.pendingcb++,y.finalCalled=!0,c.nextTick(e,v,y)):(y.prefinished=!0,v.emit("prefinish")))}function a(v,y){var l=w(y);return l&&(r(v,y),y.pendingcb===0&&(y.finished=!0,v.emit("finish"))),l}function o(v,y,l){y.ending=!0,a(v,y),l&&(y.finished?c.nextTick(l):v.once("finish",l)),y.ended=!0,v.writable=!1}function d(v,y,l){var t=v.entry;for(v.entry=null;t;){var p=t.callback;y.pendingcb--,p(l),t=t.next}y.corkedRequestsFree.next=v}return Object.defineProperty(R.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(v){this._writableState&&(this._writableState.destroyed=v)}}),R.prototype.destroy=S.destroy,R.prototype._undestroy=S.undestroy,R.prototype._destroy=function(v,y){this.end(),y(v)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var c=requireProcessNextickArgs(),n=Object.keys||function(S){var E=[];for(var A in S)E.push(A);return E};_stream_duplex=_;var h=Object.create(requireUtil());h.inherits=requireInherits_browser();var u=require_stream_readable(),m=require_stream_writable();h.inherits(_,u);for(var s=n(m.prototype),g=0;g<s.length;g++){var x=s[g];_.prototype[x]||(_.prototype[x]=m.prototype[x])}function _(S){if(!(this instanceof _))return new _(S);u.call(this,S),m.call(this,S),S&&S.readable===!1&&(this.readable=!1),S&&S.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,S&&S.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",M)}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function M(){this.allowHalfOpen||this._writableState.ended||c.nextTick(b,this)}function b(S){S.end()}return Object.defineProperty(_.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}}),_.prototype._destroy=function(S,E){this.push(null),this.end(),c.nextTick(E,S)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var c=requireProcessNextickArgs();_stream_readable=O;var n=requireIsarray(),h;O.ReadableState=k,requireEvents().EventEmitter;var u=function(N,W){return N.listeners(W).length},m=requireStreamBrowser(),s=requireSafeBuffer().Buffer,g=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function x(N){return s.from(N)}function _(N){return s.isBuffer(N)||N instanceof g}var M=Object.create(requireUtil());M.inherits=requireInherits_browser();var b=requireUtil$1(),S=void 0;b&&b.debuglog?S=b.debuglog("stream"):S=function(){};var E=requireBufferList(),A=requireDestroy(),B;M.inherits(O,m);var R=["error","close","destroy","pause","resume"];function T(N,W,Z){if(typeof N.prependListener=="function")return N.prependListener(W,Z);!N._events||!N._events[W]?N.on(W,Z):n(N._events[W])?N._events[W].unshift(Z):N._events[W]=[Z,N._events[W]]}function k(N,W){h=h||require_stream_duplex(),N=N||{};var Z=W instanceof h;this.objectMode=!!N.objectMode,Z&&(this.objectMode=this.objectMode||!!N.readableObjectMode);var ne=N.highWaterMark,ee=N.readableHighWaterMark,z=this.objectMode?16:16*1024;ne||ne===0?this.highWaterMark=ne:Z&&(ee||ee===0)?this.highWaterMark=ee:this.highWaterMark=z,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new E,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=N.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,N.encoding&&(B||(B=requireString_decoder().StringDecoder),this.decoder=new B(N.encoding),this.encoding=N.encoding)}function O(N){if(h=h||require_stream_duplex(),!(this instanceof O))return new O(N);this._readableState=new k(N,this),this.readable=!0,N&&(typeof N.read=="function"&&(this._read=N.read),typeof N.destroy=="function"&&(this._destroy=N.destroy)),m.call(this)}Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(N){this._readableState&&(this._readableState.destroyed=N)}}),O.prototype.destroy=A.destroy,O.prototype._undestroy=A.undestroy,O.prototype._destroy=function(N,W){this.push(null),W(N)},O.prototype.push=function(N,W){var Z=this._readableState,ne;return Z.objectMode?ne=!0:typeof N=="string"&&(W=W||Z.defaultEncoding,W!==Z.encoding&&(N=s.from(N,W),W=""),ne=!0),U(this,N,W,!1,ne)},O.prototype.unshift=function(N){return U(this,N,null,!0,!1)};function U(N,W,Z,ne,ee){var z=N._readableState;if(W===null)z.reading=!1,ke(N,z);else{var ue;ee||(ue=Q(z,W)),ue?N.emit("error",ue):z.objectMode||W&&W.length>0?(typeof W!="string"&&!z.objectMode&&Object.getPrototypeOf(W)!==s.prototype&&(W=x(W)),ne?z.endEmitted?N.emit("error",new Error("stream.unshift() after end event")):L(N,z,W,!0):z.ended?N.emit("error",new Error("stream.push() after EOF")):(z.reading=!1,z.decoder&&!Z?(W=z.decoder.write(W),z.objectMode||W.length!==0?L(N,z,W,!1):r(N,z)):L(N,z,W,!1))):ne||(z.reading=!1)}return ie(z)}function L(N,W,Z,ne){W.flowing&&W.length===0&&!W.sync?(N.emit("data",Z),N.read(0)):(W.length+=W.objectMode?1:Z.length,ne?W.buffer.unshift(Z):W.buffer.push(Z),W.needReadable&&w(N)),r(N,W)}function Q(N,W){var Z;return!_(W)&&typeof W!="string"&&W!==void 0&&!N.objectMode&&(Z=new TypeError("Invalid non-string/buffer chunk")),Z}function ie(N){return!N.ended&&(N.needReadable||N.length<N.highWaterMark||N.length===0)}O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(N){return B||(B=requireString_decoder().StringDecoder),this._readableState.decoder=new B(N),this._readableState.encoding=N,this};var we=8388608;function ye(N){return N>=we?N=we:(N--,N|=N>>>1,N|=N>>>2,N|=N>>>4,N|=N>>>8,N|=N>>>16,N++),N}function se(N,W){return N<=0||W.length===0&&W.ended?0:W.objectMode?1:N!==N?W.flowing&&W.length?W.buffer.head.data.length:W.length:(N>W.highWaterMark&&(W.highWaterMark=ye(N)),N<=W.length?N:W.ended?W.length:(W.needReadable=!0,0))}O.prototype.read=function(N){S("read",N),N=parseInt(N,10);var W=this._readableState,Z=N;if(N!==0&&(W.emittedReadable=!1),N===0&&W.needReadable&&(W.length>=W.highWaterMark||W.ended))return S("read: emitReadable",W.length,W.ended),W.length===0&&W.ended?$(this):w(this),null;if(N=se(N,W),N===0&&W.ended)return W.length===0&&$(this),null;var ne=W.needReadable;S("need readable",ne),(W.length===0||W.length-N<W.highWaterMark)&&(ne=!0,S("length less than watermark",ne)),W.ended||W.reading?(ne=!1,S("reading or ended",ne)):ne&&(S("do read"),W.reading=!0,W.sync=!0,W.length===0&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||(N=se(Z,W)));var ee;return N>0?ee=t(N,W):ee=null,ee===null?(W.needReadable=!0,N=0):W.length-=N,W.length===0&&(W.ended||(W.needReadable=!0),Z!==N&&W.ended&&$(this)),ee!==null&&this.emit("data",ee),ee};function ke(N,W){if(!W.ended){if(W.decoder){var Z=W.decoder.end();Z&&Z.length&&(W.buffer.push(Z),W.length+=W.objectMode?1:Z.length)}W.ended=!0,w(N)}}function w(N){var W=N._readableState;W.needReadable=!1,W.emittedReadable||(S("emitReadable",W.flowing),W.emittedReadable=!0,W.sync?c.nextTick(e,N):e(N))}function e(N){S("emit readable"),N.emit("readable"),l(N)}function r(N,W){W.readingMore||(W.readingMore=!0,c.nextTick(a,N,W))}function a(N,W){for(var Z=W.length;!W.reading&&!W.flowing&&!W.ended&&W.length<W.highWaterMark&&(S("maybeReadMore read 0"),N.read(0),Z!==W.length);)Z=W.length;W.readingMore=!1}O.prototype._read=function(N){this.emit("error",new Error("_read() is not implemented"))},O.prototype.pipe=function(N,W){var Z=this,ne=this._readableState;switch(ne.pipesCount){case 0:ne.pipes=N;break;case 1:ne.pipes=[ne.pipes,N];break;default:ne.pipes.push(N);break}ne.pipesCount+=1,S("pipe count=%d opts=%j",ne.pipesCount,W);var ee=(!W||W.end!==!1)&&N!==process$1.stdout&&N!==process$1.stderr,z=ee?Ze:ht;ne.endEmitted?c.nextTick(z):Z.once("end",z),N.on("unpipe",ue);function ue(Ie,Le){S("onunpipe"),Ie===Z&&Le&&Le.hasUnpiped===!1&&(Le.hasUnpiped=!0,nt())}function Ze(){S("onend"),N.end()}var Ae=o(Z);N.on("drain",Ae);var qe=!1;function nt(){S("cleanup"),N.removeListener("close",Ce),N.removeListener("finish",je),N.removeListener("drain",Ae),N.removeListener("error",ut),N.removeListener("unpipe",ue),Z.removeListener("end",Ze),Z.removeListener("end",ht),Z.removeListener("data",ve),qe=!0,ne.awaitDrain&&(!N._writableState||N._writableState.needDrain)&&Ae()}var Ne=!1;Z.on("data",ve);function ve(Ie){S("ondata"),Ne=!1;var Le=N.write(Ie);Le===!1&&!Ne&&((ne.pipesCount===1&&ne.pipes===N||ne.pipesCount>1&&V(ne.pipes,N)!==-1)&&!qe&&(S("false write response, pause",ne.awaitDrain),ne.awaitDrain++,Ne=!0),Z.pause())}function ut(Ie){S("onerror",Ie),ht(),N.removeListener("error",ut),u(N,"error")===0&&N.emit("error",Ie)}T(N,"error",ut);function Ce(){N.removeListener("finish",je),ht()}N.once("close",Ce);function je(){S("onfinish"),N.removeListener("close",Ce),ht()}N.once("finish",je);function ht(){S("unpipe"),Z.unpipe(N)}return N.emit("pipe",Z),ne.flowing||(S("pipe resume"),Z.resume()),N};function o(N){return function(){var W=N._readableState;S("pipeOnDrain",W.awaitDrain),W.awaitDrain&&W.awaitDrain--,W.awaitDrain===0&&u(N,"data")&&(W.flowing=!0,l(N))}}O.prototype.unpipe=function(N){var W=this._readableState,Z={hasUnpiped:!1};if(W.pipesCount===0)return this;if(W.pipesCount===1)return N&&N!==W.pipes?this:(N||(N=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,N&&N.emit("unpipe",this,Z),this);if(!N){var ne=W.pipes,ee=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var z=0;z<ee;z++)ne[z].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=V(W.pipes,N);return ue===-1?this:(W.pipes.splice(ue,1),W.pipesCount-=1,W.pipesCount===1&&(W.pipes=W.pipes[0]),N.emit("unpipe",this,Z),this)},O.prototype.on=function(N,W){var Z=m.prototype.on.call(this,N,W);if(N==="data")this._readableState.flowing!==!1&&this.resume();else if(N==="readable"){var ne=this._readableState;!ne.endEmitted&&!ne.readableListening&&(ne.readableListening=ne.needReadable=!0,ne.emittedReadable=!1,ne.reading?ne.length&&w(this):c.nextTick(d,this))}return Z},O.prototype.addListener=O.prototype.on;function d(N){S("readable nexttick read 0"),N.read(0)}O.prototype.resume=function(){var N=this._readableState;return N.flowing||(S("resume"),N.flowing=!0,v(this,N)),this};function v(N,W){W.resumeScheduled||(W.resumeScheduled=!0,c.nextTick(y,N,W))}function y(N,W){W.reading||(S("resume read 0"),N.read(0)),W.resumeScheduled=!1,W.awaitDrain=0,N.emit("resume"),l(N),W.flowing&&!W.reading&&N.read(0)}O.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function l(N){var W=N._readableState;for(S("flow",W.flowing);W.flowing&&N.read()!==null;);}O.prototype.wrap=function(N){var W=this,Z=this._readableState,ne=!1;N.on("end",function(){if(S("wrapped end"),Z.decoder&&!Z.ended){var ue=Z.decoder.end();ue&&ue.length&&W.push(ue)}W.push(null)}),N.on("data",function(ue){if(S("wrapped data"),Z.decoder&&(ue=Z.decoder.write(ue)),!(Z.objectMode&&ue==null)&&!(!Z.objectMode&&(!ue||!ue.length))){var Ze=W.push(ue);Ze||(ne=!0,N.pause())}});for(var ee in N)this[ee]===void 0&&typeof N[ee]=="function"&&(this[ee]=function(ue){return function(){return N[ue].apply(N,arguments)}}(ee));for(var z=0;z<R.length;z++)N.on(R[z],this.emit.bind(this,R[z]));return this._read=function(ue){S("wrapped _read",ue),ne&&(ne=!1,N.resume())},this},Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),O._fromList=t;function t(N,W){if(W.length===0)return null;var Z;return W.objectMode?Z=W.buffer.shift():!N||N>=W.length?(W.decoder?Z=W.buffer.join(""):W.buffer.length===1?Z=W.buffer.head.data:Z=W.buffer.concat(W.length),W.buffer.clear()):Z=p(N,W.buffer,W.decoder),Z}function p(N,W,Z){var ne;return N<W.head.data.length?(ne=W.head.data.slice(0,N),W.head.data=W.head.data.slice(N)):N===W.head.data.length?ne=W.shift():ne=Z?q(N,W):I(N,W),ne}function q(N,W){var Z=W.head,ne=1,ee=Z.data;for(N-=ee.length;Z=Z.next;){var z=Z.data,ue=N>z.length?z.length:N;if(ue===z.length?ee+=z:ee+=z.slice(0,N),N-=ue,N===0){ue===z.length?(++ne,Z.next?W.head=Z.next:W.head=W.tail=null):(W.head=Z,Z.data=z.slice(ue));break}++ne}return W.length-=ne,ee}function I(N,W){var Z=s.allocUnsafe(N),ne=W.head,ee=1;for(ne.data.copy(Z),N-=ne.data.length;ne=ne.next;){var z=ne.data,ue=N>z.length?z.length:N;if(z.copy(Z,Z.length-N,0,ue),N-=ue,N===0){ue===z.length?(++ee,ne.next?W.head=ne.next:W.head=W.tail=null):(W.head=ne,ne.data=z.slice(ue));break}++ee}return W.length-=ee,Z}function $(N){var W=N._readableState;if(W.length>0)throw new Error('"endReadable()" called on non-empty stream');W.endEmitted||(W.ended=!0,c.nextTick(G,W,N))}function G(N,W){!N.endEmitted&&N.length===0&&(N.endEmitted=!0,W.readable=!1,W.emit("end"))}function V(N,W){for(var Z=0,ne=N.length;Z<ne;Z++)if(N[Z]===W)return Z;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=u;var c=require_stream_duplex(),n=Object.create(requireUtil());n.inherits=requireInherits_browser(),n.inherits(u,c);function h(g,x){var _=this._transformState;_.transforming=!1;var M=_.writecb;if(!M)return this.emit("error",new Error("write callback called multiple times"));_.writechunk=null,_.writecb=null,x!=null&&this.push(x),M(g);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function u(g){if(!(this instanceof u))return new u(g);c.call(this,g),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",m)}function m(){var g=this;typeof this._flush=="function"?this._flush(function(x,_){s(g,x,_)}):s(this,null,null)}u.prototype.push=function(g,x){return this._transformState.needTransform=!1,c.prototype.push.call(this,g,x)},u.prototype._transform=function(g,x,_){throw new Error("_transform() is not implemented")},u.prototype._write=function(g,x,_){var M=this._transformState;if(M.writecb=_,M.writechunk=g,M.writeencoding=x,!M.transforming){var b=this._readableState;(M.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},u.prototype._read=function(g){var x=this._transformState;x.writechunk!==null&&x.writecb&&!x.transforming?(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform)):x.needTransform=!0},u.prototype._destroy=function(g,x){var _=this;c.prototype._destroy.call(this,g,function(M){x(M),_.emit("close")})};function s(g,x,_){if(x)return g.emit("error",x);if(_!=null&&g.push(_),g._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(g._transformState.transforming)throw new Error("Calling transform done when still transforming");return g.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=h;var c=require_stream_transform(),n=Object.create(requireUtil());n.inherits=requireInherits_browser(),n.inherits(h,c);function h(u){if(!(this instanceof h))return new h(u);c.call(this,u)}return h.prototype._transform=function(u,m,s){s(null,u)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(c,n){n=c.exports=require_stream_readable(),n.Stream=n,n.Readable=n,n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=require_stream_transform(),n.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(c){(function(n,h){function u(r,a){if(!r)throw new Error(a||"Assertion failed")}function m(r,a){r.super_=a;var o=function(){};o.prototype=a.prototype,r.prototype=new o,r.prototype.constructor=r}function s(r,a,o){if(s.isBN(r))return r;this.negative=0,this.words=null,this.length=0,this.red=null,r!==null&&((a==="le"||a==="be")&&(o=a,a=10),this._init(r||0,a||10,o||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,o){return a.cmp(o)>0?a:o},s.min=function(a,o){return a.cmp(o)<0?a:o},s.prototype._init=function(a,o,d){if(typeof a=="number")return this._initNumber(a,o,d);if(typeof a=="object")return this._initArray(a,o,d);o==="hex"&&(o=16),u(o===(o|0)&&o>=2&&o<=36),a=a.toString().replace(/\s+/g,"");var v=0;a[0]==="-"&&(v++,this.negative=1),v<a.length&&(o===16?this._parseHex(a,v,d):(this._parseBase(a,o,v),d==="le"&&this._initArray(this.toArray(),o,d)))},s.prototype._initNumber=function(a,o,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(u(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),o,d)},s.prototype._initArray=function(a,o,d){if(u(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y,l,t=0;if(d==="be")for(v=a.length-1,y=0;v>=0;v-=3)l=a[v]|a[v-1]<<8|a[v-2]<<16,this.words[y]|=l<<t&67108863,this.words[y+1]=l>>>26-t&67108863,t+=24,t>=26&&(t-=26,y++);else if(d==="le")for(v=0,y=0;v<a.length;v+=3)l=a[v]|a[v+1]<<8|a[v+2]<<16,this.words[y]|=l<<t&67108863,this.words[y+1]=l>>>26-t&67108863,t+=24,t>=26&&(t-=26,y++);return this._strip()};function x(r,a){var o=r.charCodeAt(a);if(o>=48&&o<=57)return o-48;if(o>=65&&o<=70)return o-55;if(o>=97&&o<=102)return o-87;u(!1,"Invalid character in "+r)}function _(r,a,o){var d=x(r,o);return o-1>=a&&(d|=x(r,o-1)<<4),d}s.prototype._parseHex=function(a,o,d){this.length=Math.ceil((a.length-o)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y=0,l=0,t;if(d==="be")for(v=a.length-1;v>=o;v-=2)t=_(a,o,v)<<y,this.words[l]|=t&67108863,y>=18?(y-=18,l+=1,this.words[l]|=t>>>26):y+=8;else{var p=a.length-o;for(v=p%2===0?o+1:o;v<a.length;v+=2)t=_(a,o,v)<<y,this.words[l]|=t&67108863,y>=18?(y-=18,l+=1,this.words[l]|=t>>>26):y+=8}this._strip()};function M(r,a,o,d){for(var v=0,y=0,l=Math.min(r.length,o),t=a;t<l;t++){var p=r.charCodeAt(t)-48;v*=d,p>=49?y=p-49+10:p>=17?y=p-17+10:y=p,u(p>=0&&y<d,"Invalid character"),v+=y}return v}s.prototype._parseBase=function(a,o,d){this.words=[0],this.length=1;for(var v=0,y=1;y<=67108863;y*=o)v++;v--,y=y/o|0;for(var l=a.length-d,t=l%v,p=Math.min(l,l-t)+d,q=0,I=d;I<p;I+=v)q=M(a,I,I+v,o),this.imuln(y),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(t!==0){var $=1;for(q=M(a,I,a.length,o),I=0;I<t;I++)$*=o;this.imuln($),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var o=0;o<this.length;o++)a.words[o]=this.words[o];a.length=this.length,a.negative=this.negative,a.red=this.red};function b(r,a){r.words=a.words,r.length=a.length,r.negative=a.negative,r.red=a.red}if(s.prototype._move=function(a){b(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{s.prototype.inspect=S}else s.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,o){a=a||10,o=o|0||1;var d;if(a===16||a==="hex"){d="";for(var v=0,y=0,l=0;l<this.length;l++){var t=this.words[l],p=((t<<v|y)&16777215).toString(16);y=t>>>24-v&16777215,v+=2,v>=26&&(v-=26,l--),y!==0||l!==this.length-1?d=E[6-p.length]+p+d:d=p+d}for(y!==0&&(d=y.toString(16)+d);d.length%o!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var q=A[a],I=B[a];d="";var $=this.clone();for($.negative=0;!$.isZero();){var G=$.modrn(I).toString(a);$=$.idivn(I),$.isZero()?d=G+d:d=E[q-G.length]+G+d}for(this.isZero()&&(d="0"+d);d.length%o!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},g&&(s.prototype.toBuffer=function(a,o){return this.toArrayLike(g,a,o)}),s.prototype.toArray=function(a,o){return this.toArrayLike(Array,a,o)};var R=function(a,o){return a.allocUnsafe?a.allocUnsafe(o):new a(o)};s.prototype.toArrayLike=function(a,o,d){this._strip();var v=this.byteLength(),y=d||Math.max(1,v);u(v<=y,"byte array longer than desired length"),u(y>0,"Requested array length <= 0");var l=R(a,y),t=o==="le"?"LE":"BE";return this["_toArrayLike"+t](l,v),l},s.prototype._toArrayLikeLE=function(a,o){for(var d=0,v=0,y=0,l=0;y<this.length;y++){var t=this.words[y]<<l|v;a[d++]=t&255,d<a.length&&(a[d++]=t>>8&255),d<a.length&&(a[d++]=t>>16&255),l===6?(d<a.length&&(a[d++]=t>>24&255),v=0,l=0):(v=t>>>24,l+=2)}if(d<a.length)for(a[d++]=v;d<a.length;)a[d++]=0},s.prototype._toArrayLikeBE=function(a,o){for(var d=a.length-1,v=0,y=0,l=0;y<this.length;y++){var t=this.words[y]<<l|v;a[d--]=t&255,d>=0&&(a[d--]=t>>8&255),d>=0&&(a[d--]=t>>16&255),l===6?(d>=0&&(a[d--]=t>>24&255),v=0,l=0):(v=t>>>24,l+=2)}if(d>=0)for(a[d--]=v;d>=0;)a[d--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var o=a,d=0;return o>=4096&&(d+=13,o>>>=13),o>=64&&(d+=7,o>>>=7),o>=8&&(d+=4,o>>>=4),o>=2&&(d+=2,o>>>=2),d+o},s.prototype._zeroBits=function(a){if(a===0)return 26;var o=a,d=0;return o&8191||(d+=13,o>>>=13),o&127||(d+=7,o>>>=7),o&15||(d+=4,o>>>=4),o&3||(d+=2,o>>>=2),o&1||d++,d},s.prototype.bitLength=function(){var a=this.words[this.length-1],o=this._countBits(a);return(this.length-1)*26+o};function T(r){for(var a=new Array(r.bitLength()),o=0;o<a.length;o++){var d=o/26|0,v=o%26;a[o]=r.words[d]>>>v&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,o=0;o<this.length;o++){var d=this._zeroBits(this.words[o]);if(a+=d,d!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var o=0;o<a.length;o++)this.words[o]=this.words[o]|a.words[o];return this._strip()},s.prototype.ior=function(a){return u((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var o;this.length>a.length?o=a:o=this;for(var d=0;d<o.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=o.length,this._strip()},s.prototype.iand=function(a){return u((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var o,d;this.length>a.length?(o=this,d=a):(o=a,d=this);for(var v=0;v<d.length;v++)this.words[v]=o.words[v]^d.words[v];if(this!==o)for(;v<o.length;v++)this.words[v]=o.words[v];return this.length=o.length,this._strip()},s.prototype.ixor=function(a){return u((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){u(typeof a=="number"&&a>=0);var o=Math.ceil(a/26)|0,d=a%26;this._expand(o),d>0&&o--;for(var v=0;v<o;v++)this.words[v]=~this.words[v]&67108863;return d>0&&(this.words[v]=~this.words[v]&67108863>>26-d),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,o){u(typeof a=="number"&&a>=0);var d=a/26|0,v=a%26;return this._expand(d+1),o?this.words[d]=this.words[d]|1<<v:this.words[d]=this.words[d]&~(1<<v),this._strip()},s.prototype.iadd=function(a){var o;if(this.negative!==0&&a.negative===0)return this.negative=0,o=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,o=this.isub(a),a.negative=1,o._normSign();var d,v;this.length>a.length?(d=this,v=a):(d=a,v=this);for(var y=0,l=0;l<v.length;l++)o=(d.words[l]|0)+(v.words[l]|0)+y,this.words[l]=o&67108863,y=o>>>26;for(;y!==0&&l<d.length;l++)o=(d.words[l]|0)+y,this.words[l]=o&67108863,y=o>>>26;if(this.length=d.length,y!==0)this.words[this.length]=y,this.length++;else if(d!==this)for(;l<d.length;l++)this.words[l]=d.words[l];return this},s.prototype.add=function(a){var o;return a.negative!==0&&this.negative===0?(a.negative=0,o=this.sub(a),a.negative^=1,o):a.negative===0&&this.negative!==0?(this.negative=0,o=a.sub(this),this.negative=1,o):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var o=this.iadd(a);return a.negative=1,o._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,y;d>0?(v=this,y=a):(v=a,y=this);for(var l=0,t=0;t<y.length;t++)o=(v.words[t]|0)-(y.words[t]|0)+l,l=o>>26,this.words[t]=o&67108863;for(;l!==0&&t<v.length;t++)o=(v.words[t]|0)+l,l=o>>26,this.words[t]=o&67108863;if(l===0&&t<v.length&&v!==this)for(;t<v.length;t++)this.words[t]=v.words[t];return this.length=Math.max(this.length,t),v!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function k(r,a,o){o.negative=a.negative^r.negative;var d=r.length+a.length|0;o.length=d,d=d-1|0;var v=r.words[0]|0,y=a.words[0]|0,l=v*y,t=l&67108863,p=l/67108864|0;o.words[0]=t;for(var q=1;q<d;q++){for(var I=p>>>26,$=p&67108863,G=Math.min(q,a.length-1),V=Math.max(0,q-r.length+1);V<=G;V++){var N=q-V|0;v=r.words[N]|0,y=a.words[V]|0,l=v*y+$,I+=l/67108864|0,$=l&67108863}o.words[q]=$|0,p=I|0}return p!==0?o.words[q]=p|0:o.length--,o._strip()}var O=function(a,o,d){var v=a.words,y=o.words,l=d.words,t=0,p,q,I,$=v[0]|0,G=$&8191,V=$>>>13,N=v[1]|0,W=N&8191,Z=N>>>13,ne=v[2]|0,ee=ne&8191,z=ne>>>13,ue=v[3]|0,Ze=ue&8191,Ae=ue>>>13,qe=v[4]|0,nt=qe&8191,Ne=qe>>>13,ve=v[5]|0,ut=ve&8191,Ce=ve>>>13,je=v[6]|0,ht=je&8191,Ie=je>>>13,Le=v[7]|0,lt=Le&8191,$e=Le>>>13,ze=v[8]|0,bt=ze&8191,K=ze>>>13,P=v[9]|0,D=P&8191,Y=P>>>13,oe=y[0]|0,Re=oe&8191,ce=oe>>>13,Te=y[1]|0,ft=Te&8191,Pe=Te>>>13,Ue=y[2]|0,ot=Ue&8191,He=Ue>>>13,Ve=y[3]|0,pt=Ve&8191,Fe=Ve>>>13,Ge=y[4]|0,mt=Ge&8191,Ke=Ge>>>13,We=y[5]|0,vt=We&8191,Oe=We>>>13,Je=y[6]|0,j=Je&8191,F=Je>>>13,H=y[7]|0,C=H&8191,J=H>>>13,he=y[8]|0,xe=he&8191,de=he>>>13,ge=y[9]|0,tt=ge&8191,Xe=ge>>>13;d.negative=a.negative^o.negative,d.length=19,p=Math.imul(G,Re),q=Math.imul(G,ce),q=q+Math.imul(V,Re)|0,I=Math.imul(V,ce);var ct=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(ct>>>26)|0,ct&=67108863,p=Math.imul(W,Re),q=Math.imul(W,ce),q=q+Math.imul(Z,Re)|0,I=Math.imul(Z,ce),p=p+Math.imul(G,ft)|0,q=q+Math.imul(G,Pe)|0,q=q+Math.imul(V,ft)|0,I=I+Math.imul(V,Pe)|0;var rt=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(rt>>>26)|0,rt&=67108863,p=Math.imul(ee,Re),q=Math.imul(ee,ce),q=q+Math.imul(z,Re)|0,I=Math.imul(z,ce),p=p+Math.imul(W,ft)|0,q=q+Math.imul(W,Pe)|0,q=q+Math.imul(Z,ft)|0,I=I+Math.imul(Z,Pe)|0,p=p+Math.imul(G,ot)|0,q=q+Math.imul(G,He)|0,q=q+Math.imul(V,ot)|0,I=I+Math.imul(V,He)|0;var st=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(st>>>26)|0,st&=67108863,p=Math.imul(Ze,Re),q=Math.imul(Ze,ce),q=q+Math.imul(Ae,Re)|0,I=Math.imul(Ae,ce),p=p+Math.imul(ee,ft)|0,q=q+Math.imul(ee,Pe)|0,q=q+Math.imul(z,ft)|0,I=I+Math.imul(z,Pe)|0,p=p+Math.imul(W,ot)|0,q=q+Math.imul(W,He)|0,q=q+Math.imul(Z,ot)|0,I=I+Math.imul(Z,He)|0,p=p+Math.imul(G,pt)|0,q=q+Math.imul(G,Fe)|0,q=q+Math.imul(V,pt)|0,I=I+Math.imul(V,Fe)|0;var at=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(at>>>26)|0,at&=67108863,p=Math.imul(nt,Re),q=Math.imul(nt,ce),q=q+Math.imul(Ne,Re)|0,I=Math.imul(Ne,ce),p=p+Math.imul(Ze,ft)|0,q=q+Math.imul(Ze,Pe)|0,q=q+Math.imul(Ae,ft)|0,I=I+Math.imul(Ae,Pe)|0,p=p+Math.imul(ee,ot)|0,q=q+Math.imul(ee,He)|0,q=q+Math.imul(z,ot)|0,I=I+Math.imul(z,He)|0,p=p+Math.imul(W,pt)|0,q=q+Math.imul(W,Fe)|0,q=q+Math.imul(Z,pt)|0,I=I+Math.imul(Z,Fe)|0,p=p+Math.imul(G,mt)|0,q=q+Math.imul(G,Ke)|0,q=q+Math.imul(V,mt)|0,I=I+Math.imul(V,Ke)|0;var X=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(X>>>26)|0,X&=67108863,p=Math.imul(ut,Re),q=Math.imul(ut,ce),q=q+Math.imul(Ce,Re)|0,I=Math.imul(Ce,ce),p=p+Math.imul(nt,ft)|0,q=q+Math.imul(nt,Pe)|0,q=q+Math.imul(Ne,ft)|0,I=I+Math.imul(Ne,Pe)|0,p=p+Math.imul(Ze,ot)|0,q=q+Math.imul(Ze,He)|0,q=q+Math.imul(Ae,ot)|0,I=I+Math.imul(Ae,He)|0,p=p+Math.imul(ee,pt)|0,q=q+Math.imul(ee,Fe)|0,q=q+Math.imul(z,pt)|0,I=I+Math.imul(z,Fe)|0,p=p+Math.imul(W,mt)|0,q=q+Math.imul(W,Ke)|0,q=q+Math.imul(Z,mt)|0,I=I+Math.imul(Z,Ke)|0,p=p+Math.imul(G,vt)|0,q=q+Math.imul(G,Oe)|0,q=q+Math.imul(V,vt)|0,I=I+Math.imul(V,Oe)|0;var re=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(re>>>26)|0,re&=67108863,p=Math.imul(ht,Re),q=Math.imul(ht,ce),q=q+Math.imul(Ie,Re)|0,I=Math.imul(Ie,ce),p=p+Math.imul(ut,ft)|0,q=q+Math.imul(ut,Pe)|0,q=q+Math.imul(Ce,ft)|0,I=I+Math.imul(Ce,Pe)|0,p=p+Math.imul(nt,ot)|0,q=q+Math.imul(nt,He)|0,q=q+Math.imul(Ne,ot)|0,I=I+Math.imul(Ne,He)|0,p=p+Math.imul(Ze,pt)|0,q=q+Math.imul(Ze,Fe)|0,q=q+Math.imul(Ae,pt)|0,I=I+Math.imul(Ae,Fe)|0,p=p+Math.imul(ee,mt)|0,q=q+Math.imul(ee,Ke)|0,q=q+Math.imul(z,mt)|0,I=I+Math.imul(z,Ke)|0,p=p+Math.imul(W,vt)|0,q=q+Math.imul(W,Oe)|0,q=q+Math.imul(Z,vt)|0,I=I+Math.imul(Z,Oe)|0,p=p+Math.imul(G,j)|0,q=q+Math.imul(G,F)|0,q=q+Math.imul(V,j)|0,I=I+Math.imul(V,F)|0;var te=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(te>>>26)|0,te&=67108863,p=Math.imul(lt,Re),q=Math.imul(lt,ce),q=q+Math.imul($e,Re)|0,I=Math.imul($e,ce),p=p+Math.imul(ht,ft)|0,q=q+Math.imul(ht,Pe)|0,q=q+Math.imul(Ie,ft)|0,I=I+Math.imul(Ie,Pe)|0,p=p+Math.imul(ut,ot)|0,q=q+Math.imul(ut,He)|0,q=q+Math.imul(Ce,ot)|0,I=I+Math.imul(Ce,He)|0,p=p+Math.imul(nt,pt)|0,q=q+Math.imul(nt,Fe)|0,q=q+Math.imul(Ne,pt)|0,I=I+Math.imul(Ne,Fe)|0,p=p+Math.imul(Ze,mt)|0,q=q+Math.imul(Ze,Ke)|0,q=q+Math.imul(Ae,mt)|0,I=I+Math.imul(Ae,Ke)|0,p=p+Math.imul(ee,vt)|0,q=q+Math.imul(ee,Oe)|0,q=q+Math.imul(z,vt)|0,I=I+Math.imul(z,Oe)|0,p=p+Math.imul(W,j)|0,q=q+Math.imul(W,F)|0,q=q+Math.imul(Z,j)|0,I=I+Math.imul(Z,F)|0,p=p+Math.imul(G,C)|0,q=q+Math.imul(G,J)|0,q=q+Math.imul(V,C)|0,I=I+Math.imul(V,J)|0;var fe=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(fe>>>26)|0,fe&=67108863,p=Math.imul(bt,Re),q=Math.imul(bt,ce),q=q+Math.imul(K,Re)|0,I=Math.imul(K,ce),p=p+Math.imul(lt,ft)|0,q=q+Math.imul(lt,Pe)|0,q=q+Math.imul($e,ft)|0,I=I+Math.imul($e,Pe)|0,p=p+Math.imul(ht,ot)|0,q=q+Math.imul(ht,He)|0,q=q+Math.imul(Ie,ot)|0,I=I+Math.imul(Ie,He)|0,p=p+Math.imul(ut,pt)|0,q=q+Math.imul(ut,Fe)|0,q=q+Math.imul(Ce,pt)|0,I=I+Math.imul(Ce,Fe)|0,p=p+Math.imul(nt,mt)|0,q=q+Math.imul(nt,Ke)|0,q=q+Math.imul(Ne,mt)|0,I=I+Math.imul(Ne,Ke)|0,p=p+Math.imul(Ze,vt)|0,q=q+Math.imul(Ze,Oe)|0,q=q+Math.imul(Ae,vt)|0,I=I+Math.imul(Ae,Oe)|0,p=p+Math.imul(ee,j)|0,q=q+Math.imul(ee,F)|0,q=q+Math.imul(z,j)|0,I=I+Math.imul(z,F)|0,p=p+Math.imul(W,C)|0,q=q+Math.imul(W,J)|0,q=q+Math.imul(Z,C)|0,I=I+Math.imul(Z,J)|0,p=p+Math.imul(G,xe)|0,q=q+Math.imul(G,de)|0,q=q+Math.imul(V,xe)|0,I=I+Math.imul(V,de)|0;var le=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(le>>>26)|0,le&=67108863,p=Math.imul(D,Re),q=Math.imul(D,ce),q=q+Math.imul(Y,Re)|0,I=Math.imul(Y,ce),p=p+Math.imul(bt,ft)|0,q=q+Math.imul(bt,Pe)|0,q=q+Math.imul(K,ft)|0,I=I+Math.imul(K,Pe)|0,p=p+Math.imul(lt,ot)|0,q=q+Math.imul(lt,He)|0,q=q+Math.imul($e,ot)|0,I=I+Math.imul($e,He)|0,p=p+Math.imul(ht,pt)|0,q=q+Math.imul(ht,Fe)|0,q=q+Math.imul(Ie,pt)|0,I=I+Math.imul(Ie,Fe)|0,p=p+Math.imul(ut,mt)|0,q=q+Math.imul(ut,Ke)|0,q=q+Math.imul(Ce,mt)|0,I=I+Math.imul(Ce,Ke)|0,p=p+Math.imul(nt,vt)|0,q=q+Math.imul(nt,Oe)|0,q=q+Math.imul(Ne,vt)|0,I=I+Math.imul(Ne,Oe)|0,p=p+Math.imul(Ze,j)|0,q=q+Math.imul(Ze,F)|0,q=q+Math.imul(Ae,j)|0,I=I+Math.imul(Ae,F)|0,p=p+Math.imul(ee,C)|0,q=q+Math.imul(ee,J)|0,q=q+Math.imul(z,C)|0,I=I+Math.imul(z,J)|0,p=p+Math.imul(W,xe)|0,q=q+Math.imul(W,de)|0,q=q+Math.imul(Z,xe)|0,I=I+Math.imul(Z,de)|0,p=p+Math.imul(G,tt)|0,q=q+Math.imul(G,Xe)|0,q=q+Math.imul(V,tt)|0,I=I+Math.imul(V,Xe)|0;var pe=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(pe>>>26)|0,pe&=67108863,p=Math.imul(D,ft),q=Math.imul(D,Pe),q=q+Math.imul(Y,ft)|0,I=Math.imul(Y,Pe),p=p+Math.imul(bt,ot)|0,q=q+Math.imul(bt,He)|0,q=q+Math.imul(K,ot)|0,I=I+Math.imul(K,He)|0,p=p+Math.imul(lt,pt)|0,q=q+Math.imul(lt,Fe)|0,q=q+Math.imul($e,pt)|0,I=I+Math.imul($e,Fe)|0,p=p+Math.imul(ht,mt)|0,q=q+Math.imul(ht,Ke)|0,q=q+Math.imul(Ie,mt)|0,I=I+Math.imul(Ie,Ke)|0,p=p+Math.imul(ut,vt)|0,q=q+Math.imul(ut,Oe)|0,q=q+Math.imul(Ce,vt)|0,I=I+Math.imul(Ce,Oe)|0,p=p+Math.imul(nt,j)|0,q=q+Math.imul(nt,F)|0,q=q+Math.imul(Ne,j)|0,I=I+Math.imul(Ne,F)|0,p=p+Math.imul(Ze,C)|0,q=q+Math.imul(Ze,J)|0,q=q+Math.imul(Ae,C)|0,I=I+Math.imul(Ae,J)|0,p=p+Math.imul(ee,xe)|0,q=q+Math.imul(ee,de)|0,q=q+Math.imul(z,xe)|0,I=I+Math.imul(z,de)|0,p=p+Math.imul(W,tt)|0,q=q+Math.imul(W,Xe)|0,q=q+Math.imul(Z,tt)|0,I=I+Math.imul(Z,Xe)|0;var Se=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(Se>>>26)|0,Se&=67108863,p=Math.imul(D,ot),q=Math.imul(D,He),q=q+Math.imul(Y,ot)|0,I=Math.imul(Y,He),p=p+Math.imul(bt,pt)|0,q=q+Math.imul(bt,Fe)|0,q=q+Math.imul(K,pt)|0,I=I+Math.imul(K,Fe)|0,p=p+Math.imul(lt,mt)|0,q=q+Math.imul(lt,Ke)|0,q=q+Math.imul($e,mt)|0,I=I+Math.imul($e,Ke)|0,p=p+Math.imul(ht,vt)|0,q=q+Math.imul(ht,Oe)|0,q=q+Math.imul(Ie,vt)|0,I=I+Math.imul(Ie,Oe)|0,p=p+Math.imul(ut,j)|0,q=q+Math.imul(ut,F)|0,q=q+Math.imul(Ce,j)|0,I=I+Math.imul(Ce,F)|0,p=p+Math.imul(nt,C)|0,q=q+Math.imul(nt,J)|0,q=q+Math.imul(Ne,C)|0,I=I+Math.imul(Ne,J)|0,p=p+Math.imul(Ze,xe)|0,q=q+Math.imul(Ze,de)|0,q=q+Math.imul(Ae,xe)|0,I=I+Math.imul(Ae,de)|0,p=p+Math.imul(ee,tt)|0,q=q+Math.imul(ee,Xe)|0,q=q+Math.imul(z,tt)|0,I=I+Math.imul(z,Xe)|0;var Ee=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,p=Math.imul(D,pt),q=Math.imul(D,Fe),q=q+Math.imul(Y,pt)|0,I=Math.imul(Y,Fe),p=p+Math.imul(bt,mt)|0,q=q+Math.imul(bt,Ke)|0,q=q+Math.imul(K,mt)|0,I=I+Math.imul(K,Ke)|0,p=p+Math.imul(lt,vt)|0,q=q+Math.imul(lt,Oe)|0,q=q+Math.imul($e,vt)|0,I=I+Math.imul($e,Oe)|0,p=p+Math.imul(ht,j)|0,q=q+Math.imul(ht,F)|0,q=q+Math.imul(Ie,j)|0,I=I+Math.imul(Ie,F)|0,p=p+Math.imul(ut,C)|0,q=q+Math.imul(ut,J)|0,q=q+Math.imul(Ce,C)|0,I=I+Math.imul(Ce,J)|0,p=p+Math.imul(nt,xe)|0,q=q+Math.imul(nt,de)|0,q=q+Math.imul(Ne,xe)|0,I=I+Math.imul(Ne,de)|0,p=p+Math.imul(Ze,tt)|0,q=q+Math.imul(Ze,Xe)|0,q=q+Math.imul(Ae,tt)|0,I=I+Math.imul(Ae,Xe)|0;var me=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(me>>>26)|0,me&=67108863,p=Math.imul(D,mt),q=Math.imul(D,Ke),q=q+Math.imul(Y,mt)|0,I=Math.imul(Y,Ke),p=p+Math.imul(bt,vt)|0,q=q+Math.imul(bt,Oe)|0,q=q+Math.imul(K,vt)|0,I=I+Math.imul(K,Oe)|0,p=p+Math.imul(lt,j)|0,q=q+Math.imul(lt,F)|0,q=q+Math.imul($e,j)|0,I=I+Math.imul($e,F)|0,p=p+Math.imul(ht,C)|0,q=q+Math.imul(ht,J)|0,q=q+Math.imul(Ie,C)|0,I=I+Math.imul(Ie,J)|0,p=p+Math.imul(ut,xe)|0,q=q+Math.imul(ut,de)|0,q=q+Math.imul(Ce,xe)|0,I=I+Math.imul(Ce,de)|0,p=p+Math.imul(nt,tt)|0,q=q+Math.imul(nt,Xe)|0,q=q+Math.imul(Ne,tt)|0,I=I+Math.imul(Ne,Xe)|0;var _e=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(_e>>>26)|0,_e&=67108863,p=Math.imul(D,vt),q=Math.imul(D,Oe),q=q+Math.imul(Y,vt)|0,I=Math.imul(Y,Oe),p=p+Math.imul(bt,j)|0,q=q+Math.imul(bt,F)|0,q=q+Math.imul(K,j)|0,I=I+Math.imul(K,F)|0,p=p+Math.imul(lt,C)|0,q=q+Math.imul(lt,J)|0,q=q+Math.imul($e,C)|0,I=I+Math.imul($e,J)|0,p=p+Math.imul(ht,xe)|0,q=q+Math.imul(ht,de)|0,q=q+Math.imul(Ie,xe)|0,I=I+Math.imul(Ie,de)|0,p=p+Math.imul(ut,tt)|0,q=q+Math.imul(ut,Xe)|0,q=q+Math.imul(Ce,tt)|0,I=I+Math.imul(Ce,Xe)|0;var De=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(De>>>26)|0,De&=67108863,p=Math.imul(D,j),q=Math.imul(D,F),q=q+Math.imul(Y,j)|0,I=Math.imul(Y,F),p=p+Math.imul(bt,C)|0,q=q+Math.imul(bt,J)|0,q=q+Math.imul(K,C)|0,I=I+Math.imul(K,J)|0,p=p+Math.imul(lt,xe)|0,q=q+Math.imul(lt,de)|0,q=q+Math.imul($e,xe)|0,I=I+Math.imul($e,de)|0,p=p+Math.imul(ht,tt)|0,q=q+Math.imul(ht,Xe)|0,q=q+Math.imul(Ie,tt)|0,I=I+Math.imul(Ie,Xe)|0;var Me=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(Me>>>26)|0,Me&=67108863,p=Math.imul(D,C),q=Math.imul(D,J),q=q+Math.imul(Y,C)|0,I=Math.imul(Y,J),p=p+Math.imul(bt,xe)|0,q=q+Math.imul(bt,de)|0,q=q+Math.imul(K,xe)|0,I=I+Math.imul(K,de)|0,p=p+Math.imul(lt,tt)|0,q=q+Math.imul(lt,Xe)|0,q=q+Math.imul($e,tt)|0,I=I+Math.imul($e,Xe)|0;var Be=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(Be>>>26)|0,Be&=67108863,p=Math.imul(D,xe),q=Math.imul(D,de),q=q+Math.imul(Y,xe)|0,I=Math.imul(Y,de),p=p+Math.imul(bt,tt)|0,q=q+Math.imul(bt,Xe)|0,q=q+Math.imul(K,tt)|0,I=I+Math.imul(K,Xe)|0;var Qe=(t+p|0)+((q&8191)<<13)|0;t=(I+(q>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,p=Math.imul(D,tt),q=Math.imul(D,Xe),q=q+Math.imul(Y,tt)|0,I=Math.imul(Y,Xe);var Ye=(t+p|0)+((q&8191)<<13)|0;return t=(I+(q>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,l[0]=ct,l[1]=rt,l[2]=st,l[3]=at,l[4]=X,l[5]=re,l[6]=te,l[7]=fe,l[8]=le,l[9]=pe,l[10]=Se,l[11]=Ee,l[12]=me,l[13]=_e,l[14]=De,l[15]=Me,l[16]=Be,l[17]=Qe,l[18]=Ye,t!==0&&(l[19]=t,d.length++),d};Math.imul||(O=k);function U(r,a,o){o.negative=a.negative^r.negative,o.length=r.length+a.length;for(var d=0,v=0,y=0;y<o.length-1;y++){var l=v;v=0;for(var t=d&67108863,p=Math.min(y,a.length-1),q=Math.max(0,y-r.length+1);q<=p;q++){var I=y-q,$=r.words[I]|0,G=a.words[q]|0,V=$*G,N=V&67108863;l=l+(V/67108864|0)|0,N=N+t|0,t=N&67108863,l=l+(N>>>26)|0,v+=l>>>26,l&=67108863}o.words[y]=t,d=l,l=v}return d!==0?o.words[y]=d:o.length--,o._strip()}function L(r,a,o){return U(r,a,o)}s.prototype.mulTo=function(a,o){var d,v=this.length+a.length;return this.length===10&&a.length===10?d=O(this,a,o):v<63?d=k(this,a,o):v<1024?d=U(this,a,o):d=L(this,a,o),d},s.prototype.mul=function(a){var o=new s(null);return o.words=new Array(this.length+a.length),this.mulTo(a,o)},s.prototype.mulf=function(a){var o=new s(null);return o.words=new Array(this.length+a.length),L(this,a,o)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var o=a<0;o&&(a=-a),u(typeof a=="number"),u(a<67108864);for(var d=0,v=0;v<this.length;v++){var y=(this.words[v]|0)*a,l=(y&67108863)+(d&67108863);d>>=26,d+=y/67108864|0,d+=l>>>26,this.words[v]=l&67108863}return d!==0&&(this.words[v]=d,this.length++),o?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var o=T(a);if(o.length===0)return new s(1);for(var d=this,v=0;v<o.length&&o[v]===0;v++,d=d.sqr());if(++v<o.length)for(var y=d.sqr();v<o.length;v++,y=y.sqr())o[v]!==0&&(d=d.mul(y));return d},s.prototype.iushln=function(a){u(typeof a=="number"&&a>=0);var o=a%26,d=(a-o)/26,v=67108863>>>26-o<<26-o,y;if(o!==0){var l=0;for(y=0;y<this.length;y++){var t=this.words[y]&v,p=(this.words[y]|0)-t<<o;this.words[y]=p|l,l=t>>>26-o}l&&(this.words[y]=l,this.length++)}if(d!==0){for(y=this.length-1;y>=0;y--)this.words[y+d]=this.words[y];for(y=0;y<d;y++)this.words[y]=0;this.length+=d}return this._strip()},s.prototype.ishln=function(a){return u(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,o,d){u(typeof a=="number"&&a>=0);var v;o?v=(o-o%26)/26:v=0;var y=a%26,l=Math.min((a-y)/26,this.length),t=67108863^67108863>>>y<<y,p=d;if(v-=l,v=Math.max(0,v),p){for(var q=0;q<l;q++)p.words[q]=this.words[q];p.length=l}if(l!==0)if(this.length>l)for(this.length-=l,q=0;q<this.length;q++)this.words[q]=this.words[q+l];else this.words[0]=0,this.length=1;var I=0;for(q=this.length-1;q>=0&&(I!==0||q>=v);q--){var $=this.words[q]|0;this.words[q]=I<<26-y|$>>>y,I=$&t}return p&&I!==0&&(p.words[p.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,o,d){return u(this.negative===0),this.iushrn(a,o,d)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){u(typeof a=="number"&&a>=0);var o=a%26,d=(a-o)/26,v=1<<o;if(this.length<=d)return!1;var y=this.words[d];return!!(y&v)},s.prototype.imaskn=function(a){u(typeof a=="number"&&a>=0);var o=a%26,d=(a-o)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(o!==0&&d++,this.length=Math.min(d,this.length),o!==0){var v=67108863^67108863>>>o<<o;this.words[this.length-1]&=v}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return u(typeof a=="number"),u(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var o=0;o<this.length&&this.words[o]>=67108864;o++)this.words[o]-=67108864,o===this.length-1?this.words[o+1]=1:this.words[o+1]++;return this.length=Math.max(this.length,o+1),this},s.prototype.isubn=function(a){if(u(typeof a=="number"),u(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var o=0;o<this.length&&this.words[o]<0;o++)this.words[o]+=67108864,this.words[o+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,o,d){var v=a.length+d,y;this._expand(v);var l,t=0;for(y=0;y<a.length;y++){l=(this.words[y+d]|0)+t;var p=(a.words[y]|0)*o;l-=p&67108863,t=(l>>26)-(p/67108864|0),this.words[y+d]=l&67108863}for(;y<this.length-d;y++)l=(this.words[y+d]|0)+t,t=l>>26,this.words[y+d]=l&67108863;if(t===0)return this._strip();for(u(t===-1),t=0,y=0;y<this.length;y++)l=-(this.words[y]|0)+t,t=l>>26,this.words[y]=l&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,o){var d=this.length-a.length,v=this.clone(),y=a,l=y.words[y.length-1]|0,t=this._countBits(l);d=26-t,d!==0&&(y=y.ushln(d),v.iushln(d),l=y.words[y.length-1]|0);var p=v.length-y.length,q;if(o!=="mod"){q=new s(null),q.length=p+1,q.words=new Array(q.length);for(var I=0;I<q.length;I++)q.words[I]=0}var $=v.clone()._ishlnsubmul(y,1,p);$.negative===0&&(v=$,q&&(q.words[p]=1));for(var G=p-1;G>=0;G--){var V=(v.words[y.length+G]|0)*67108864+(v.words[y.length+G-1]|0);for(V=Math.min(V/l|0,67108863),v._ishlnsubmul(y,V,G);v.negative!==0;)V--,v.negative=0,v._ishlnsubmul(y,1,G),v.isZero()||(v.negative^=1);q&&(q.words[G]=V)}return q&&q._strip(),v._strip(),o!=="div"&&d!==0&&v.iushrn(d),{div:q||null,mod:v}},s.prototype.divmod=function(a,o,d){if(u(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var v,y,l;return this.negative!==0&&a.negative===0?(l=this.neg().divmod(a,o),o!=="mod"&&(v=l.div.neg()),o!=="div"&&(y=l.mod.neg(),d&&y.negative!==0&&y.iadd(a)),{div:v,mod:y}):this.negative===0&&a.negative!==0?(l=this.divmod(a.neg(),o),o!=="mod"&&(v=l.div.neg()),{div:v,mod:l.mod}):this.negative&a.negative?(l=this.neg().divmod(a.neg(),o),o!=="div"&&(y=l.mod.neg(),d&&y.negative!==0&&y.isub(a)),{div:l.div,mod:y}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?o==="div"?{div:this.divn(a.words[0]),mod:null}:o==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,o)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var o=this.divmod(a);if(o.mod.isZero())return o.div;var d=o.div.negative!==0?o.mod.isub(a):o.mod,v=a.ushrn(1),y=a.andln(1),l=d.cmp(v);return l<0||y===1&&l===0?o.div:o.div.negative!==0?o.div.isubn(1):o.div.iaddn(1)},s.prototype.modrn=function(a){var o=a<0;o&&(a=-a),u(a<=67108863);for(var d=(1<<26)%a,v=0,y=this.length-1;y>=0;y--)v=(d*v+(this.words[y]|0))%a;return o?-v:v},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var o=a<0;o&&(a=-a),u(a<=67108863);for(var d=0,v=this.length-1;v>=0;v--){var y=(this.words[v]|0)+d*67108864;this.words[v]=y/a|0,d=y%a}return this._strip(),o?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){u(a.negative===0),u(!a.isZero());var o=this,d=a.clone();o.negative!==0?o=o.umod(a):o=o.clone();for(var v=new s(1),y=new s(0),l=new s(0),t=new s(1),p=0;o.isEven()&&d.isEven();)o.iushrn(1),d.iushrn(1),++p;for(var q=d.clone(),I=o.clone();!o.isZero();){for(var $=0,G=1;!(o.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(o.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(q),y.isub(I)),v.iushrn(1),y.iushrn(1);for(var V=0,N=1;!(d.words[0]&N)&&V<26;++V,N<<=1);if(V>0)for(d.iushrn(V);V-- >0;)(l.isOdd()||t.isOdd())&&(l.iadd(q),t.isub(I)),l.iushrn(1),t.iushrn(1);o.cmp(d)>=0?(o.isub(d),v.isub(l),y.isub(t)):(d.isub(o),l.isub(v),t.isub(y))}return{a:l,b:t,gcd:d.iushln(p)}},s.prototype._invmp=function(a){u(a.negative===0),u(!a.isZero());var o=this,d=a.clone();o.negative!==0?o=o.umod(a):o=o.clone();for(var v=new s(1),y=new s(0),l=d.clone();o.cmpn(1)>0&&d.cmpn(1)>0;){for(var t=0,p=1;!(o.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(o.iushrn(t);t-- >0;)v.isOdd()&&v.iadd(l),v.iushrn(1);for(var q=0,I=1;!(d.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(d.iushrn(q);q-- >0;)y.isOdd()&&y.iadd(l),y.iushrn(1);o.cmp(d)>=0?(o.isub(d),v.isub(y)):(d.isub(o),y.isub(v))}var $;return o.cmpn(1)===0?$=v:$=y,$.cmpn(0)<0&&$.iadd(a),$},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var o=this.clone(),d=a.clone();o.negative=0,d.negative=0;for(var v=0;o.isEven()&&d.isEven();v++)o.iushrn(1),d.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;d.isEven();)d.iushrn(1);var y=o.cmp(d);if(y<0){var l=o;o=d,d=l}else if(y===0||d.cmpn(1)===0)break;o.isub(d)}while(!0);return d.iushln(v)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){u(typeof a=="number");var o=a%26,d=(a-o)/26,v=1<<o;if(this.length<=d)return this._expand(d+1),this.words[d]|=v,this;for(var y=v,l=d;y!==0&&l<this.length;l++){var t=this.words[l]|0;t+=y,y=t>>>26,t&=67108863,this.words[l]=t}return y!==0&&(this.words[l]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var o=a<0;if(this.negative!==0&&!o)return-1;if(this.negative===0&&o)return 1;this._strip();var d;if(this.length>1)d=1;else{o&&(a=-a),u(a<=67108863,"Number is too big");var v=this.words[0]|0;d=v===a?0:v<a?-1:1}return this.negative!==0?-d|0:d},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var o=this.ucmp(a);return this.negative!==0?-o|0:o},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var o=0,d=this.length-1;d>=0;d--){var v=this.words[d]|0,y=a.words[d]|0;if(v!==y){v<y?o=-1:v>y&&(o=1);break}}return o},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new w(a)},s.prototype.toRed=function(a){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return u(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return u(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function ie(r,a){this.name=r,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ie.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},ie.prototype.ireduce=function(a){var o=a,d;do this.split(o,this.tmp),o=this.imulK(o),o=o.iadd(this.tmp),d=o.bitLength();while(d>this.n);var v=d<this.n?-1:o.ucmp(this.p);return v===0?(o.words[0]=0,o.length=1):v>0?o.isub(this.p):o.strip!==void 0?o.strip():o._strip(),o},ie.prototype.split=function(a,o){a.iushrn(this.n,0,o)},ie.prototype.imulK=function(a){return a.imul(this.k)};function we(){ie.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(we,ie),we.prototype.split=function(a,o){for(var d=4194303,v=Math.min(a.length,9),y=0;y<v;y++)o.words[y]=a.words[y];if(o.length=v,a.length<=9){a.words[0]=0,a.length=1;return}var l=a.words[9];for(o.words[o.length++]=l&d,y=10;y<a.length;y++){var t=a.words[y]|0;a.words[y-10]=(t&d)<<4|l>>>22,l=t}l>>>=22,a.words[y-10]=l,l===0&&a.length>10?a.length-=10:a.length-=9},we.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var o=0,d=0;d<a.length;d++){var v=a.words[d]|0;o+=v*977,a.words[d]=o&67108863,o=v*64+(o/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ye(){ie.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ye,ie);function se(){ie.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(se,ie);function ke(){ie.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ke,ie),ke.prototype.imulK=function(a){for(var o=0,d=0;d<a.length;d++){var v=(a.words[d]|0)*19+o,y=v&67108863;v>>>=26,a.words[d]=y,o=v}return o!==0&&(a.words[a.length++]=o),a},s._prime=function(a){if(Q[a])return Q[a];var o;if(a==="k256")o=new we;else if(a==="p224")o=new ye;else if(a==="p192")o=new se;else if(a==="p25519")o=new ke;else throw new Error("Unknown prime "+a);return Q[a]=o,o};function w(r){if(typeof r=="string"){var a=s._prime(r);this.m=a.p,this.prime=a}else u(r.gtn(1),"modulus must be greater than 1"),this.m=r,this.prime=null}w.prototype._verify1=function(a){u(a.negative===0,"red works only with positives"),u(a.red,"red works only with red numbers")},w.prototype._verify2=function(a,o){u((a.negative|o.negative)===0,"red works only with positives"),u(a.red&&a.red===o.red,"red works only with red numbers")},w.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(b(a,a.umod(this.m)._forceRed(this)),a)},w.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},w.prototype.add=function(a,o){this._verify2(a,o);var d=a.add(o);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},w.prototype.iadd=function(a,o){this._verify2(a,o);var d=a.iadd(o);return d.cmp(this.m)>=0&&d.isub(this.m),d},w.prototype.sub=function(a,o){this._verify2(a,o);var d=a.sub(o);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},w.prototype.isub=function(a,o){this._verify2(a,o);var d=a.isub(o);return d.cmpn(0)<0&&d.iadd(this.m),d},w.prototype.shl=function(a,o){return this._verify1(a),this.imod(a.ushln(o))},w.prototype.imul=function(a,o){return this._verify2(a,o),this.imod(a.imul(o))},w.prototype.mul=function(a,o){return this._verify2(a,o),this.imod(a.mul(o))},w.prototype.isqr=function(a){return this.imul(a,a.clone())},w.prototype.sqr=function(a){return this.mul(a,a)},w.prototype.sqrt=function(a){if(a.isZero())return a.clone();var o=this.m.andln(3);if(u(o%2===1),o===3){var d=this.m.add(new s(1)).iushrn(2);return this.pow(a,d)}for(var v=this.m.subn(1),y=0;!v.isZero()&&v.andln(1)===0;)y++,v.iushrn(1);u(!v.isZero());var l=new s(1).toRed(this),t=l.redNeg(),p=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new s(2*q*q).toRed(this);this.pow(q,p).cmp(t)!==0;)q.redIAdd(t);for(var I=this.pow(q,v),$=this.pow(a,v.addn(1).iushrn(1)),G=this.pow(a,v),V=y;G.cmp(l)!==0;){for(var N=G,W=0;N.cmp(l)!==0;W++)N=N.redSqr();u(W<V);var Z=this.pow(I,new s(1).iushln(V-W-1));$=$.redMul(Z),I=Z.redSqr(),G=G.redMul(I),V=W}return $},w.prototype.invm=function(a){var o=a._invmp(this.m);return o.negative!==0?(o.negative=0,this.imod(o).redNeg()):this.imod(o)},w.prototype.pow=function(a,o){if(o.isZero())return new s(1).toRed(this);if(o.cmpn(1)===0)return a.clone();var d=4,v=new Array(1<<d);v[0]=new s(1).toRed(this),v[1]=a;for(var y=2;y<v.length;y++)v[y]=this.mul(v[y-1],a);var l=v[0],t=0,p=0,q=o.bitLength()%26;for(q===0&&(q=26),y=o.length-1;y>=0;y--){for(var I=o.words[y],$=q-1;$>=0;$--){var G=I>>$&1;if(l!==v[0]&&(l=this.sqr(l)),G===0&&t===0){p=0;continue}t<<=1,t|=G,p++,!(p!==d&&(y!==0||$!==0))&&(l=this.mul(l,v[t]),p=0,t=0)}q=26}return l},w.prototype.convertTo=function(a){var o=a.umod(this.m);return o===a?o.clone():o},w.prototype.convertFrom=function(a){var o=a.clone();return o.red=null,o},s.mont=function(a){return new e(a)};function e(r){w.call(this,r),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(e,w),e.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},e.prototype.convertFrom=function(a){var o=this.imod(a.mul(this.rinv));return o.red=null,o},e.prototype.imul=function(a,o){if(a.isZero()||o.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(o),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=d.isub(v).iushrn(this.shift),l=y;return y.cmp(this.m)>=0?l=y.isub(this.m):y.cmpn(0)<0&&(l=y.iadd(this.m)),l._forceRed(this)},e.prototype.mul=function(a,o){if(a.isZero()||o.isZero())return new s(0)._forceRed(this);var d=a.mul(o),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=d.isub(v).iushrn(this.shift),l=y;return y.cmp(this.m)>=0?l=y.isub(this.m):y.cmpn(0)<0&&(l=y.iadd(this.m)),l._forceRed(this)},e.prototype.invm=function(a){var o=this.imod(a._invmp(this.m).mul(this.r2));return o._forceRed(this)}})(c,commonjsGlobal)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var c=requireBn$4(),n=requireBrowser$b();function h(s){var g=u(s),x=g.toRed(c.mont(s.modulus)).redPow(new c(s.publicExponent)).fromRed();return{blinder:x,unblinder:g.invm(s.modulus)}}function u(s){var g=s.modulus.byteLength(),x;do x=new c(n(g));while(x.cmp(s.modulus)>=0||!x.umod(s.prime1)||!x.umod(s.prime2));return x}function m(s,g){var x=h(g),_=g.modulus.byteLength(),M=new c(s).mul(x.blinder).umod(g.modulus),b=M.toRed(c.mont(g.prime1)),S=M.toRed(c.mont(g.prime2)),E=g.coefficient,A=g.prime1,B=g.prime2,R=b.redPow(g.exponent1).fromRed(),T=S.redPow(g.exponent2).fromRed(),k=R.isub(T).imul(E).umod(A).imul(B);return T.iadd(k).imul(x.unblinder).umod(g.modulus).toArrayLike(Buffer,"be",_)}return m.getr=u,browserifyRsa=m,browserifyRsa}var elliptic={};const name="elliptic",version="6.5.5",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"};var require$$0={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies},utils$2={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(c){(function(n,h){function u(w,e){if(!w)throw new Error(e||"Assertion failed")}function m(w,e){w.super_=e;var r=function(){};r.prototype=e.prototype,w.prototype=new r,w.prototype.constructor=w}function s(w,e,r){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((e==="le"||e==="be")&&(r=e,e=10),this._init(w||0,e||10,r||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(e){return e instanceof s?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,r){return e.cmp(r)>0?e:r},s.min=function(e,r){return e.cmp(r)<0?e:r},s.prototype._init=function(e,r,a){if(typeof e=="number")return this._initNumber(e,r,a);if(typeof e=="object")return this._initArray(e,r,a);r==="hex"&&(r=16),u(r===(r|0)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;e[0]==="-"&&(o++,this.negative=1),o<e.length&&(r===16?this._parseHex(e,o,a):(this._parseBase(e,r,o),a==="le"&&this._initArray(this.toArray(),r,a)))},s.prototype._initNumber=function(e,r,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(u(e<9007199254740992),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),r,a)},s.prototype._initArray=function(e,r,a){if(u(typeof e.length=="number"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,v,y=0;if(a==="be")for(o=e.length-1,d=0;o>=0;o-=3)v=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(a==="le")for(o=0,d=0;o<e.length;o+=3)v=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function x(w,e){var r=w.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(w,e,r){var a=x(w,r);return r-1>=e&&(a|=x(w,r-1)<<4),a}s.prototype._parseHex=function(e,r,a){this.length=Math.ceil((e.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,v=0,y;if(a==="be")for(o=e.length-1;o>=r;o-=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8;else{var l=e.length-r;for(o=l%2===0?r+1:r;o<e.length;o+=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8}this.strip()};function M(w,e,r,a){for(var o=0,d=Math.min(w.length,r),v=e;v<d;v++){var y=w.charCodeAt(v)-48;o*=a,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(e,r,a){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var v=e.length-a,y=v%o,l=Math.min(v,v-y)+a,t=0,p=a;p<l;p+=o)t=M(e,p,p+o,r),this.imuln(d),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t);if(y!==0){var q=1;for(t=M(e,p,e.length,r),p=0;p<y;p++)q*=r;this.imuln(q),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++)e.words[r]=this.words[r];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,r){e=e||10,r=r|0||1;var a;if(e===16||e==="hex"){a="";for(var o=0,d=0,v=0;v<this.length;v++){var y=this.words[v],l=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||v!==this.length-1?a=b[6-l.length]+l+a:a=l+a,o+=2,o>=26&&(o-=26,v--)}for(d!==0&&(a=d.toString(16)+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(e===(e|0)&&e>=2&&e<=36){var t=S[e],p=E[e];a="";var q=this.clone();for(q.negative=0;!q.isZero();){var I=q.modn(p).toString(e);q=q.idivn(p),q.isZero()?a=I+a:a=b[t-I.length]+I+a}for(this.isZero()&&(a="0"+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return this.length===2?e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?e+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,r){return u(typeof g<"u"),this.toArrayLike(g,e,r)},s.prototype.toArray=function(e,r){return this.toArrayLike(Array,e,r)},s.prototype.toArrayLike=function(e,r,a){var o=this.byteLength(),d=a||Math.max(1,o);u(o<=d,"byte array longer than desired length"),u(d>0,"Requested array length <= 0"),this.strip();var v=r==="le",y=new e(d),l,t,p=this.clone();if(v){for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[t]=l;for(;t<d;t++)y[t]=0}else{for(t=0;t<d-o;t++)y[t]=0;for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[d-t-1]=l}return y},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var r=e,a=0;return r>=4096&&(a+=13,r>>>=13),r>=64&&(a+=7,r>>>=7),r>=8&&(a+=4,r>>>=4),r>=2&&(a+=2,r>>>=2),a+r},s.prototype._zeroBits=function(e){if(e===0)return 26;var r=e,a=0;return r&8191||(a+=13,r>>>=13),r&127||(a+=7,r>>>=7),r&15||(a+=4,r>>>=4),r&3||(a+=2,r>>>=2),r&1||a++,a},s.prototype.bitLength=function(){var e=this.words[this.length-1],r=this._countBits(e);return(this.length-1)*26+r};function A(w){for(var e=new Array(w.bitLength()),r=0;r<e.length;r++){var a=r/26|0,o=r%26;e[r]=(w.words[a]&1<<o)>>>o}return e}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,r=0;r<this.length;r++){var a=this._zeroBits(this.words[r]);if(e+=a,a!==26)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]|e.words[r];return this.strip()},s.prototype.ior=function(e){return u((this.negative|e.negative)===0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var r;this.length>e.length?r=e:r=this;for(var a=0;a<r.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=r.length,this.strip()},s.prototype.iand=function(e){return u((this.negative|e.negative)===0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var r,a;this.length>e.length?(r=this,a=e):(r=e,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(e){return u((this.negative|e.negative)===0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){u(typeof e=="number"&&e>=0);var r=Math.ceil(e/26)|0,a=e%26;this._expand(r),a>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return a>0&&(this.words[o]=~this.words[o]&67108863>>26-a),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,r){u(typeof e=="number"&&e>=0);var a=e/26|0,o=e%26;return this._expand(a+1),r?this.words[a]=this.words[a]|1<<o:this.words[a]=this.words[a]&~(1<<o),this.strip()},s.prototype.iadd=function(e){var r;if(this.negative!==0&&e.negative===0)return this.negative=0,r=this.isub(e),this.negative^=1,this._normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,r=this.isub(e),e.negative=1,r._normSign();var a,o;this.length>e.length?(a=this,o=e):(a=e,o=this);for(var d=0,v=0;v<o.length;v++)r=(a.words[v]|0)+(o.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;for(;d!==0&&v<a.length;v++)r=(a.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;if(this.length=a.length,d!==0)this.words[this.length]=d,this.length++;else if(a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this},s.prototype.add=function(e){var r;return e.negative!==0&&this.negative===0?(e.negative=0,r=this.sub(e),e.negative^=1,r):e.negative===0&&this.negative!==0?(this.negative=0,r=e.sub(this),this.negative=1,r):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);return e.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a=this.cmp(e);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;a>0?(o=this,d=e):(o=e,d=this);for(var v=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;for(;v!==0&&y<o.length;y++)r=(o.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;if(v===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};function B(w,e,r){r.negative=e.negative^w.negative;var a=w.length+e.length|0;r.length=a,a=a-1|0;var o=w.words[0]|0,d=e.words[0]|0,v=o*d,y=v&67108863,l=v/67108864|0;r.words[0]=y;for(var t=1;t<a;t++){for(var p=l>>>26,q=l&67108863,I=Math.min(t,e.length-1),$=Math.max(0,t-w.length+1);$<=I;$++){var G=t-$|0;o=w.words[G]|0,d=e.words[$]|0,v=o*d+q,p+=v/67108864|0,q=v&67108863}r.words[t]=q|0,l=p|0}return l!==0?r.words[t]=l|0:r.length--,r.strip()}var R=function(e,r,a){var o=e.words,d=r.words,v=a.words,y=0,l,t,p,q=o[0]|0,I=q&8191,$=q>>>13,G=o[1]|0,V=G&8191,N=G>>>13,W=o[2]|0,Z=W&8191,ne=W>>>13,ee=o[3]|0,z=ee&8191,ue=ee>>>13,Ze=o[4]|0,Ae=Ze&8191,qe=Ze>>>13,nt=o[5]|0,Ne=nt&8191,ve=nt>>>13,ut=o[6]|0,Ce=ut&8191,je=ut>>>13,ht=o[7]|0,Ie=ht&8191,Le=ht>>>13,lt=o[8]|0,$e=lt&8191,ze=lt>>>13,bt=o[9]|0,K=bt&8191,P=bt>>>13,D=d[0]|0,Y=D&8191,oe=D>>>13,Re=d[1]|0,ce=Re&8191,Te=Re>>>13,ft=d[2]|0,Pe=ft&8191,Ue=ft>>>13,ot=d[3]|0,He=ot&8191,Ve=ot>>>13,pt=d[4]|0,Fe=pt&8191,Ge=pt>>>13,mt=d[5]|0,Ke=mt&8191,We=mt>>>13,vt=d[6]|0,Oe=vt&8191,Je=vt>>>13,j=d[7]|0,F=j&8191,H=j>>>13,C=d[8]|0,J=C&8191,he=C>>>13,xe=d[9]|0,de=xe&8191,ge=xe>>>13;a.negative=e.negative^r.negative,a.length=19,l=Math.imul(I,Y),t=Math.imul(I,oe),t=t+Math.imul($,Y)|0,p=Math.imul($,oe);var tt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,l=Math.imul(V,Y),t=Math.imul(V,oe),t=t+Math.imul(N,Y)|0,p=Math.imul(N,oe),l=l+Math.imul(I,ce)|0,t=t+Math.imul(I,Te)|0,t=t+Math.imul($,ce)|0,p=p+Math.imul($,Te)|0;var Xe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(Z,Y),t=Math.imul(Z,oe),t=t+Math.imul(ne,Y)|0,p=Math.imul(ne,oe),l=l+Math.imul(V,ce)|0,t=t+Math.imul(V,Te)|0,t=t+Math.imul(N,ce)|0,p=p+Math.imul(N,Te)|0,l=l+Math.imul(I,Pe)|0,t=t+Math.imul(I,Ue)|0,t=t+Math.imul($,Pe)|0,p=p+Math.imul($,Ue)|0;var ct=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(ct>>>26)|0,ct&=67108863,l=Math.imul(z,Y),t=Math.imul(z,oe),t=t+Math.imul(ue,Y)|0,p=Math.imul(ue,oe),l=l+Math.imul(Z,ce)|0,t=t+Math.imul(Z,Te)|0,t=t+Math.imul(ne,ce)|0,p=p+Math.imul(ne,Te)|0,l=l+Math.imul(V,Pe)|0,t=t+Math.imul(V,Ue)|0,t=t+Math.imul(N,Pe)|0,p=p+Math.imul(N,Ue)|0,l=l+Math.imul(I,He)|0,t=t+Math.imul(I,Ve)|0,t=t+Math.imul($,He)|0,p=p+Math.imul($,Ve)|0;var rt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(rt>>>26)|0,rt&=67108863,l=Math.imul(Ae,Y),t=Math.imul(Ae,oe),t=t+Math.imul(qe,Y)|0,p=Math.imul(qe,oe),l=l+Math.imul(z,ce)|0,t=t+Math.imul(z,Te)|0,t=t+Math.imul(ue,ce)|0,p=p+Math.imul(ue,Te)|0,l=l+Math.imul(Z,Pe)|0,t=t+Math.imul(Z,Ue)|0,t=t+Math.imul(ne,Pe)|0,p=p+Math.imul(ne,Ue)|0,l=l+Math.imul(V,He)|0,t=t+Math.imul(V,Ve)|0,t=t+Math.imul(N,He)|0,p=p+Math.imul(N,Ve)|0,l=l+Math.imul(I,Fe)|0,t=t+Math.imul(I,Ge)|0,t=t+Math.imul($,Fe)|0,p=p+Math.imul($,Ge)|0;var st=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(st>>>26)|0,st&=67108863,l=Math.imul(Ne,Y),t=Math.imul(Ne,oe),t=t+Math.imul(ve,Y)|0,p=Math.imul(ve,oe),l=l+Math.imul(Ae,ce)|0,t=t+Math.imul(Ae,Te)|0,t=t+Math.imul(qe,ce)|0,p=p+Math.imul(qe,Te)|0,l=l+Math.imul(z,Pe)|0,t=t+Math.imul(z,Ue)|0,t=t+Math.imul(ue,Pe)|0,p=p+Math.imul(ue,Ue)|0,l=l+Math.imul(Z,He)|0,t=t+Math.imul(Z,Ve)|0,t=t+Math.imul(ne,He)|0,p=p+Math.imul(ne,Ve)|0,l=l+Math.imul(V,Fe)|0,t=t+Math.imul(V,Ge)|0,t=t+Math.imul(N,Fe)|0,p=p+Math.imul(N,Ge)|0,l=l+Math.imul(I,Ke)|0,t=t+Math.imul(I,We)|0,t=t+Math.imul($,Ke)|0,p=p+Math.imul($,We)|0;var at=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(at>>>26)|0,at&=67108863,l=Math.imul(Ce,Y),t=Math.imul(Ce,oe),t=t+Math.imul(je,Y)|0,p=Math.imul(je,oe),l=l+Math.imul(Ne,ce)|0,t=t+Math.imul(Ne,Te)|0,t=t+Math.imul(ve,ce)|0,p=p+Math.imul(ve,Te)|0,l=l+Math.imul(Ae,Pe)|0,t=t+Math.imul(Ae,Ue)|0,t=t+Math.imul(qe,Pe)|0,p=p+Math.imul(qe,Ue)|0,l=l+Math.imul(z,He)|0,t=t+Math.imul(z,Ve)|0,t=t+Math.imul(ue,He)|0,p=p+Math.imul(ue,Ve)|0,l=l+Math.imul(Z,Fe)|0,t=t+Math.imul(Z,Ge)|0,t=t+Math.imul(ne,Fe)|0,p=p+Math.imul(ne,Ge)|0,l=l+Math.imul(V,Ke)|0,t=t+Math.imul(V,We)|0,t=t+Math.imul(N,Ke)|0,p=p+Math.imul(N,We)|0,l=l+Math.imul(I,Oe)|0,t=t+Math.imul(I,Je)|0,t=t+Math.imul($,Oe)|0,p=p+Math.imul($,Je)|0;var X=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(X>>>26)|0,X&=67108863,l=Math.imul(Ie,Y),t=Math.imul(Ie,oe),t=t+Math.imul(Le,Y)|0,p=Math.imul(Le,oe),l=l+Math.imul(Ce,ce)|0,t=t+Math.imul(Ce,Te)|0,t=t+Math.imul(je,ce)|0,p=p+Math.imul(je,Te)|0,l=l+Math.imul(Ne,Pe)|0,t=t+Math.imul(Ne,Ue)|0,t=t+Math.imul(ve,Pe)|0,p=p+Math.imul(ve,Ue)|0,l=l+Math.imul(Ae,He)|0,t=t+Math.imul(Ae,Ve)|0,t=t+Math.imul(qe,He)|0,p=p+Math.imul(qe,Ve)|0,l=l+Math.imul(z,Fe)|0,t=t+Math.imul(z,Ge)|0,t=t+Math.imul(ue,Fe)|0,p=p+Math.imul(ue,Ge)|0,l=l+Math.imul(Z,Ke)|0,t=t+Math.imul(Z,We)|0,t=t+Math.imul(ne,Ke)|0,p=p+Math.imul(ne,We)|0,l=l+Math.imul(V,Oe)|0,t=t+Math.imul(V,Je)|0,t=t+Math.imul(N,Oe)|0,p=p+Math.imul(N,Je)|0,l=l+Math.imul(I,F)|0,t=t+Math.imul(I,H)|0,t=t+Math.imul($,F)|0,p=p+Math.imul($,H)|0;var re=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(re>>>26)|0,re&=67108863,l=Math.imul($e,Y),t=Math.imul($e,oe),t=t+Math.imul(ze,Y)|0,p=Math.imul(ze,oe),l=l+Math.imul(Ie,ce)|0,t=t+Math.imul(Ie,Te)|0,t=t+Math.imul(Le,ce)|0,p=p+Math.imul(Le,Te)|0,l=l+Math.imul(Ce,Pe)|0,t=t+Math.imul(Ce,Ue)|0,t=t+Math.imul(je,Pe)|0,p=p+Math.imul(je,Ue)|0,l=l+Math.imul(Ne,He)|0,t=t+Math.imul(Ne,Ve)|0,t=t+Math.imul(ve,He)|0,p=p+Math.imul(ve,Ve)|0,l=l+Math.imul(Ae,Fe)|0,t=t+Math.imul(Ae,Ge)|0,t=t+Math.imul(qe,Fe)|0,p=p+Math.imul(qe,Ge)|0,l=l+Math.imul(z,Ke)|0,t=t+Math.imul(z,We)|0,t=t+Math.imul(ue,Ke)|0,p=p+Math.imul(ue,We)|0,l=l+Math.imul(Z,Oe)|0,t=t+Math.imul(Z,Je)|0,t=t+Math.imul(ne,Oe)|0,p=p+Math.imul(ne,Je)|0,l=l+Math.imul(V,F)|0,t=t+Math.imul(V,H)|0,t=t+Math.imul(N,F)|0,p=p+Math.imul(N,H)|0,l=l+Math.imul(I,J)|0,t=t+Math.imul(I,he)|0,t=t+Math.imul($,J)|0,p=p+Math.imul($,he)|0;var te=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(te>>>26)|0,te&=67108863,l=Math.imul(K,Y),t=Math.imul(K,oe),t=t+Math.imul(P,Y)|0,p=Math.imul(P,oe),l=l+Math.imul($e,ce)|0,t=t+Math.imul($e,Te)|0,t=t+Math.imul(ze,ce)|0,p=p+Math.imul(ze,Te)|0,l=l+Math.imul(Ie,Pe)|0,t=t+Math.imul(Ie,Ue)|0,t=t+Math.imul(Le,Pe)|0,p=p+Math.imul(Le,Ue)|0,l=l+Math.imul(Ce,He)|0,t=t+Math.imul(Ce,Ve)|0,t=t+Math.imul(je,He)|0,p=p+Math.imul(je,Ve)|0,l=l+Math.imul(Ne,Fe)|0,t=t+Math.imul(Ne,Ge)|0,t=t+Math.imul(ve,Fe)|0,p=p+Math.imul(ve,Ge)|0,l=l+Math.imul(Ae,Ke)|0,t=t+Math.imul(Ae,We)|0,t=t+Math.imul(qe,Ke)|0,p=p+Math.imul(qe,We)|0,l=l+Math.imul(z,Oe)|0,t=t+Math.imul(z,Je)|0,t=t+Math.imul(ue,Oe)|0,p=p+Math.imul(ue,Je)|0,l=l+Math.imul(Z,F)|0,t=t+Math.imul(Z,H)|0,t=t+Math.imul(ne,F)|0,p=p+Math.imul(ne,H)|0,l=l+Math.imul(V,J)|0,t=t+Math.imul(V,he)|0,t=t+Math.imul(N,J)|0,p=p+Math.imul(N,he)|0,l=l+Math.imul(I,de)|0,t=t+Math.imul(I,ge)|0,t=t+Math.imul($,de)|0,p=p+Math.imul($,ge)|0;var fe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(fe>>>26)|0,fe&=67108863,l=Math.imul(K,ce),t=Math.imul(K,Te),t=t+Math.imul(P,ce)|0,p=Math.imul(P,Te),l=l+Math.imul($e,Pe)|0,t=t+Math.imul($e,Ue)|0,t=t+Math.imul(ze,Pe)|0,p=p+Math.imul(ze,Ue)|0,l=l+Math.imul(Ie,He)|0,t=t+Math.imul(Ie,Ve)|0,t=t+Math.imul(Le,He)|0,p=p+Math.imul(Le,Ve)|0,l=l+Math.imul(Ce,Fe)|0,t=t+Math.imul(Ce,Ge)|0,t=t+Math.imul(je,Fe)|0,p=p+Math.imul(je,Ge)|0,l=l+Math.imul(Ne,Ke)|0,t=t+Math.imul(Ne,We)|0,t=t+Math.imul(ve,Ke)|0,p=p+Math.imul(ve,We)|0,l=l+Math.imul(Ae,Oe)|0,t=t+Math.imul(Ae,Je)|0,t=t+Math.imul(qe,Oe)|0,p=p+Math.imul(qe,Je)|0,l=l+Math.imul(z,F)|0,t=t+Math.imul(z,H)|0,t=t+Math.imul(ue,F)|0,p=p+Math.imul(ue,H)|0,l=l+Math.imul(Z,J)|0,t=t+Math.imul(Z,he)|0,t=t+Math.imul(ne,J)|0,p=p+Math.imul(ne,he)|0,l=l+Math.imul(V,de)|0,t=t+Math.imul(V,ge)|0,t=t+Math.imul(N,de)|0,p=p+Math.imul(N,ge)|0;var le=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(le>>>26)|0,le&=67108863,l=Math.imul(K,Pe),t=Math.imul(K,Ue),t=t+Math.imul(P,Pe)|0,p=Math.imul(P,Ue),l=l+Math.imul($e,He)|0,t=t+Math.imul($e,Ve)|0,t=t+Math.imul(ze,He)|0,p=p+Math.imul(ze,Ve)|0,l=l+Math.imul(Ie,Fe)|0,t=t+Math.imul(Ie,Ge)|0,t=t+Math.imul(Le,Fe)|0,p=p+Math.imul(Le,Ge)|0,l=l+Math.imul(Ce,Ke)|0,t=t+Math.imul(Ce,We)|0,t=t+Math.imul(je,Ke)|0,p=p+Math.imul(je,We)|0,l=l+Math.imul(Ne,Oe)|0,t=t+Math.imul(Ne,Je)|0,t=t+Math.imul(ve,Oe)|0,p=p+Math.imul(ve,Je)|0,l=l+Math.imul(Ae,F)|0,t=t+Math.imul(Ae,H)|0,t=t+Math.imul(qe,F)|0,p=p+Math.imul(qe,H)|0,l=l+Math.imul(z,J)|0,t=t+Math.imul(z,he)|0,t=t+Math.imul(ue,J)|0,p=p+Math.imul(ue,he)|0,l=l+Math.imul(Z,de)|0,t=t+Math.imul(Z,ge)|0,t=t+Math.imul(ne,de)|0,p=p+Math.imul(ne,ge)|0;var pe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(pe>>>26)|0,pe&=67108863,l=Math.imul(K,He),t=Math.imul(K,Ve),t=t+Math.imul(P,He)|0,p=Math.imul(P,Ve),l=l+Math.imul($e,Fe)|0,t=t+Math.imul($e,Ge)|0,t=t+Math.imul(ze,Fe)|0,p=p+Math.imul(ze,Ge)|0,l=l+Math.imul(Ie,Ke)|0,t=t+Math.imul(Ie,We)|0,t=t+Math.imul(Le,Ke)|0,p=p+Math.imul(Le,We)|0,l=l+Math.imul(Ce,Oe)|0,t=t+Math.imul(Ce,Je)|0,t=t+Math.imul(je,Oe)|0,p=p+Math.imul(je,Je)|0,l=l+Math.imul(Ne,F)|0,t=t+Math.imul(Ne,H)|0,t=t+Math.imul(ve,F)|0,p=p+Math.imul(ve,H)|0,l=l+Math.imul(Ae,J)|0,t=t+Math.imul(Ae,he)|0,t=t+Math.imul(qe,J)|0,p=p+Math.imul(qe,he)|0,l=l+Math.imul(z,de)|0,t=t+Math.imul(z,ge)|0,t=t+Math.imul(ue,de)|0,p=p+Math.imul(ue,ge)|0;var Se=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Se>>>26)|0,Se&=67108863,l=Math.imul(K,Fe),t=Math.imul(K,Ge),t=t+Math.imul(P,Fe)|0,p=Math.imul(P,Ge),l=l+Math.imul($e,Ke)|0,t=t+Math.imul($e,We)|0,t=t+Math.imul(ze,Ke)|0,p=p+Math.imul(ze,We)|0,l=l+Math.imul(Ie,Oe)|0,t=t+Math.imul(Ie,Je)|0,t=t+Math.imul(Le,Oe)|0,p=p+Math.imul(Le,Je)|0,l=l+Math.imul(Ce,F)|0,t=t+Math.imul(Ce,H)|0,t=t+Math.imul(je,F)|0,p=p+Math.imul(je,H)|0,l=l+Math.imul(Ne,J)|0,t=t+Math.imul(Ne,he)|0,t=t+Math.imul(ve,J)|0,p=p+Math.imul(ve,he)|0,l=l+Math.imul(Ae,de)|0,t=t+Math.imul(Ae,ge)|0,t=t+Math.imul(qe,de)|0,p=p+Math.imul(qe,ge)|0;var Ee=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,l=Math.imul(K,Ke),t=Math.imul(K,We),t=t+Math.imul(P,Ke)|0,p=Math.imul(P,We),l=l+Math.imul($e,Oe)|0,t=t+Math.imul($e,Je)|0,t=t+Math.imul(ze,Oe)|0,p=p+Math.imul(ze,Je)|0,l=l+Math.imul(Ie,F)|0,t=t+Math.imul(Ie,H)|0,t=t+Math.imul(Le,F)|0,p=p+Math.imul(Le,H)|0,l=l+Math.imul(Ce,J)|0,t=t+Math.imul(Ce,he)|0,t=t+Math.imul(je,J)|0,p=p+Math.imul(je,he)|0,l=l+Math.imul(Ne,de)|0,t=t+Math.imul(Ne,ge)|0,t=t+Math.imul(ve,de)|0,p=p+Math.imul(ve,ge)|0;var me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(me>>>26)|0,me&=67108863,l=Math.imul(K,Oe),t=Math.imul(K,Je),t=t+Math.imul(P,Oe)|0,p=Math.imul(P,Je),l=l+Math.imul($e,F)|0,t=t+Math.imul($e,H)|0,t=t+Math.imul(ze,F)|0,p=p+Math.imul(ze,H)|0,l=l+Math.imul(Ie,J)|0,t=t+Math.imul(Ie,he)|0,t=t+Math.imul(Le,J)|0,p=p+Math.imul(Le,he)|0,l=l+Math.imul(Ce,de)|0,t=t+Math.imul(Ce,ge)|0,t=t+Math.imul(je,de)|0,p=p+Math.imul(je,ge)|0;var _e=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(_e>>>26)|0,_e&=67108863,l=Math.imul(K,F),t=Math.imul(K,H),t=t+Math.imul(P,F)|0,p=Math.imul(P,H),l=l+Math.imul($e,J)|0,t=t+Math.imul($e,he)|0,t=t+Math.imul(ze,J)|0,p=p+Math.imul(ze,he)|0,l=l+Math.imul(Ie,de)|0,t=t+Math.imul(Ie,ge)|0,t=t+Math.imul(Le,de)|0,p=p+Math.imul(Le,ge)|0;var De=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(De>>>26)|0,De&=67108863,l=Math.imul(K,J),t=Math.imul(K,he),t=t+Math.imul(P,J)|0,p=Math.imul(P,he),l=l+Math.imul($e,de)|0,t=t+Math.imul($e,ge)|0,t=t+Math.imul(ze,de)|0,p=p+Math.imul(ze,ge)|0;var Me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Me>>>26)|0,Me&=67108863,l=Math.imul(K,de),t=Math.imul(K,ge),t=t+Math.imul(P,de)|0,p=Math.imul(P,ge);var Be=(y+l|0)+((t&8191)<<13)|0;return y=(p+(t>>>13)|0)+(Be>>>26)|0,Be&=67108863,v[0]=tt,v[1]=Xe,v[2]=ct,v[3]=rt,v[4]=st,v[5]=at,v[6]=X,v[7]=re,v[8]=te,v[9]=fe,v[10]=le,v[11]=pe,v[12]=Se,v[13]=Ee,v[14]=me,v[15]=_e,v[16]=De,v[17]=Me,v[18]=Be,y!==0&&(v[19]=y,a.length++),a};Math.imul||(R=B);function T(w,e,r){r.negative=e.negative^w.negative,r.length=w.length+e.length;for(var a=0,o=0,d=0;d<r.length-1;d++){var v=o;o=0;for(var y=a&67108863,l=Math.min(d,e.length-1),t=Math.max(0,d-w.length+1);t<=l;t++){var p=d-t,q=w.words[p]|0,I=e.words[t]|0,$=q*I,G=$&67108863;v=v+($/67108864|0)|0,G=G+y|0,y=G&67108863,v=v+(G>>>26)|0,o+=v>>>26,v&=67108863}r.words[d]=y,a=v,v=o}return a!==0?r.words[d]=a:r.length--,r.strip()}function k(w,e,r){var a=new O;return a.mulp(w,e,r)}s.prototype.mulTo=function(e,r){var a,o=this.length+e.length;return this.length===10&&e.length===10?a=R(this,e,r):o<63?a=B(this,e,r):o<1024?a=T(this,e,r):a=k(this,e,r),a};function O(w,e){this.x=w,this.y=e}O.prototype.makeRBT=function(e){for(var r=new Array(e),a=s.prototype._countBits(e)-1,o=0;o<e;o++)r[o]=this.revBin(o,a,e);return r},O.prototype.revBin=function(e,r,a){if(e===0||e===a-1)return e;for(var o=0,d=0;d<r;d++)o|=(e&1)<<r-d-1,e>>=1;return o},O.prototype.permute=function(e,r,a,o,d,v){for(var y=0;y<v;y++)o[y]=r[e[y]],d[y]=a[e[y]]},O.prototype.transform=function(e,r,a,o,d,v){this.permute(v,e,r,a,o,d);for(var y=1;y<d;y<<=1)for(var l=y<<1,t=Math.cos(2*Math.PI/l),p=Math.sin(2*Math.PI/l),q=0;q<d;q+=l)for(var I=t,$=p,G=0;G<y;G++){var V=a[q+G],N=o[q+G],W=a[q+G+y],Z=o[q+G+y],ne=I*W-$*Z;Z=I*Z+$*W,W=ne,a[q+G]=V+W,o[q+G]=N+Z,a[q+G+y]=V-W,o[q+G+y]=N-Z,G!==l&&(ne=t*I-p*$,$=t*$+p*I,I=ne)}},O.prototype.guessLen13b=function(e,r){var a=Math.max(r,e)|1,o=a&1,d=0;for(a=a/2|0;a;a=a>>>1)d++;return 1<<d+1+o},O.prototype.conjugate=function(e,r,a){if(!(a<=1))for(var o=0;o<a/2;o++){var d=e[o];e[o]=e[a-o-1],e[a-o-1]=d,d=r[o],r[o]=-r[a-o-1],r[a-o-1]=-d}},O.prototype.normalize13b=function(e,r){for(var a=0,o=0;o<r/2;o++){var d=Math.round(e[2*o+1]/r)*8192+Math.round(e[2*o]/r)+a;e[o]=d&67108863,d<67108864?a=0:a=d/67108864|0}return e},O.prototype.convert13b=function(e,r,a,o){for(var d=0,v=0;v<r;v++)d=d+(e[v]|0),a[2*v]=d&8191,d=d>>>13,a[2*v+1]=d&8191,d=d>>>13;for(v=2*r;v<o;++v)a[v]=0;u(d===0),u((d&-8192)===0)},O.prototype.stub=function(e){for(var r=new Array(e),a=0;a<e;a++)r[a]=0;return r},O.prototype.mulp=function(e,r,a){var o=2*this.guessLen13b(e.length,r.length),d=this.makeRBT(o),v=this.stub(o),y=new Array(o),l=new Array(o),t=new Array(o),p=new Array(o),q=new Array(o),I=new Array(o),$=a.words;$.length=o,this.convert13b(e.words,e.length,y,o),this.convert13b(r.words,r.length,p,o),this.transform(y,v,l,t,o,d),this.transform(p,v,q,I,o,d);for(var G=0;G<o;G++){var V=l[G]*q[G]-t[G]*I[G];t[G]=l[G]*I[G]+t[G]*q[G],l[G]=V}return this.conjugate(l,t,o),this.transform(l,t,$,v,o,d),this.conjugate($,v,o),this.normalize13b($,o),a.negative=e.negative^r.negative,a.length=e.length+r.length,a.strip()},s.prototype.mul=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),this.mulTo(e,r)},s.prototype.mulf=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),k(this,e,r)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){u(typeof e=="number"),u(e<67108864);for(var r=0,a=0;a<this.length;a++){var o=(this.words[a]|0)*e,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[a]=d&67108863}return r!==0&&(this.words[a]=r,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var r=A(e);if(r.length===0)return new s(1);for(var a=this,o=0;o<r.length&&r[o]===0;o++,a=a.sqr());if(++o<r.length)for(var d=a.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(a=a.mul(d));return a},s.prototype.iushln=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var v=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,l=(this.words[d]|0)-y<<r;this.words[d]=l|v,v=y>>>26-r}v&&(this.words[d]=v,this.length++)}if(a!==0){for(d=this.length-1;d>=0;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(e){return u(this.negative===0),this.iushln(e)},s.prototype.iushrn=function(e,r,a){u(typeof e=="number"&&e>=0);var o;r?o=(r-r%26)/26:o=0;var d=e%26,v=Math.min((e-d)/26,this.length),y=67108863^67108863>>>d<<d,l=a;if(o-=v,o=Math.max(0,o),l){for(var t=0;t<v;t++)l.words[t]=this.words[t];l.length=v}if(v!==0)if(this.length>v)for(this.length-=v,t=0;t<this.length;t++)this.words[t]=this.words[t+v];else this.words[0]=0,this.length=1;var p=0;for(t=this.length-1;t>=0&&(p!==0||t>=o);t--){var q=this.words[t]|0;this.words[t]=p<<26-d|q>>>d,p=q&y}return l&&p!==0&&(l.words[l.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,r,a){return u(this.negative===0),this.iushrn(e,r,a)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return!1;var d=this.words[a];return!!(d&o)},s.prototype.imaskn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(r!==0&&a++,this.length=Math.min(a,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return u(typeof e=="number"),u(e<67108864),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(e){if(u(typeof e=="number"),u(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,r,a){var o=e.length+a,d;this._expand(o);var v,y=0;for(d=0;d<e.length;d++){v=(this.words[d+a]|0)+y;var l=(e.words[d]|0)*r;v-=l&67108863,y=(v>>26)-(l/67108864|0),this.words[d+a]=v&67108863}for(;d<this.length-a;d++)v=(this.words[d+a]|0)+y,y=v>>26,this.words[d+a]=v&67108863;if(y===0)return this.strip();for(u(y===-1),y=0,d=0;d<this.length;d++)v=-(this.words[d]|0)+y,y=v>>26,this.words[d]=v&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,r){var a=this.length-e.length,o=this.clone(),d=e,v=d.words[d.length-1]|0,y=this._countBits(v);a=26-y,a!==0&&(d=d.ushln(a),o.iushln(a),v=d.words[d.length-1]|0);var l=o.length-d.length,t;if(r!=="mod"){t=new s(null),t.length=l+1,t.words=new Array(t.length);for(var p=0;p<t.length;p++)t.words[p]=0}var q=o.clone()._ishlnsubmul(d,1,l);q.negative===0&&(o=q,t&&(t.words[l]=1));for(var I=l-1;I>=0;I--){var $=(o.words[d.length+I]|0)*67108864+(o.words[d.length+I-1]|0);for($=Math.min($/v|0,67108863),o._ishlnsubmul(d,$,I);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(d,1,I),o.isZero()||(o.negative^=1);t&&(t.words[I]=$)}return t&&t.strip(),o.strip(),r!=="div"&&a!==0&&o.iushrn(a),{div:t||null,mod:o}},s.prototype.divmod=function(e,r,a){if(u(!e.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,v;return this.negative!==0&&e.negative===0?(v=this.neg().divmod(e,r),r!=="mod"&&(o=v.div.neg()),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.iadd(e)),{div:o,mod:d}):this.negative===0&&e.negative!==0?(v=this.divmod(e.neg(),r),r!=="mod"&&(o=v.div.neg()),{div:o,mod:v.mod}):this.negative&e.negative?(v=this.neg().divmod(e.neg(),r),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.isub(e)),{div:v.div,mod:d}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:e.length===1?r==="div"?{div:this.divn(e.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,r)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var a=r.div.negative!==0?r.mod.isub(e):r.mod,o=e.ushrn(1),d=e.andln(1),v=a.cmp(o);return v<0||d===1&&v===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(e){u(e<=67108863);for(var r=(1<<26)%e,a=0,o=this.length-1;o>=0;o--)a=(r*a+(this.words[o]|0))%e;return a},s.prototype.idivn=function(e){u(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var o=(this.words[a]|0)+r*67108864;this.words[a]=o/e|0,r=o%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=new s(0),y=new s(1),l=0;r.isEven()&&a.isEven();)r.iushrn(1),a.iushrn(1),++l;for(var t=a.clone(),p=r.clone();!r.isZero();){for(var q=0,I=1;!(r.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(r.iushrn(q);q-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(t),d.isub(p)),o.iushrn(1),d.iushrn(1);for(var $=0,G=1;!(a.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(a.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(t),y.isub(p)),v.iushrn(1),y.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(v),d.isub(y)):(a.isub(r),v.isub(o),y.isub(d))}return{a:v,b:y,gcd:a.iushln(l)}},s.prototype._invmp=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=a.clone();r.cmpn(1)>0&&a.cmpn(1)>0;){for(var y=0,l=1;!(r.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(v),o.iushrn(1);for(var t=0,p=1;!(a.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(a.iushrn(t);t-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(d)):(a.isub(r),d.isub(o))}var q;return r.cmpn(1)===0?q=o:q=d,q.cmpn(0)<0&&q.iadd(e),q},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone(),a=e.clone();r.negative=0,a.negative=0;for(var o=0;r.isEven()&&a.isEven();o++)r.iushrn(1),a.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=r.cmp(a);if(d<0){var v=r;r=a,a=v}else if(d===0||a.cmpn(1)===0)break;r.isub(a)}while(!0);return a.iushln(o)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){u(typeof e=="number");var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return this._expand(a+1),this.words[a]|=o,this;for(var d=o,v=a;d!==0&&v<this.length;v++){var y=this.words[v]|0;y+=d,d=y>>>26,y&=67108863,this.words[v]=y}return d!==0&&(this.words[v]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1)a=1;else{r&&(e=-e),u(e<=67108863,"Number is too big");var o=this.words[0]|0;a=o===e?0:o<e?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var r=0,a=this.length-1;a>=0;a--){var o=this.words[a]|0,d=e.words[a]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(e){return this.cmpn(e)===1},s.prototype.gt=function(e){return this.cmp(e)===1},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return this.cmpn(e)===-1},s.prototype.lt=function(e){return this.cmp(e)===-1},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return this.cmpn(e)===0},s.prototype.eq=function(e){return this.cmp(e)===0},s.red=function(e){return new se(e)},s.prototype.toRed=function(e){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return u(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return u(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var U={k256:null,p224:null,p192:null,p25519:null};function L(w,e){this.name=w,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},L.prototype.ireduce=function(e){var r=e,a;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),a=r.bitLength();while(a>this.n);var o=a<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},L.prototype.split=function(e,r){e.iushrn(this.n,0,r)},L.prototype.imulK=function(e){return e.imul(this.k)};function Q(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(Q,L),Q.prototype.split=function(e,r){for(var a=4194303,o=Math.min(e.length,9),d=0;d<o;d++)r.words[d]=e.words[d];if(r.length=o,e.length<=9){e.words[0]=0,e.length=1;return}var v=e.words[9];for(r.words[r.length++]=v&a,d=10;d<e.length;d++){var y=e.words[d]|0;e.words[d-10]=(y&a)<<4|v>>>22,v=y}v>>>=22,e.words[d-10]=v,v===0&&e.length>10?e.length-=10:e.length-=9},Q.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,a=0;a<e.length;a++){var o=e.words[a]|0;r+=o*977,e.words[a]=r&67108863,r=o*64+(r/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e};function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ie,L);function we(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(we,L);function ye(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ye,L),ye.prototype.imulK=function(e){for(var r=0,a=0;a<e.length;a++){var o=(e.words[a]|0)*19+r,d=o&67108863;o>>>=26,e.words[a]=d,r=o}return r!==0&&(e.words[e.length++]=r),e},s._prime=function(e){if(U[e])return U[e];var r;if(e==="k256")r=new Q;else if(e==="p224")r=new ie;else if(e==="p192")r=new we;else if(e==="p25519")r=new ye;else throw new Error("Unknown prime "+e);return U[e]=r,r};function se(w){if(typeof w=="string"){var e=s._prime(w);this.m=e.p,this.prime=e}else u(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}se.prototype._verify1=function(e){u(e.negative===0,"red works only with positives"),u(e.red,"red works only with red numbers")},se.prototype._verify2=function(e,r){u((e.negative|r.negative)===0,"red works only with positives"),u(e.red&&e.red===r.red,"red works only with red numbers")},se.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},se.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},se.prototype.add=function(e,r){this._verify2(e,r);var a=e.add(r);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},se.prototype.iadd=function(e,r){this._verify2(e,r);var a=e.iadd(r);return a.cmp(this.m)>=0&&a.isub(this.m),a},se.prototype.sub=function(e,r){this._verify2(e,r);var a=e.sub(r);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},se.prototype.isub=function(e,r){this._verify2(e,r);var a=e.isub(r);return a.cmpn(0)<0&&a.iadd(this.m),a},se.prototype.shl=function(e,r){return this._verify1(e),this.imod(e.ushln(r))},se.prototype.imul=function(e,r){return this._verify2(e,r),this.imod(e.imul(r))},se.prototype.mul=function(e,r){return this._verify2(e,r),this.imod(e.mul(r))},se.prototype.isqr=function(e){return this.imul(e,e.clone())},se.prototype.sqr=function(e){return this.mul(e,e)},se.prototype.sqrt=function(e){if(e.isZero())return e.clone();var r=this.m.andln(3);if(u(r%2===1),r===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(e,a)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);u(!o.isZero());var v=new s(1).toRed(this),y=v.redNeg(),l=this.m.subn(1).iushrn(1),t=this.m.bitLength();for(t=new s(2*t*t).toRed(this);this.pow(t,l).cmp(y)!==0;)t.redIAdd(y);for(var p=this.pow(t,o),q=this.pow(e,o.addn(1).iushrn(1)),I=this.pow(e,o),$=d;I.cmp(v)!==0;){for(var G=I,V=0;G.cmp(v)!==0;V++)G=G.redSqr();u(V<$);var N=this.pow(p,new s(1).iushln($-V-1));q=q.redMul(N),p=N.redSqr(),I=I.redMul(p),$=V}return q},se.prototype.invm=function(e){var r=e._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},se.prototype.pow=function(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var a=4,o=new Array(1<<a);o[0]=new s(1).toRed(this),o[1]=e;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],e);var v=o[0],y=0,l=0,t=r.bitLength()%26;for(t===0&&(t=26),d=r.length-1;d>=0;d--){for(var p=r.words[d],q=t-1;q>=0;q--){var I=p>>q&1;if(v!==o[0]&&(v=this.sqr(v)),I===0&&y===0){l=0;continue}y<<=1,y|=I,l++,!(l!==a&&(d!==0||q!==0))&&(v=this.mul(v,o[y]),l=0,y=0)}t=26}return v},se.prototype.convertTo=function(e){var r=e.umod(this.m);return r===e?r.clone():r},se.prototype.convertFrom=function(e){var r=e.clone();return r.red=null,r},s.mont=function(e){return new ke(e)};function ke(w){se.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(ke,se),ke.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},ke.prototype.convertFrom=function(e){var r=this.imod(e.mul(this.rinv));return r.red=null,r},ke.prototype.imul=function(e,r){if(e.isZero()||r.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.mul=function(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var a=e.mul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.invm=function(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,commonjsGlobal)}(bn$3)),bn$3.exports}var utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(c){var n=c;function h(s,g){if(Array.isArray(s))return s.slice();if(!s)return[];var x=[];if(typeof s!="string"){for(var _=0;_<s.length;_++)x[_]=s[_]|0;return x}if(g==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var _=0;_<s.length;_+=2)x.push(parseInt(s[_]+s[_+1],16))}else for(var _=0;_<s.length;_++){var M=s.charCodeAt(_),b=M>>8,S=M&255;b?x.push(b,S):x.push(S)}return x}n.toArray=h;function u(s){return s.length===1?"0"+s:s}n.zero2=u;function m(s){for(var g="",x=0;x<s.length;x++)g+=u(s[x].toString(16));return g}n.toHex=m,n.encode=function(g,x){return x==="hex"?m(g):g}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(c){var n=c,h=requireBn$3(),u=requireMinimalisticAssert(),m=requireUtils$2();n.assert=u,n.toArray=m.toArray,n.zero2=m.zero2,n.toHex=m.toHex,n.encode=m.encode;function s(b,S,E){var A=new Array(Math.max(b.bitLength(),E)+1),B;for(B=0;B<A.length;B+=1)A[B]=0;var R=1<<S+1,T=b.clone();for(B=0;B<A.length;B++){var k,O=T.andln(R-1);T.isOdd()?(O>(R>>1)-1?k=(R>>1)-O:k=O,T.isubn(k)):k=0,A[B]=k,T.iushrn(1)}return A}n.getNAF=s;function g(b,S){var E=[[],[]];b=b.clone(),S=S.clone();for(var A=0,B=0,R;b.cmpn(-A)>0||S.cmpn(-B)>0;){var T=b.andln(3)+A&3,k=S.andln(3)+B&3;T===3&&(T=-1),k===3&&(k=-1);var O;T&1?(R=b.andln(7)+A&7,(R===3||R===5)&&k===2?O=-T:O=T):O=0,E[0].push(O);var U;k&1?(R=S.andln(7)+B&7,(R===3||R===5)&&T===2?U=-k:U=k):U=0,E[1].push(U),2*A===O+1&&(A=1-A),2*B===U+1&&(B=1-B),b.iushrn(1),S.iushrn(1)}return E}n.getJSF=g;function x(b,S,E){var A="_"+S;b.prototype[S]=function(){return this[A]!==void 0?this[A]:this[A]=E.call(this)}}n.cachedProperty=x;function _(b){return typeof b=="string"?n.toArray(b,"hex"):b}n.parseBytes=_;function M(b){return new h(b,"hex","le")}n.intFromLE=M}(utils$2)),utils$2}var curve$1={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var c=requireBn$3(),n=requireUtils$1(),h=n.getNAF,u=n.getJSF,m=n.assert;function s(x,_){this.type=x,this.p=new c(_.p,16),this.red=_.prime?c.red(_.prime):c.mont(this.p),this.zero=new c(0).toRed(this.red),this.one=new c(1).toRed(this.red),this.two=new c(2).toRed(this.red),this.n=_.n&&new c(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var M=this.n&&this.p.div(this.n);!M||M.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(_,M){m(_.precomputed);var b=_._getDoubles(),S=h(M,1,this._bitLength),E=(1<<b.step+1)-(b.step%2===0?2:1);E/=3;var A=[],B,R;for(B=0;B<S.length;B+=b.step){R=0;for(var T=B+b.step-1;T>=B;T--)R=(R<<1)+S[T];A.push(R)}for(var k=this.jpoint(null,null,null),O=this.jpoint(null,null,null),U=E;U>0;U--){for(B=0;B<A.length;B++)R=A[B],R===U?O=O.mixedAdd(b.points[B]):R===-U&&(O=O.mixedAdd(b.points[B].neg()));k=k.add(O)}return k.toP()},s.prototype._wnafMul=function(_,M){var b=4,S=_._getNAFPoints(b);b=S.wnd;for(var E=S.points,A=h(M,b,this._bitLength),B=this.jpoint(null,null,null),R=A.length-1;R>=0;R--){for(var T=0;R>=0&&A[R]===0;R--)T++;if(R>=0&&T++,B=B.dblp(T),R<0)break;var k=A[R];m(k!==0),_.type==="affine"?k>0?B=B.mixedAdd(E[k-1>>1]):B=B.mixedAdd(E[-k-1>>1].neg()):k>0?B=B.add(E[k-1>>1]):B=B.add(E[-k-1>>1].neg())}return _.type==="affine"?B.toP():B},s.prototype._wnafMulAdd=function(_,M,b,S,E){var A=this._wnafT1,B=this._wnafT2,R=this._wnafT3,T=0,k,O,U;for(k=0;k<S;k++){U=M[k];var L=U._getNAFPoints(_);A[k]=L.wnd,B[k]=L.points}for(k=S-1;k>=1;k-=2){var Q=k-1,ie=k;if(A[Q]!==1||A[ie]!==1){R[Q]=h(b[Q],A[Q],this._bitLength),R[ie]=h(b[ie],A[ie],this._bitLength),T=Math.max(R[Q].length,T),T=Math.max(R[ie].length,T);continue}var we=[M[Q],null,null,M[ie]];M[Q].y.cmp(M[ie].y)===0?(we[1]=M[Q].add(M[ie]),we[2]=M[Q].toJ().mixedAdd(M[ie].neg())):M[Q].y.cmp(M[ie].y.redNeg())===0?(we[1]=M[Q].toJ().mixedAdd(M[ie]),we[2]=M[Q].add(M[ie].neg())):(we[1]=M[Q].toJ().mixedAdd(M[ie]),we[2]=M[Q].toJ().mixedAdd(M[ie].neg()));var ye=[-3,-1,-5,-7,0,7,5,1,3],se=u(b[Q],b[ie]);for(T=Math.max(se[0].length,T),R[Q]=new Array(T),R[ie]=new Array(T),O=0;O<T;O++){var ke=se[0][O]|0,w=se[1][O]|0;R[Q][O]=ye[(ke+1)*3+(w+1)],R[ie][O]=0,B[Q]=we}}var e=this.jpoint(null,null,null),r=this._wnafT4;for(k=T;k>=0;k--){for(var a=0;k>=0;){var o=!0;for(O=0;O<S;O++)r[O]=R[O][k]|0,r[O]!==0&&(o=!1);if(!o)break;a++,k--}if(k>=0&&a++,e=e.dblp(a),k<0)break;for(O=0;O<S;O++){var d=r[O];d!==0&&(d>0?U=B[O][d-1>>1]:d<0&&(U=B[O][-d-1>>1].neg()),U.type==="affine"?e=e.mixedAdd(U):e=e.add(U))}}for(k=0;k<S;k++)B[k]=null;return E?e:e.toP()};function g(x,_){this.curve=x,this.type=_,this.precomputed=null}return s.BasePoint=g,g.prototype.eq=function(){throw new Error("Not implemented")},g.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(_,M){_=n.toArray(_,M);var b=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*b){_[0]===6?m(_[_.length-1]%2===0):_[0]===7&&m(_[_.length-1]%2===1);var S=this.point(_.slice(1,1+b),_.slice(1+b,1+2*b));return S}else if((_[0]===2||_[0]===3)&&_.length-1===b)return this.pointFromX(_.slice(1,1+b),_[0]===3);throw new Error("Unknown point format")},g.prototype.encodeCompressed=function(_){return this.encode(_,!0)},g.prototype._encode=function(_){var M=this.curve.p.byteLength(),b=this.getX().toArray("be",M);return _?[this.getY().isEven()?2:3].concat(b):[4].concat(b,this.getY().toArray("be",M))},g.prototype.encode=function(_,M){return n.encode(this._encode(M),_)},g.prototype.precompute=function(_){if(this.precomputed)return this;var M={doubles:null,naf:null,beta:null};return M.naf=this._getNAFPoints(8),M.doubles=this._getDoubles(4,_),M.beta=this._getBeta(),this.precomputed=M,this},g.prototype._hasDoubles=function(_){if(!this.precomputed)return!1;var M=this.precomputed.doubles;return M?M.points.length>=Math.ceil((_.bitLength()+1)/M.step):!1},g.prototype._getDoubles=function(_,M){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var b=[this],S=this,E=0;E<M;E+=_){for(var A=0;A<_;A++)S=S.dbl();b.push(S)}return{step:_,points:b}},g.prototype._getNAFPoints=function(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var M=[this],b=(1<<_)-1,S=b===1?null:this.dbl(),E=1;E<b;E++)M[E]=M[E-1].add(S);return{wnd:_,points:M}},g.prototype._getBeta=function(){return null},g.prototype.dblp=function(_){for(var M=this,b=0;b<_;b++)M=M.dbl();return M},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var c=requireUtils$1(),n=requireBn$3(),h=requireInherits_browser(),u=requireBase$1(),m=c.assert;function s(_){u.call(this,"short",_),this.a=new n(_.a,16).toRed(this.red),this.b=new n(_.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(_),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}h(s,u),short=s,s.prototype._getEndomorphism=function(M){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var b,S;if(M.beta)b=new n(M.beta,16).toRed(this.red);else{var E=this._getEndoRoots(this.p);b=E[0].cmp(E[1])<0?E[0]:E[1],b=b.toRed(this.red)}if(M.lambda)S=new n(M.lambda,16);else{var A=this._getEndoRoots(this.n);this.g.mul(A[0]).x.cmp(this.g.x.redMul(b))===0?S=A[0]:(S=A[1],m(this.g.mul(S).x.cmp(this.g.x.redMul(b))===0))}var B;return M.basis?B=M.basis.map(function(R){return{a:new n(R.a,16),b:new n(R.b,16)}}):B=this._getEndoBasis(S),{beta:b,lambda:S,basis:B}}},s.prototype._getEndoRoots=function(M){var b=M===this.p?this.red:n.mont(M),S=new n(2).toRed(b).redInvm(),E=S.redNeg(),A=new n(3).toRed(b).redNeg().redSqrt().redMul(S),B=E.redAdd(A).fromRed(),R=E.redSub(A).fromRed();return[B,R]},s.prototype._getEndoBasis=function(M){for(var b=this.n.ushrn(Math.floor(this.n.bitLength()/2)),S=M,E=this.n.clone(),A=new n(1),B=new n(0),R=new n(0),T=new n(1),k,O,U,L,Q,ie,we,ye=0,se,ke;S.cmpn(0)!==0;){var w=E.div(S);se=E.sub(w.mul(S)),ke=R.sub(w.mul(A));var e=T.sub(w.mul(B));if(!U&&se.cmp(b)<0)k=we.neg(),O=A,U=se.neg(),L=ke;else if(U&&++ye===2)break;we=se,E=S,S=se,R=A,A=ke,T=B,B=e}Q=se.neg(),ie=ke;var r=U.sqr().add(L.sqr()),a=Q.sqr().add(ie.sqr());return a.cmp(r)>=0&&(Q=k,ie=O),U.negative&&(U=U.neg(),L=L.neg()),Q.negative&&(Q=Q.neg(),ie=ie.neg()),[{a:U,b:L},{a:Q,b:ie}]},s.prototype._endoSplit=function(M){var b=this.endo.basis,S=b[0],E=b[1],A=E.b.mul(M).divRound(this.n),B=S.b.neg().mul(M).divRound(this.n),R=A.mul(S.a),T=B.mul(E.a),k=A.mul(S.b),O=B.mul(E.b),U=M.sub(R).sub(T),L=k.add(O).neg();return{k1:U,k2:L}},s.prototype.pointFromX=function(M,b){M=new n(M,16),M.red||(M=M.toRed(this.red));var S=M.redSqr().redMul(M).redIAdd(M.redMul(this.a)).redIAdd(this.b),E=S.redSqrt();if(E.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");var A=E.fromRed().isOdd();return(b&&!A||!b&&A)&&(E=E.redNeg()),this.point(M,E)},s.prototype.validate=function(M){if(M.inf)return!0;var b=M.x,S=M.y,E=this.a.redMul(b),A=b.redSqr().redMul(b).redIAdd(E).redIAdd(this.b);return S.redSqr().redISub(A).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(M,b,S){for(var E=this._endoWnafT1,A=this._endoWnafT2,B=0;B<M.length;B++){var R=this._endoSplit(b[B]),T=M[B],k=T._getBeta();R.k1.negative&&(R.k1.ineg(),T=T.neg(!0)),R.k2.negative&&(R.k2.ineg(),k=k.neg(!0)),E[B*2]=T,E[B*2+1]=k,A[B*2]=R.k1,A[B*2+1]=R.k2}for(var O=this._wnafMulAdd(1,E,A,B*2,S),U=0;U<B*2;U++)E[U]=null,A[U]=null;return O};function g(_,M,b,S){u.BasePoint.call(this,_,"affine"),M===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(M,16),this.y=new n(b,16),S&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}h(g,u.BasePoint),s.prototype.point=function(M,b,S){return new g(this,M,b,S)},s.prototype.pointFromJSON=function(M,b){return g.fromJSON(this,M,b)},g.prototype._getBeta=function(){if(this.curve.endo){var M=this.precomputed;if(M&&M.beta)return M.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(M){var S=this.curve,E=function(A){return S.point(A.x.redMul(S.endo.beta),A.y)};M.beta=b,b.precomputed={beta:null,naf:M.naf&&{wnd:M.naf.wnd,points:M.naf.points.map(E)},doubles:M.doubles&&{step:M.doubles.step,points:M.doubles.points.map(E)}}}return b}},g.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},g.fromJSON=function(M,b,S){typeof b=="string"&&(b=JSON.parse(b));var E=M.point(b[0],b[1],S);if(!b[2])return E;function A(R){return M.point(R[0],R[1],S)}var B=b[2];return E.precomputed={beta:null,doubles:B.doubles&&{step:B.doubles.step,points:[E].concat(B.doubles.points.map(A))},naf:B.naf&&{wnd:B.naf.wnd,points:[E].concat(B.naf.points.map(A))}},E},g.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},g.prototype.isInfinity=function(){return this.inf},g.prototype.add=function(M){if(this.inf)return M;if(M.inf)return this;if(this.eq(M))return this.dbl();if(this.neg().eq(M))return this.curve.point(null,null);if(this.x.cmp(M.x)===0)return this.curve.point(null,null);var b=this.y.redSub(M.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(M.x).redInvm()));var S=b.redSqr().redISub(this.x).redISub(M.x),E=b.redMul(this.x.redSub(S)).redISub(this.y);return this.curve.point(S,E)},g.prototype.dbl=function(){if(this.inf)return this;var M=this.y.redAdd(this.y);if(M.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,S=this.x.redSqr(),E=M.redInvm(),A=S.redAdd(S).redIAdd(S).redIAdd(b).redMul(E),B=A.redSqr().redISub(this.x.redAdd(this.x)),R=A.redMul(this.x.redSub(B)).redISub(this.y);return this.curve.point(B,R)},g.prototype.getX=function(){return this.x.fromRed()},g.prototype.getY=function(){return this.y.fromRed()},g.prototype.mul=function(M){return M=new n(M,16),this.isInfinity()?this:this._hasDoubles(M)?this.curve._fixedNafMul(this,M):this.curve.endo?this.curve._endoWnafMulAdd([this],[M]):this.curve._wnafMul(this,M)},g.prototype.mulAdd=function(M,b,S){var E=[this,b],A=[M,S];return this.curve.endo?this.curve._endoWnafMulAdd(E,A):this.curve._wnafMulAdd(1,E,A,2)},g.prototype.jmulAdd=function(M,b,S){var E=[this,b],A=[M,S];return this.curve.endo?this.curve._endoWnafMulAdd(E,A,!0):this.curve._wnafMulAdd(1,E,A,2,!0)},g.prototype.eq=function(M){return this===M||this.inf===M.inf&&(this.inf||this.x.cmp(M.x)===0&&this.y.cmp(M.y)===0)},g.prototype.neg=function(M){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(M&&this.precomputed){var S=this.precomputed,E=function(A){return A.neg()};b.precomputed={naf:S.naf&&{wnd:S.naf.wnd,points:S.naf.points.map(E)},doubles:S.doubles&&{step:S.doubles.step,points:S.doubles.points.map(E)}}}return b},g.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var M=this.curve.jpoint(this.x,this.y,this.curve.one);return M};function x(_,M,b,S){u.BasePoint.call(this,_,"jacobian"),M===null&&b===null&&S===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(M,16),this.y=new n(b,16),this.z=new n(S,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return h(x,u.BasePoint),s.prototype.jpoint=function(M,b,S){return new x(this,M,b,S)},x.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var M=this.z.redInvm(),b=M.redSqr(),S=this.x.redMul(b),E=this.y.redMul(b).redMul(M);return this.curve.point(S,E)},x.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},x.prototype.add=function(M){if(this.isInfinity())return M;if(M.isInfinity())return this;var b=M.z.redSqr(),S=this.z.redSqr(),E=this.x.redMul(b),A=M.x.redMul(S),B=this.y.redMul(b.redMul(M.z)),R=M.y.redMul(S.redMul(this.z)),T=E.redSub(A),k=B.redSub(R);if(T.cmpn(0)===0)return k.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var O=T.redSqr(),U=O.redMul(T),L=E.redMul(O),Q=k.redSqr().redIAdd(U).redISub(L).redISub(L),ie=k.redMul(L.redISub(Q)).redISub(B.redMul(U)),we=this.z.redMul(M.z).redMul(T);return this.curve.jpoint(Q,ie,we)},x.prototype.mixedAdd=function(M){if(this.isInfinity())return M.toJ();if(M.isInfinity())return this;var b=this.z.redSqr(),S=this.x,E=M.x.redMul(b),A=this.y,B=M.y.redMul(b).redMul(this.z),R=S.redSub(E),T=A.redSub(B);if(R.cmpn(0)===0)return T.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var k=R.redSqr(),O=k.redMul(R),U=S.redMul(k),L=T.redSqr().redIAdd(O).redISub(U).redISub(U),Q=T.redMul(U.redISub(L)).redISub(A.redMul(O)),ie=this.z.redMul(R);return this.curve.jpoint(L,Q,ie)},x.prototype.dblp=function(M){if(M===0)return this;if(this.isInfinity())return this;if(!M)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var S=this;for(b=0;b<M;b++)S=S.dbl();return S}var E=this.curve.a,A=this.curve.tinv,B=this.x,R=this.y,T=this.z,k=T.redSqr().redSqr(),O=R.redAdd(R);for(b=0;b<M;b++){var U=B.redSqr(),L=O.redSqr(),Q=L.redSqr(),ie=U.redAdd(U).redIAdd(U).redIAdd(E.redMul(k)),we=B.redMul(L),ye=ie.redSqr().redISub(we.redAdd(we)),se=we.redISub(ye),ke=ie.redMul(se);ke=ke.redIAdd(ke).redISub(Q);var w=O.redMul(T);b+1<M&&(k=k.redMul(Q)),B=ye,T=w,O=ke}return this.curve.jpoint(B,O.redMul(A),T)},x.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},x.prototype._zeroDbl=function(){var M,b,S;if(this.zOne){var E=this.x.redSqr(),A=this.y.redSqr(),B=A.redSqr(),R=this.x.redAdd(A).redSqr().redISub(E).redISub(B);R=R.redIAdd(R);var T=E.redAdd(E).redIAdd(E),k=T.redSqr().redISub(R).redISub(R),O=B.redIAdd(B);O=O.redIAdd(O),O=O.redIAdd(O),M=k,b=T.redMul(R.redISub(k)).redISub(O),S=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),L=this.y.redSqr(),Q=L.redSqr(),ie=this.x.redAdd(L).redSqr().redISub(U).redISub(Q);ie=ie.redIAdd(ie);var we=U.redAdd(U).redIAdd(U),ye=we.redSqr(),se=Q.redIAdd(Q);se=se.redIAdd(se),se=se.redIAdd(se),M=ye.redISub(ie).redISub(ie),b=we.redMul(ie.redISub(M)).redISub(se),S=this.y.redMul(this.z),S=S.redIAdd(S)}return this.curve.jpoint(M,b,S)},x.prototype._threeDbl=function(){var M,b,S;if(this.zOne){var E=this.x.redSqr(),A=this.y.redSqr(),B=A.redSqr(),R=this.x.redAdd(A).redSqr().redISub(E).redISub(B);R=R.redIAdd(R);var T=E.redAdd(E).redIAdd(E).redIAdd(this.curve.a),k=T.redSqr().redISub(R).redISub(R);M=k;var O=B.redIAdd(B);O=O.redIAdd(O),O=O.redIAdd(O),b=T.redMul(R.redISub(k)).redISub(O),S=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),L=this.y.redSqr(),Q=this.x.redMul(L),ie=this.x.redSub(U).redMul(this.x.redAdd(U));ie=ie.redAdd(ie).redIAdd(ie);var we=Q.redIAdd(Q);we=we.redIAdd(we);var ye=we.redAdd(we);M=ie.redSqr().redISub(ye),S=this.y.redAdd(this.z).redSqr().redISub(L).redISub(U);var se=L.redSqr();se=se.redIAdd(se),se=se.redIAdd(se),se=se.redIAdd(se),b=ie.redMul(we.redISub(M)).redISub(se)}return this.curve.jpoint(M,b,S)},x.prototype._dbl=function(){var M=this.curve.a,b=this.x,S=this.y,E=this.z,A=E.redSqr().redSqr(),B=b.redSqr(),R=S.redSqr(),T=B.redAdd(B).redIAdd(B).redIAdd(M.redMul(A)),k=b.redAdd(b);k=k.redIAdd(k);var O=k.redMul(R),U=T.redSqr().redISub(O.redAdd(O)),L=O.redISub(U),Q=R.redSqr();Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),Q=Q.redIAdd(Q);var ie=T.redMul(L).redISub(Q),we=S.redAdd(S).redMul(E);return this.curve.jpoint(U,ie,we)},x.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var M=this.x.redSqr(),b=this.y.redSqr(),S=this.z.redSqr(),E=b.redSqr(),A=M.redAdd(M).redIAdd(M),B=A.redSqr(),R=this.x.redAdd(b).redSqr().redISub(M).redISub(E);R=R.redIAdd(R),R=R.redAdd(R).redIAdd(R),R=R.redISub(B);var T=R.redSqr(),k=E.redIAdd(E);k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var O=A.redIAdd(R).redSqr().redISub(B).redISub(T).redISub(k),U=b.redMul(O);U=U.redIAdd(U),U=U.redIAdd(U);var L=this.x.redMul(T).redISub(U);L=L.redIAdd(L),L=L.redIAdd(L);var Q=this.y.redMul(O.redMul(k.redISub(O)).redISub(R.redMul(T)));Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),Q=Q.redIAdd(Q);var ie=this.z.redAdd(R).redSqr().redISub(S).redISub(T);return this.curve.jpoint(L,Q,ie)},x.prototype.mul=function(M,b){return M=new n(M,b),this.curve._wnafMul(this,M)},x.prototype.eq=function(M){if(M.type==="affine")return this.eq(M.toJ());if(this===M)return!0;var b=this.z.redSqr(),S=M.z.redSqr();if(this.x.redMul(S).redISub(M.x.redMul(b)).cmpn(0)!==0)return!1;var E=b.redMul(this.z),A=S.redMul(M.z);return this.y.redMul(A).redISub(M.y.redMul(E)).cmpn(0)===0},x.prototype.eqXToP=function(M){var b=this.z.redSqr(),S=M.toRed(this.curve.red).redMul(b);if(this.x.cmp(S)===0)return!0;for(var E=M.clone(),A=this.curve.redN.redMul(b);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(S.redIAdd(A),this.x.cmp(S)===0)return!0}},x.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},x.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var c=requireBn$3(),n=requireInherits_browser(),h=requireBase$1(),u=requireUtils$1();function m(g){h.call(this,"mont",g),this.a=new c(g.a,16).toRed(this.red),this.b=new c(g.b,16).toRed(this.red),this.i4=new c(4).toRed(this.red).redInvm(),this.two=new c(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}n(m,h),mont=m,m.prototype.validate=function(x){var _=x.normalize().x,M=_.redSqr(),b=M.redMul(_).redAdd(M.redMul(this.a)).redAdd(_),S=b.redSqrt();return S.redSqr().cmp(b)===0};function s(g,x,_){h.BasePoint.call(this,g,"projective"),x===null&&_===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new c(x,16),this.z=new c(_,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return n(s,h.BasePoint),m.prototype.decodePoint=function(x,_){return this.point(u.toArray(x,_),1)},m.prototype.point=function(x,_){return new s(this,x,_)},m.prototype.pointFromJSON=function(x){return s.fromJSON(this,x)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(x,_){return new s(x,_[0],_[1]||x.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var x=this.x.redAdd(this.z),_=x.redSqr(),M=this.x.redSub(this.z),b=M.redSqr(),S=_.redSub(b),E=_.redMul(b),A=S.redMul(b.redAdd(this.curve.a24.redMul(S)));return this.curve.point(E,A)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(x,_){var M=this.x.redAdd(this.z),b=this.x.redSub(this.z),S=x.x.redAdd(x.z),E=x.x.redSub(x.z),A=E.redMul(M),B=S.redMul(b),R=_.z.redMul(A.redAdd(B).redSqr()),T=_.x.redMul(A.redISub(B).redSqr());return this.curve.point(R,T)},s.prototype.mul=function(x){for(var _=x.clone(),M=this,b=this.curve.point(null,null),S=this,E=[];_.cmpn(0)!==0;_.iushrn(1))E.push(_.andln(1));for(var A=E.length-1;A>=0;A--)E[A]===0?(M=M.diffAdd(b,S),b=b.dbl()):(b=M.diffAdd(b,S),M=M.dbl());return b},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(x){return this.getX().cmp(x.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var c=requireUtils$1(),n=requireBn$3(),h=requireInherits_browser(),u=requireBase$1(),m=c.assert;function s(x){this.twisted=(x.a|0)!==1,this.mOneA=this.twisted&&(x.a|0)===-1,this.extended=this.mOneA,u.call(this,"edwards",x),this.a=new n(x.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(x.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(x.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),m(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(x.c|0)===1}h(s,u),edwards=s,s.prototype._mulA=function(_){return this.mOneA?_.redNeg():this.a.redMul(_)},s.prototype._mulC=function(_){return this.oneC?_:this.c.redMul(_)},s.prototype.jpoint=function(_,M,b,S){return this.point(_,M,b,S)},s.prototype.pointFromX=function(_,M){_=new n(_,16),_.red||(_=_.toRed(this.red));var b=_.redSqr(),S=this.c2.redSub(this.a.redMul(b)),E=this.one.redSub(this.c2.redMul(this.d).redMul(b)),A=S.redMul(E.redInvm()),B=A.redSqrt();if(B.redSqr().redSub(A).cmp(this.zero)!==0)throw new Error("invalid point");var R=B.fromRed().isOdd();return(M&&!R||!M&&R)&&(B=B.redNeg()),this.point(_,B)},s.prototype.pointFromY=function(_,M){_=new n(_,16),_.red||(_=_.toRed(this.red));var b=_.redSqr(),S=b.redSub(this.c2),E=b.redMul(this.d).redMul(this.c2).redSub(this.a),A=S.redMul(E.redInvm());if(A.cmp(this.zero)===0){if(M)throw new Error("invalid point");return this.point(this.zero,_)}var B=A.redSqrt();if(B.redSqr().redSub(A).cmp(this.zero)!==0)throw new Error("invalid point");return B.fromRed().isOdd()!==M&&(B=B.redNeg()),this.point(B,_)},s.prototype.validate=function(_){if(_.isInfinity())return!0;_.normalize();var M=_.x.redSqr(),b=_.y.redSqr(),S=M.redMul(this.a).redAdd(b),E=this.c2.redMul(this.one.redAdd(this.d.redMul(M).redMul(b)));return S.cmp(E)===0};function g(x,_,M,b,S){u.BasePoint.call(this,x,"projective"),_===null&&M===null&&b===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(_,16),this.y=new n(M,16),this.z=b?new n(b,16):this.curve.one,this.t=S&&new n(S,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return h(g,u.BasePoint),s.prototype.pointFromJSON=function(_){return g.fromJSON(this,_)},s.prototype.point=function(_,M,b,S){return new g(this,_,M,b,S)},g.fromJSON=function(_,M){return new g(_,M[0],M[1],M[2])},g.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},g.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},g.prototype._extDbl=function(){var _=this.x.redSqr(),M=this.y.redSqr(),b=this.z.redSqr();b=b.redIAdd(b);var S=this.curve._mulA(_),E=this.x.redAdd(this.y).redSqr().redISub(_).redISub(M),A=S.redAdd(M),B=A.redSub(b),R=S.redSub(M),T=E.redMul(B),k=A.redMul(R),O=E.redMul(R),U=B.redMul(A);return this.curve.point(T,k,U,O)},g.prototype._projDbl=function(){var _=this.x.redAdd(this.y).redSqr(),M=this.x.redSqr(),b=this.y.redSqr(),S,E,A,B,R,T;if(this.curve.twisted){B=this.curve._mulA(M);var k=B.redAdd(b);this.zOne?(S=_.redSub(M).redSub(b).redMul(k.redSub(this.curve.two)),E=k.redMul(B.redSub(b)),A=k.redSqr().redSub(k).redSub(k)):(R=this.z.redSqr(),T=k.redSub(R).redISub(R),S=_.redSub(M).redISub(b).redMul(T),E=k.redMul(B.redSub(b)),A=k.redMul(T))}else B=M.redAdd(b),R=this.curve._mulC(this.z).redSqr(),T=B.redSub(R).redSub(R),S=this.curve._mulC(_.redISub(B)).redMul(T),E=this.curve._mulC(B).redMul(M.redISub(b)),A=B.redMul(T);return this.curve.point(S,E,A)},g.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},g.prototype._extAdd=function(_){var M=this.y.redSub(this.x).redMul(_.y.redSub(_.x)),b=this.y.redAdd(this.x).redMul(_.y.redAdd(_.x)),S=this.t.redMul(this.curve.dd).redMul(_.t),E=this.z.redMul(_.z.redAdd(_.z)),A=b.redSub(M),B=E.redSub(S),R=E.redAdd(S),T=b.redAdd(M),k=A.redMul(B),O=R.redMul(T),U=A.redMul(T),L=B.redMul(R);return this.curve.point(k,O,L,U)},g.prototype._projAdd=function(_){var M=this.z.redMul(_.z),b=M.redSqr(),S=this.x.redMul(_.x),E=this.y.redMul(_.y),A=this.curve.d.redMul(S).redMul(E),B=b.redSub(A),R=b.redAdd(A),T=this.x.redAdd(this.y).redMul(_.x.redAdd(_.y)).redISub(S).redISub(E),k=M.redMul(B).redMul(T),O,U;return this.curve.twisted?(O=M.redMul(R).redMul(E.redSub(this.curve._mulA(S))),U=B.redMul(R)):(O=M.redMul(R).redMul(E.redSub(S)),U=this.curve._mulC(B).redMul(R)),this.curve.point(k,O,U)},g.prototype.add=function(_){return this.isInfinity()?_:_.isInfinity()?this:this.curve.extended?this._extAdd(_):this._projAdd(_)},g.prototype.mul=function(_){return this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve._wnafMul(this,_)},g.prototype.mulAdd=function(_,M,b){return this.curve._wnafMulAdd(1,[this,M],[_,b],2,!1)},g.prototype.jmulAdd=function(_,M,b){return this.curve._wnafMulAdd(1,[this,M],[_,b],2,!0)},g.prototype.normalize=function(){if(this.zOne)return this;var _=this.z.redInvm();return this.x=this.x.redMul(_),this.y=this.y.redMul(_),this.t&&(this.t=this.t.redMul(_)),this.z=this.curve.one,this.zOne=!0,this},g.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},g.prototype.getX=function(){return this.normalize(),this.x.fromRed()},g.prototype.getY=function(){return this.normalize(),this.y.fromRed()},g.prototype.eq=function(_){return this===_||this.getX().cmp(_.getX())===0&&this.getY().cmp(_.getY())===0},g.prototype.eqXToP=function(_){var M=_.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(M)===0)return!0;for(var b=_.clone(),S=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(M.redIAdd(S),this.x.cmp(M)===0)return!0}},g.prototype.toP=g.prototype.normalize,g.prototype.mixedAdd=g.prototype.add,edwards}var hasRequiredCurve$1;function requireCurve$1(){return hasRequiredCurve$1||(hasRequiredCurve$1=1,function(c){var n=c;n.base=requireBase$1(),n.short=requireShort(),n.mont=requireMont(),n.edwards=requireEdwards()}(curve$1)),curve$1}var curves={},hash={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var c=requireMinimalisticAssert(),n=requireInherits_browser();utils.inherits=n;function h(e,r){return(e.charCodeAt(r)&64512)!==55296||r<0||r+1>=e.length?!1:(e.charCodeAt(r+1)&64512)===56320}function u(e,r){if(Array.isArray(e))return e.slice();if(!e)return[];var a=[];if(typeof e=="string")if(r){if(r==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),d=0;d<e.length;d+=2)a.push(parseInt(e[d]+e[d+1],16))}else for(var o=0,d=0;d<e.length;d++){var v=e.charCodeAt(d);v<128?a[o++]=v:v<2048?(a[o++]=v>>6|192,a[o++]=v&63|128):h(e,d)?(v=65536+((v&1023)<<10)+(e.charCodeAt(++d)&1023),a[o++]=v>>18|240,a[o++]=v>>12&63|128,a[o++]=v>>6&63|128,a[o++]=v&63|128):(a[o++]=v>>12|224,a[o++]=v>>6&63|128,a[o++]=v&63|128)}else for(d=0;d<e.length;d++)a[d]=e[d]|0;return a}utils.toArray=u;function m(e){for(var r="",a=0;a<e.length;a++)r+=x(e[a].toString(16));return r}utils.toHex=m;function s(e){var r=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return r>>>0}utils.htonl=s;function g(e,r){for(var a="",o=0;o<e.length;o++){var d=e[o];r==="little"&&(d=s(d)),a+=_(d.toString(16))}return a}utils.toHex32=g;function x(e){return e.length===1?"0"+e:e}utils.zero2=x;function _(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}utils.zero8=_;function M(e,r,a,o){var d=a-r;c(d%4===0);for(var v=new Array(d/4),y=0,l=r;y<v.length;y++,l+=4){var t;o==="big"?t=e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:t=e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],v[y]=t>>>0}return v}utils.join32=M;function b(e,r){for(var a=new Array(e.length*4),o=0,d=0;o<e.length;o++,d+=4){var v=e[o];r==="big"?(a[d]=v>>>24,a[d+1]=v>>>16&255,a[d+2]=v>>>8&255,a[d+3]=v&255):(a[d+3]=v>>>24,a[d+2]=v>>>16&255,a[d+1]=v>>>8&255,a[d]=v&255)}return a}utils.split32=b;function S(e,r){return e>>>r|e<<32-r}utils.rotr32=S;function E(e,r){return e<<r|e>>>32-r}utils.rotl32=E;function A(e,r){return e+r>>>0}utils.sum32=A;function B(e,r,a){return e+r+a>>>0}utils.sum32_3=B;function R(e,r,a,o){return e+r+a+o>>>0}utils.sum32_4=R;function T(e,r,a,o,d){return e+r+a+o+d>>>0}utils.sum32_5=T;function k(e,r,a,o){var d=e[r],v=e[r+1],y=o+v>>>0,l=(y<o?1:0)+a+d;e[r]=l>>>0,e[r+1]=y}utils.sum64=k;function O(e,r,a,o){var d=r+o>>>0,v=(d<r?1:0)+e+a;return v>>>0}utils.sum64_hi=O;function U(e,r,a,o){var d=r+o;return d>>>0}utils.sum64_lo=U;function L(e,r,a,o,d,v,y,l){var t=0,p=r;p=p+o>>>0,t+=p<r?1:0,p=p+v>>>0,t+=p<v?1:0,p=p+l>>>0,t+=p<l?1:0;var q=e+a+d+y+t;return q>>>0}utils.sum64_4_hi=L;function Q(e,r,a,o,d,v,y,l){var t=r+o+v+l;return t>>>0}utils.sum64_4_lo=Q;function ie(e,r,a,o,d,v,y,l,t,p){var q=0,I=r;I=I+o>>>0,q+=I<r?1:0,I=I+v>>>0,q+=I<v?1:0,I=I+l>>>0,q+=I<l?1:0,I=I+p>>>0,q+=I<p?1:0;var $=e+a+d+y+t+q;return $>>>0}utils.sum64_5_hi=ie;function we(e,r,a,o,d,v,y,l,t,p){var q=r+o+v+l+p;return q>>>0}utils.sum64_5_lo=we;function ye(e,r,a){var o=r<<32-a|e>>>a;return o>>>0}utils.rotr64_hi=ye;function se(e,r,a){var o=e<<32-a|r>>>a;return o>>>0}utils.rotr64_lo=se;function ke(e,r,a){return e>>>a}utils.shr64_hi=ke;function w(e,r,a){var o=e<<32-a|r>>>a;return o>>>0}return utils.shr64_lo=w,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var c=requireUtils(),n=requireMinimalisticAssert();function h(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=h,h.prototype.update=function(m,s){if(m=c.toArray(m,s),this.pending?this.pending=this.pending.concat(m):this.pending=m,this.pendingTotal+=m.length,this.pending.length>=this._delta8){m=this.pending;var g=m.length%this._delta8;this.pending=m.slice(m.length-g,m.length),this.pending.length===0&&(this.pending=null),m=c.join32(m,0,m.length-g,this.endian);for(var x=0;x<m.length;x+=this._delta32)this._update(m,x,x+this._delta32)}return this},h.prototype.digest=function(m){return this.update(this._pad()),n(this.pending===null),this._digest(m)},h.prototype._pad=function(){var m=this.pendingTotal,s=this._delta8,g=s-(m+this.padLength)%s,x=new Array(g+this.padLength);x[0]=128;for(var _=1;_<g;_++)x[_]=0;if(m<<=3,this.endian==="big"){for(var M=8;M<this.padLength;M++)x[_++]=0;x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=m>>>24&255,x[_++]=m>>>16&255,x[_++]=m>>>8&255,x[_++]=m&255}else for(x[_++]=m&255,x[_++]=m>>>8&255,x[_++]=m>>>16&255,x[_++]=m>>>24&255,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,M=8;M<this.padLength;M++)x[_++]=0;return x},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var c=requireUtils(),n=c.rotr32;function h(b,S,E,A){if(b===0)return u(S,E,A);if(b===1||b===3)return s(S,E,A);if(b===2)return m(S,E,A)}common.ft_1=h;function u(b,S,E){return b&S^~b&E}common.ch32=u;function m(b,S,E){return b&S^b&E^S&E}common.maj32=m;function s(b,S,E){return b^S^E}common.p32=s;function g(b){return n(b,2)^n(b,13)^n(b,22)}common.s0_256=g;function x(b){return n(b,6)^n(b,11)^n(b,25)}common.s1_256=x;function _(b){return n(b,7)^n(b,18)^b>>>3}common.g0_256=_;function M(b){return n(b,17)^n(b,19)^b>>>10}return common.g1_256=M,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var c=requireUtils(),n=requireCommon$1(),h=requireCommon(),u=c.rotl32,m=c.sum32,s=c.sum32_5,g=h.ft_1,x=n.BlockHash,_=[1518500249,1859775393,2400959708,3395469782];function M(){if(!(this instanceof M))return new M;x.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return c.inherits(M,x),_1=M,M.blockSize=512,M.outSize=160,M.hmacStrength=80,M.padLength=64,M.prototype._update=function(S,E){for(var A=this.W,B=0;B<16;B++)A[B]=S[E+B];for(;B<A.length;B++)A[B]=u(A[B-3]^A[B-8]^A[B-14]^A[B-16],1);var R=this.h[0],T=this.h[1],k=this.h[2],O=this.h[3],U=this.h[4];for(B=0;B<A.length;B++){var L=~~(B/20),Q=s(u(R,5),g(L,T,k,O),U,A[B],_[L]);U=O,O=k,k=u(T,30),T=R,R=Q}this.h[0]=m(this.h[0],R),this.h[1]=m(this.h[1],T),this.h[2]=m(this.h[2],k),this.h[3]=m(this.h[3],O),this.h[4]=m(this.h[4],U)},M.prototype._digest=function(S){return S==="hex"?c.toHex32(this.h,"big"):c.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var c=requireUtils(),n=requireCommon$1(),h=requireCommon(),u=requireMinimalisticAssert(),m=c.sum32,s=c.sum32_4,g=c.sum32_5,x=h.ch32,_=h.maj32,M=h.s0_256,b=h.s1_256,S=h.g0_256,E=h.g1_256,A=n.BlockHash,B=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function R(){if(!(this instanceof R))return new R;A.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=B,this.W=new Array(64)}return c.inherits(R,A),_256=R,R.blockSize=512,R.outSize=256,R.hmacStrength=192,R.padLength=64,R.prototype._update=function(k,O){for(var U=this.W,L=0;L<16;L++)U[L]=k[O+L];for(;L<U.length;L++)U[L]=s(E(U[L-2]),U[L-7],S(U[L-15]),U[L-16]);var Q=this.h[0],ie=this.h[1],we=this.h[2],ye=this.h[3],se=this.h[4],ke=this.h[5],w=this.h[6],e=this.h[7];for(u(this.k.length===U.length),L=0;L<U.length;L++){var r=g(e,b(se),x(se,ke,w),this.k[L],U[L]),a=m(M(Q),_(Q,ie,we));e=w,w=ke,ke=se,se=m(ye,r),ye=we,we=ie,ie=Q,Q=m(r,a)}this.h[0]=m(this.h[0],Q),this.h[1]=m(this.h[1],ie),this.h[2]=m(this.h[2],we),this.h[3]=m(this.h[3],ye),this.h[4]=m(this.h[4],se),this.h[5]=m(this.h[5],ke),this.h[6]=m(this.h[6],w),this.h[7]=m(this.h[7],e)},R.prototype._digest=function(k){return k==="hex"?c.toHex32(this.h,"big"):c.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var c=requireUtils(),n=require_256();function h(){if(!(this instanceof h))return new h;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return c.inherits(h,n),_224=h,h.blockSize=512,h.outSize=224,h.hmacStrength=192,h.padLength=64,h.prototype._digest=function(m){return m==="hex"?c.toHex32(this.h.slice(0,7),"big"):c.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var c=requireUtils(),n=requireCommon$1(),h=requireMinimalisticAssert(),u=c.rotr64_hi,m=c.rotr64_lo,s=c.shr64_hi,g=c.shr64_lo,x=c.sum64,_=c.sum64_hi,M=c.sum64_lo,b=c.sum64_4_hi,S=c.sum64_4_lo,E=c.sum64_5_hi,A=c.sum64_5_lo,B=n.BlockHash,R=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function T(){if(!(this instanceof T))return new T;B.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=R,this.W=new Array(160)}c.inherits(T,B),_512=T,T.blockSize=1024,T.outSize=512,T.hmacStrength=192,T.padLength=128,T.prototype._prepareBlock=function(a,o){for(var d=this.W,v=0;v<32;v++)d[v]=a[o+v];for(;v<d.length;v+=2){var y=w(d[v-4],d[v-3]),l=e(d[v-4],d[v-3]),t=d[v-14],p=d[v-13],q=se(d[v-30],d[v-29]),I=ke(d[v-30],d[v-29]),$=d[v-32],G=d[v-31];d[v]=b(y,l,t,p,q,I,$,G),d[v+1]=S(y,l,t,p,q,I,$,G)}},T.prototype._update=function(a,o){this._prepareBlock(a,o);var d=this.W,v=this.h[0],y=this.h[1],l=this.h[2],t=this.h[3],p=this.h[4],q=this.h[5],I=this.h[6],$=this.h[7],G=this.h[8],V=this.h[9],N=this.h[10],W=this.h[11],Z=this.h[12],ne=this.h[13],ee=this.h[14],z=this.h[15];h(this.k.length===d.length);for(var ue=0;ue<d.length;ue+=2){var Ze=ee,Ae=z,qe=we(G,V),nt=ye(G,V),Ne=k(G,V,N,W,Z),ve=O(G,V,N,W,Z,ne),ut=this.k[ue],Ce=this.k[ue+1],je=d[ue],ht=d[ue+1],Ie=E(Ze,Ae,qe,nt,Ne,ve,ut,Ce,je,ht),Le=A(Ze,Ae,qe,nt,Ne,ve,ut,Ce,je,ht);Ze=Q(v,y),Ae=ie(v,y),qe=U(v,y,l,t,p),nt=L(v,y,l,t,p,q);var lt=_(Ze,Ae,qe,nt),$e=M(Ze,Ae,qe,nt);ee=Z,z=ne,Z=N,ne=W,N=G,W=V,G=_(I,$,Ie,Le),V=M($,$,Ie,Le),I=p,$=q,p=l,q=t,l=v,t=y,v=_(Ie,Le,lt,$e),y=M(Ie,Le,lt,$e)}x(this.h,0,v,y),x(this.h,2,l,t),x(this.h,4,p,q),x(this.h,6,I,$),x(this.h,8,G,V),x(this.h,10,N,W),x(this.h,12,Z,ne),x(this.h,14,ee,z)},T.prototype._digest=function(a){return a==="hex"?c.toHex32(this.h,"big"):c.split32(this.h,"big")};function k(r,a,o,d,v){var y=r&o^~r&v;return y<0&&(y+=4294967296),y}function O(r,a,o,d,v,y){var l=a&d^~a&y;return l<0&&(l+=4294967296),l}function U(r,a,o,d,v){var y=r&o^r&v^o&v;return y<0&&(y+=4294967296),y}function L(r,a,o,d,v,y){var l=a&d^a&y^d&y;return l<0&&(l+=4294967296),l}function Q(r,a){var o=u(r,a,28),d=u(a,r,2),v=u(a,r,7),y=o^d^v;return y<0&&(y+=4294967296),y}function ie(r,a){var o=m(r,a,28),d=m(a,r,2),v=m(a,r,7),y=o^d^v;return y<0&&(y+=4294967296),y}function we(r,a){var o=u(r,a,14),d=u(r,a,18),v=u(a,r,9),y=o^d^v;return y<0&&(y+=4294967296),y}function ye(r,a){var o=m(r,a,14),d=m(r,a,18),v=m(a,r,9),y=o^d^v;return y<0&&(y+=4294967296),y}function se(r,a){var o=u(r,a,1),d=u(r,a,8),v=s(r,a,7),y=o^d^v;return y<0&&(y+=4294967296),y}function ke(r,a){var o=m(r,a,1),d=m(r,a,8),v=g(r,a,7),y=o^d^v;return y<0&&(y+=4294967296),y}function w(r,a){var o=u(r,a,19),d=u(a,r,29),v=s(r,a,6),y=o^d^v;return y<0&&(y+=4294967296),y}function e(r,a){var o=m(r,a,19),d=m(a,r,29),v=g(r,a,6),y=o^d^v;return y<0&&(y+=4294967296),y}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var c=requireUtils(),n=require_512();function h(){if(!(this instanceof h))return new h;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return c.inherits(h,n),_384=h,h.blockSize=1024,h.outSize=384,h.hmacStrength=192,h.padLength=128,h.prototype._digest=function(m){return m==="hex"?c.toHex32(this.h.slice(0,12),"big"):c.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var c=requireUtils(),n=requireCommon$1(),h=c.rotl32,u=c.sum32,m=c.sum32_3,s=c.sum32_4,g=n.BlockHash;function x(){if(!(this instanceof x))return new x;g.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}c.inherits(x,g),ripemd.ripemd160=x,x.blockSize=512,x.outSize=160,x.hmacStrength=192,x.padLength=64,x.prototype._update=function(T,k){for(var O=this.h[0],U=this.h[1],L=this.h[2],Q=this.h[3],ie=this.h[4],we=O,ye=U,se=L,ke=Q,w=ie,e=0;e<80;e++){var r=u(h(s(O,_(e,U,L,Q),T[S[e]+k],M(e)),A[e]),ie);O=ie,ie=Q,Q=h(L,10),L=U,U=r,r=u(h(s(we,_(79-e,ye,se,ke),T[E[e]+k],b(e)),B[e]),w),we=w,w=ke,ke=h(se,10),se=ye,ye=r}r=m(this.h[1],L,ke),this.h[1]=m(this.h[2],Q,w),this.h[2]=m(this.h[3],ie,we),this.h[3]=m(this.h[4],O,ye),this.h[4]=m(this.h[0],U,se),this.h[0]=r},x.prototype._digest=function(T){return T==="hex"?c.toHex32(this.h,"little"):c.split32(this.h,"little")};function _(R,T,k,O){return R<=15?T^k^O:R<=31?T&k|~T&O:R<=47?(T|~k)^O:R<=63?T&O|k&~O:T^(k|~O)}function M(R){return R<=15?0:R<=31?1518500249:R<=47?1859775393:R<=63?2400959708:2840853838}function b(R){return R<=15?1352829926:R<=31?1548603684:R<=47?1836072691:R<=63?2053994217:0}var S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],A=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],B=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var c=requireUtils(),n=requireMinimalisticAssert();function h(u,m,s){if(!(this instanceof h))return new h(u,m,s);this.Hash=u,this.blockSize=u.blockSize/8,this.outSize=u.outSize/8,this.inner=null,this.outer=null,this._init(c.toArray(m,s))}return hmac=h,h.prototype._init=function(m){m.length>this.blockSize&&(m=new this.Hash().update(m).digest()),n(m.length<=this.blockSize);for(var s=m.length;s<this.blockSize;s++)m.push(0);for(s=0;s<m.length;s++)m[s]^=54;for(this.inner=new this.Hash().update(m),s=0;s<m.length;s++)m[s]^=106;this.outer=new this.Hash().update(m)},h.prototype.update=function(m,s){return this.inner.update(m,s),this},h.prototype.digest=function(m){return this.outer.update(this.inner.digest()),this.outer.digest(m)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(c){var n=c;n.utils=requireUtils(),n.common=requireCommon$1(),n.sha=requireSha(),n.ripemd=requireRipemd(),n.hmac=requireHmac(),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(c){var n=c,h=requireHash(),u=requireCurve$1(),m=requireUtils$1(),s=m.assert;function g(M){M.type==="short"?this.curve=new u.short(M):M.type==="edwards"?this.curve=new u.edwards(M):this.curve=new u.mont(M),this.g=this.curve.g,this.n=this.curve.n,this.hash=M.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=g;function x(M,b){Object.defineProperty(n,M,{configurable:!0,enumerable:!0,get:function(){var S=new g(b);return Object.defineProperty(n,M,{configurable:!0,enumerable:!0,value:S}),S}})}x("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:h.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),x("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:h.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),x("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:h.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),x("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:h.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),x("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:h.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),x("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:h.sha256,gRed:!1,g:["9"]}),x("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:h.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var _;try{_=requireSecp256k1()}catch{_=void 0}x("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:h.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",_]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var c=requireHash(),n=requireUtils$2(),h=requireMinimalisticAssert();function u(m){if(!(this instanceof u))return new u(m);this.hash=m.hash,this.predResist=!!m.predResist,this.outLen=this.hash.outSize,this.minEntropy=m.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=n.toArray(m.entropy,m.entropyEnc||"hex"),g=n.toArray(m.nonce,m.nonceEnc||"hex"),x=n.toArray(m.pers,m.persEnc||"hex");h(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,g,x)}return hmacDrbg=u,u.prototype._init=function(s,g,x){var _=s.concat(g).concat(x);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var M=0;M<this.V.length;M++)this.K[M]=0,this.V[M]=1;this._update(_),this._reseed=1,this.reseedInterval=281474976710656},u.prototype._hmac=function(){return new c.hmac(this.hash,this.K)},u.prototype._update=function(s){var g=this._hmac().update(this.V).update([0]);s&&(g=g.update(s)),this.K=g.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},u.prototype.reseed=function(s,g,x,_){typeof g!="string"&&(_=x,x=g,g=null),s=n.toArray(s,g),x=n.toArray(x,_),h(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(x||[])),this._reseed=1},u.prototype.generate=function(s,g,x,_){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof g!="string"&&(_=x,x=g,g=null),x&&(x=n.toArray(x,_||"hex"),this._update(x));for(var M=[];M.length<s;)this.V=this._hmac().update(this.V).digest(),M=M.concat(this.V);var b=M.slice(0,s);return this._update(x),this._reseed++,n.encode(b,g)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var c=requireBn$3(),n=requireUtils$1(),h=n.assert;function u(m,s){this.ec=m,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return key$1=u,u.fromPublic=function(s,g,x){return g instanceof u?g:new u(s,{pub:g,pubEnc:x})},u.fromPrivate=function(s,g,x){return g instanceof u?g:new u(s,{priv:g,privEnc:x})},u.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},u.prototype.getPublic=function(s,g){return typeof s=="string"&&(g=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),g?this.pub.encode(g,s):this.pub},u.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},u.prototype._importPrivate=function(s,g){this.priv=new c(s,g||16),this.priv=this.priv.umod(this.ec.curve.n)},u.prototype._importPublic=function(s,g){if(s.x||s.y){this.ec.curve.type==="mont"?h(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&h(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,g)},u.prototype.derive=function(s){return s.validate()||h(s.validate(),"public point not validated"),s.mul(this.priv).getX()},u.prototype.sign=function(s,g,x){return this.ec.sign(s,this,g,x)},u.prototype.verify=function(s,g){return this.ec.verify(s,g,this)},u.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var c=requireBn$3(),n=requireUtils$1(),h=n.assert;function u(_,M){if(_ instanceof u)return _;this._importDER(_,M)||(h(_.r&&_.s,"Signature without r or s"),this.r=new c(_.r,16),this.s=new c(_.s,16),_.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=_.recoveryParam)}signature$1=u;function m(){this.place=0}function s(_,M){var b=_[M.place++];if(!(b&128))return b;var S=b&15;if(S===0||S>4)return!1;for(var E=0,A=0,B=M.place;A<S;A++,B++)E<<=8,E|=_[B],E>>>=0;return E<=127?!1:(M.place=B,E)}function g(_){for(var M=0,b=_.length-1;!_[M]&&!(_[M+1]&128)&&M<b;)M++;return M===0?_:_.slice(M)}u.prototype._importDER=function(M,b){M=n.toArray(M,b);var S=new m;if(M[S.place++]!==48)return!1;var E=s(M,S);if(E===!1||E+S.place!==M.length||M[S.place++]!==2)return!1;var A=s(M,S);if(A===!1)return!1;var B=M.slice(S.place,A+S.place);if(S.place+=A,M[S.place++]!==2)return!1;var R=s(M,S);if(R===!1||M.length!==R+S.place)return!1;var T=M.slice(S.place,R+S.place);if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;if(T[0]===0)if(T[1]&128)T=T.slice(1);else return!1;return this.r=new c(B),this.s=new c(T),this.recoveryParam=null,!0};function x(_,M){if(M<128){_.push(M);return}var b=1+(Math.log(M)/Math.LN2>>>3);for(_.push(b|128);--b;)_.push(M>>>(b<<3)&255);_.push(M)}return u.prototype.toDER=function(M){var b=this.r.toArray(),S=this.s.toArray();for(b[0]&128&&(b=[0].concat(b)),S[0]&128&&(S=[0].concat(S)),b=g(b),S=g(S);!S[0]&&!(S[1]&128);)S=S.slice(1);var E=[2];x(E,b.length),E=E.concat(b),E.push(2),x(E,S.length);var A=E.concat(S),B=[48];return x(B,A.length),B=B.concat(A),n.encode(B,M)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var c=requireBn$3(),n=requireHmacDrbg(),h=requireUtils$1(),u=requireCurves(),m=requireBrorand(),s=h.assert,g=requireKey$1(),x=requireSignature$1();function _(M){if(!(this instanceof _))return new _(M);typeof M=="string"&&(s(Object.prototype.hasOwnProperty.call(u,M),"Unknown curve "+M),M=u[M]),M instanceof u.PresetCurve&&(M={curve:M}),this.curve=M.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=M.curve.g,this.g.precompute(M.curve.n.bitLength()+1),this.hash=M.hash||M.curve.hash}return ec=_,_.prototype.keyPair=function(b){return new g(this,b)},_.prototype.keyFromPrivate=function(b,S){return g.fromPrivate(this,b,S)},_.prototype.keyFromPublic=function(b,S){return g.fromPublic(this,b,S)},_.prototype.genKeyPair=function(b){b||(b={});for(var S=new n({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||m(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),E=this.n.byteLength(),A=this.n.sub(new c(2));;){var B=new c(S.generate(E));if(!(B.cmp(A)>0))return B.iaddn(1),this.keyFromPrivate(B)}},_.prototype._truncateToN=function(b,S){var E=b.byteLength()*8-this.n.bitLength();return E>0&&(b=b.ushrn(E)),!S&&b.cmp(this.n)>=0?b.sub(this.n):b},_.prototype.sign=function(b,S,E,A){typeof E=="object"&&(A=E,E=null),A||(A={}),S=this.keyFromPrivate(S,E),b=this._truncateToN(new c(b,16));for(var B=this.n.byteLength(),R=S.getPrivate().toArray("be",B),T=b.toArray("be",B),k=new n({hash:this.hash,entropy:R,nonce:T,pers:A.pers,persEnc:A.persEnc||"utf8"}),O=this.n.sub(new c(1)),U=0;;U++){var L=A.k?A.k(U):new c(k.generate(this.n.byteLength()));if(L=this._truncateToN(L,!0),!(L.cmpn(1)<=0||L.cmp(O)>=0)){var Q=this.g.mul(L);if(!Q.isInfinity()){var ie=Q.getX(),we=ie.umod(this.n);if(we.cmpn(0)!==0){var ye=L.invm(this.n).mul(we.mul(S.getPrivate()).iadd(b));if(ye=ye.umod(this.n),ye.cmpn(0)!==0){var se=(Q.getY().isOdd()?1:0)|(ie.cmp(we)!==0?2:0);return A.canonical&&ye.cmp(this.nh)>0&&(ye=this.n.sub(ye),se^=1),new x({r:we,s:ye,recoveryParam:se})}}}}}},_.prototype.verify=function(b,S,E,A){b=this._truncateToN(new c(b,16)),E=this.keyFromPublic(E,A),S=new x(S,"hex");var B=S.r,R=S.s;if(B.cmpn(1)<0||B.cmp(this.n)>=0||R.cmpn(1)<0||R.cmp(this.n)>=0)return!1;var T=R.invm(this.n),k=T.mul(b).umod(this.n),O=T.mul(B).umod(this.n),U;return this.curve._maxwellTrick?(U=this.g.jmulAdd(k,E.getPublic(),O),U.isInfinity()?!1:U.eqXToP(B)):(U=this.g.mulAdd(k,E.getPublic(),O),U.isInfinity()?!1:U.getX().umod(this.n).cmp(B)===0)},_.prototype.recoverPubKey=function(M,b,S,E){s((3&S)===S,"The recovery param is more than two bits"),b=new x(b,E);var A=this.n,B=new c(M),R=b.r,T=b.s,k=S&1,O=S>>1;if(R.cmp(this.curve.p.umod(this.curve.n))>=0&&O)throw new Error("Unable to find sencond key candinate");O?R=this.curve.pointFromX(R.add(this.curve.n),k):R=this.curve.pointFromX(R,k);var U=b.r.invm(A),L=A.sub(B).mul(U).umod(A),Q=T.mul(U).umod(A);return this.g.mulAdd(L,R,Q)},_.prototype.getKeyRecoveryParam=function(M,b,S,E){if(b=new x(b,E),b.recoveryParam!==null)return b.recoveryParam;for(var A=0;A<4;A++){var B;try{B=this.recoverPubKey(M,b,A)}catch{continue}if(B.eq(S))return A}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var c=requireUtils$1(),n=c.assert,h=c.parseBytes,u=c.cachedProperty;function m(s,g){this.eddsa=s,this._secret=h(g.secret),s.isPoint(g.pub)?this._pub=g.pub:this._pubBytes=h(g.pub)}return m.fromPublic=function(g,x){return x instanceof m?x:new m(g,{pub:x})},m.fromSecret=function(g,x){return x instanceof m?x:new m(g,{secret:x})},m.prototype.secret=function(){return this._secret},u(m,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),u(m,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),u(m,"privBytes",function(){var g=this.eddsa,x=this.hash(),_=g.encodingLength-1,M=x.slice(0,g.encodingLength);return M[0]&=248,M[_]&=127,M[_]|=64,M}),u(m,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),u(m,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),u(m,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),m.prototype.sign=function(g){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(g,this)},m.prototype.verify=function(g,x){return this.eddsa.verify(g,x,this)},m.prototype.getSecret=function(g){return n(this._secret,"KeyPair is public only"),c.encode(this.secret(),g)},m.prototype.getPublic=function(g){return c.encode(this.pubBytes(),g)},key=m,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var c=requireBn$3(),n=requireUtils$1(),h=n.assert,u=n.cachedProperty,m=n.parseBytes;function s(g,x){this.eddsa=g,typeof x!="object"&&(x=m(x)),Array.isArray(x)&&(x={R:x.slice(0,g.encodingLength),S:x.slice(g.encodingLength)}),h(x.R&&x.S,"Signature without R or S"),g.isPoint(x.R)&&(this._R=x.R),x.S instanceof c&&(this._S=x.S),this._Rencoded=Array.isArray(x.R)?x.R:x.Rencoded,this._Sencoded=Array.isArray(x.S)?x.S:x.Sencoded}return u(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),u(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),u(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),u(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},signature=s,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var c=requireHash(),n=requireCurves(),h=requireUtils$1(),u=h.assert,m=h.parseBytes,s=requireKey(),g=requireSignature();function x(_){if(u(_==="ed25519","only tested with ed25519 so far"),!(this instanceof x))return new x(_);_=n[_].curve,this.curve=_,this.g=_.g,this.g.precompute(_.n.bitLength()+1),this.pointClass=_.point().constructor,this.encodingLength=Math.ceil(_.n.bitLength()/8),this.hash=c.sha512}return eddsa=x,x.prototype.sign=function(M,b){M=m(M);var S=this.keyFromSecret(b),E=this.hashInt(S.messagePrefix(),M),A=this.g.mul(E),B=this.encodePoint(A),R=this.hashInt(B,S.pubBytes(),M).mul(S.priv()),T=E.add(R).umod(this.curve.n);return this.makeSignature({R:A,S:T,Rencoded:B})},x.prototype.verify=function(M,b,S){M=m(M),b=this.makeSignature(b);var E=this.keyFromPublic(S),A=this.hashInt(b.Rencoded(),E.pubBytes(),M),B=this.g.mul(b.S()),R=b.R().add(E.pub().mul(A));return R.eq(B)},x.prototype.hashInt=function(){for(var M=this.hash(),b=0;b<arguments.length;b++)M.update(arguments[b]);return h.intFromLE(M.digest()).umod(this.curve.n)},x.prototype.keyFromPublic=function(M){return s.fromPublic(this,M)},x.prototype.keyFromSecret=function(M){return s.fromSecret(this,M)},x.prototype.makeSignature=function(M){return M instanceof g?M:new g(this,M)},x.prototype.encodePoint=function(M){var b=M.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=M.getX().isOdd()?128:0,b},x.prototype.decodePoint=function(M){M=h.parseBytes(M);var b=M.length-1,S=M.slice(0,b).concat(M[b]&-129),E=(M[b]&128)!==0,A=h.intFromLE(S);return this.curve.pointFromY(A,E)},x.prototype.encodeInt=function(M){return M.toArray("le",this.encodingLength)},x.prototype.decodeInt=function(M){return h.intFromLE(M)},x.prototype.isPoint=function(M){return M instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(c){var n=c;n.version=require$$0.version,n.utils=requireUtils$1(),n.rand=requireBrorand(),n.curve=requireCurve$1(),n.curves=requireCurves(),n.ec=requireEc(),n.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(c){(function(n,h){function u(w,e){if(!w)throw new Error(e||"Assertion failed")}function m(w,e){w.super_=e;var r=function(){};r.prototype=e.prototype,w.prototype=new r,w.prototype.constructor=w}function s(w,e,r){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((e==="le"||e==="be")&&(r=e,e=10),this._init(w||0,e||10,r||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(e){return e instanceof s?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,r){return e.cmp(r)>0?e:r},s.min=function(e,r){return e.cmp(r)<0?e:r},s.prototype._init=function(e,r,a){if(typeof e=="number")return this._initNumber(e,r,a);if(typeof e=="object")return this._initArray(e,r,a);r==="hex"&&(r=16),u(r===(r|0)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;e[0]==="-"&&(o++,this.negative=1),o<e.length&&(r===16?this._parseHex(e,o,a):(this._parseBase(e,r,o),a==="le"&&this._initArray(this.toArray(),r,a)))},s.prototype._initNumber=function(e,r,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(u(e<9007199254740992),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),r,a)},s.prototype._initArray=function(e,r,a){if(u(typeof e.length=="number"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,v,y=0;if(a==="be")for(o=e.length-1,d=0;o>=0;o-=3)v=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(a==="le")for(o=0,d=0;o<e.length;o+=3)v=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function x(w,e){var r=w.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(w,e,r){var a=x(w,r);return r-1>=e&&(a|=x(w,r-1)<<4),a}s.prototype._parseHex=function(e,r,a){this.length=Math.ceil((e.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,v=0,y;if(a==="be")for(o=e.length-1;o>=r;o-=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8;else{var l=e.length-r;for(o=l%2===0?r+1:r;o<e.length;o+=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8}this.strip()};function M(w,e,r,a){for(var o=0,d=Math.min(w.length,r),v=e;v<d;v++){var y=w.charCodeAt(v)-48;o*=a,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(e,r,a){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var v=e.length-a,y=v%o,l=Math.min(v,v-y)+a,t=0,p=a;p<l;p+=o)t=M(e,p,p+o,r),this.imuln(d),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t);if(y!==0){var q=1;for(t=M(e,p,e.length,r),p=0;p<y;p++)q*=r;this.imuln(q),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++)e.words[r]=this.words[r];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,r){e=e||10,r=r|0||1;var a;if(e===16||e==="hex"){a="";for(var o=0,d=0,v=0;v<this.length;v++){var y=this.words[v],l=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||v!==this.length-1?a=b[6-l.length]+l+a:a=l+a,o+=2,o>=26&&(o-=26,v--)}for(d!==0&&(a=d.toString(16)+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(e===(e|0)&&e>=2&&e<=36){var t=S[e],p=E[e];a="";var q=this.clone();for(q.negative=0;!q.isZero();){var I=q.modn(p).toString(e);q=q.idivn(p),q.isZero()?a=I+a:a=b[t-I.length]+I+a}for(this.isZero()&&(a="0"+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return this.length===2?e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?e+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,r){return u(typeof g<"u"),this.toArrayLike(g,e,r)},s.prototype.toArray=function(e,r){return this.toArrayLike(Array,e,r)},s.prototype.toArrayLike=function(e,r,a){var o=this.byteLength(),d=a||Math.max(1,o);u(o<=d,"byte array longer than desired length"),u(d>0,"Requested array length <= 0"),this.strip();var v=r==="le",y=new e(d),l,t,p=this.clone();if(v){for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[t]=l;for(;t<d;t++)y[t]=0}else{for(t=0;t<d-o;t++)y[t]=0;for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[d-t-1]=l}return y},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var r=e,a=0;return r>=4096&&(a+=13,r>>>=13),r>=64&&(a+=7,r>>>=7),r>=8&&(a+=4,r>>>=4),r>=2&&(a+=2,r>>>=2),a+r},s.prototype._zeroBits=function(e){if(e===0)return 26;var r=e,a=0;return r&8191||(a+=13,r>>>=13),r&127||(a+=7,r>>>=7),r&15||(a+=4,r>>>=4),r&3||(a+=2,r>>>=2),r&1||a++,a},s.prototype.bitLength=function(){var e=this.words[this.length-1],r=this._countBits(e);return(this.length-1)*26+r};function A(w){for(var e=new Array(w.bitLength()),r=0;r<e.length;r++){var a=r/26|0,o=r%26;e[r]=(w.words[a]&1<<o)>>>o}return e}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,r=0;r<this.length;r++){var a=this._zeroBits(this.words[r]);if(e+=a,a!==26)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]|e.words[r];return this.strip()},s.prototype.ior=function(e){return u((this.negative|e.negative)===0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var r;this.length>e.length?r=e:r=this;for(var a=0;a<r.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=r.length,this.strip()},s.prototype.iand=function(e){return u((this.negative|e.negative)===0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var r,a;this.length>e.length?(r=this,a=e):(r=e,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(e){return u((this.negative|e.negative)===0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){u(typeof e=="number"&&e>=0);var r=Math.ceil(e/26)|0,a=e%26;this._expand(r),a>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return a>0&&(this.words[o]=~this.words[o]&67108863>>26-a),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,r){u(typeof e=="number"&&e>=0);var a=e/26|0,o=e%26;return this._expand(a+1),r?this.words[a]=this.words[a]|1<<o:this.words[a]=this.words[a]&~(1<<o),this.strip()},s.prototype.iadd=function(e){var r;if(this.negative!==0&&e.negative===0)return this.negative=0,r=this.isub(e),this.negative^=1,this._normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,r=this.isub(e),e.negative=1,r._normSign();var a,o;this.length>e.length?(a=this,o=e):(a=e,o=this);for(var d=0,v=0;v<o.length;v++)r=(a.words[v]|0)+(o.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;for(;d!==0&&v<a.length;v++)r=(a.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;if(this.length=a.length,d!==0)this.words[this.length]=d,this.length++;else if(a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this},s.prototype.add=function(e){var r;return e.negative!==0&&this.negative===0?(e.negative=0,r=this.sub(e),e.negative^=1,r):e.negative===0&&this.negative!==0?(this.negative=0,r=e.sub(this),this.negative=1,r):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);return e.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a=this.cmp(e);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;a>0?(o=this,d=e):(o=e,d=this);for(var v=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;for(;v!==0&&y<o.length;y++)r=(o.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;if(v===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};function B(w,e,r){r.negative=e.negative^w.negative;var a=w.length+e.length|0;r.length=a,a=a-1|0;var o=w.words[0]|0,d=e.words[0]|0,v=o*d,y=v&67108863,l=v/67108864|0;r.words[0]=y;for(var t=1;t<a;t++){for(var p=l>>>26,q=l&67108863,I=Math.min(t,e.length-1),$=Math.max(0,t-w.length+1);$<=I;$++){var G=t-$|0;o=w.words[G]|0,d=e.words[$]|0,v=o*d+q,p+=v/67108864|0,q=v&67108863}r.words[t]=q|0,l=p|0}return l!==0?r.words[t]=l|0:r.length--,r.strip()}var R=function(e,r,a){var o=e.words,d=r.words,v=a.words,y=0,l,t,p,q=o[0]|0,I=q&8191,$=q>>>13,G=o[1]|0,V=G&8191,N=G>>>13,W=o[2]|0,Z=W&8191,ne=W>>>13,ee=o[3]|0,z=ee&8191,ue=ee>>>13,Ze=o[4]|0,Ae=Ze&8191,qe=Ze>>>13,nt=o[5]|0,Ne=nt&8191,ve=nt>>>13,ut=o[6]|0,Ce=ut&8191,je=ut>>>13,ht=o[7]|0,Ie=ht&8191,Le=ht>>>13,lt=o[8]|0,$e=lt&8191,ze=lt>>>13,bt=o[9]|0,K=bt&8191,P=bt>>>13,D=d[0]|0,Y=D&8191,oe=D>>>13,Re=d[1]|0,ce=Re&8191,Te=Re>>>13,ft=d[2]|0,Pe=ft&8191,Ue=ft>>>13,ot=d[3]|0,He=ot&8191,Ve=ot>>>13,pt=d[4]|0,Fe=pt&8191,Ge=pt>>>13,mt=d[5]|0,Ke=mt&8191,We=mt>>>13,vt=d[6]|0,Oe=vt&8191,Je=vt>>>13,j=d[7]|0,F=j&8191,H=j>>>13,C=d[8]|0,J=C&8191,he=C>>>13,xe=d[9]|0,de=xe&8191,ge=xe>>>13;a.negative=e.negative^r.negative,a.length=19,l=Math.imul(I,Y),t=Math.imul(I,oe),t=t+Math.imul($,Y)|0,p=Math.imul($,oe);var tt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,l=Math.imul(V,Y),t=Math.imul(V,oe),t=t+Math.imul(N,Y)|0,p=Math.imul(N,oe),l=l+Math.imul(I,ce)|0,t=t+Math.imul(I,Te)|0,t=t+Math.imul($,ce)|0,p=p+Math.imul($,Te)|0;var Xe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(Z,Y),t=Math.imul(Z,oe),t=t+Math.imul(ne,Y)|0,p=Math.imul(ne,oe),l=l+Math.imul(V,ce)|0,t=t+Math.imul(V,Te)|0,t=t+Math.imul(N,ce)|0,p=p+Math.imul(N,Te)|0,l=l+Math.imul(I,Pe)|0,t=t+Math.imul(I,Ue)|0,t=t+Math.imul($,Pe)|0,p=p+Math.imul($,Ue)|0;var ct=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(ct>>>26)|0,ct&=67108863,l=Math.imul(z,Y),t=Math.imul(z,oe),t=t+Math.imul(ue,Y)|0,p=Math.imul(ue,oe),l=l+Math.imul(Z,ce)|0,t=t+Math.imul(Z,Te)|0,t=t+Math.imul(ne,ce)|0,p=p+Math.imul(ne,Te)|0,l=l+Math.imul(V,Pe)|0,t=t+Math.imul(V,Ue)|0,t=t+Math.imul(N,Pe)|0,p=p+Math.imul(N,Ue)|0,l=l+Math.imul(I,He)|0,t=t+Math.imul(I,Ve)|0,t=t+Math.imul($,He)|0,p=p+Math.imul($,Ve)|0;var rt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(rt>>>26)|0,rt&=67108863,l=Math.imul(Ae,Y),t=Math.imul(Ae,oe),t=t+Math.imul(qe,Y)|0,p=Math.imul(qe,oe),l=l+Math.imul(z,ce)|0,t=t+Math.imul(z,Te)|0,t=t+Math.imul(ue,ce)|0,p=p+Math.imul(ue,Te)|0,l=l+Math.imul(Z,Pe)|0,t=t+Math.imul(Z,Ue)|0,t=t+Math.imul(ne,Pe)|0,p=p+Math.imul(ne,Ue)|0,l=l+Math.imul(V,He)|0,t=t+Math.imul(V,Ve)|0,t=t+Math.imul(N,He)|0,p=p+Math.imul(N,Ve)|0,l=l+Math.imul(I,Fe)|0,t=t+Math.imul(I,Ge)|0,t=t+Math.imul($,Fe)|0,p=p+Math.imul($,Ge)|0;var st=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(st>>>26)|0,st&=67108863,l=Math.imul(Ne,Y),t=Math.imul(Ne,oe),t=t+Math.imul(ve,Y)|0,p=Math.imul(ve,oe),l=l+Math.imul(Ae,ce)|0,t=t+Math.imul(Ae,Te)|0,t=t+Math.imul(qe,ce)|0,p=p+Math.imul(qe,Te)|0,l=l+Math.imul(z,Pe)|0,t=t+Math.imul(z,Ue)|0,t=t+Math.imul(ue,Pe)|0,p=p+Math.imul(ue,Ue)|0,l=l+Math.imul(Z,He)|0,t=t+Math.imul(Z,Ve)|0,t=t+Math.imul(ne,He)|0,p=p+Math.imul(ne,Ve)|0,l=l+Math.imul(V,Fe)|0,t=t+Math.imul(V,Ge)|0,t=t+Math.imul(N,Fe)|0,p=p+Math.imul(N,Ge)|0,l=l+Math.imul(I,Ke)|0,t=t+Math.imul(I,We)|0,t=t+Math.imul($,Ke)|0,p=p+Math.imul($,We)|0;var at=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(at>>>26)|0,at&=67108863,l=Math.imul(Ce,Y),t=Math.imul(Ce,oe),t=t+Math.imul(je,Y)|0,p=Math.imul(je,oe),l=l+Math.imul(Ne,ce)|0,t=t+Math.imul(Ne,Te)|0,t=t+Math.imul(ve,ce)|0,p=p+Math.imul(ve,Te)|0,l=l+Math.imul(Ae,Pe)|0,t=t+Math.imul(Ae,Ue)|0,t=t+Math.imul(qe,Pe)|0,p=p+Math.imul(qe,Ue)|0,l=l+Math.imul(z,He)|0,t=t+Math.imul(z,Ve)|0,t=t+Math.imul(ue,He)|0,p=p+Math.imul(ue,Ve)|0,l=l+Math.imul(Z,Fe)|0,t=t+Math.imul(Z,Ge)|0,t=t+Math.imul(ne,Fe)|0,p=p+Math.imul(ne,Ge)|0,l=l+Math.imul(V,Ke)|0,t=t+Math.imul(V,We)|0,t=t+Math.imul(N,Ke)|0,p=p+Math.imul(N,We)|0,l=l+Math.imul(I,Oe)|0,t=t+Math.imul(I,Je)|0,t=t+Math.imul($,Oe)|0,p=p+Math.imul($,Je)|0;var X=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(X>>>26)|0,X&=67108863,l=Math.imul(Ie,Y),t=Math.imul(Ie,oe),t=t+Math.imul(Le,Y)|0,p=Math.imul(Le,oe),l=l+Math.imul(Ce,ce)|0,t=t+Math.imul(Ce,Te)|0,t=t+Math.imul(je,ce)|0,p=p+Math.imul(je,Te)|0,l=l+Math.imul(Ne,Pe)|0,t=t+Math.imul(Ne,Ue)|0,t=t+Math.imul(ve,Pe)|0,p=p+Math.imul(ve,Ue)|0,l=l+Math.imul(Ae,He)|0,t=t+Math.imul(Ae,Ve)|0,t=t+Math.imul(qe,He)|0,p=p+Math.imul(qe,Ve)|0,l=l+Math.imul(z,Fe)|0,t=t+Math.imul(z,Ge)|0,t=t+Math.imul(ue,Fe)|0,p=p+Math.imul(ue,Ge)|0,l=l+Math.imul(Z,Ke)|0,t=t+Math.imul(Z,We)|0,t=t+Math.imul(ne,Ke)|0,p=p+Math.imul(ne,We)|0,l=l+Math.imul(V,Oe)|0,t=t+Math.imul(V,Je)|0,t=t+Math.imul(N,Oe)|0,p=p+Math.imul(N,Je)|0,l=l+Math.imul(I,F)|0,t=t+Math.imul(I,H)|0,t=t+Math.imul($,F)|0,p=p+Math.imul($,H)|0;var re=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(re>>>26)|0,re&=67108863,l=Math.imul($e,Y),t=Math.imul($e,oe),t=t+Math.imul(ze,Y)|0,p=Math.imul(ze,oe),l=l+Math.imul(Ie,ce)|0,t=t+Math.imul(Ie,Te)|0,t=t+Math.imul(Le,ce)|0,p=p+Math.imul(Le,Te)|0,l=l+Math.imul(Ce,Pe)|0,t=t+Math.imul(Ce,Ue)|0,t=t+Math.imul(je,Pe)|0,p=p+Math.imul(je,Ue)|0,l=l+Math.imul(Ne,He)|0,t=t+Math.imul(Ne,Ve)|0,t=t+Math.imul(ve,He)|0,p=p+Math.imul(ve,Ve)|0,l=l+Math.imul(Ae,Fe)|0,t=t+Math.imul(Ae,Ge)|0,t=t+Math.imul(qe,Fe)|0,p=p+Math.imul(qe,Ge)|0,l=l+Math.imul(z,Ke)|0,t=t+Math.imul(z,We)|0,t=t+Math.imul(ue,Ke)|0,p=p+Math.imul(ue,We)|0,l=l+Math.imul(Z,Oe)|0,t=t+Math.imul(Z,Je)|0,t=t+Math.imul(ne,Oe)|0,p=p+Math.imul(ne,Je)|0,l=l+Math.imul(V,F)|0,t=t+Math.imul(V,H)|0,t=t+Math.imul(N,F)|0,p=p+Math.imul(N,H)|0,l=l+Math.imul(I,J)|0,t=t+Math.imul(I,he)|0,t=t+Math.imul($,J)|0,p=p+Math.imul($,he)|0;var te=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(te>>>26)|0,te&=67108863,l=Math.imul(K,Y),t=Math.imul(K,oe),t=t+Math.imul(P,Y)|0,p=Math.imul(P,oe),l=l+Math.imul($e,ce)|0,t=t+Math.imul($e,Te)|0,t=t+Math.imul(ze,ce)|0,p=p+Math.imul(ze,Te)|0,l=l+Math.imul(Ie,Pe)|0,t=t+Math.imul(Ie,Ue)|0,t=t+Math.imul(Le,Pe)|0,p=p+Math.imul(Le,Ue)|0,l=l+Math.imul(Ce,He)|0,t=t+Math.imul(Ce,Ve)|0,t=t+Math.imul(je,He)|0,p=p+Math.imul(je,Ve)|0,l=l+Math.imul(Ne,Fe)|0,t=t+Math.imul(Ne,Ge)|0,t=t+Math.imul(ve,Fe)|0,p=p+Math.imul(ve,Ge)|0,l=l+Math.imul(Ae,Ke)|0,t=t+Math.imul(Ae,We)|0,t=t+Math.imul(qe,Ke)|0,p=p+Math.imul(qe,We)|0,l=l+Math.imul(z,Oe)|0,t=t+Math.imul(z,Je)|0,t=t+Math.imul(ue,Oe)|0,p=p+Math.imul(ue,Je)|0,l=l+Math.imul(Z,F)|0,t=t+Math.imul(Z,H)|0,t=t+Math.imul(ne,F)|0,p=p+Math.imul(ne,H)|0,l=l+Math.imul(V,J)|0,t=t+Math.imul(V,he)|0,t=t+Math.imul(N,J)|0,p=p+Math.imul(N,he)|0,l=l+Math.imul(I,de)|0,t=t+Math.imul(I,ge)|0,t=t+Math.imul($,de)|0,p=p+Math.imul($,ge)|0;var fe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(fe>>>26)|0,fe&=67108863,l=Math.imul(K,ce),t=Math.imul(K,Te),t=t+Math.imul(P,ce)|0,p=Math.imul(P,Te),l=l+Math.imul($e,Pe)|0,t=t+Math.imul($e,Ue)|0,t=t+Math.imul(ze,Pe)|0,p=p+Math.imul(ze,Ue)|0,l=l+Math.imul(Ie,He)|0,t=t+Math.imul(Ie,Ve)|0,t=t+Math.imul(Le,He)|0,p=p+Math.imul(Le,Ve)|0,l=l+Math.imul(Ce,Fe)|0,t=t+Math.imul(Ce,Ge)|0,t=t+Math.imul(je,Fe)|0,p=p+Math.imul(je,Ge)|0,l=l+Math.imul(Ne,Ke)|0,t=t+Math.imul(Ne,We)|0,t=t+Math.imul(ve,Ke)|0,p=p+Math.imul(ve,We)|0,l=l+Math.imul(Ae,Oe)|0,t=t+Math.imul(Ae,Je)|0,t=t+Math.imul(qe,Oe)|0,p=p+Math.imul(qe,Je)|0,l=l+Math.imul(z,F)|0,t=t+Math.imul(z,H)|0,t=t+Math.imul(ue,F)|0,p=p+Math.imul(ue,H)|0,l=l+Math.imul(Z,J)|0,t=t+Math.imul(Z,he)|0,t=t+Math.imul(ne,J)|0,p=p+Math.imul(ne,he)|0,l=l+Math.imul(V,de)|0,t=t+Math.imul(V,ge)|0,t=t+Math.imul(N,de)|0,p=p+Math.imul(N,ge)|0;var le=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(le>>>26)|0,le&=67108863,l=Math.imul(K,Pe),t=Math.imul(K,Ue),t=t+Math.imul(P,Pe)|0,p=Math.imul(P,Ue),l=l+Math.imul($e,He)|0,t=t+Math.imul($e,Ve)|0,t=t+Math.imul(ze,He)|0,p=p+Math.imul(ze,Ve)|0,l=l+Math.imul(Ie,Fe)|0,t=t+Math.imul(Ie,Ge)|0,t=t+Math.imul(Le,Fe)|0,p=p+Math.imul(Le,Ge)|0,l=l+Math.imul(Ce,Ke)|0,t=t+Math.imul(Ce,We)|0,t=t+Math.imul(je,Ke)|0,p=p+Math.imul(je,We)|0,l=l+Math.imul(Ne,Oe)|0,t=t+Math.imul(Ne,Je)|0,t=t+Math.imul(ve,Oe)|0,p=p+Math.imul(ve,Je)|0,l=l+Math.imul(Ae,F)|0,t=t+Math.imul(Ae,H)|0,t=t+Math.imul(qe,F)|0,p=p+Math.imul(qe,H)|0,l=l+Math.imul(z,J)|0,t=t+Math.imul(z,he)|0,t=t+Math.imul(ue,J)|0,p=p+Math.imul(ue,he)|0,l=l+Math.imul(Z,de)|0,t=t+Math.imul(Z,ge)|0,t=t+Math.imul(ne,de)|0,p=p+Math.imul(ne,ge)|0;var pe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(pe>>>26)|0,pe&=67108863,l=Math.imul(K,He),t=Math.imul(K,Ve),t=t+Math.imul(P,He)|0,p=Math.imul(P,Ve),l=l+Math.imul($e,Fe)|0,t=t+Math.imul($e,Ge)|0,t=t+Math.imul(ze,Fe)|0,p=p+Math.imul(ze,Ge)|0,l=l+Math.imul(Ie,Ke)|0,t=t+Math.imul(Ie,We)|0,t=t+Math.imul(Le,Ke)|0,p=p+Math.imul(Le,We)|0,l=l+Math.imul(Ce,Oe)|0,t=t+Math.imul(Ce,Je)|0,t=t+Math.imul(je,Oe)|0,p=p+Math.imul(je,Je)|0,l=l+Math.imul(Ne,F)|0,t=t+Math.imul(Ne,H)|0,t=t+Math.imul(ve,F)|0,p=p+Math.imul(ve,H)|0,l=l+Math.imul(Ae,J)|0,t=t+Math.imul(Ae,he)|0,t=t+Math.imul(qe,J)|0,p=p+Math.imul(qe,he)|0,l=l+Math.imul(z,de)|0,t=t+Math.imul(z,ge)|0,t=t+Math.imul(ue,de)|0,p=p+Math.imul(ue,ge)|0;var Se=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Se>>>26)|0,Se&=67108863,l=Math.imul(K,Fe),t=Math.imul(K,Ge),t=t+Math.imul(P,Fe)|0,p=Math.imul(P,Ge),l=l+Math.imul($e,Ke)|0,t=t+Math.imul($e,We)|0,t=t+Math.imul(ze,Ke)|0,p=p+Math.imul(ze,We)|0,l=l+Math.imul(Ie,Oe)|0,t=t+Math.imul(Ie,Je)|0,t=t+Math.imul(Le,Oe)|0,p=p+Math.imul(Le,Je)|0,l=l+Math.imul(Ce,F)|0,t=t+Math.imul(Ce,H)|0,t=t+Math.imul(je,F)|0,p=p+Math.imul(je,H)|0,l=l+Math.imul(Ne,J)|0,t=t+Math.imul(Ne,he)|0,t=t+Math.imul(ve,J)|0,p=p+Math.imul(ve,he)|0,l=l+Math.imul(Ae,de)|0,t=t+Math.imul(Ae,ge)|0,t=t+Math.imul(qe,de)|0,p=p+Math.imul(qe,ge)|0;var Ee=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,l=Math.imul(K,Ke),t=Math.imul(K,We),t=t+Math.imul(P,Ke)|0,p=Math.imul(P,We),l=l+Math.imul($e,Oe)|0,t=t+Math.imul($e,Je)|0,t=t+Math.imul(ze,Oe)|0,p=p+Math.imul(ze,Je)|0,l=l+Math.imul(Ie,F)|0,t=t+Math.imul(Ie,H)|0,t=t+Math.imul(Le,F)|0,p=p+Math.imul(Le,H)|0,l=l+Math.imul(Ce,J)|0,t=t+Math.imul(Ce,he)|0,t=t+Math.imul(je,J)|0,p=p+Math.imul(je,he)|0,l=l+Math.imul(Ne,de)|0,t=t+Math.imul(Ne,ge)|0,t=t+Math.imul(ve,de)|0,p=p+Math.imul(ve,ge)|0;var me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(me>>>26)|0,me&=67108863,l=Math.imul(K,Oe),t=Math.imul(K,Je),t=t+Math.imul(P,Oe)|0,p=Math.imul(P,Je),l=l+Math.imul($e,F)|0,t=t+Math.imul($e,H)|0,t=t+Math.imul(ze,F)|0,p=p+Math.imul(ze,H)|0,l=l+Math.imul(Ie,J)|0,t=t+Math.imul(Ie,he)|0,t=t+Math.imul(Le,J)|0,p=p+Math.imul(Le,he)|0,l=l+Math.imul(Ce,de)|0,t=t+Math.imul(Ce,ge)|0,t=t+Math.imul(je,de)|0,p=p+Math.imul(je,ge)|0;var _e=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(_e>>>26)|0,_e&=67108863,l=Math.imul(K,F),t=Math.imul(K,H),t=t+Math.imul(P,F)|0,p=Math.imul(P,H),l=l+Math.imul($e,J)|0,t=t+Math.imul($e,he)|0,t=t+Math.imul(ze,J)|0,p=p+Math.imul(ze,he)|0,l=l+Math.imul(Ie,de)|0,t=t+Math.imul(Ie,ge)|0,t=t+Math.imul(Le,de)|0,p=p+Math.imul(Le,ge)|0;var De=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(De>>>26)|0,De&=67108863,l=Math.imul(K,J),t=Math.imul(K,he),t=t+Math.imul(P,J)|0,p=Math.imul(P,he),l=l+Math.imul($e,de)|0,t=t+Math.imul($e,ge)|0,t=t+Math.imul(ze,de)|0,p=p+Math.imul(ze,ge)|0;var Me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Me>>>26)|0,Me&=67108863,l=Math.imul(K,de),t=Math.imul(K,ge),t=t+Math.imul(P,de)|0,p=Math.imul(P,ge);var Be=(y+l|0)+((t&8191)<<13)|0;return y=(p+(t>>>13)|0)+(Be>>>26)|0,Be&=67108863,v[0]=tt,v[1]=Xe,v[2]=ct,v[3]=rt,v[4]=st,v[5]=at,v[6]=X,v[7]=re,v[8]=te,v[9]=fe,v[10]=le,v[11]=pe,v[12]=Se,v[13]=Ee,v[14]=me,v[15]=_e,v[16]=De,v[17]=Me,v[18]=Be,y!==0&&(v[19]=y,a.length++),a};Math.imul||(R=B);function T(w,e,r){r.negative=e.negative^w.negative,r.length=w.length+e.length;for(var a=0,o=0,d=0;d<r.length-1;d++){var v=o;o=0;for(var y=a&67108863,l=Math.min(d,e.length-1),t=Math.max(0,d-w.length+1);t<=l;t++){var p=d-t,q=w.words[p]|0,I=e.words[t]|0,$=q*I,G=$&67108863;v=v+($/67108864|0)|0,G=G+y|0,y=G&67108863,v=v+(G>>>26)|0,o+=v>>>26,v&=67108863}r.words[d]=y,a=v,v=o}return a!==0?r.words[d]=a:r.length--,r.strip()}function k(w,e,r){var a=new O;return a.mulp(w,e,r)}s.prototype.mulTo=function(e,r){var a,o=this.length+e.length;return this.length===10&&e.length===10?a=R(this,e,r):o<63?a=B(this,e,r):o<1024?a=T(this,e,r):a=k(this,e,r),a};function O(w,e){this.x=w,this.y=e}O.prototype.makeRBT=function(e){for(var r=new Array(e),a=s.prototype._countBits(e)-1,o=0;o<e;o++)r[o]=this.revBin(o,a,e);return r},O.prototype.revBin=function(e,r,a){if(e===0||e===a-1)return e;for(var o=0,d=0;d<r;d++)o|=(e&1)<<r-d-1,e>>=1;return o},O.prototype.permute=function(e,r,a,o,d,v){for(var y=0;y<v;y++)o[y]=r[e[y]],d[y]=a[e[y]]},O.prototype.transform=function(e,r,a,o,d,v){this.permute(v,e,r,a,o,d);for(var y=1;y<d;y<<=1)for(var l=y<<1,t=Math.cos(2*Math.PI/l),p=Math.sin(2*Math.PI/l),q=0;q<d;q+=l)for(var I=t,$=p,G=0;G<y;G++){var V=a[q+G],N=o[q+G],W=a[q+G+y],Z=o[q+G+y],ne=I*W-$*Z;Z=I*Z+$*W,W=ne,a[q+G]=V+W,o[q+G]=N+Z,a[q+G+y]=V-W,o[q+G+y]=N-Z,G!==l&&(ne=t*I-p*$,$=t*$+p*I,I=ne)}},O.prototype.guessLen13b=function(e,r){var a=Math.max(r,e)|1,o=a&1,d=0;for(a=a/2|0;a;a=a>>>1)d++;return 1<<d+1+o},O.prototype.conjugate=function(e,r,a){if(!(a<=1))for(var o=0;o<a/2;o++){var d=e[o];e[o]=e[a-o-1],e[a-o-1]=d,d=r[o],r[o]=-r[a-o-1],r[a-o-1]=-d}},O.prototype.normalize13b=function(e,r){for(var a=0,o=0;o<r/2;o++){var d=Math.round(e[2*o+1]/r)*8192+Math.round(e[2*o]/r)+a;e[o]=d&67108863,d<67108864?a=0:a=d/67108864|0}return e},O.prototype.convert13b=function(e,r,a,o){for(var d=0,v=0;v<r;v++)d=d+(e[v]|0),a[2*v]=d&8191,d=d>>>13,a[2*v+1]=d&8191,d=d>>>13;for(v=2*r;v<o;++v)a[v]=0;u(d===0),u((d&-8192)===0)},O.prototype.stub=function(e){for(var r=new Array(e),a=0;a<e;a++)r[a]=0;return r},O.prototype.mulp=function(e,r,a){var o=2*this.guessLen13b(e.length,r.length),d=this.makeRBT(o),v=this.stub(o),y=new Array(o),l=new Array(o),t=new Array(o),p=new Array(o),q=new Array(o),I=new Array(o),$=a.words;$.length=o,this.convert13b(e.words,e.length,y,o),this.convert13b(r.words,r.length,p,o),this.transform(y,v,l,t,o,d),this.transform(p,v,q,I,o,d);for(var G=0;G<o;G++){var V=l[G]*q[G]-t[G]*I[G];t[G]=l[G]*I[G]+t[G]*q[G],l[G]=V}return this.conjugate(l,t,o),this.transform(l,t,$,v,o,d),this.conjugate($,v,o),this.normalize13b($,o),a.negative=e.negative^r.negative,a.length=e.length+r.length,a.strip()},s.prototype.mul=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),this.mulTo(e,r)},s.prototype.mulf=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),k(this,e,r)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){u(typeof e=="number"),u(e<67108864);for(var r=0,a=0;a<this.length;a++){var o=(this.words[a]|0)*e,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[a]=d&67108863}return r!==0&&(this.words[a]=r,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var r=A(e);if(r.length===0)return new s(1);for(var a=this,o=0;o<r.length&&r[o]===0;o++,a=a.sqr());if(++o<r.length)for(var d=a.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(a=a.mul(d));return a},s.prototype.iushln=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var v=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,l=(this.words[d]|0)-y<<r;this.words[d]=l|v,v=y>>>26-r}v&&(this.words[d]=v,this.length++)}if(a!==0){for(d=this.length-1;d>=0;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(e){return u(this.negative===0),this.iushln(e)},s.prototype.iushrn=function(e,r,a){u(typeof e=="number"&&e>=0);var o;r?o=(r-r%26)/26:o=0;var d=e%26,v=Math.min((e-d)/26,this.length),y=67108863^67108863>>>d<<d,l=a;if(o-=v,o=Math.max(0,o),l){for(var t=0;t<v;t++)l.words[t]=this.words[t];l.length=v}if(v!==0)if(this.length>v)for(this.length-=v,t=0;t<this.length;t++)this.words[t]=this.words[t+v];else this.words[0]=0,this.length=1;var p=0;for(t=this.length-1;t>=0&&(p!==0||t>=o);t--){var q=this.words[t]|0;this.words[t]=p<<26-d|q>>>d,p=q&y}return l&&p!==0&&(l.words[l.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,r,a){return u(this.negative===0),this.iushrn(e,r,a)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return!1;var d=this.words[a];return!!(d&o)},s.prototype.imaskn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(r!==0&&a++,this.length=Math.min(a,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return u(typeof e=="number"),u(e<67108864),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(e){if(u(typeof e=="number"),u(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,r,a){var o=e.length+a,d;this._expand(o);var v,y=0;for(d=0;d<e.length;d++){v=(this.words[d+a]|0)+y;var l=(e.words[d]|0)*r;v-=l&67108863,y=(v>>26)-(l/67108864|0),this.words[d+a]=v&67108863}for(;d<this.length-a;d++)v=(this.words[d+a]|0)+y,y=v>>26,this.words[d+a]=v&67108863;if(y===0)return this.strip();for(u(y===-1),y=0,d=0;d<this.length;d++)v=-(this.words[d]|0)+y,y=v>>26,this.words[d]=v&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,r){var a=this.length-e.length,o=this.clone(),d=e,v=d.words[d.length-1]|0,y=this._countBits(v);a=26-y,a!==0&&(d=d.ushln(a),o.iushln(a),v=d.words[d.length-1]|0);var l=o.length-d.length,t;if(r!=="mod"){t=new s(null),t.length=l+1,t.words=new Array(t.length);for(var p=0;p<t.length;p++)t.words[p]=0}var q=o.clone()._ishlnsubmul(d,1,l);q.negative===0&&(o=q,t&&(t.words[l]=1));for(var I=l-1;I>=0;I--){var $=(o.words[d.length+I]|0)*67108864+(o.words[d.length+I-1]|0);for($=Math.min($/v|0,67108863),o._ishlnsubmul(d,$,I);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(d,1,I),o.isZero()||(o.negative^=1);t&&(t.words[I]=$)}return t&&t.strip(),o.strip(),r!=="div"&&a!==0&&o.iushrn(a),{div:t||null,mod:o}},s.prototype.divmod=function(e,r,a){if(u(!e.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,v;return this.negative!==0&&e.negative===0?(v=this.neg().divmod(e,r),r!=="mod"&&(o=v.div.neg()),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.iadd(e)),{div:o,mod:d}):this.negative===0&&e.negative!==0?(v=this.divmod(e.neg(),r),r!=="mod"&&(o=v.div.neg()),{div:o,mod:v.mod}):this.negative&e.negative?(v=this.neg().divmod(e.neg(),r),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.isub(e)),{div:v.div,mod:d}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:e.length===1?r==="div"?{div:this.divn(e.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,r)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var a=r.div.negative!==0?r.mod.isub(e):r.mod,o=e.ushrn(1),d=e.andln(1),v=a.cmp(o);return v<0||d===1&&v===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(e){u(e<=67108863);for(var r=(1<<26)%e,a=0,o=this.length-1;o>=0;o--)a=(r*a+(this.words[o]|0))%e;return a},s.prototype.idivn=function(e){u(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var o=(this.words[a]|0)+r*67108864;this.words[a]=o/e|0,r=o%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=new s(0),y=new s(1),l=0;r.isEven()&&a.isEven();)r.iushrn(1),a.iushrn(1),++l;for(var t=a.clone(),p=r.clone();!r.isZero();){for(var q=0,I=1;!(r.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(r.iushrn(q);q-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(t),d.isub(p)),o.iushrn(1),d.iushrn(1);for(var $=0,G=1;!(a.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(a.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(t),y.isub(p)),v.iushrn(1),y.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(v),d.isub(y)):(a.isub(r),v.isub(o),y.isub(d))}return{a:v,b:y,gcd:a.iushln(l)}},s.prototype._invmp=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=a.clone();r.cmpn(1)>0&&a.cmpn(1)>0;){for(var y=0,l=1;!(r.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(v),o.iushrn(1);for(var t=0,p=1;!(a.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(a.iushrn(t);t-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(d)):(a.isub(r),d.isub(o))}var q;return r.cmpn(1)===0?q=o:q=d,q.cmpn(0)<0&&q.iadd(e),q},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone(),a=e.clone();r.negative=0,a.negative=0;for(var o=0;r.isEven()&&a.isEven();o++)r.iushrn(1),a.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=r.cmp(a);if(d<0){var v=r;r=a,a=v}else if(d===0||a.cmpn(1)===0)break;r.isub(a)}while(!0);return a.iushln(o)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){u(typeof e=="number");var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return this._expand(a+1),this.words[a]|=o,this;for(var d=o,v=a;d!==0&&v<this.length;v++){var y=this.words[v]|0;y+=d,d=y>>>26,y&=67108863,this.words[v]=y}return d!==0&&(this.words[v]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1)a=1;else{r&&(e=-e),u(e<=67108863,"Number is too big");var o=this.words[0]|0;a=o===e?0:o<e?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var r=0,a=this.length-1;a>=0;a--){var o=this.words[a]|0,d=e.words[a]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(e){return this.cmpn(e)===1},s.prototype.gt=function(e){return this.cmp(e)===1},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return this.cmpn(e)===-1},s.prototype.lt=function(e){return this.cmp(e)===-1},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return this.cmpn(e)===0},s.prototype.eq=function(e){return this.cmp(e)===0},s.red=function(e){return new se(e)},s.prototype.toRed=function(e){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return u(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return u(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var U={k256:null,p224:null,p192:null,p25519:null};function L(w,e){this.name=w,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},L.prototype.ireduce=function(e){var r=e,a;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),a=r.bitLength();while(a>this.n);var o=a<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},L.prototype.split=function(e,r){e.iushrn(this.n,0,r)},L.prototype.imulK=function(e){return e.imul(this.k)};function Q(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(Q,L),Q.prototype.split=function(e,r){for(var a=4194303,o=Math.min(e.length,9),d=0;d<o;d++)r.words[d]=e.words[d];if(r.length=o,e.length<=9){e.words[0]=0,e.length=1;return}var v=e.words[9];for(r.words[r.length++]=v&a,d=10;d<e.length;d++){var y=e.words[d]|0;e.words[d-10]=(y&a)<<4|v>>>22,v=y}v>>>=22,e.words[d-10]=v,v===0&&e.length>10?e.length-=10:e.length-=9},Q.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,a=0;a<e.length;a++){var o=e.words[a]|0;r+=o*977,e.words[a]=r&67108863,r=o*64+(r/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e};function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ie,L);function we(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(we,L);function ye(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ye,L),ye.prototype.imulK=function(e){for(var r=0,a=0;a<e.length;a++){var o=(e.words[a]|0)*19+r,d=o&67108863;o>>>=26,e.words[a]=d,r=o}return r!==0&&(e.words[e.length++]=r),e},s._prime=function(e){if(U[e])return U[e];var r;if(e==="k256")r=new Q;else if(e==="p224")r=new ie;else if(e==="p192")r=new we;else if(e==="p25519")r=new ye;else throw new Error("Unknown prime "+e);return U[e]=r,r};function se(w){if(typeof w=="string"){var e=s._prime(w);this.m=e.p,this.prime=e}else u(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}se.prototype._verify1=function(e){u(e.negative===0,"red works only with positives"),u(e.red,"red works only with red numbers")},se.prototype._verify2=function(e,r){u((e.negative|r.negative)===0,"red works only with positives"),u(e.red&&e.red===r.red,"red works only with red numbers")},se.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},se.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},se.prototype.add=function(e,r){this._verify2(e,r);var a=e.add(r);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},se.prototype.iadd=function(e,r){this._verify2(e,r);var a=e.iadd(r);return a.cmp(this.m)>=0&&a.isub(this.m),a},se.prototype.sub=function(e,r){this._verify2(e,r);var a=e.sub(r);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},se.prototype.isub=function(e,r){this._verify2(e,r);var a=e.isub(r);return a.cmpn(0)<0&&a.iadd(this.m),a},se.prototype.shl=function(e,r){return this._verify1(e),this.imod(e.ushln(r))},se.prototype.imul=function(e,r){return this._verify2(e,r),this.imod(e.imul(r))},se.prototype.mul=function(e,r){return this._verify2(e,r),this.imod(e.mul(r))},se.prototype.isqr=function(e){return this.imul(e,e.clone())},se.prototype.sqr=function(e){return this.mul(e,e)},se.prototype.sqrt=function(e){if(e.isZero())return e.clone();var r=this.m.andln(3);if(u(r%2===1),r===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(e,a)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);u(!o.isZero());var v=new s(1).toRed(this),y=v.redNeg(),l=this.m.subn(1).iushrn(1),t=this.m.bitLength();for(t=new s(2*t*t).toRed(this);this.pow(t,l).cmp(y)!==0;)t.redIAdd(y);for(var p=this.pow(t,o),q=this.pow(e,o.addn(1).iushrn(1)),I=this.pow(e,o),$=d;I.cmp(v)!==0;){for(var G=I,V=0;G.cmp(v)!==0;V++)G=G.redSqr();u(V<$);var N=this.pow(p,new s(1).iushln($-V-1));q=q.redMul(N),p=N.redSqr(),I=I.redMul(p),$=V}return q},se.prototype.invm=function(e){var r=e._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},se.prototype.pow=function(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var a=4,o=new Array(1<<a);o[0]=new s(1).toRed(this),o[1]=e;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],e);var v=o[0],y=0,l=0,t=r.bitLength()%26;for(t===0&&(t=26),d=r.length-1;d>=0;d--){for(var p=r.words[d],q=t-1;q>=0;q--){var I=p>>q&1;if(v!==o[0]&&(v=this.sqr(v)),I===0&&y===0){l=0;continue}y<<=1,y|=I,l++,!(l!==a&&(d!==0||q!==0))&&(v=this.mul(v,o[y]),l=0,y=0)}t=26}return v},se.prototype.convertTo=function(e){var r=e.umod(this.m);return r===e?r.clone():r},se.prototype.convertFrom=function(e){var r=e.clone();return r.red=null,r},s.mont=function(e){return new ke(e)};function ke(w){se.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(ke,se),ke.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},ke.prototype.convertFrom=function(e){var r=this.imod(e.mul(this.rinv));return r.red=null,r},ke.prototype.imul=function(e,r){if(e.isZero()||r.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.mul=function(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var a=e.mul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.invm=function(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,commonjsGlobal)}(bn$2)),bn$2.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(c,n){if(c.indexOf)return c.indexOf(n);for(var h=0;h<c.length;h++)if(c[h]===n)return h;return-1},Object_keys=function(c){if(Object.keys)return Object.keys(c);var n=[];for(var h in c)n.push(h);return n},forEach=function(c,n){if(c.forEach)return c.forEach(n);for(var h=0;h<c.length;h++)n(c[h],h,c)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(c,n,h){Object.defineProperty(c,n,{writable:!0,enumerable:!1,configurable:!0,value:h})}}catch{return function(n,h,u){n[h]=u}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(n){if(!(this instanceof Script))return new Script(n);this.code=n};Script.prototype.runInContext=function(c){if(!(c instanceof Context))throw new TypeError("needs a 'context' argument.");var n=document.createElement("iframe");n.style||(n.style={}),n.style.display="none",document.body.appendChild(n);var h=n.contentWindow,u=h.eval,m=h.execScript;!u&&m&&(m.call(h,"null"),u=h.eval),forEach(Object_keys(c),function(x){h[x]=c[x]}),forEach(globals,function(x){c[x]&&(h[x]=c[x])});var s=Object_keys(h),g=u.call(h,this.code);return forEach(Object_keys(h),function(x){(x in c||indexOf(s,x)===-1)&&(c[x]=h[x])}),forEach(globals,function(x){x in c||defineProp(c,x,h[x])}),document.body.removeChild(n),g},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(c){var n=Script.createContext(c),h=this.runInContext(n);return c&&forEach(Object_keys(n),function(u){c[u]=n[u]}),h},forEach(Object_keys(Script.prototype),function(c){exports[c]=Script[c]=function(n){var h=Script(n);return h[c].apply(h,[].slice.call(arguments,1))}}),exports.isContext=function(c){return c instanceof Context},exports.createScript=function(c){return exports.Script(c)},exports.createContext=Script.createContext=function(c){var n=new Context;return typeof c=="object"&&forEach(Object_keys(c),function(h){n[h]=c[h]}),n}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(c){var n=requireAsn1$1(),h=requireInherits_browser(),u=c;u.define=function(g,x){return new m(g,x)};function m(s,g){this.name=s,this.body=g,this.decoders={},this.encoders={}}m.prototype._createNamed=function(g){var x;try{x=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{x=function(M){this._initNamed(M)}}return h(x,g),x.prototype._initNamed=function(M){g.call(this,M)},new x(this)},m.prototype._getDecoder=function(g){return g=g||"der",this.decoders.hasOwnProperty(g)||(this.decoders[g]=this._createNamed(n.decoders[g])),this.decoders[g]},m.prototype.decode=function(g,x,_){return this._getDecoder(x).decode(g,_)},m.prototype._getEncoder=function(g){return g=g||"der",this.encoders.hasOwnProperty(g)||(this.encoders[g]=this._createNamed(n.encoders[g])),this.encoders[g]},m.prototype.encode=function(g,x,_){return this._getEncoder(x).encode(g,_)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var c=requireInherits_browser();function n(u){this._reporterState={obj:null,path:[],options:u||{},errors:[]}}reporter.Reporter=n,n.prototype.isError=function(m){return m instanceof h},n.prototype.save=function(){var m=this._reporterState;return{obj:m.obj,pathLen:m.path.length}},n.prototype.restore=function(m){var s=this._reporterState;s.obj=m.obj,s.path=s.path.slice(0,m.pathLen)},n.prototype.enterKey=function(m){return this._reporterState.path.push(m)},n.prototype.exitKey=function(m){var s=this._reporterState;s.path=s.path.slice(0,m-1)},n.prototype.leaveKey=function(m,s,g){var x=this._reporterState;this.exitKey(m),x.obj!==null&&(x.obj[s]=g)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){var m=this._reporterState,s=m.obj;return m.obj={},s},n.prototype.leaveObject=function(m){var s=this._reporterState,g=s.obj;return s.obj=m,g},n.prototype.error=function(m){var s,g=this._reporterState,x=m instanceof h;if(x?s=m:s=new h(g.path.map(function(_){return"["+JSON.stringify(_)+"]"}).join(""),m.message||m,m.stack),!g.options.partial)throw s;return x||g.errors.push(s),s},n.prototype.wrapResult=function(m){var s=this._reporterState;return s.options.partial?{result:this.isError(m)?null:m,errors:s.errors}:m};function h(u,m){this.path=u,this.rethrow(m)}return c(h,Error),h.prototype.rethrow=function(m){if(this.message=m+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,h),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var c=requireInherits_browser(),n=requireBase().Reporter,h=require$$0$1.Buffer;function u(s,g){if(n.call(this,g),!h.isBuffer(s)){this.error("Input not Buffer");return}this.base=s,this.offset=0,this.length=s.length}c(u,n),buffer.DecoderBuffer=u,u.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},u.prototype.restore=function(g){var x=new u(this.base);return x.offset=g.offset,x.length=this.offset,this.offset=g.offset,n.prototype.restore.call(this,g.reporter),x},u.prototype.isEmpty=function(){return this.offset===this.length},u.prototype.readUInt8=function(g){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(g||"DecoderBuffer overrun")},u.prototype.skip=function(g,x){if(!(this.offset+g<=this.length))return this.error(x||"DecoderBuffer overrun");var _=new u(this.base);return _._reporterState=this._reporterState,_.offset=this.offset,_.length=this.offset+g,this.offset+=g,_},u.prototype.raw=function(g){return this.base.slice(g?g.offset:this.offset,this.length)};function m(s,g){if(Array.isArray(s))this.length=0,this.value=s.map(function(x){return x instanceof m||(x=new m(x,g)),this.length+=x.length,x},this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return g.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=h.byteLength(s);else if(h.isBuffer(s))this.value=s,this.length=s.length;else return g.error("Unsupported type: "+typeof s)}return buffer.EncoderBuffer=m,m.prototype.join=function(g,x){return g||(g=new h(this.length)),x||(x=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(_){_.join(g,x),x+=_.length}):(typeof this.value=="number"?g[x]=this.value:typeof this.value=="string"?g.write(this.value,x):h.isBuffer(this.value)&&this.value.copy(g,x),x+=this.length)),g},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var c=requireBase().Reporter,n=requireBase().EncoderBuffer,h=requireBase().DecoderBuffer,u=requireMinimalisticAssert(),m=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(m),g=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function x(M,b){var S={};this._baseState=S,S.enc=M,S.parent=b||null,S.children=null,S.tag=null,S.args=null,S.reverseArgs=null,S.choice=null,S.optional=!1,S.any=!1,S.obj=!1,S.use=null,S.useDecoder=null,S.key=null,S.default=null,S.explicit=null,S.implicit=null,S.contains=null,S.parent||(S.children=[],this._wrap())}node=x;var _=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return x.prototype.clone=function(){var b=this._baseState,S={};_.forEach(function(A){S[A]=b[A]});var E=new this.constructor(S.parent);return E._baseState=S,E},x.prototype._wrap=function(){var b=this._baseState;s.forEach(function(S){this[S]=function(){var A=new this.constructor(this);return b.children.push(A),A[S].apply(A,arguments)}},this)},x.prototype._init=function(b){var S=this._baseState;u(S.parent===null),b.call(this),S.children=S.children.filter(function(E){return E._baseState.parent===this},this),u.equal(S.children.length,1,"Root node can have only one child")},x.prototype._useArgs=function(b){var S=this._baseState,E=b.filter(function(A){return A instanceof this.constructor},this);b=b.filter(function(A){return!(A instanceof this.constructor)},this),E.length!==0&&(u(S.children===null),S.children=E,E.forEach(function(A){A._baseState.parent=this},this)),b.length!==0&&(u(S.args===null),S.args=b,S.reverseArgs=b.map(function(A){if(typeof A!="object"||A.constructor!==Object)return A;var B={};return Object.keys(A).forEach(function(R){R==(R|0)&&(R|=0);var T=A[R];B[T]=R}),B}))},g.forEach(function(M){x.prototype[M]=function(){var S=this._baseState;throw new Error(M+" not implemented for encoding: "+S.enc)}}),m.forEach(function(M){x.prototype[M]=function(){var S=this._baseState,E=Array.prototype.slice.call(arguments);return u(S.tag===null),S.tag=M,this._useArgs(E),this}}),x.prototype.use=function(b){u(b);var S=this._baseState;return u(S.use===null),S.use=b,this},x.prototype.optional=function(){var b=this._baseState;return b.optional=!0,this},x.prototype.def=function(b){var S=this._baseState;return u(S.default===null),S.default=b,S.optional=!0,this},x.prototype.explicit=function(b){var S=this._baseState;return u(S.explicit===null&&S.implicit===null),S.explicit=b,this},x.prototype.implicit=function(b){var S=this._baseState;return u(S.explicit===null&&S.implicit===null),S.implicit=b,this},x.prototype.obj=function(){var b=this._baseState,S=Array.prototype.slice.call(arguments);return b.obj=!0,S.length!==0&&this._useArgs(S),this},x.prototype.key=function(b){var S=this._baseState;return u(S.key===null),S.key=b,this},x.prototype.any=function(){var b=this._baseState;return b.any=!0,this},x.prototype.choice=function(b){var S=this._baseState;return u(S.choice===null),S.choice=b,this._useArgs(Object.keys(b).map(function(E){return b[E]})),this},x.prototype.contains=function(b){var S=this._baseState;return u(S.use===null),S.contains=b,this},x.prototype._decode=function(b,S){var E=this._baseState;if(E.parent===null)return b.wrapResult(E.children[0]._decode(b,S));var A=E.default,B=!0,R=null;if(E.key!==null&&(R=b.enterKey(E.key)),E.optional){var T=null;if(E.explicit!==null?T=E.explicit:E.implicit!==null?T=E.implicit:E.tag!==null&&(T=E.tag),T===null&&!E.any){var k=b.save();try{E.choice===null?this._decodeGeneric(E.tag,b,S):this._decodeChoice(b,S),B=!0}catch{B=!1}b.restore(k)}else if(B=this._peekTag(b,T,E.any),b.isError(B))return B}var O;if(E.obj&&B&&(O=b.enterObject()),B){if(E.explicit!==null){var U=this._decodeTag(b,E.explicit);if(b.isError(U))return U;b=U}var L=b.offset;if(E.use===null&&E.choice===null){if(E.any)var k=b.save();var Q=this._decodeTag(b,E.implicit!==null?E.implicit:E.tag,E.any);if(b.isError(Q))return Q;E.any?A=b.raw(k):b=Q}if(S&&S.track&&E.tag!==null&&S.track(b.path(),L,b.length,"tagged"),S&&S.track&&E.tag!==null&&S.track(b.path(),b.offset,b.length,"content"),E.any?A=A:E.choice===null?A=this._decodeGeneric(E.tag,b,S):A=this._decodeChoice(b,S),b.isError(A))return A;if(!E.any&&E.choice===null&&E.children!==null&&E.children.forEach(function(ye){ye._decode(b,S)}),E.contains&&(E.tag==="octstr"||E.tag==="bitstr")){var ie=new h(A);A=this._getUse(E.contains,b._reporterState.obj)._decode(ie,S)}}return E.obj&&B&&(A=b.leaveObject(O)),E.key!==null&&(A!==null||B===!0)?b.leaveKey(R,E.key,A):R!==null&&b.exitKey(R),A},x.prototype._decodeGeneric=function(b,S,E){var A=this._baseState;return b==="seq"||b==="set"?null:b==="seqof"||b==="setof"?this._decodeList(S,b,A.args[0],E):/str$/.test(b)?this._decodeStr(S,b,E):b==="objid"&&A.args?this._decodeObjid(S,A.args[0],A.args[1],E):b==="objid"?this._decodeObjid(S,null,null,E):b==="gentime"||b==="utctime"?this._decodeTime(S,b,E):b==="null_"?this._decodeNull(S,E):b==="bool"?this._decodeBool(S,E):b==="objDesc"?this._decodeStr(S,b,E):b==="int"||b==="enum"?this._decodeInt(S,A.args&&A.args[0],E):A.use!==null?this._getUse(A.use,S._reporterState.obj)._decode(S,E):S.error("unknown tag: "+b)},x.prototype._getUse=function(b,S){var E=this._baseState;return E.useDecoder=this._use(b,S),u(E.useDecoder._baseState.parent===null),E.useDecoder=E.useDecoder._baseState.children[0],E.implicit!==E.useDecoder._baseState.implicit&&(E.useDecoder=E.useDecoder.clone(),E.useDecoder._baseState.implicit=E.implicit),E.useDecoder},x.prototype._decodeChoice=function(b,S){var E=this._baseState,A=null,B=!1;return Object.keys(E.choice).some(function(R){var T=b.save(),k=E.choice[R];try{var O=k._decode(b,S);if(b.isError(O))return!1;A={type:R,value:O},B=!0}catch{return b.restore(T),!1}return!0},this),B?A:b.error("Choice not matched")},x.prototype._createEncoderBuffer=function(b){return new n(b,this.reporter)},x.prototype._encode=function(b,S,E){var A=this._baseState;if(!(A.default!==null&&A.default===b)){var B=this._encodeValue(b,S,E);if(B!==void 0&&!this._skipDefault(B,S,E))return B}},x.prototype._encodeValue=function(b,S,E){var A=this._baseState;if(A.parent===null)return A.children[0]._encode(b,S||new c);var k=null;if(this.reporter=S,A.optional&&b===void 0)if(A.default!==null)b=A.default;else return;var B=null,R=!1;if(A.any)k=this._createEncoderBuffer(b);else if(A.choice)k=this._encodeChoice(b,S);else if(A.contains)B=this._getUse(A.contains,E)._encode(b,S),R=!0;else if(A.children)B=A.children.map(function(L){if(L._baseState.tag==="null_")return L._encode(null,S,b);if(L._baseState.key===null)return S.error("Child should have a key");var Q=S.enterKey(L._baseState.key);if(typeof b!="object")return S.error("Child expected, but input is not object");var ie=L._encode(b[L._baseState.key],S,b);return S.leaveKey(Q),ie},this).filter(function(L){return L}),B=this._createEncoderBuffer(B);else if(A.tag==="seqof"||A.tag==="setof"){if(!(A.args&&A.args.length===1))return S.error("Too many args for : "+A.tag);if(!Array.isArray(b))return S.error("seqof/setof, but data is not Array");var T=this.clone();T._baseState.implicit=null,B=this._createEncoderBuffer(b.map(function(L){var Q=this._baseState;return this._getUse(Q.args[0],b)._encode(L,S)},T))}else A.use!==null?k=this._getUse(A.use,E)._encode(b,S):(B=this._encodePrimitive(A.tag,b),R=!0);var k;if(!A.any&&A.choice===null){var O=A.implicit!==null?A.implicit:A.tag,U=A.implicit===null?"universal":"context";O===null?A.use===null&&S.error("Tag could be omitted only for .use()"):A.use===null&&(k=this._encodeComposite(O,R,U,B))}return A.explicit!==null&&(k=this._encodeComposite(A.explicit,!1,"context",k)),k},x.prototype._encodeChoice=function(b,S){var E=this._baseState,A=E.choice[b.type];return A||u(!1,b.type+" not found in "+JSON.stringify(Object.keys(E.choice))),A._encode(b.value,S)},x.prototype._encodePrimitive=function(b,S){var E=this._baseState;if(/str$/.test(b))return this._encodeStr(S,b);if(b==="objid"&&E.args)return this._encodeObjid(S,E.reverseArgs[0],E.args[1]);if(b==="objid")return this._encodeObjid(S,null,null);if(b==="gentime"||b==="utctime")return this._encodeTime(S,b);if(b==="null_")return this._encodeNull();if(b==="int"||b==="enum")return this._encodeInt(S,E.args&&E.reverseArgs[0]);if(b==="bool")return this._encodeBool(S);if(b==="objDesc")return this._encodeStr(S,b);throw new Error("Unsupported tag: "+b)},x.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},x.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(b)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(c){var n=c;n.Reporter=requireReporter().Reporter,n.DecoderBuffer=requireBuffer().DecoderBuffer,n.EncoderBuffer=requireBuffer().EncoderBuffer,n.Node=requireNode()}(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(c){var n=requireConstants();c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=n._reverse(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=n._reverse(c.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(c){var n=c;n._reverse=function(u){var m={};return Object.keys(u).forEach(function(s){(s|0)==s&&(s=s|0);var g=u[s];m[g]=s}),m},n.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var c=requireInherits_browser(),n=requireAsn1$1(),h=n.base,u=n.bignum,m=n.constants.der;function s(M){this.enc="der",this.name=M.name,this.entity=M,this.tree=new g,this.tree._init(M.body)}der_1$1=s,s.prototype.decode=function(b,S){return b instanceof h.DecoderBuffer||(b=new h.DecoderBuffer(b,S)),this.tree._decode(b,S)};function g(M){h.Node.call(this,"der",M)}c(g,h.Node),g.prototype._peekTag=function(b,S,E){if(b.isEmpty())return!1;var A=b.save(),B=x(b,'Failed to peek tag: "'+S+'"');return b.isError(B)?B:(b.restore(A),B.tag===S||B.tagStr===S||B.tagStr+"of"===S||E)},g.prototype._decodeTag=function(b,S,E){var A=x(b,'Failed to decode tag of "'+S+'"');if(b.isError(A))return A;var B=_(b,A.primitive,'Failed to get length of "'+S+'"');if(b.isError(B))return B;if(!E&&A.tag!==S&&A.tagStr!==S&&A.tagStr+"of"!==S)return b.error('Failed to match tag: "'+S+'"');if(A.primitive||B!==null)return b.skip(B,'Failed to match body of: "'+S+'"');var R=b.save(),T=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(T)?T:(B=b.offset-R.offset,b.restore(R),b.skip(B,'Failed to match body of: "'+S+'"'))},g.prototype._skipUntilEnd=function(b,S){for(;;){var E=x(b,S);if(b.isError(E))return E;var A=_(b,E.primitive,S);if(b.isError(A))return A;var B;if(E.primitive||A!==null?B=b.skip(A):B=this._skipUntilEnd(b,S),b.isError(B))return B;if(E.tagStr==="end")break}},g.prototype._decodeList=function(b,S,E,A){for(var B=[];!b.isEmpty();){var R=this._peekTag(b,"end");if(b.isError(R))return R;var T=E.decode(b,"der",A);if(b.isError(T)&&R)break;B.push(T)}return B},g.prototype._decodeStr=function(b,S){if(S==="bitstr"){var E=b.readUInt8();return b.isError(E)?E:{unused:E,data:b.raw()}}else if(S==="bmpstr"){var A=b.raw();if(A.length%2===1)return b.error("Decoding of string type: bmpstr length mismatch");for(var B="",R=0;R<A.length/2;R++)B+=String.fromCharCode(A.readUInt16BE(R*2));return B}else if(S==="numstr"){var T=b.raw().toString("ascii");return this._isNumstr(T)?T:b.error("Decoding of string type: numstr unsupported characters")}else{if(S==="octstr")return b.raw();if(S==="objDesc")return b.raw();if(S==="printstr"){var k=b.raw().toString("ascii");return this._isPrintstr(k)?k:b.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(S)?b.raw().toString():b.error("Decoding of string type: "+S+" unsupported")}},g.prototype._decodeObjid=function(b,S,E){for(var A,B=[],R=0;!b.isEmpty();){var T=b.readUInt8();R<<=7,R|=T&127,T&128||(B.push(R),R=0)}T&128&&B.push(R);var k=B[0]/40|0,O=B[0]%40;if(E?A=B:A=[k,O].concat(B.slice(1)),S){var U=S[A.join(" ")];U===void 0&&(U=S[A.join(".")]),U!==void 0&&(A=U)}return A},g.prototype._decodeTime=function(b,S){var E=b.raw().toString();if(S==="gentime")var A=E.slice(0,4)|0,B=E.slice(4,6)|0,R=E.slice(6,8)|0,T=E.slice(8,10)|0,k=E.slice(10,12)|0,O=E.slice(12,14)|0;else if(S==="utctime"){var A=E.slice(0,2)|0,B=E.slice(2,4)|0,R=E.slice(4,6)|0,T=E.slice(6,8)|0,k=E.slice(8,10)|0,O=E.slice(10,12)|0;A<70?A=2e3+A:A=1900+A}else return b.error("Decoding "+S+" time is not supported yet");return Date.UTC(A,B-1,R,T,k,O,0)},g.prototype._decodeNull=function(b){return null},g.prototype._decodeBool=function(b){var S=b.readUInt8();return b.isError(S)?S:S!==0},g.prototype._decodeInt=function(b,S){var E=b.raw(),A=new u(E);return S&&(A=S[A.toString(10)]||A),A},g.prototype._use=function(b,S){return typeof b=="function"&&(b=b(S)),b._getDecoder("der").tree};function x(M,b){var S=M.readUInt8(b);if(M.isError(S))return S;var E=m.tagClass[S>>6],A=(S&32)===0;if((S&31)===31){var B=S;for(S=0;(B&128)===128;){if(B=M.readUInt8(b),M.isError(B))return B;S<<=7,S|=B&127}}else S&=31;var R=m.tag[S];return{cls:E,primitive:A,tag:S,tagStr:R}}function _(M,b,S){var E=M.readUInt8(S);if(M.isError(E))return E;if(!b&&E===128)return null;if(!(E&128))return E;var A=E&127;if(A>4)return M.error("length octect is too long");E=0;for(var B=0;B<A;B++){E<<=8;var R=M.readUInt8(S);if(M.isError(R))return R;E|=R}return E}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var c=requireInherits_browser(),n=require$$0$1.Buffer,h=requireDer$1();function u(m){h.call(this,m),this.enc="pem"}return c(u,h),pem$1=u,u.prototype.decode=function(s,g){for(var x=s.toString().split(/[\r\n]+/g),_=g.label.toUpperCase(),M=/^-----(BEGIN|END) ([^-]+)-----$/,b=-1,S=-1,E=0;E<x.length;E++){var A=x[E].match(M);if(A!==null&&A[2]===_)if(b===-1){if(A[1]!=="BEGIN")break;b=E}else{if(A[1]!=="END")break;S=E;break}}if(b===-1||S===-1)throw new Error("PEM section not found for: "+_);var B=x.slice(b+1,S).join("");B.replace(/[^a-z0-9\+\/=]+/gi,"");var R=new n(B,"base64");return h.prototype.decode.call(this,R,g)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(c){var n=c;n.der=requireDer$1(),n.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var c=requireInherits_browser(),n=require$$0$1.Buffer,h=requireAsn1$1(),u=h.base,m=h.constants.der;function s(M){this.enc="der",this.name=M.name,this.entity=M,this.tree=new g,this.tree._init(M.body)}der_1=s,s.prototype.encode=function(b,S){return this.tree._encode(b,S).join()};function g(M){u.Node.call(this,"der",M)}c(g,u.Node),g.prototype._encodeComposite=function(b,S,E,A){var B=_(b,S,E,this.reporter);if(A.length<128){var k=new n(2);return k[0]=B,k[1]=A.length,this._createEncoderBuffer([k,A])}for(var R=1,T=A.length;T>=256;T>>=8)R++;var k=new n(2+R);k[0]=B,k[1]=128|R;for(var T=1+R,O=A.length;O>0;T--,O>>=8)k[T]=O&255;return this._createEncoderBuffer([k,A])},g.prototype._encodeStr=function(b,S){if(S==="bitstr")return this._createEncoderBuffer([b.unused|0,b.data]);if(S==="bmpstr"){for(var E=new n(b.length*2),A=0;A<b.length;A++)E.writeUInt16BE(b.charCodeAt(A),A*2);return this._createEncoderBuffer(E)}else return S==="numstr"?this._isNumstr(b)?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: numstr supports only digits and space"):S==="printstr"?this._isPrintstr(b)?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(S)?this._createEncoderBuffer(b):S==="objDesc"?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: "+S+" unsupported")},g.prototype._encodeObjid=function(b,S,E){if(typeof b=="string"){if(!S)return this.reporter.error("string objid given, but no values map found");if(!S.hasOwnProperty(b))return this.reporter.error("objid not found in values map");b=S[b].split(/[\s\.]+/g);for(var A=0;A<b.length;A++)b[A]|=0}else if(Array.isArray(b)){b=b.slice();for(var A=0;A<b.length;A++)b[A]|=0}if(!Array.isArray(b))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(b));if(!E){if(b[1]>=40)return this.reporter.error("Second objid identifier OOB");b.splice(0,2,b[0]*40+b[1])}for(var B=0,A=0;A<b.length;A++){var R=b[A];for(B++;R>=128;R>>=7)B++}for(var T=new n(B),k=T.length-1,A=b.length-1;A>=0;A--){var R=b[A];for(T[k--]=R&127;(R>>=7)>0;)T[k--]=128|R&127}return this._createEncoderBuffer(T)};function x(M){return M<10?"0"+M:M}g.prototype._encodeTime=function(b,S){var E,A=new Date(b);return S==="gentime"?E=[x(A.getFullYear()),x(A.getUTCMonth()+1),x(A.getUTCDate()),x(A.getUTCHours()),x(A.getUTCMinutes()),x(A.getUTCSeconds()),"Z"].join(""):S==="utctime"?E=[x(A.getFullYear()%100),x(A.getUTCMonth()+1),x(A.getUTCDate()),x(A.getUTCHours()),x(A.getUTCMinutes()),x(A.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+S+" time is not supported yet"),this._encodeStr(E,"octstr")},g.prototype._encodeNull=function(){return this._createEncoderBuffer("")},g.prototype._encodeInt=function(b,S){if(typeof b=="string"){if(!S)return this.reporter.error("String int or enum given, but no values map");if(!S.hasOwnProperty(b))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(b));b=S[b]}if(typeof b!="number"&&!n.isBuffer(b)){var E=b.toArray();!b.sign&&E[0]&128&&E.unshift(0),b=new n(E)}if(n.isBuffer(b)){var A=b.length;b.length===0&&A++;var R=new n(A);return b.copy(R),b.length===0&&(R[0]=0),this._createEncoderBuffer(R)}if(b<128)return this._createEncoderBuffer(b);if(b<256)return this._createEncoderBuffer([0,b]);for(var A=1,B=b;B>=256;B>>=8)A++;for(var R=new Array(A),B=R.length-1;B>=0;B--)R[B]=b&255,b>>=8;return R[0]&128&&R.unshift(0),this._createEncoderBuffer(new n(R))},g.prototype._encodeBool=function(b){return this._createEncoderBuffer(b?255:0)},g.prototype._use=function(b,S){return typeof b=="function"&&(b=b(S)),b._getEncoder("der").tree},g.prototype._skipDefault=function(b,S,E){var A=this._baseState,B;if(A.default===null)return!1;var R=b.join();if(A.defaultBuffer===void 0&&(A.defaultBuffer=this._encodeValue(A.default,S,E).join()),R.length!==A.defaultBuffer.length)return!1;for(B=0;B<R.length;B++)if(R[B]!==A.defaultBuffer[B])return!1;return!0};function _(M,b,S,E){var A;if(M==="seqof"?M="seq":M==="setof"&&(M="set"),m.tagByName.hasOwnProperty(M))A=m.tagByName[M];else if(typeof M=="number"&&(M|0)===M)A=M;else return E.error("Unknown tag: "+M);return A>=31?E.error("Multi-octet tag encoding unsupported"):(b||(A|=32),A|=m.tagClassByName[S||"universal"]<<6,A)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var c=requireInherits_browser(),n=requireDer();function h(u){n.call(this,u),this.enc="pem"}return c(h,n),pem=h,h.prototype.encode=function(m,s){for(var g=n.prototype.encode.call(this,m),x=g.toString("base64"),_=["-----BEGIN "+s.label+"-----"],M=0;M<x.length;M+=64)_.push(x.slice(M,M+64));return _.push("-----END "+s.label+"-----"),_.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(c){var n=c;n.der=requireDer(),n.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(c){var n=c;n.bignum=requireBn$2(),n.define=requireApi().define,n.base=requireBase(),n.constants=requireConstants(),n.decoders=requireDecoders(),n.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var c=requireAsn1$1(),n=c.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),h=c.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),u=c.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),m=c.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(u),this.key("subjectPublicKey").bitstr())}),s=c.define("RelativeDistinguishedName",function(){this.setof(h)}),g=c.define("RDNSequence",function(){this.seqof(s)}),x=c.define("Name",function(){this.choice({rdnSequence:this.use(g)})}),_=c.define("Validity",function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))}),M=c.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),b=c.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(u),this.key("issuer").use(x),this.key("validity").use(_),this.key("subject").use(x),this.key("subjectPublicKeyInfo").use(m),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(M).optional())}),S=c.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(b),this.key("signatureAlgorithm").use(u),this.key("signatureValue").bitstr())});return certificate=S,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var c=requireAsn1$1();asn1$1.certificate=requireCertificate();var n=c.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=n;var h=c.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=h;var u=c.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),m=c.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(u),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=m;var s=c.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(u),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=s;var g=c.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=g;var x=c.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=x,asn1$1.DSAparam=c.define("DSAparam",function(){this.int()});var _=c.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),M=c.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(_),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=M,asn1$1.signature=c.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}var require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var c=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,h=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,u=requireEvp_bytestokey(),m=requireBrowser$6(),s=requireSafeBuffer$1().Buffer;return fixProc=function(g,x){var _=g.toString(),M=_.match(c),b;if(M){var E="aes"+M[1],A=s.from(M[2],"hex"),B=s.from(M[3].replace(/[\r\n]/g,""),"base64"),R=u(x,A.slice(0,8),parseInt(M[1],10)).key,T=[],k=m.createDecipheriv(E,R,A);T.push(k.update(B)),T.push(k.final()),b=s.concat(T)}else{var S=_.match(h);b=s.from(S[2].replace(/[\r\n]/g,""),"base64")}var O=_.match(n)[1];return{tag:O,data:b}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var c=requireAsn1(),n=require$$1,h=requireFixProc(),u=requireBrowser$6(),m=requireBrowser$7(),s=requireSafeBuffer$1().Buffer;function g(_,M){var b=_.algorithm.decrypt.kde.kdeparams.salt,S=parseInt(_.algorithm.decrypt.kde.kdeparams.iters.toString(),10),E=n[_.algorithm.decrypt.cipher.algo.join(".")],A=_.algorithm.decrypt.cipher.iv,B=_.subjectPrivateKey,R=parseInt(E.split("-")[1],10)/8,T=m.pbkdf2Sync(M,b,S,R,"sha1"),k=u.createDecipheriv(E,T,A),O=[];return O.push(k.update(B)),O.push(k.final()),s.concat(O)}function x(_){var M;typeof _=="object"&&!s.isBuffer(_)&&(M=_.passphrase,_=_.key),typeof _=="string"&&(_=s.from(_));var b=h(_,M),S=b.tag,E=b.data,A,B;switch(S){case"CERTIFICATE":B=c.certificate.decode(E,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(B||(B=c.PublicKey.decode(E,"der")),A=B.algorithm.algorithm.join("."),A){case"1.2.840.113549.1.1.1":return c.RSAPublicKey.decode(B.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return B.subjectPrivateKey=B.subjectPublicKey,{type:"ec",data:B};case"1.2.840.10040.4.1":return B.algorithm.params.pub_key=c.DSAparam.decode(B.subjectPublicKey.data,"der"),{type:"dsa",data:B.algorithm.params};default:throw new Error("unknown key id "+A)}case"ENCRYPTED PRIVATE KEY":E=c.EncryptedPrivateKey.decode(E,"der"),E=g(E,M);case"PRIVATE KEY":switch(B=c.PrivateKey.decode(E,"der"),A=B.algorithm.algorithm.join("."),A){case"1.2.840.113549.1.1.1":return c.RSAPrivateKey.decode(B.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:B.algorithm.curve,privateKey:c.ECPrivateKey.decode(B.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return B.algorithm.params.priv_key=c.DSAparam.decode(B.subjectPrivateKey,"der"),{type:"dsa",params:B.algorithm.params};default:throw new Error("unknown key id "+A)}case"RSA PUBLIC KEY":return c.RSAPublicKey.decode(E,"der");case"RSA PRIVATE KEY":return c.RSAPrivateKey.decode(E,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:c.DSAPrivateKey.decode(E,"der")};case"EC PRIVATE KEY":return E=c.ECPrivateKey.decode(E,"der"),{curve:E.parameters.value,privateKey:E.privateKey};default:throw new Error("unknown key type "+S)}}return x.signature=c.signature,parseAsn1=x,parseAsn1}var require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var c=requireSafeBuffer$1().Buffer,n=requireBrowser$8(),h=requireBrowserifyRsa(),u=requireElliptic().ec,m=requireBn$4(),s=requireParseAsn1(),g=require$$4,x=1;function _(k,O,U,L,Q){var ie=s(O);if(ie.curve){if(L!=="ecdsa"&&L!=="ecdsa/rsa")throw new Error("wrong private key type");return M(k,ie)}else if(ie.type==="dsa"){if(L!=="dsa")throw new Error("wrong private key type");return b(k,ie,U)}if(L!=="rsa"&&L!=="ecdsa/rsa")throw new Error("wrong private key type");if(O.padding!==void 0&&O.padding!==x)throw new Error("illegal or unsupported padding mode");k=c.concat([Q,k]);for(var we=ie.modulus.byteLength(),ye=[0,1];k.length+ye.length+1<we;)ye.push(255);ye.push(0);for(var se=-1;++se<k.length;)ye.push(k[se]);var ke=h(ye,ie);return ke}function M(k,O){var U=g[O.curve.join(".")];if(!U)throw new Error("unknown curve "+O.curve.join("."));var L=new u(U),Q=L.keyFromPrivate(O.privateKey),ie=Q.sign(k);return c.from(ie.toDER())}function b(k,O,U){for(var L=O.params.priv_key,Q=O.params.p,ie=O.params.q,we=O.params.g,ye=new m(0),se,ke=A(k,ie).mod(ie),w=!1,e=E(L,ie,k,U);w===!1;)se=R(ie,e,U),ye=T(we,se,Q,ie),w=se.invm(ie).imul(ke.add(L.mul(ye))).mod(ie),w.cmpn(0)===0&&(w=!1,ye=new m(0));return S(ye,w)}function S(k,O){k=k.toArray(),O=O.toArray(),k[0]&128&&(k=[0].concat(k)),O[0]&128&&(O=[0].concat(O));var U=k.length+O.length+4,L=[48,U,2,k.length];return L=L.concat(k,[2,O.length],O),c.from(L)}function E(k,O,U,L){if(k=c.from(k.toArray()),k.length<O.byteLength()){var Q=c.alloc(O.byteLength()-k.length);k=c.concat([Q,k])}var ie=U.length,we=B(U,O),ye=c.alloc(ie);ye.fill(1);var se=c.alloc(ie);return se=n(L,se).update(ye).update(c.from([0])).update(k).update(we).digest(),ye=n(L,se).update(ye).digest(),se=n(L,se).update(ye).update(c.from([1])).update(k).update(we).digest(),ye=n(L,se).update(ye).digest(),{k:se,v:ye}}function A(k,O){var U=new m(k),L=(k.length<<3)-O.bitLength();return L>0&&U.ishrn(L),U}function B(k,O){k=A(k,O),k=k.mod(O);var U=c.from(k.toArray());if(U.length<O.byteLength()){var L=c.alloc(O.byteLength()-U.length);U=c.concat([L,U])}return U}function R(k,O,U){var L,Q;do{for(L=c.alloc(0);L.length*8<k.bitLength();)O.v=n(U,O.k).update(O.v).digest(),L=c.concat([L,O.v]);Q=A(L,k),O.k=n(U,O.k).update(O.v).update(c.from([0])).digest(),O.v=n(U,O.k).update(O.v).digest()}while(Q.cmp(k)!==-1);return Q}function T(k,O,U,L){return k.toRed(m.mont(U)).redPow(O).fromRed().mod(L)}return sign.exports=_,sign.exports.getKey=E,sign.exports.makeKey=R,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var c=requireSafeBuffer$1().Buffer,n=requireBn$4(),h=requireElliptic().ec,u=requireParseAsn1(),m=require$$4;function s(M,b,S,E,A){var B=u(S);if(B.type==="ec"){if(E!=="ecdsa"&&E!=="ecdsa/rsa")throw new Error("wrong public key type");return g(M,b,B)}else if(B.type==="dsa"){if(E!=="dsa")throw new Error("wrong public key type");return x(M,b,B)}if(E!=="rsa"&&E!=="ecdsa/rsa")throw new Error("wrong public key type");b=c.concat([A,b]);for(var R=B.modulus.byteLength(),T=[1],k=0;b.length+T.length+2<R;)T.push(255),k+=1;T.push(0);for(var O=-1;++O<b.length;)T.push(b[O]);T=c.from(T);var U=n.mont(B.modulus);M=new n(M).toRed(U),M=M.redPow(new n(B.publicExponent)),M=c.from(M.fromRed().toArray());var L=k<8?1:0;for(R=Math.min(M.length,T.length),M.length!==T.length&&(L=1),O=-1;++O<R;)L|=M[O]^T[O];return L===0}function g(M,b,S){var E=m[S.data.algorithm.curve.join(".")];if(!E)throw new Error("unknown curve "+S.data.algorithm.curve.join("."));var A=new h(E),B=S.data.subjectPrivateKey.data;return A.verify(b,M,B)}function x(M,b,S){var E=S.data.p,A=S.data.q,B=S.data.g,R=S.data.pub_key,T=u.signature.decode(M,"der"),k=T.s,O=T.r;_(k,A),_(O,A);var U=n.mont(E),L=k.invm(A),Q=B.toRed(U).redPow(new n(b).mul(L).mod(A)).fromRed().mul(R.toRed(U).redPow(O.mul(L).mod(A)).fromRed()).mod(E).mod(A);return Q.cmp(O)===0}function _(M,b){if(M.cmpn(0)<=0)throw new Error("invalid sig");if(M.cmp(b)>=0)throw new Error("invalid sig")}return verify_1=s,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var c=requireSafeBuffer$1().Buffer,n=requireBrowser$9(),h=requireReadableBrowser(),u=requireInherits_browser(),m=requireSign(),s=requireVerify(),g=require$$6;Object.keys(g).forEach(function(S){g[S].id=c.from(g[S].id,"hex"),g[S.toLowerCase()]=g[S]});function x(S){h.Writable.call(this);var E=g[S];if(!E)throw new Error("Unknown message digest");this._hashType=E.hash,this._hash=n(E.hash),this._tag=E.id,this._signType=E.sign}u(x,h.Writable),x.prototype._write=function(E,A,B){this._hash.update(E),B()},x.prototype.update=function(E,A){return this._hash.update(typeof E=="string"?c.from(E,A):E),this},x.prototype.sign=function(E,A){this.end();var B=this._hash.digest(),R=m(B,E,this._hashType,this._signType,this._tag);return A?R.toString(A):R};function _(S){h.Writable.call(this);var E=g[S];if(!E)throw new Error("Unknown message digest");this._hash=n(E.hash),this._tag=E.id,this._signType=E.sign}u(_,h.Writable),_.prototype._write=function(E,A,B){this._hash.update(E),B()},_.prototype.update=function(E,A){return this._hash.update(typeof E=="string"?c.from(E,A):E),this},_.prototype.verify=function(E,A,B){var R=typeof A=="string"?c.from(A,B):A;this.end();var T=this._hash.digest();return s(R,T,E,this._signType,this._tag)};function M(S){return new x(S)}function b(S){return new _(S)}return browser$3={Sign:M,Verify:b,createSign:M,createVerify:b},browser$3}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(c){(function(n,h){function u(w,e){if(!w)throw new Error(e||"Assertion failed")}function m(w,e){w.super_=e;var r=function(){};r.prototype=e.prototype,w.prototype=new r,w.prototype.constructor=w}function s(w,e,r){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((e==="le"||e==="be")&&(r=e,e=10),this._init(w||0,e||10,r||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(e){return e instanceof s?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,r){return e.cmp(r)>0?e:r},s.min=function(e,r){return e.cmp(r)<0?e:r},s.prototype._init=function(e,r,a){if(typeof e=="number")return this._initNumber(e,r,a);if(typeof e=="object")return this._initArray(e,r,a);r==="hex"&&(r=16),u(r===(r|0)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;e[0]==="-"&&(o++,this.negative=1),o<e.length&&(r===16?this._parseHex(e,o,a):(this._parseBase(e,r,o),a==="le"&&this._initArray(this.toArray(),r,a)))},s.prototype._initNumber=function(e,r,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(u(e<9007199254740992),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),r,a)},s.prototype._initArray=function(e,r,a){if(u(typeof e.length=="number"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,v,y=0;if(a==="be")for(o=e.length-1,d=0;o>=0;o-=3)v=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(a==="le")for(o=0,d=0;o<e.length;o+=3)v=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function x(w,e){var r=w.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(w,e,r){var a=x(w,r);return r-1>=e&&(a|=x(w,r-1)<<4),a}s.prototype._parseHex=function(e,r,a){this.length=Math.ceil((e.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,v=0,y;if(a==="be")for(o=e.length-1;o>=r;o-=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8;else{var l=e.length-r;for(o=l%2===0?r+1:r;o<e.length;o+=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8}this.strip()};function M(w,e,r,a){for(var o=0,d=Math.min(w.length,r),v=e;v<d;v++){var y=w.charCodeAt(v)-48;o*=a,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(e,r,a){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var v=e.length-a,y=v%o,l=Math.min(v,v-y)+a,t=0,p=a;p<l;p+=o)t=M(e,p,p+o,r),this.imuln(d),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t);if(y!==0){var q=1;for(t=M(e,p,e.length,r),p=0;p<y;p++)q*=r;this.imuln(q),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++)e.words[r]=this.words[r];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,r){e=e||10,r=r|0||1;var a;if(e===16||e==="hex"){a="";for(var o=0,d=0,v=0;v<this.length;v++){var y=this.words[v],l=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||v!==this.length-1?a=b[6-l.length]+l+a:a=l+a,o+=2,o>=26&&(o-=26,v--)}for(d!==0&&(a=d.toString(16)+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(e===(e|0)&&e>=2&&e<=36){var t=S[e],p=E[e];a="";var q=this.clone();for(q.negative=0;!q.isZero();){var I=q.modn(p).toString(e);q=q.idivn(p),q.isZero()?a=I+a:a=b[t-I.length]+I+a}for(this.isZero()&&(a="0"+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return this.length===2?e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?e+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,r){return u(typeof g<"u"),this.toArrayLike(g,e,r)},s.prototype.toArray=function(e,r){return this.toArrayLike(Array,e,r)},s.prototype.toArrayLike=function(e,r,a){var o=this.byteLength(),d=a||Math.max(1,o);u(o<=d,"byte array longer than desired length"),u(d>0,"Requested array length <= 0"),this.strip();var v=r==="le",y=new e(d),l,t,p=this.clone();if(v){for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[t]=l;for(;t<d;t++)y[t]=0}else{for(t=0;t<d-o;t++)y[t]=0;for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[d-t-1]=l}return y},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var r=e,a=0;return r>=4096&&(a+=13,r>>>=13),r>=64&&(a+=7,r>>>=7),r>=8&&(a+=4,r>>>=4),r>=2&&(a+=2,r>>>=2),a+r},s.prototype._zeroBits=function(e){if(e===0)return 26;var r=e,a=0;return r&8191||(a+=13,r>>>=13),r&127||(a+=7,r>>>=7),r&15||(a+=4,r>>>=4),r&3||(a+=2,r>>>=2),r&1||a++,a},s.prototype.bitLength=function(){var e=this.words[this.length-1],r=this._countBits(e);return(this.length-1)*26+r};function A(w){for(var e=new Array(w.bitLength()),r=0;r<e.length;r++){var a=r/26|0,o=r%26;e[r]=(w.words[a]&1<<o)>>>o}return e}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,r=0;r<this.length;r++){var a=this._zeroBits(this.words[r]);if(e+=a,a!==26)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]|e.words[r];return this.strip()},s.prototype.ior=function(e){return u((this.negative|e.negative)===0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var r;this.length>e.length?r=e:r=this;for(var a=0;a<r.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=r.length,this.strip()},s.prototype.iand=function(e){return u((this.negative|e.negative)===0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var r,a;this.length>e.length?(r=this,a=e):(r=e,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(e){return u((this.negative|e.negative)===0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){u(typeof e=="number"&&e>=0);var r=Math.ceil(e/26)|0,a=e%26;this._expand(r),a>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return a>0&&(this.words[o]=~this.words[o]&67108863>>26-a),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,r){u(typeof e=="number"&&e>=0);var a=e/26|0,o=e%26;return this._expand(a+1),r?this.words[a]=this.words[a]|1<<o:this.words[a]=this.words[a]&~(1<<o),this.strip()},s.prototype.iadd=function(e){var r;if(this.negative!==0&&e.negative===0)return this.negative=0,r=this.isub(e),this.negative^=1,this._normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,r=this.isub(e),e.negative=1,r._normSign();var a,o;this.length>e.length?(a=this,o=e):(a=e,o=this);for(var d=0,v=0;v<o.length;v++)r=(a.words[v]|0)+(o.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;for(;d!==0&&v<a.length;v++)r=(a.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;if(this.length=a.length,d!==0)this.words[this.length]=d,this.length++;else if(a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this},s.prototype.add=function(e){var r;return e.negative!==0&&this.negative===0?(e.negative=0,r=this.sub(e),e.negative^=1,r):e.negative===0&&this.negative!==0?(this.negative=0,r=e.sub(this),this.negative=1,r):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);return e.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a=this.cmp(e);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;a>0?(o=this,d=e):(o=e,d=this);for(var v=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;for(;v!==0&&y<o.length;y++)r=(o.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;if(v===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};function B(w,e,r){r.negative=e.negative^w.negative;var a=w.length+e.length|0;r.length=a,a=a-1|0;var o=w.words[0]|0,d=e.words[0]|0,v=o*d,y=v&67108863,l=v/67108864|0;r.words[0]=y;for(var t=1;t<a;t++){for(var p=l>>>26,q=l&67108863,I=Math.min(t,e.length-1),$=Math.max(0,t-w.length+1);$<=I;$++){var G=t-$|0;o=w.words[G]|0,d=e.words[$]|0,v=o*d+q,p+=v/67108864|0,q=v&67108863}r.words[t]=q|0,l=p|0}return l!==0?r.words[t]=l|0:r.length--,r.strip()}var R=function(e,r,a){var o=e.words,d=r.words,v=a.words,y=0,l,t,p,q=o[0]|0,I=q&8191,$=q>>>13,G=o[1]|0,V=G&8191,N=G>>>13,W=o[2]|0,Z=W&8191,ne=W>>>13,ee=o[3]|0,z=ee&8191,ue=ee>>>13,Ze=o[4]|0,Ae=Ze&8191,qe=Ze>>>13,nt=o[5]|0,Ne=nt&8191,ve=nt>>>13,ut=o[6]|0,Ce=ut&8191,je=ut>>>13,ht=o[7]|0,Ie=ht&8191,Le=ht>>>13,lt=o[8]|0,$e=lt&8191,ze=lt>>>13,bt=o[9]|0,K=bt&8191,P=bt>>>13,D=d[0]|0,Y=D&8191,oe=D>>>13,Re=d[1]|0,ce=Re&8191,Te=Re>>>13,ft=d[2]|0,Pe=ft&8191,Ue=ft>>>13,ot=d[3]|0,He=ot&8191,Ve=ot>>>13,pt=d[4]|0,Fe=pt&8191,Ge=pt>>>13,mt=d[5]|0,Ke=mt&8191,We=mt>>>13,vt=d[6]|0,Oe=vt&8191,Je=vt>>>13,j=d[7]|0,F=j&8191,H=j>>>13,C=d[8]|0,J=C&8191,he=C>>>13,xe=d[9]|0,de=xe&8191,ge=xe>>>13;a.negative=e.negative^r.negative,a.length=19,l=Math.imul(I,Y),t=Math.imul(I,oe),t=t+Math.imul($,Y)|0,p=Math.imul($,oe);var tt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,l=Math.imul(V,Y),t=Math.imul(V,oe),t=t+Math.imul(N,Y)|0,p=Math.imul(N,oe),l=l+Math.imul(I,ce)|0,t=t+Math.imul(I,Te)|0,t=t+Math.imul($,ce)|0,p=p+Math.imul($,Te)|0;var Xe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(Z,Y),t=Math.imul(Z,oe),t=t+Math.imul(ne,Y)|0,p=Math.imul(ne,oe),l=l+Math.imul(V,ce)|0,t=t+Math.imul(V,Te)|0,t=t+Math.imul(N,ce)|0,p=p+Math.imul(N,Te)|0,l=l+Math.imul(I,Pe)|0,t=t+Math.imul(I,Ue)|0,t=t+Math.imul($,Pe)|0,p=p+Math.imul($,Ue)|0;var ct=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(ct>>>26)|0,ct&=67108863,l=Math.imul(z,Y),t=Math.imul(z,oe),t=t+Math.imul(ue,Y)|0,p=Math.imul(ue,oe),l=l+Math.imul(Z,ce)|0,t=t+Math.imul(Z,Te)|0,t=t+Math.imul(ne,ce)|0,p=p+Math.imul(ne,Te)|0,l=l+Math.imul(V,Pe)|0,t=t+Math.imul(V,Ue)|0,t=t+Math.imul(N,Pe)|0,p=p+Math.imul(N,Ue)|0,l=l+Math.imul(I,He)|0,t=t+Math.imul(I,Ve)|0,t=t+Math.imul($,He)|0,p=p+Math.imul($,Ve)|0;var rt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(rt>>>26)|0,rt&=67108863,l=Math.imul(Ae,Y),t=Math.imul(Ae,oe),t=t+Math.imul(qe,Y)|0,p=Math.imul(qe,oe),l=l+Math.imul(z,ce)|0,t=t+Math.imul(z,Te)|0,t=t+Math.imul(ue,ce)|0,p=p+Math.imul(ue,Te)|0,l=l+Math.imul(Z,Pe)|0,t=t+Math.imul(Z,Ue)|0,t=t+Math.imul(ne,Pe)|0,p=p+Math.imul(ne,Ue)|0,l=l+Math.imul(V,He)|0,t=t+Math.imul(V,Ve)|0,t=t+Math.imul(N,He)|0,p=p+Math.imul(N,Ve)|0,l=l+Math.imul(I,Fe)|0,t=t+Math.imul(I,Ge)|0,t=t+Math.imul($,Fe)|0,p=p+Math.imul($,Ge)|0;var st=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(st>>>26)|0,st&=67108863,l=Math.imul(Ne,Y),t=Math.imul(Ne,oe),t=t+Math.imul(ve,Y)|0,p=Math.imul(ve,oe),l=l+Math.imul(Ae,ce)|0,t=t+Math.imul(Ae,Te)|0,t=t+Math.imul(qe,ce)|0,p=p+Math.imul(qe,Te)|0,l=l+Math.imul(z,Pe)|0,t=t+Math.imul(z,Ue)|0,t=t+Math.imul(ue,Pe)|0,p=p+Math.imul(ue,Ue)|0,l=l+Math.imul(Z,He)|0,t=t+Math.imul(Z,Ve)|0,t=t+Math.imul(ne,He)|0,p=p+Math.imul(ne,Ve)|0,l=l+Math.imul(V,Fe)|0,t=t+Math.imul(V,Ge)|0,t=t+Math.imul(N,Fe)|0,p=p+Math.imul(N,Ge)|0,l=l+Math.imul(I,Ke)|0,t=t+Math.imul(I,We)|0,t=t+Math.imul($,Ke)|0,p=p+Math.imul($,We)|0;var at=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(at>>>26)|0,at&=67108863,l=Math.imul(Ce,Y),t=Math.imul(Ce,oe),t=t+Math.imul(je,Y)|0,p=Math.imul(je,oe),l=l+Math.imul(Ne,ce)|0,t=t+Math.imul(Ne,Te)|0,t=t+Math.imul(ve,ce)|0,p=p+Math.imul(ve,Te)|0,l=l+Math.imul(Ae,Pe)|0,t=t+Math.imul(Ae,Ue)|0,t=t+Math.imul(qe,Pe)|0,p=p+Math.imul(qe,Ue)|0,l=l+Math.imul(z,He)|0,t=t+Math.imul(z,Ve)|0,t=t+Math.imul(ue,He)|0,p=p+Math.imul(ue,Ve)|0,l=l+Math.imul(Z,Fe)|0,t=t+Math.imul(Z,Ge)|0,t=t+Math.imul(ne,Fe)|0,p=p+Math.imul(ne,Ge)|0,l=l+Math.imul(V,Ke)|0,t=t+Math.imul(V,We)|0,t=t+Math.imul(N,Ke)|0,p=p+Math.imul(N,We)|0,l=l+Math.imul(I,Oe)|0,t=t+Math.imul(I,Je)|0,t=t+Math.imul($,Oe)|0,p=p+Math.imul($,Je)|0;var X=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(X>>>26)|0,X&=67108863,l=Math.imul(Ie,Y),t=Math.imul(Ie,oe),t=t+Math.imul(Le,Y)|0,p=Math.imul(Le,oe),l=l+Math.imul(Ce,ce)|0,t=t+Math.imul(Ce,Te)|0,t=t+Math.imul(je,ce)|0,p=p+Math.imul(je,Te)|0,l=l+Math.imul(Ne,Pe)|0,t=t+Math.imul(Ne,Ue)|0,t=t+Math.imul(ve,Pe)|0,p=p+Math.imul(ve,Ue)|0,l=l+Math.imul(Ae,He)|0,t=t+Math.imul(Ae,Ve)|0,t=t+Math.imul(qe,He)|0,p=p+Math.imul(qe,Ve)|0,l=l+Math.imul(z,Fe)|0,t=t+Math.imul(z,Ge)|0,t=t+Math.imul(ue,Fe)|0,p=p+Math.imul(ue,Ge)|0,l=l+Math.imul(Z,Ke)|0,t=t+Math.imul(Z,We)|0,t=t+Math.imul(ne,Ke)|0,p=p+Math.imul(ne,We)|0,l=l+Math.imul(V,Oe)|0,t=t+Math.imul(V,Je)|0,t=t+Math.imul(N,Oe)|0,p=p+Math.imul(N,Je)|0,l=l+Math.imul(I,F)|0,t=t+Math.imul(I,H)|0,t=t+Math.imul($,F)|0,p=p+Math.imul($,H)|0;var re=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(re>>>26)|0,re&=67108863,l=Math.imul($e,Y),t=Math.imul($e,oe),t=t+Math.imul(ze,Y)|0,p=Math.imul(ze,oe),l=l+Math.imul(Ie,ce)|0,t=t+Math.imul(Ie,Te)|0,t=t+Math.imul(Le,ce)|0,p=p+Math.imul(Le,Te)|0,l=l+Math.imul(Ce,Pe)|0,t=t+Math.imul(Ce,Ue)|0,t=t+Math.imul(je,Pe)|0,p=p+Math.imul(je,Ue)|0,l=l+Math.imul(Ne,He)|0,t=t+Math.imul(Ne,Ve)|0,t=t+Math.imul(ve,He)|0,p=p+Math.imul(ve,Ve)|0,l=l+Math.imul(Ae,Fe)|0,t=t+Math.imul(Ae,Ge)|0,t=t+Math.imul(qe,Fe)|0,p=p+Math.imul(qe,Ge)|0,l=l+Math.imul(z,Ke)|0,t=t+Math.imul(z,We)|0,t=t+Math.imul(ue,Ke)|0,p=p+Math.imul(ue,We)|0,l=l+Math.imul(Z,Oe)|0,t=t+Math.imul(Z,Je)|0,t=t+Math.imul(ne,Oe)|0,p=p+Math.imul(ne,Je)|0,l=l+Math.imul(V,F)|0,t=t+Math.imul(V,H)|0,t=t+Math.imul(N,F)|0,p=p+Math.imul(N,H)|0,l=l+Math.imul(I,J)|0,t=t+Math.imul(I,he)|0,t=t+Math.imul($,J)|0,p=p+Math.imul($,he)|0;var te=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(te>>>26)|0,te&=67108863,l=Math.imul(K,Y),t=Math.imul(K,oe),t=t+Math.imul(P,Y)|0,p=Math.imul(P,oe),l=l+Math.imul($e,ce)|0,t=t+Math.imul($e,Te)|0,t=t+Math.imul(ze,ce)|0,p=p+Math.imul(ze,Te)|0,l=l+Math.imul(Ie,Pe)|0,t=t+Math.imul(Ie,Ue)|0,t=t+Math.imul(Le,Pe)|0,p=p+Math.imul(Le,Ue)|0,l=l+Math.imul(Ce,He)|0,t=t+Math.imul(Ce,Ve)|0,t=t+Math.imul(je,He)|0,p=p+Math.imul(je,Ve)|0,l=l+Math.imul(Ne,Fe)|0,t=t+Math.imul(Ne,Ge)|0,t=t+Math.imul(ve,Fe)|0,p=p+Math.imul(ve,Ge)|0,l=l+Math.imul(Ae,Ke)|0,t=t+Math.imul(Ae,We)|0,t=t+Math.imul(qe,Ke)|0,p=p+Math.imul(qe,We)|0,l=l+Math.imul(z,Oe)|0,t=t+Math.imul(z,Je)|0,t=t+Math.imul(ue,Oe)|0,p=p+Math.imul(ue,Je)|0,l=l+Math.imul(Z,F)|0,t=t+Math.imul(Z,H)|0,t=t+Math.imul(ne,F)|0,p=p+Math.imul(ne,H)|0,l=l+Math.imul(V,J)|0,t=t+Math.imul(V,he)|0,t=t+Math.imul(N,J)|0,p=p+Math.imul(N,he)|0,l=l+Math.imul(I,de)|0,t=t+Math.imul(I,ge)|0,t=t+Math.imul($,de)|0,p=p+Math.imul($,ge)|0;var fe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(fe>>>26)|0,fe&=67108863,l=Math.imul(K,ce),t=Math.imul(K,Te),t=t+Math.imul(P,ce)|0,p=Math.imul(P,Te),l=l+Math.imul($e,Pe)|0,t=t+Math.imul($e,Ue)|0,t=t+Math.imul(ze,Pe)|0,p=p+Math.imul(ze,Ue)|0,l=l+Math.imul(Ie,He)|0,t=t+Math.imul(Ie,Ve)|0,t=t+Math.imul(Le,He)|0,p=p+Math.imul(Le,Ve)|0,l=l+Math.imul(Ce,Fe)|0,t=t+Math.imul(Ce,Ge)|0,t=t+Math.imul(je,Fe)|0,p=p+Math.imul(je,Ge)|0,l=l+Math.imul(Ne,Ke)|0,t=t+Math.imul(Ne,We)|0,t=t+Math.imul(ve,Ke)|0,p=p+Math.imul(ve,We)|0,l=l+Math.imul(Ae,Oe)|0,t=t+Math.imul(Ae,Je)|0,t=t+Math.imul(qe,Oe)|0,p=p+Math.imul(qe,Je)|0,l=l+Math.imul(z,F)|0,t=t+Math.imul(z,H)|0,t=t+Math.imul(ue,F)|0,p=p+Math.imul(ue,H)|0,l=l+Math.imul(Z,J)|0,t=t+Math.imul(Z,he)|0,t=t+Math.imul(ne,J)|0,p=p+Math.imul(ne,he)|0,l=l+Math.imul(V,de)|0,t=t+Math.imul(V,ge)|0,t=t+Math.imul(N,de)|0,p=p+Math.imul(N,ge)|0;var le=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(le>>>26)|0,le&=67108863,l=Math.imul(K,Pe),t=Math.imul(K,Ue),t=t+Math.imul(P,Pe)|0,p=Math.imul(P,Ue),l=l+Math.imul($e,He)|0,t=t+Math.imul($e,Ve)|0,t=t+Math.imul(ze,He)|0,p=p+Math.imul(ze,Ve)|0,l=l+Math.imul(Ie,Fe)|0,t=t+Math.imul(Ie,Ge)|0,t=t+Math.imul(Le,Fe)|0,p=p+Math.imul(Le,Ge)|0,l=l+Math.imul(Ce,Ke)|0,t=t+Math.imul(Ce,We)|0,t=t+Math.imul(je,Ke)|0,p=p+Math.imul(je,We)|0,l=l+Math.imul(Ne,Oe)|0,t=t+Math.imul(Ne,Je)|0,t=t+Math.imul(ve,Oe)|0,p=p+Math.imul(ve,Je)|0,l=l+Math.imul(Ae,F)|0,t=t+Math.imul(Ae,H)|0,t=t+Math.imul(qe,F)|0,p=p+Math.imul(qe,H)|0,l=l+Math.imul(z,J)|0,t=t+Math.imul(z,he)|0,t=t+Math.imul(ue,J)|0,p=p+Math.imul(ue,he)|0,l=l+Math.imul(Z,de)|0,t=t+Math.imul(Z,ge)|0,t=t+Math.imul(ne,de)|0,p=p+Math.imul(ne,ge)|0;var pe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(pe>>>26)|0,pe&=67108863,l=Math.imul(K,He),t=Math.imul(K,Ve),t=t+Math.imul(P,He)|0,p=Math.imul(P,Ve),l=l+Math.imul($e,Fe)|0,t=t+Math.imul($e,Ge)|0,t=t+Math.imul(ze,Fe)|0,p=p+Math.imul(ze,Ge)|0,l=l+Math.imul(Ie,Ke)|0,t=t+Math.imul(Ie,We)|0,t=t+Math.imul(Le,Ke)|0,p=p+Math.imul(Le,We)|0,l=l+Math.imul(Ce,Oe)|0,t=t+Math.imul(Ce,Je)|0,t=t+Math.imul(je,Oe)|0,p=p+Math.imul(je,Je)|0,l=l+Math.imul(Ne,F)|0,t=t+Math.imul(Ne,H)|0,t=t+Math.imul(ve,F)|0,p=p+Math.imul(ve,H)|0,l=l+Math.imul(Ae,J)|0,t=t+Math.imul(Ae,he)|0,t=t+Math.imul(qe,J)|0,p=p+Math.imul(qe,he)|0,l=l+Math.imul(z,de)|0,t=t+Math.imul(z,ge)|0,t=t+Math.imul(ue,de)|0,p=p+Math.imul(ue,ge)|0;var Se=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Se>>>26)|0,Se&=67108863,l=Math.imul(K,Fe),t=Math.imul(K,Ge),t=t+Math.imul(P,Fe)|0,p=Math.imul(P,Ge),l=l+Math.imul($e,Ke)|0,t=t+Math.imul($e,We)|0,t=t+Math.imul(ze,Ke)|0,p=p+Math.imul(ze,We)|0,l=l+Math.imul(Ie,Oe)|0,t=t+Math.imul(Ie,Je)|0,t=t+Math.imul(Le,Oe)|0,p=p+Math.imul(Le,Je)|0,l=l+Math.imul(Ce,F)|0,t=t+Math.imul(Ce,H)|0,t=t+Math.imul(je,F)|0,p=p+Math.imul(je,H)|0,l=l+Math.imul(Ne,J)|0,t=t+Math.imul(Ne,he)|0,t=t+Math.imul(ve,J)|0,p=p+Math.imul(ve,he)|0,l=l+Math.imul(Ae,de)|0,t=t+Math.imul(Ae,ge)|0,t=t+Math.imul(qe,de)|0,p=p+Math.imul(qe,ge)|0;var Ee=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,l=Math.imul(K,Ke),t=Math.imul(K,We),t=t+Math.imul(P,Ke)|0,p=Math.imul(P,We),l=l+Math.imul($e,Oe)|0,t=t+Math.imul($e,Je)|0,t=t+Math.imul(ze,Oe)|0,p=p+Math.imul(ze,Je)|0,l=l+Math.imul(Ie,F)|0,t=t+Math.imul(Ie,H)|0,t=t+Math.imul(Le,F)|0,p=p+Math.imul(Le,H)|0,l=l+Math.imul(Ce,J)|0,t=t+Math.imul(Ce,he)|0,t=t+Math.imul(je,J)|0,p=p+Math.imul(je,he)|0,l=l+Math.imul(Ne,de)|0,t=t+Math.imul(Ne,ge)|0,t=t+Math.imul(ve,de)|0,p=p+Math.imul(ve,ge)|0;var me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(me>>>26)|0,me&=67108863,l=Math.imul(K,Oe),t=Math.imul(K,Je),t=t+Math.imul(P,Oe)|0,p=Math.imul(P,Je),l=l+Math.imul($e,F)|0,t=t+Math.imul($e,H)|0,t=t+Math.imul(ze,F)|0,p=p+Math.imul(ze,H)|0,l=l+Math.imul(Ie,J)|0,t=t+Math.imul(Ie,he)|0,t=t+Math.imul(Le,J)|0,p=p+Math.imul(Le,he)|0,l=l+Math.imul(Ce,de)|0,t=t+Math.imul(Ce,ge)|0,t=t+Math.imul(je,de)|0,p=p+Math.imul(je,ge)|0;var _e=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(_e>>>26)|0,_e&=67108863,l=Math.imul(K,F),t=Math.imul(K,H),t=t+Math.imul(P,F)|0,p=Math.imul(P,H),l=l+Math.imul($e,J)|0,t=t+Math.imul($e,he)|0,t=t+Math.imul(ze,J)|0,p=p+Math.imul(ze,he)|0,l=l+Math.imul(Ie,de)|0,t=t+Math.imul(Ie,ge)|0,t=t+Math.imul(Le,de)|0,p=p+Math.imul(Le,ge)|0;var De=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(De>>>26)|0,De&=67108863,l=Math.imul(K,J),t=Math.imul(K,he),t=t+Math.imul(P,J)|0,p=Math.imul(P,he),l=l+Math.imul($e,de)|0,t=t+Math.imul($e,ge)|0,t=t+Math.imul(ze,de)|0,p=p+Math.imul(ze,ge)|0;var Me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Me>>>26)|0,Me&=67108863,l=Math.imul(K,de),t=Math.imul(K,ge),t=t+Math.imul(P,de)|0,p=Math.imul(P,ge);var Be=(y+l|0)+((t&8191)<<13)|0;return y=(p+(t>>>13)|0)+(Be>>>26)|0,Be&=67108863,v[0]=tt,v[1]=Xe,v[2]=ct,v[3]=rt,v[4]=st,v[5]=at,v[6]=X,v[7]=re,v[8]=te,v[9]=fe,v[10]=le,v[11]=pe,v[12]=Se,v[13]=Ee,v[14]=me,v[15]=_e,v[16]=De,v[17]=Me,v[18]=Be,y!==0&&(v[19]=y,a.length++),a};Math.imul||(R=B);function T(w,e,r){r.negative=e.negative^w.negative,r.length=w.length+e.length;for(var a=0,o=0,d=0;d<r.length-1;d++){var v=o;o=0;for(var y=a&67108863,l=Math.min(d,e.length-1),t=Math.max(0,d-w.length+1);t<=l;t++){var p=d-t,q=w.words[p]|0,I=e.words[t]|0,$=q*I,G=$&67108863;v=v+($/67108864|0)|0,G=G+y|0,y=G&67108863,v=v+(G>>>26)|0,o+=v>>>26,v&=67108863}r.words[d]=y,a=v,v=o}return a!==0?r.words[d]=a:r.length--,r.strip()}function k(w,e,r){var a=new O;return a.mulp(w,e,r)}s.prototype.mulTo=function(e,r){var a,o=this.length+e.length;return this.length===10&&e.length===10?a=R(this,e,r):o<63?a=B(this,e,r):o<1024?a=T(this,e,r):a=k(this,e,r),a};function O(w,e){this.x=w,this.y=e}O.prototype.makeRBT=function(e){for(var r=new Array(e),a=s.prototype._countBits(e)-1,o=0;o<e;o++)r[o]=this.revBin(o,a,e);return r},O.prototype.revBin=function(e,r,a){if(e===0||e===a-1)return e;for(var o=0,d=0;d<r;d++)o|=(e&1)<<r-d-1,e>>=1;return o},O.prototype.permute=function(e,r,a,o,d,v){for(var y=0;y<v;y++)o[y]=r[e[y]],d[y]=a[e[y]]},O.prototype.transform=function(e,r,a,o,d,v){this.permute(v,e,r,a,o,d);for(var y=1;y<d;y<<=1)for(var l=y<<1,t=Math.cos(2*Math.PI/l),p=Math.sin(2*Math.PI/l),q=0;q<d;q+=l)for(var I=t,$=p,G=0;G<y;G++){var V=a[q+G],N=o[q+G],W=a[q+G+y],Z=o[q+G+y],ne=I*W-$*Z;Z=I*Z+$*W,W=ne,a[q+G]=V+W,o[q+G]=N+Z,a[q+G+y]=V-W,o[q+G+y]=N-Z,G!==l&&(ne=t*I-p*$,$=t*$+p*I,I=ne)}},O.prototype.guessLen13b=function(e,r){var a=Math.max(r,e)|1,o=a&1,d=0;for(a=a/2|0;a;a=a>>>1)d++;return 1<<d+1+o},O.prototype.conjugate=function(e,r,a){if(!(a<=1))for(var o=0;o<a/2;o++){var d=e[o];e[o]=e[a-o-1],e[a-o-1]=d,d=r[o],r[o]=-r[a-o-1],r[a-o-1]=-d}},O.prototype.normalize13b=function(e,r){for(var a=0,o=0;o<r/2;o++){var d=Math.round(e[2*o+1]/r)*8192+Math.round(e[2*o]/r)+a;e[o]=d&67108863,d<67108864?a=0:a=d/67108864|0}return e},O.prototype.convert13b=function(e,r,a,o){for(var d=0,v=0;v<r;v++)d=d+(e[v]|0),a[2*v]=d&8191,d=d>>>13,a[2*v+1]=d&8191,d=d>>>13;for(v=2*r;v<o;++v)a[v]=0;u(d===0),u((d&-8192)===0)},O.prototype.stub=function(e){for(var r=new Array(e),a=0;a<e;a++)r[a]=0;return r},O.prototype.mulp=function(e,r,a){var o=2*this.guessLen13b(e.length,r.length),d=this.makeRBT(o),v=this.stub(o),y=new Array(o),l=new Array(o),t=new Array(o),p=new Array(o),q=new Array(o),I=new Array(o),$=a.words;$.length=o,this.convert13b(e.words,e.length,y,o),this.convert13b(r.words,r.length,p,o),this.transform(y,v,l,t,o,d),this.transform(p,v,q,I,o,d);for(var G=0;G<o;G++){var V=l[G]*q[G]-t[G]*I[G];t[G]=l[G]*I[G]+t[G]*q[G],l[G]=V}return this.conjugate(l,t,o),this.transform(l,t,$,v,o,d),this.conjugate($,v,o),this.normalize13b($,o),a.negative=e.negative^r.negative,a.length=e.length+r.length,a.strip()},s.prototype.mul=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),this.mulTo(e,r)},s.prototype.mulf=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),k(this,e,r)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){u(typeof e=="number"),u(e<67108864);for(var r=0,a=0;a<this.length;a++){var o=(this.words[a]|0)*e,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[a]=d&67108863}return r!==0&&(this.words[a]=r,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var r=A(e);if(r.length===0)return new s(1);for(var a=this,o=0;o<r.length&&r[o]===0;o++,a=a.sqr());if(++o<r.length)for(var d=a.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(a=a.mul(d));return a},s.prototype.iushln=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var v=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,l=(this.words[d]|0)-y<<r;this.words[d]=l|v,v=y>>>26-r}v&&(this.words[d]=v,this.length++)}if(a!==0){for(d=this.length-1;d>=0;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(e){return u(this.negative===0),this.iushln(e)},s.prototype.iushrn=function(e,r,a){u(typeof e=="number"&&e>=0);var o;r?o=(r-r%26)/26:o=0;var d=e%26,v=Math.min((e-d)/26,this.length),y=67108863^67108863>>>d<<d,l=a;if(o-=v,o=Math.max(0,o),l){for(var t=0;t<v;t++)l.words[t]=this.words[t];l.length=v}if(v!==0)if(this.length>v)for(this.length-=v,t=0;t<this.length;t++)this.words[t]=this.words[t+v];else this.words[0]=0,this.length=1;var p=0;for(t=this.length-1;t>=0&&(p!==0||t>=o);t--){var q=this.words[t]|0;this.words[t]=p<<26-d|q>>>d,p=q&y}return l&&p!==0&&(l.words[l.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,r,a){return u(this.negative===0),this.iushrn(e,r,a)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return!1;var d=this.words[a];return!!(d&o)},s.prototype.imaskn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(r!==0&&a++,this.length=Math.min(a,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return u(typeof e=="number"),u(e<67108864),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(e){if(u(typeof e=="number"),u(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,r,a){var o=e.length+a,d;this._expand(o);var v,y=0;for(d=0;d<e.length;d++){v=(this.words[d+a]|0)+y;var l=(e.words[d]|0)*r;v-=l&67108863,y=(v>>26)-(l/67108864|0),this.words[d+a]=v&67108863}for(;d<this.length-a;d++)v=(this.words[d+a]|0)+y,y=v>>26,this.words[d+a]=v&67108863;if(y===0)return this.strip();for(u(y===-1),y=0,d=0;d<this.length;d++)v=-(this.words[d]|0)+y,y=v>>26,this.words[d]=v&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,r){var a=this.length-e.length,o=this.clone(),d=e,v=d.words[d.length-1]|0,y=this._countBits(v);a=26-y,a!==0&&(d=d.ushln(a),o.iushln(a),v=d.words[d.length-1]|0);var l=o.length-d.length,t;if(r!=="mod"){t=new s(null),t.length=l+1,t.words=new Array(t.length);for(var p=0;p<t.length;p++)t.words[p]=0}var q=o.clone()._ishlnsubmul(d,1,l);q.negative===0&&(o=q,t&&(t.words[l]=1));for(var I=l-1;I>=0;I--){var $=(o.words[d.length+I]|0)*67108864+(o.words[d.length+I-1]|0);for($=Math.min($/v|0,67108863),o._ishlnsubmul(d,$,I);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(d,1,I),o.isZero()||(o.negative^=1);t&&(t.words[I]=$)}return t&&t.strip(),o.strip(),r!=="div"&&a!==0&&o.iushrn(a),{div:t||null,mod:o}},s.prototype.divmod=function(e,r,a){if(u(!e.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,v;return this.negative!==0&&e.negative===0?(v=this.neg().divmod(e,r),r!=="mod"&&(o=v.div.neg()),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.iadd(e)),{div:o,mod:d}):this.negative===0&&e.negative!==0?(v=this.divmod(e.neg(),r),r!=="mod"&&(o=v.div.neg()),{div:o,mod:v.mod}):this.negative&e.negative?(v=this.neg().divmod(e.neg(),r),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.isub(e)),{div:v.div,mod:d}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:e.length===1?r==="div"?{div:this.divn(e.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,r)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var a=r.div.negative!==0?r.mod.isub(e):r.mod,o=e.ushrn(1),d=e.andln(1),v=a.cmp(o);return v<0||d===1&&v===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(e){u(e<=67108863);for(var r=(1<<26)%e,a=0,o=this.length-1;o>=0;o--)a=(r*a+(this.words[o]|0))%e;return a},s.prototype.idivn=function(e){u(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var o=(this.words[a]|0)+r*67108864;this.words[a]=o/e|0,r=o%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=new s(0),y=new s(1),l=0;r.isEven()&&a.isEven();)r.iushrn(1),a.iushrn(1),++l;for(var t=a.clone(),p=r.clone();!r.isZero();){for(var q=0,I=1;!(r.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(r.iushrn(q);q-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(t),d.isub(p)),o.iushrn(1),d.iushrn(1);for(var $=0,G=1;!(a.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(a.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(t),y.isub(p)),v.iushrn(1),y.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(v),d.isub(y)):(a.isub(r),v.isub(o),y.isub(d))}return{a:v,b:y,gcd:a.iushln(l)}},s.prototype._invmp=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=a.clone();r.cmpn(1)>0&&a.cmpn(1)>0;){for(var y=0,l=1;!(r.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(v),o.iushrn(1);for(var t=0,p=1;!(a.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(a.iushrn(t);t-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(d)):(a.isub(r),d.isub(o))}var q;return r.cmpn(1)===0?q=o:q=d,q.cmpn(0)<0&&q.iadd(e),q},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone(),a=e.clone();r.negative=0,a.negative=0;for(var o=0;r.isEven()&&a.isEven();o++)r.iushrn(1),a.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=r.cmp(a);if(d<0){var v=r;r=a,a=v}else if(d===0||a.cmpn(1)===0)break;r.isub(a)}while(!0);return a.iushln(o)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){u(typeof e=="number");var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return this._expand(a+1),this.words[a]|=o,this;for(var d=o,v=a;d!==0&&v<this.length;v++){var y=this.words[v]|0;y+=d,d=y>>>26,y&=67108863,this.words[v]=y}return d!==0&&(this.words[v]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1)a=1;else{r&&(e=-e),u(e<=67108863,"Number is too big");var o=this.words[0]|0;a=o===e?0:o<e?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var r=0,a=this.length-1;a>=0;a--){var o=this.words[a]|0,d=e.words[a]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(e){return this.cmpn(e)===1},s.prototype.gt=function(e){return this.cmp(e)===1},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return this.cmpn(e)===-1},s.prototype.lt=function(e){return this.cmp(e)===-1},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return this.cmpn(e)===0},s.prototype.eq=function(e){return this.cmp(e)===0},s.red=function(e){return new se(e)},s.prototype.toRed=function(e){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return u(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return u(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var U={k256:null,p224:null,p192:null,p25519:null};function L(w,e){this.name=w,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},L.prototype.ireduce=function(e){var r=e,a;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),a=r.bitLength();while(a>this.n);var o=a<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},L.prototype.split=function(e,r){e.iushrn(this.n,0,r)},L.prototype.imulK=function(e){return e.imul(this.k)};function Q(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(Q,L),Q.prototype.split=function(e,r){for(var a=4194303,o=Math.min(e.length,9),d=0;d<o;d++)r.words[d]=e.words[d];if(r.length=o,e.length<=9){e.words[0]=0,e.length=1;return}var v=e.words[9];for(r.words[r.length++]=v&a,d=10;d<e.length;d++){var y=e.words[d]|0;e.words[d-10]=(y&a)<<4|v>>>22,v=y}v>>>=22,e.words[d-10]=v,v===0&&e.length>10?e.length-=10:e.length-=9},Q.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,a=0;a<e.length;a++){var o=e.words[a]|0;r+=o*977,e.words[a]=r&67108863,r=o*64+(r/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e};function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ie,L);function we(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(we,L);function ye(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ye,L),ye.prototype.imulK=function(e){for(var r=0,a=0;a<e.length;a++){var o=(e.words[a]|0)*19+r,d=o&67108863;o>>>=26,e.words[a]=d,r=o}return r!==0&&(e.words[e.length++]=r),e},s._prime=function(e){if(U[e])return U[e];var r;if(e==="k256")r=new Q;else if(e==="p224")r=new ie;else if(e==="p192")r=new we;else if(e==="p25519")r=new ye;else throw new Error("Unknown prime "+e);return U[e]=r,r};function se(w){if(typeof w=="string"){var e=s._prime(w);this.m=e.p,this.prime=e}else u(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}se.prototype._verify1=function(e){u(e.negative===0,"red works only with positives"),u(e.red,"red works only with red numbers")},se.prototype._verify2=function(e,r){u((e.negative|r.negative)===0,"red works only with positives"),u(e.red&&e.red===r.red,"red works only with red numbers")},se.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},se.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},se.prototype.add=function(e,r){this._verify2(e,r);var a=e.add(r);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},se.prototype.iadd=function(e,r){this._verify2(e,r);var a=e.iadd(r);return a.cmp(this.m)>=0&&a.isub(this.m),a},se.prototype.sub=function(e,r){this._verify2(e,r);var a=e.sub(r);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},se.prototype.isub=function(e,r){this._verify2(e,r);var a=e.isub(r);return a.cmpn(0)<0&&a.iadd(this.m),a},se.prototype.shl=function(e,r){return this._verify1(e),this.imod(e.ushln(r))},se.prototype.imul=function(e,r){return this._verify2(e,r),this.imod(e.imul(r))},se.prototype.mul=function(e,r){return this._verify2(e,r),this.imod(e.mul(r))},se.prototype.isqr=function(e){return this.imul(e,e.clone())},se.prototype.sqr=function(e){return this.mul(e,e)},se.prototype.sqrt=function(e){if(e.isZero())return e.clone();var r=this.m.andln(3);if(u(r%2===1),r===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(e,a)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);u(!o.isZero());var v=new s(1).toRed(this),y=v.redNeg(),l=this.m.subn(1).iushrn(1),t=this.m.bitLength();for(t=new s(2*t*t).toRed(this);this.pow(t,l).cmp(y)!==0;)t.redIAdd(y);for(var p=this.pow(t,o),q=this.pow(e,o.addn(1).iushrn(1)),I=this.pow(e,o),$=d;I.cmp(v)!==0;){for(var G=I,V=0;G.cmp(v)!==0;V++)G=G.redSqr();u(V<$);var N=this.pow(p,new s(1).iushln($-V-1));q=q.redMul(N),p=N.redSqr(),I=I.redMul(p),$=V}return q},se.prototype.invm=function(e){var r=e._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},se.prototype.pow=function(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var a=4,o=new Array(1<<a);o[0]=new s(1).toRed(this),o[1]=e;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],e);var v=o[0],y=0,l=0,t=r.bitLength()%26;for(t===0&&(t=26),d=r.length-1;d>=0;d--){for(var p=r.words[d],q=t-1;q>=0;q--){var I=p>>q&1;if(v!==o[0]&&(v=this.sqr(v)),I===0&&y===0){l=0;continue}y<<=1,y|=I,l++,!(l!==a&&(d!==0||q!==0))&&(v=this.mul(v,o[y]),l=0,y=0)}t=26}return v},se.prototype.convertTo=function(e){var r=e.umod(this.m);return r===e?r.clone():r},se.prototype.convertFrom=function(e){var r=e.clone();return r.red=null,r},s.mont=function(e){return new ke(e)};function ke(w){se.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(ke,se),ke.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},ke.prototype.convertFrom=function(e){var r=this.imod(e.mul(this.rinv));return r.red=null,r},ke.prototype.imul=function(e,r){if(e.isZero()||r.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.mul=function(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var a=e.mul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.invm=function(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,commonjsGlobal)}(bn$1)),bn$1.exports}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var c=requireElliptic(),n=requireBn$1();browser$2=function(g){return new u(g)};var h={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};h.p224=h.secp224r1,h.p256=h.secp256r1=h.prime256v1,h.p192=h.secp192r1=h.prime192v1,h.p384=h.secp384r1,h.p521=h.secp521r1;function u(s){this.curveType=h[s],this.curveType||(this.curveType={name:s}),this.curve=new c.ec(this.curveType.name),this.keys=void 0}u.prototype.generateKeys=function(s,g){return this.keys=this.curve.genKeyPair(),this.getPublicKey(s,g)},u.prototype.computeSecret=function(s,g,x){g=g||"utf8",Buffer.isBuffer(s)||(s=new Buffer(s,g));var _=this.curve.keyFromPublic(s).getPublic(),M=_.mul(this.keys.getPrivate()).getX();return m(M,x,this.curveType.byteLength)},u.prototype.getPublicKey=function(s,g){var x=this.keys.getPublic(g==="compressed",!0);return g==="hybrid"&&(x[x.length-1]%2?x[0]=7:x[0]=6),m(x,s)},u.prototype.getPrivateKey=function(s){return m(this.keys.getPrivate(),s)},u.prototype.setPublicKey=function(s,g){return g=g||"utf8",Buffer.isBuffer(s)||(s=new Buffer(s,g)),this.keys._importPublic(s),this},u.prototype.setPrivateKey=function(s,g){g=g||"utf8",Buffer.isBuffer(s)||(s=new Buffer(s,g));var x=new n(s);return x=x.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(x),this};function m(s,g,x){Array.isArray(s)||(s=s.toArray());var _=new Buffer(s);if(x&&_.length<x){var M=new Buffer(x-_.length);M.fill(0),_=Buffer.concat([M,_])}return g?_.toString(g):_}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var c=requireBrowser$9(),n=requireSafeBuffer$1().Buffer;mgf=function(u,m){for(var s=n.alloc(0),g=0,x;s.length<m;)x=h(g++),s=n.concat([s,c("sha1").update(u).update(x).digest()]);return s.slice(0,m)};function h(u){var m=n.allocUnsafe(4);return m.writeUInt32BE(u,0),m}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(n,h){for(var u=n.length,m=-1;++m<u;)n[m]^=h[m];return n}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(c){(function(n,h){function u(w,e){if(!w)throw new Error(e||"Assertion failed")}function m(w,e){w.super_=e;var r=function(){};r.prototype=e.prototype,w.prototype=new r,w.prototype.constructor=w}function s(w,e,r){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((e==="le"||e==="be")&&(r=e,e=10),this._init(w||0,e||10,r||"be"))}typeof n=="object"?n.exports=s:h.BN=s,s.BN=s,s.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$1.Buffer}catch{}s.isBN=function(e){return e instanceof s?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,r){return e.cmp(r)>0?e:r},s.min=function(e,r){return e.cmp(r)<0?e:r},s.prototype._init=function(e,r,a){if(typeof e=="number")return this._initNumber(e,r,a);if(typeof e=="object")return this._initArray(e,r,a);r==="hex"&&(r=16),u(r===(r|0)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;e[0]==="-"&&(o++,this.negative=1),o<e.length&&(r===16?this._parseHex(e,o,a):(this._parseBase(e,r,o),a==="le"&&this._initArray(this.toArray(),r,a)))},s.prototype._initNumber=function(e,r,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(u(e<9007199254740992),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),r,a)},s.prototype._initArray=function(e,r,a){if(u(typeof e.length=="number"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,v,y=0;if(a==="be")for(o=e.length-1,d=0;o>=0;o-=3)v=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(a==="le")for(o=0,d=0;o<e.length;o+=3)v=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[d]|=v<<y&67108863,this.words[d+1]=v>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function x(w,e){var r=w.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(w,e,r){var a=x(w,r);return r-1>=e&&(a|=x(w,r-1)<<4),a}s.prototype._parseHex=function(e,r,a){this.length=Math.ceil((e.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,v=0,y;if(a==="be")for(o=e.length-1;o>=r;o-=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8;else{var l=e.length-r;for(o=l%2===0?r+1:r;o<e.length;o+=2)y=_(e,r,o)<<d,this.words[v]|=y&67108863,d>=18?(d-=18,v+=1,this.words[v]|=y>>>26):d+=8}this.strip()};function M(w,e,r,a){for(var o=0,d=Math.min(w.length,r),v=e;v<d;v++){var y=w.charCodeAt(v)-48;o*=a,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(e,r,a){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var v=e.length-a,y=v%o,l=Math.min(v,v-y)+a,t=0,p=a;p<l;p+=o)t=M(e,p,p+o,r),this.imuln(d),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t);if(y!==0){var q=1;for(t=M(e,p,e.length,r),p=0;p<y;p++)q*=r;this.imuln(q),this.words[0]+t<67108864?this.words[0]+=t:this._iaddn(t)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++)e.words[r]=this.words[r];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,r){e=e||10,r=r|0||1;var a;if(e===16||e==="hex"){a="";for(var o=0,d=0,v=0;v<this.length;v++){var y=this.words[v],l=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||v!==this.length-1?a=b[6-l.length]+l+a:a=l+a,o+=2,o>=26&&(o-=26,v--)}for(d!==0&&(a=d.toString(16)+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(e===(e|0)&&e>=2&&e<=36){var t=S[e],p=E[e];a="";var q=this.clone();for(q.negative=0;!q.isZero();){var I=q.modn(p).toString(e);q=q.idivn(p),q.isZero()?a=I+a:a=b[t-I.length]+I+a}for(this.isZero()&&(a="0"+a);a.length%r!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}u(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return this.length===2?e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?e+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,r){return u(typeof g<"u"),this.toArrayLike(g,e,r)},s.prototype.toArray=function(e,r){return this.toArrayLike(Array,e,r)},s.prototype.toArrayLike=function(e,r,a){var o=this.byteLength(),d=a||Math.max(1,o);u(o<=d,"byte array longer than desired length"),u(d>0,"Requested array length <= 0"),this.strip();var v=r==="le",y=new e(d),l,t,p=this.clone();if(v){for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[t]=l;for(;t<d;t++)y[t]=0}else{for(t=0;t<d-o;t++)y[t]=0;for(t=0;!p.isZero();t++)l=p.andln(255),p.iushrn(8),y[d-t-1]=l}return y},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var r=e,a=0;return r>=4096&&(a+=13,r>>>=13),r>=64&&(a+=7,r>>>=7),r>=8&&(a+=4,r>>>=4),r>=2&&(a+=2,r>>>=2),a+r},s.prototype._zeroBits=function(e){if(e===0)return 26;var r=e,a=0;return r&8191||(a+=13,r>>>=13),r&127||(a+=7,r>>>=7),r&15||(a+=4,r>>>=4),r&3||(a+=2,r>>>=2),r&1||a++,a},s.prototype.bitLength=function(){var e=this.words[this.length-1],r=this._countBits(e);return(this.length-1)*26+r};function A(w){for(var e=new Array(w.bitLength()),r=0;r<e.length;r++){var a=r/26|0,o=r%26;e[r]=(w.words[a]&1<<o)>>>o}return e}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,r=0;r<this.length;r++){var a=this._zeroBits(this.words[r]);if(e+=a,a!==26)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]|e.words[r];return this.strip()},s.prototype.ior=function(e){return u((this.negative|e.negative)===0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var r;this.length>e.length?r=e:r=this;for(var a=0;a<r.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=r.length,this.strip()},s.prototype.iand=function(e){return u((this.negative|e.negative)===0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var r,a;this.length>e.length?(r=this,a=e):(r=e,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(e){return u((this.negative|e.negative)===0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){u(typeof e=="number"&&e>=0);var r=Math.ceil(e/26)|0,a=e%26;this._expand(r),a>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return a>0&&(this.words[o]=~this.words[o]&67108863>>26-a),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,r){u(typeof e=="number"&&e>=0);var a=e/26|0,o=e%26;return this._expand(a+1),r?this.words[a]=this.words[a]|1<<o:this.words[a]=this.words[a]&~(1<<o),this.strip()},s.prototype.iadd=function(e){var r;if(this.negative!==0&&e.negative===0)return this.negative=0,r=this.isub(e),this.negative^=1,this._normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,r=this.isub(e),e.negative=1,r._normSign();var a,o;this.length>e.length?(a=this,o=e):(a=e,o=this);for(var d=0,v=0;v<o.length;v++)r=(a.words[v]|0)+(o.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;for(;d!==0&&v<a.length;v++)r=(a.words[v]|0)+d,this.words[v]=r&67108863,d=r>>>26;if(this.length=a.length,d!==0)this.words[this.length]=d,this.length++;else if(a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this},s.prototype.add=function(e){var r;return e.negative!==0&&this.negative===0?(e.negative=0,r=this.sub(e),e.negative^=1,r):e.negative===0&&this.negative!==0?(this.negative=0,r=e.sub(this),this.negative=1,r):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);return e.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a=this.cmp(e);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;a>0?(o=this,d=e):(o=e,d=this);for(var v=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;for(;v!==0&&y<o.length;y++)r=(o.words[y]|0)+v,v=r>>26,this.words[y]=r&67108863;if(v===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};function B(w,e,r){r.negative=e.negative^w.negative;var a=w.length+e.length|0;r.length=a,a=a-1|0;var o=w.words[0]|0,d=e.words[0]|0,v=o*d,y=v&67108863,l=v/67108864|0;r.words[0]=y;for(var t=1;t<a;t++){for(var p=l>>>26,q=l&67108863,I=Math.min(t,e.length-1),$=Math.max(0,t-w.length+1);$<=I;$++){var G=t-$|0;o=w.words[G]|0,d=e.words[$]|0,v=o*d+q,p+=v/67108864|0,q=v&67108863}r.words[t]=q|0,l=p|0}return l!==0?r.words[t]=l|0:r.length--,r.strip()}var R=function(e,r,a){var o=e.words,d=r.words,v=a.words,y=0,l,t,p,q=o[0]|0,I=q&8191,$=q>>>13,G=o[1]|0,V=G&8191,N=G>>>13,W=o[2]|0,Z=W&8191,ne=W>>>13,ee=o[3]|0,z=ee&8191,ue=ee>>>13,Ze=o[4]|0,Ae=Ze&8191,qe=Ze>>>13,nt=o[5]|0,Ne=nt&8191,ve=nt>>>13,ut=o[6]|0,Ce=ut&8191,je=ut>>>13,ht=o[7]|0,Ie=ht&8191,Le=ht>>>13,lt=o[8]|0,$e=lt&8191,ze=lt>>>13,bt=o[9]|0,K=bt&8191,P=bt>>>13,D=d[0]|0,Y=D&8191,oe=D>>>13,Re=d[1]|0,ce=Re&8191,Te=Re>>>13,ft=d[2]|0,Pe=ft&8191,Ue=ft>>>13,ot=d[3]|0,He=ot&8191,Ve=ot>>>13,pt=d[4]|0,Fe=pt&8191,Ge=pt>>>13,mt=d[5]|0,Ke=mt&8191,We=mt>>>13,vt=d[6]|0,Oe=vt&8191,Je=vt>>>13,j=d[7]|0,F=j&8191,H=j>>>13,C=d[8]|0,J=C&8191,he=C>>>13,xe=d[9]|0,de=xe&8191,ge=xe>>>13;a.negative=e.negative^r.negative,a.length=19,l=Math.imul(I,Y),t=Math.imul(I,oe),t=t+Math.imul($,Y)|0,p=Math.imul($,oe);var tt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,l=Math.imul(V,Y),t=Math.imul(V,oe),t=t+Math.imul(N,Y)|0,p=Math.imul(N,oe),l=l+Math.imul(I,ce)|0,t=t+Math.imul(I,Te)|0,t=t+Math.imul($,ce)|0,p=p+Math.imul($,Te)|0;var Xe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(Z,Y),t=Math.imul(Z,oe),t=t+Math.imul(ne,Y)|0,p=Math.imul(ne,oe),l=l+Math.imul(V,ce)|0,t=t+Math.imul(V,Te)|0,t=t+Math.imul(N,ce)|0,p=p+Math.imul(N,Te)|0,l=l+Math.imul(I,Pe)|0,t=t+Math.imul(I,Ue)|0,t=t+Math.imul($,Pe)|0,p=p+Math.imul($,Ue)|0;var ct=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(ct>>>26)|0,ct&=67108863,l=Math.imul(z,Y),t=Math.imul(z,oe),t=t+Math.imul(ue,Y)|0,p=Math.imul(ue,oe),l=l+Math.imul(Z,ce)|0,t=t+Math.imul(Z,Te)|0,t=t+Math.imul(ne,ce)|0,p=p+Math.imul(ne,Te)|0,l=l+Math.imul(V,Pe)|0,t=t+Math.imul(V,Ue)|0,t=t+Math.imul(N,Pe)|0,p=p+Math.imul(N,Ue)|0,l=l+Math.imul(I,He)|0,t=t+Math.imul(I,Ve)|0,t=t+Math.imul($,He)|0,p=p+Math.imul($,Ve)|0;var rt=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(rt>>>26)|0,rt&=67108863,l=Math.imul(Ae,Y),t=Math.imul(Ae,oe),t=t+Math.imul(qe,Y)|0,p=Math.imul(qe,oe),l=l+Math.imul(z,ce)|0,t=t+Math.imul(z,Te)|0,t=t+Math.imul(ue,ce)|0,p=p+Math.imul(ue,Te)|0,l=l+Math.imul(Z,Pe)|0,t=t+Math.imul(Z,Ue)|0,t=t+Math.imul(ne,Pe)|0,p=p+Math.imul(ne,Ue)|0,l=l+Math.imul(V,He)|0,t=t+Math.imul(V,Ve)|0,t=t+Math.imul(N,He)|0,p=p+Math.imul(N,Ve)|0,l=l+Math.imul(I,Fe)|0,t=t+Math.imul(I,Ge)|0,t=t+Math.imul($,Fe)|0,p=p+Math.imul($,Ge)|0;var st=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(st>>>26)|0,st&=67108863,l=Math.imul(Ne,Y),t=Math.imul(Ne,oe),t=t+Math.imul(ve,Y)|0,p=Math.imul(ve,oe),l=l+Math.imul(Ae,ce)|0,t=t+Math.imul(Ae,Te)|0,t=t+Math.imul(qe,ce)|0,p=p+Math.imul(qe,Te)|0,l=l+Math.imul(z,Pe)|0,t=t+Math.imul(z,Ue)|0,t=t+Math.imul(ue,Pe)|0,p=p+Math.imul(ue,Ue)|0,l=l+Math.imul(Z,He)|0,t=t+Math.imul(Z,Ve)|0,t=t+Math.imul(ne,He)|0,p=p+Math.imul(ne,Ve)|0,l=l+Math.imul(V,Fe)|0,t=t+Math.imul(V,Ge)|0,t=t+Math.imul(N,Fe)|0,p=p+Math.imul(N,Ge)|0,l=l+Math.imul(I,Ke)|0,t=t+Math.imul(I,We)|0,t=t+Math.imul($,Ke)|0,p=p+Math.imul($,We)|0;var at=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(at>>>26)|0,at&=67108863,l=Math.imul(Ce,Y),t=Math.imul(Ce,oe),t=t+Math.imul(je,Y)|0,p=Math.imul(je,oe),l=l+Math.imul(Ne,ce)|0,t=t+Math.imul(Ne,Te)|0,t=t+Math.imul(ve,ce)|0,p=p+Math.imul(ve,Te)|0,l=l+Math.imul(Ae,Pe)|0,t=t+Math.imul(Ae,Ue)|0,t=t+Math.imul(qe,Pe)|0,p=p+Math.imul(qe,Ue)|0,l=l+Math.imul(z,He)|0,t=t+Math.imul(z,Ve)|0,t=t+Math.imul(ue,He)|0,p=p+Math.imul(ue,Ve)|0,l=l+Math.imul(Z,Fe)|0,t=t+Math.imul(Z,Ge)|0,t=t+Math.imul(ne,Fe)|0,p=p+Math.imul(ne,Ge)|0,l=l+Math.imul(V,Ke)|0,t=t+Math.imul(V,We)|0,t=t+Math.imul(N,Ke)|0,p=p+Math.imul(N,We)|0,l=l+Math.imul(I,Oe)|0,t=t+Math.imul(I,Je)|0,t=t+Math.imul($,Oe)|0,p=p+Math.imul($,Je)|0;var X=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(X>>>26)|0,X&=67108863,l=Math.imul(Ie,Y),t=Math.imul(Ie,oe),t=t+Math.imul(Le,Y)|0,p=Math.imul(Le,oe),l=l+Math.imul(Ce,ce)|0,t=t+Math.imul(Ce,Te)|0,t=t+Math.imul(je,ce)|0,p=p+Math.imul(je,Te)|0,l=l+Math.imul(Ne,Pe)|0,t=t+Math.imul(Ne,Ue)|0,t=t+Math.imul(ve,Pe)|0,p=p+Math.imul(ve,Ue)|0,l=l+Math.imul(Ae,He)|0,t=t+Math.imul(Ae,Ve)|0,t=t+Math.imul(qe,He)|0,p=p+Math.imul(qe,Ve)|0,l=l+Math.imul(z,Fe)|0,t=t+Math.imul(z,Ge)|0,t=t+Math.imul(ue,Fe)|0,p=p+Math.imul(ue,Ge)|0,l=l+Math.imul(Z,Ke)|0,t=t+Math.imul(Z,We)|0,t=t+Math.imul(ne,Ke)|0,p=p+Math.imul(ne,We)|0,l=l+Math.imul(V,Oe)|0,t=t+Math.imul(V,Je)|0,t=t+Math.imul(N,Oe)|0,p=p+Math.imul(N,Je)|0,l=l+Math.imul(I,F)|0,t=t+Math.imul(I,H)|0,t=t+Math.imul($,F)|0,p=p+Math.imul($,H)|0;var re=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(re>>>26)|0,re&=67108863,l=Math.imul($e,Y),t=Math.imul($e,oe),t=t+Math.imul(ze,Y)|0,p=Math.imul(ze,oe),l=l+Math.imul(Ie,ce)|0,t=t+Math.imul(Ie,Te)|0,t=t+Math.imul(Le,ce)|0,p=p+Math.imul(Le,Te)|0,l=l+Math.imul(Ce,Pe)|0,t=t+Math.imul(Ce,Ue)|0,t=t+Math.imul(je,Pe)|0,p=p+Math.imul(je,Ue)|0,l=l+Math.imul(Ne,He)|0,t=t+Math.imul(Ne,Ve)|0,t=t+Math.imul(ve,He)|0,p=p+Math.imul(ve,Ve)|0,l=l+Math.imul(Ae,Fe)|0,t=t+Math.imul(Ae,Ge)|0,t=t+Math.imul(qe,Fe)|0,p=p+Math.imul(qe,Ge)|0,l=l+Math.imul(z,Ke)|0,t=t+Math.imul(z,We)|0,t=t+Math.imul(ue,Ke)|0,p=p+Math.imul(ue,We)|0,l=l+Math.imul(Z,Oe)|0,t=t+Math.imul(Z,Je)|0,t=t+Math.imul(ne,Oe)|0,p=p+Math.imul(ne,Je)|0,l=l+Math.imul(V,F)|0,t=t+Math.imul(V,H)|0,t=t+Math.imul(N,F)|0,p=p+Math.imul(N,H)|0,l=l+Math.imul(I,J)|0,t=t+Math.imul(I,he)|0,t=t+Math.imul($,J)|0,p=p+Math.imul($,he)|0;var te=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(te>>>26)|0,te&=67108863,l=Math.imul(K,Y),t=Math.imul(K,oe),t=t+Math.imul(P,Y)|0,p=Math.imul(P,oe),l=l+Math.imul($e,ce)|0,t=t+Math.imul($e,Te)|0,t=t+Math.imul(ze,ce)|0,p=p+Math.imul(ze,Te)|0,l=l+Math.imul(Ie,Pe)|0,t=t+Math.imul(Ie,Ue)|0,t=t+Math.imul(Le,Pe)|0,p=p+Math.imul(Le,Ue)|0,l=l+Math.imul(Ce,He)|0,t=t+Math.imul(Ce,Ve)|0,t=t+Math.imul(je,He)|0,p=p+Math.imul(je,Ve)|0,l=l+Math.imul(Ne,Fe)|0,t=t+Math.imul(Ne,Ge)|0,t=t+Math.imul(ve,Fe)|0,p=p+Math.imul(ve,Ge)|0,l=l+Math.imul(Ae,Ke)|0,t=t+Math.imul(Ae,We)|0,t=t+Math.imul(qe,Ke)|0,p=p+Math.imul(qe,We)|0,l=l+Math.imul(z,Oe)|0,t=t+Math.imul(z,Je)|0,t=t+Math.imul(ue,Oe)|0,p=p+Math.imul(ue,Je)|0,l=l+Math.imul(Z,F)|0,t=t+Math.imul(Z,H)|0,t=t+Math.imul(ne,F)|0,p=p+Math.imul(ne,H)|0,l=l+Math.imul(V,J)|0,t=t+Math.imul(V,he)|0,t=t+Math.imul(N,J)|0,p=p+Math.imul(N,he)|0,l=l+Math.imul(I,de)|0,t=t+Math.imul(I,ge)|0,t=t+Math.imul($,de)|0,p=p+Math.imul($,ge)|0;var fe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(fe>>>26)|0,fe&=67108863,l=Math.imul(K,ce),t=Math.imul(K,Te),t=t+Math.imul(P,ce)|0,p=Math.imul(P,Te),l=l+Math.imul($e,Pe)|0,t=t+Math.imul($e,Ue)|0,t=t+Math.imul(ze,Pe)|0,p=p+Math.imul(ze,Ue)|0,l=l+Math.imul(Ie,He)|0,t=t+Math.imul(Ie,Ve)|0,t=t+Math.imul(Le,He)|0,p=p+Math.imul(Le,Ve)|0,l=l+Math.imul(Ce,Fe)|0,t=t+Math.imul(Ce,Ge)|0,t=t+Math.imul(je,Fe)|0,p=p+Math.imul(je,Ge)|0,l=l+Math.imul(Ne,Ke)|0,t=t+Math.imul(Ne,We)|0,t=t+Math.imul(ve,Ke)|0,p=p+Math.imul(ve,We)|0,l=l+Math.imul(Ae,Oe)|0,t=t+Math.imul(Ae,Je)|0,t=t+Math.imul(qe,Oe)|0,p=p+Math.imul(qe,Je)|0,l=l+Math.imul(z,F)|0,t=t+Math.imul(z,H)|0,t=t+Math.imul(ue,F)|0,p=p+Math.imul(ue,H)|0,l=l+Math.imul(Z,J)|0,t=t+Math.imul(Z,he)|0,t=t+Math.imul(ne,J)|0,p=p+Math.imul(ne,he)|0,l=l+Math.imul(V,de)|0,t=t+Math.imul(V,ge)|0,t=t+Math.imul(N,de)|0,p=p+Math.imul(N,ge)|0;var le=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(le>>>26)|0,le&=67108863,l=Math.imul(K,Pe),t=Math.imul(K,Ue),t=t+Math.imul(P,Pe)|0,p=Math.imul(P,Ue),l=l+Math.imul($e,He)|0,t=t+Math.imul($e,Ve)|0,t=t+Math.imul(ze,He)|0,p=p+Math.imul(ze,Ve)|0,l=l+Math.imul(Ie,Fe)|0,t=t+Math.imul(Ie,Ge)|0,t=t+Math.imul(Le,Fe)|0,p=p+Math.imul(Le,Ge)|0,l=l+Math.imul(Ce,Ke)|0,t=t+Math.imul(Ce,We)|0,t=t+Math.imul(je,Ke)|0,p=p+Math.imul(je,We)|0,l=l+Math.imul(Ne,Oe)|0,t=t+Math.imul(Ne,Je)|0,t=t+Math.imul(ve,Oe)|0,p=p+Math.imul(ve,Je)|0,l=l+Math.imul(Ae,F)|0,t=t+Math.imul(Ae,H)|0,t=t+Math.imul(qe,F)|0,p=p+Math.imul(qe,H)|0,l=l+Math.imul(z,J)|0,t=t+Math.imul(z,he)|0,t=t+Math.imul(ue,J)|0,p=p+Math.imul(ue,he)|0,l=l+Math.imul(Z,de)|0,t=t+Math.imul(Z,ge)|0,t=t+Math.imul(ne,de)|0,p=p+Math.imul(ne,ge)|0;var pe=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(pe>>>26)|0,pe&=67108863,l=Math.imul(K,He),t=Math.imul(K,Ve),t=t+Math.imul(P,He)|0,p=Math.imul(P,Ve),l=l+Math.imul($e,Fe)|0,t=t+Math.imul($e,Ge)|0,t=t+Math.imul(ze,Fe)|0,p=p+Math.imul(ze,Ge)|0,l=l+Math.imul(Ie,Ke)|0,t=t+Math.imul(Ie,We)|0,t=t+Math.imul(Le,Ke)|0,p=p+Math.imul(Le,We)|0,l=l+Math.imul(Ce,Oe)|0,t=t+Math.imul(Ce,Je)|0,t=t+Math.imul(je,Oe)|0,p=p+Math.imul(je,Je)|0,l=l+Math.imul(Ne,F)|0,t=t+Math.imul(Ne,H)|0,t=t+Math.imul(ve,F)|0,p=p+Math.imul(ve,H)|0,l=l+Math.imul(Ae,J)|0,t=t+Math.imul(Ae,he)|0,t=t+Math.imul(qe,J)|0,p=p+Math.imul(qe,he)|0,l=l+Math.imul(z,de)|0,t=t+Math.imul(z,ge)|0,t=t+Math.imul(ue,de)|0,p=p+Math.imul(ue,ge)|0;var Se=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Se>>>26)|0,Se&=67108863,l=Math.imul(K,Fe),t=Math.imul(K,Ge),t=t+Math.imul(P,Fe)|0,p=Math.imul(P,Ge),l=l+Math.imul($e,Ke)|0,t=t+Math.imul($e,We)|0,t=t+Math.imul(ze,Ke)|0,p=p+Math.imul(ze,We)|0,l=l+Math.imul(Ie,Oe)|0,t=t+Math.imul(Ie,Je)|0,t=t+Math.imul(Le,Oe)|0,p=p+Math.imul(Le,Je)|0,l=l+Math.imul(Ce,F)|0,t=t+Math.imul(Ce,H)|0,t=t+Math.imul(je,F)|0,p=p+Math.imul(je,H)|0,l=l+Math.imul(Ne,J)|0,t=t+Math.imul(Ne,he)|0,t=t+Math.imul(ve,J)|0,p=p+Math.imul(ve,he)|0,l=l+Math.imul(Ae,de)|0,t=t+Math.imul(Ae,ge)|0,t=t+Math.imul(qe,de)|0,p=p+Math.imul(qe,ge)|0;var Ee=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,l=Math.imul(K,Ke),t=Math.imul(K,We),t=t+Math.imul(P,Ke)|0,p=Math.imul(P,We),l=l+Math.imul($e,Oe)|0,t=t+Math.imul($e,Je)|0,t=t+Math.imul(ze,Oe)|0,p=p+Math.imul(ze,Je)|0,l=l+Math.imul(Ie,F)|0,t=t+Math.imul(Ie,H)|0,t=t+Math.imul(Le,F)|0,p=p+Math.imul(Le,H)|0,l=l+Math.imul(Ce,J)|0,t=t+Math.imul(Ce,he)|0,t=t+Math.imul(je,J)|0,p=p+Math.imul(je,he)|0,l=l+Math.imul(Ne,de)|0,t=t+Math.imul(Ne,ge)|0,t=t+Math.imul(ve,de)|0,p=p+Math.imul(ve,ge)|0;var me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(me>>>26)|0,me&=67108863,l=Math.imul(K,Oe),t=Math.imul(K,Je),t=t+Math.imul(P,Oe)|0,p=Math.imul(P,Je),l=l+Math.imul($e,F)|0,t=t+Math.imul($e,H)|0,t=t+Math.imul(ze,F)|0,p=p+Math.imul(ze,H)|0,l=l+Math.imul(Ie,J)|0,t=t+Math.imul(Ie,he)|0,t=t+Math.imul(Le,J)|0,p=p+Math.imul(Le,he)|0,l=l+Math.imul(Ce,de)|0,t=t+Math.imul(Ce,ge)|0,t=t+Math.imul(je,de)|0,p=p+Math.imul(je,ge)|0;var _e=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(_e>>>26)|0,_e&=67108863,l=Math.imul(K,F),t=Math.imul(K,H),t=t+Math.imul(P,F)|0,p=Math.imul(P,H),l=l+Math.imul($e,J)|0,t=t+Math.imul($e,he)|0,t=t+Math.imul(ze,J)|0,p=p+Math.imul(ze,he)|0,l=l+Math.imul(Ie,de)|0,t=t+Math.imul(Ie,ge)|0,t=t+Math.imul(Le,de)|0,p=p+Math.imul(Le,ge)|0;var De=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(De>>>26)|0,De&=67108863,l=Math.imul(K,J),t=Math.imul(K,he),t=t+Math.imul(P,J)|0,p=Math.imul(P,he),l=l+Math.imul($e,de)|0,t=t+Math.imul($e,ge)|0,t=t+Math.imul(ze,de)|0,p=p+Math.imul(ze,ge)|0;var Me=(y+l|0)+((t&8191)<<13)|0;y=(p+(t>>>13)|0)+(Me>>>26)|0,Me&=67108863,l=Math.imul(K,de),t=Math.imul(K,ge),t=t+Math.imul(P,de)|0,p=Math.imul(P,ge);var Be=(y+l|0)+((t&8191)<<13)|0;return y=(p+(t>>>13)|0)+(Be>>>26)|0,Be&=67108863,v[0]=tt,v[1]=Xe,v[2]=ct,v[3]=rt,v[4]=st,v[5]=at,v[6]=X,v[7]=re,v[8]=te,v[9]=fe,v[10]=le,v[11]=pe,v[12]=Se,v[13]=Ee,v[14]=me,v[15]=_e,v[16]=De,v[17]=Me,v[18]=Be,y!==0&&(v[19]=y,a.length++),a};Math.imul||(R=B);function T(w,e,r){r.negative=e.negative^w.negative,r.length=w.length+e.length;for(var a=0,o=0,d=0;d<r.length-1;d++){var v=o;o=0;for(var y=a&67108863,l=Math.min(d,e.length-1),t=Math.max(0,d-w.length+1);t<=l;t++){var p=d-t,q=w.words[p]|0,I=e.words[t]|0,$=q*I,G=$&67108863;v=v+($/67108864|0)|0,G=G+y|0,y=G&67108863,v=v+(G>>>26)|0,o+=v>>>26,v&=67108863}r.words[d]=y,a=v,v=o}return a!==0?r.words[d]=a:r.length--,r.strip()}function k(w,e,r){var a=new O;return a.mulp(w,e,r)}s.prototype.mulTo=function(e,r){var a,o=this.length+e.length;return this.length===10&&e.length===10?a=R(this,e,r):o<63?a=B(this,e,r):o<1024?a=T(this,e,r):a=k(this,e,r),a};function O(w,e){this.x=w,this.y=e}O.prototype.makeRBT=function(e){for(var r=new Array(e),a=s.prototype._countBits(e)-1,o=0;o<e;o++)r[o]=this.revBin(o,a,e);return r},O.prototype.revBin=function(e,r,a){if(e===0||e===a-1)return e;for(var o=0,d=0;d<r;d++)o|=(e&1)<<r-d-1,e>>=1;return o},O.prototype.permute=function(e,r,a,o,d,v){for(var y=0;y<v;y++)o[y]=r[e[y]],d[y]=a[e[y]]},O.prototype.transform=function(e,r,a,o,d,v){this.permute(v,e,r,a,o,d);for(var y=1;y<d;y<<=1)for(var l=y<<1,t=Math.cos(2*Math.PI/l),p=Math.sin(2*Math.PI/l),q=0;q<d;q+=l)for(var I=t,$=p,G=0;G<y;G++){var V=a[q+G],N=o[q+G],W=a[q+G+y],Z=o[q+G+y],ne=I*W-$*Z;Z=I*Z+$*W,W=ne,a[q+G]=V+W,o[q+G]=N+Z,a[q+G+y]=V-W,o[q+G+y]=N-Z,G!==l&&(ne=t*I-p*$,$=t*$+p*I,I=ne)}},O.prototype.guessLen13b=function(e,r){var a=Math.max(r,e)|1,o=a&1,d=0;for(a=a/2|0;a;a=a>>>1)d++;return 1<<d+1+o},O.prototype.conjugate=function(e,r,a){if(!(a<=1))for(var o=0;o<a/2;o++){var d=e[o];e[o]=e[a-o-1],e[a-o-1]=d,d=r[o],r[o]=-r[a-o-1],r[a-o-1]=-d}},O.prototype.normalize13b=function(e,r){for(var a=0,o=0;o<r/2;o++){var d=Math.round(e[2*o+1]/r)*8192+Math.round(e[2*o]/r)+a;e[o]=d&67108863,d<67108864?a=0:a=d/67108864|0}return e},O.prototype.convert13b=function(e,r,a,o){for(var d=0,v=0;v<r;v++)d=d+(e[v]|0),a[2*v]=d&8191,d=d>>>13,a[2*v+1]=d&8191,d=d>>>13;for(v=2*r;v<o;++v)a[v]=0;u(d===0),u((d&-8192)===0)},O.prototype.stub=function(e){for(var r=new Array(e),a=0;a<e;a++)r[a]=0;return r},O.prototype.mulp=function(e,r,a){var o=2*this.guessLen13b(e.length,r.length),d=this.makeRBT(o),v=this.stub(o),y=new Array(o),l=new Array(o),t=new Array(o),p=new Array(o),q=new Array(o),I=new Array(o),$=a.words;$.length=o,this.convert13b(e.words,e.length,y,o),this.convert13b(r.words,r.length,p,o),this.transform(y,v,l,t,o,d),this.transform(p,v,q,I,o,d);for(var G=0;G<o;G++){var V=l[G]*q[G]-t[G]*I[G];t[G]=l[G]*I[G]+t[G]*q[G],l[G]=V}return this.conjugate(l,t,o),this.transform(l,t,$,v,o,d),this.conjugate($,v,o),this.normalize13b($,o),a.negative=e.negative^r.negative,a.length=e.length+r.length,a.strip()},s.prototype.mul=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),this.mulTo(e,r)},s.prototype.mulf=function(e){var r=new s(null);return r.words=new Array(this.length+e.length),k(this,e,r)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){u(typeof e=="number"),u(e<67108864);for(var r=0,a=0;a<this.length;a++){var o=(this.words[a]|0)*e,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[a]=d&67108863}return r!==0&&(this.words[a]=r,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var r=A(e);if(r.length===0)return new s(1);for(var a=this,o=0;o<r.length&&r[o]===0;o++,a=a.sqr());if(++o<r.length)for(var d=a.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(a=a.mul(d));return a},s.prototype.iushln=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var v=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,l=(this.words[d]|0)-y<<r;this.words[d]=l|v,v=y>>>26-r}v&&(this.words[d]=v,this.length++)}if(a!==0){for(d=this.length-1;d>=0;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(e){return u(this.negative===0),this.iushln(e)},s.prototype.iushrn=function(e,r,a){u(typeof e=="number"&&e>=0);var o;r?o=(r-r%26)/26:o=0;var d=e%26,v=Math.min((e-d)/26,this.length),y=67108863^67108863>>>d<<d,l=a;if(o-=v,o=Math.max(0,o),l){for(var t=0;t<v;t++)l.words[t]=this.words[t];l.length=v}if(v!==0)if(this.length>v)for(this.length-=v,t=0;t<this.length;t++)this.words[t]=this.words[t+v];else this.words[0]=0,this.length=1;var p=0;for(t=this.length-1;t>=0&&(p!==0||t>=o);t--){var q=this.words[t]|0;this.words[t]=p<<26-d|q>>>d,p=q&y}return l&&p!==0&&(l.words[l.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,r,a){return u(this.negative===0),this.iushrn(e,r,a)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return!1;var d=this.words[a];return!!(d&o)},s.prototype.imaskn=function(e){u(typeof e=="number"&&e>=0);var r=e%26,a=(e-r)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(r!==0&&a++,this.length=Math.min(a,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return u(typeof e=="number"),u(e<67108864),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(e){if(u(typeof e=="number"),u(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,r,a){var o=e.length+a,d;this._expand(o);var v,y=0;for(d=0;d<e.length;d++){v=(this.words[d+a]|0)+y;var l=(e.words[d]|0)*r;v-=l&67108863,y=(v>>26)-(l/67108864|0),this.words[d+a]=v&67108863}for(;d<this.length-a;d++)v=(this.words[d+a]|0)+y,y=v>>26,this.words[d+a]=v&67108863;if(y===0)return this.strip();for(u(y===-1),y=0,d=0;d<this.length;d++)v=-(this.words[d]|0)+y,y=v>>26,this.words[d]=v&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,r){var a=this.length-e.length,o=this.clone(),d=e,v=d.words[d.length-1]|0,y=this._countBits(v);a=26-y,a!==0&&(d=d.ushln(a),o.iushln(a),v=d.words[d.length-1]|0);var l=o.length-d.length,t;if(r!=="mod"){t=new s(null),t.length=l+1,t.words=new Array(t.length);for(var p=0;p<t.length;p++)t.words[p]=0}var q=o.clone()._ishlnsubmul(d,1,l);q.negative===0&&(o=q,t&&(t.words[l]=1));for(var I=l-1;I>=0;I--){var $=(o.words[d.length+I]|0)*67108864+(o.words[d.length+I-1]|0);for($=Math.min($/v|0,67108863),o._ishlnsubmul(d,$,I);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(d,1,I),o.isZero()||(o.negative^=1);t&&(t.words[I]=$)}return t&&t.strip(),o.strip(),r!=="div"&&a!==0&&o.iushrn(a),{div:t||null,mod:o}},s.prototype.divmod=function(e,r,a){if(u(!e.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,v;return this.negative!==0&&e.negative===0?(v=this.neg().divmod(e,r),r!=="mod"&&(o=v.div.neg()),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.iadd(e)),{div:o,mod:d}):this.negative===0&&e.negative!==0?(v=this.divmod(e.neg(),r),r!=="mod"&&(o=v.div.neg()),{div:o,mod:v.mod}):this.negative&e.negative?(v=this.neg().divmod(e.neg(),r),r!=="div"&&(d=v.mod.neg(),a&&d.negative!==0&&d.isub(e)),{div:v.div,mod:d}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:e.length===1?r==="div"?{div:this.divn(e.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,r)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var a=r.div.negative!==0?r.mod.isub(e):r.mod,o=e.ushrn(1),d=e.andln(1),v=a.cmp(o);return v<0||d===1&&v===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(e){u(e<=67108863);for(var r=(1<<26)%e,a=0,o=this.length-1;o>=0;o--)a=(r*a+(this.words[o]|0))%e;return a},s.prototype.idivn=function(e){u(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var o=(this.words[a]|0)+r*67108864;this.words[a]=o/e|0,r=o%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=new s(0),y=new s(1),l=0;r.isEven()&&a.isEven();)r.iushrn(1),a.iushrn(1),++l;for(var t=a.clone(),p=r.clone();!r.isZero();){for(var q=0,I=1;!(r.words[0]&I)&&q<26;++q,I<<=1);if(q>0)for(r.iushrn(q);q-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(t),d.isub(p)),o.iushrn(1),d.iushrn(1);for(var $=0,G=1;!(a.words[0]&G)&&$<26;++$,G<<=1);if($>0)for(a.iushrn($);$-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(t),y.isub(p)),v.iushrn(1),y.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(v),d.isub(y)):(a.isub(r),v.isub(o),y.isub(d))}return{a:v,b:y,gcd:a.iushln(l)}},s.prototype._invmp=function(e){u(e.negative===0),u(!e.isZero());var r=this,a=e.clone();r.negative!==0?r=r.umod(e):r=r.clone();for(var o=new s(1),d=new s(0),v=a.clone();r.cmpn(1)>0&&a.cmpn(1)>0;){for(var y=0,l=1;!(r.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(v),o.iushrn(1);for(var t=0,p=1;!(a.words[0]&p)&&t<26;++t,p<<=1);if(t>0)for(a.iushrn(t);t-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);r.cmp(a)>=0?(r.isub(a),o.isub(d)):(a.isub(r),d.isub(o))}var q;return r.cmpn(1)===0?q=o:q=d,q.cmpn(0)<0&&q.iadd(e),q},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone(),a=e.clone();r.negative=0,a.negative=0;for(var o=0;r.isEven()&&a.isEven();o++)r.iushrn(1),a.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=r.cmp(a);if(d<0){var v=r;r=a,a=v}else if(d===0||a.cmpn(1)===0)break;r.isub(a)}while(!0);return a.iushln(o)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){u(typeof e=="number");var r=e%26,a=(e-r)/26,o=1<<r;if(this.length<=a)return this._expand(a+1),this.words[a]|=o,this;for(var d=o,v=a;d!==0&&v<this.length;v++){var y=this.words[v]|0;y+=d,d=y>>>26,y&=67108863,this.words[v]=y}return d!==0&&(this.words[v]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1)a=1;else{r&&(e=-e),u(e<=67108863,"Number is too big");var o=this.words[0]|0;a=o===e?0:o<e?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var r=0,a=this.length-1;a>=0;a--){var o=this.words[a]|0,d=e.words[a]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(e){return this.cmpn(e)===1},s.prototype.gt=function(e){return this.cmp(e)===1},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return this.cmpn(e)===-1},s.prototype.lt=function(e){return this.cmp(e)===-1},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return this.cmpn(e)===0},s.prototype.eq=function(e){return this.cmp(e)===0},s.red=function(e){return new se(e)},s.prototype.toRed=function(e){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return u(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return u(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var U={k256:null,p224:null,p192:null,p25519:null};function L(w,e){this.name=w,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},L.prototype.ireduce=function(e){var r=e,a;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),a=r.bitLength();while(a>this.n);var o=a<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},L.prototype.split=function(e,r){e.iushrn(this.n,0,r)},L.prototype.imulK=function(e){return e.imul(this.k)};function Q(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(Q,L),Q.prototype.split=function(e,r){for(var a=4194303,o=Math.min(e.length,9),d=0;d<o;d++)r.words[d]=e.words[d];if(r.length=o,e.length<=9){e.words[0]=0,e.length=1;return}var v=e.words[9];for(r.words[r.length++]=v&a,d=10;d<e.length;d++){var y=e.words[d]|0;e.words[d-10]=(y&a)<<4|v>>>22,v=y}v>>>=22,e.words[d-10]=v,v===0&&e.length>10?e.length-=10:e.length-=9},Q.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,a=0;a<e.length;a++){var o=e.words[a]|0;r+=o*977,e.words[a]=r&67108863,r=o*64+(r/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e};function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(ie,L);function we(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(we,L);function ye(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(ye,L),ye.prototype.imulK=function(e){for(var r=0,a=0;a<e.length;a++){var o=(e.words[a]|0)*19+r,d=o&67108863;o>>>=26,e.words[a]=d,r=o}return r!==0&&(e.words[e.length++]=r),e},s._prime=function(e){if(U[e])return U[e];var r;if(e==="k256")r=new Q;else if(e==="p224")r=new ie;else if(e==="p192")r=new we;else if(e==="p25519")r=new ye;else throw new Error("Unknown prime "+e);return U[e]=r,r};function se(w){if(typeof w=="string"){var e=s._prime(w);this.m=e.p,this.prime=e}else u(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}se.prototype._verify1=function(e){u(e.negative===0,"red works only with positives"),u(e.red,"red works only with red numbers")},se.prototype._verify2=function(e,r){u((e.negative|r.negative)===0,"red works only with positives"),u(e.red&&e.red===r.red,"red works only with red numbers")},se.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},se.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},se.prototype.add=function(e,r){this._verify2(e,r);var a=e.add(r);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},se.prototype.iadd=function(e,r){this._verify2(e,r);var a=e.iadd(r);return a.cmp(this.m)>=0&&a.isub(this.m),a},se.prototype.sub=function(e,r){this._verify2(e,r);var a=e.sub(r);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},se.prototype.isub=function(e,r){this._verify2(e,r);var a=e.isub(r);return a.cmpn(0)<0&&a.iadd(this.m),a},se.prototype.shl=function(e,r){return this._verify1(e),this.imod(e.ushln(r))},se.prototype.imul=function(e,r){return this._verify2(e,r),this.imod(e.imul(r))},se.prototype.mul=function(e,r){return this._verify2(e,r),this.imod(e.mul(r))},se.prototype.isqr=function(e){return this.imul(e,e.clone())},se.prototype.sqr=function(e){return this.mul(e,e)},se.prototype.sqrt=function(e){if(e.isZero())return e.clone();var r=this.m.andln(3);if(u(r%2===1),r===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(e,a)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);u(!o.isZero());var v=new s(1).toRed(this),y=v.redNeg(),l=this.m.subn(1).iushrn(1),t=this.m.bitLength();for(t=new s(2*t*t).toRed(this);this.pow(t,l).cmp(y)!==0;)t.redIAdd(y);for(var p=this.pow(t,o),q=this.pow(e,o.addn(1).iushrn(1)),I=this.pow(e,o),$=d;I.cmp(v)!==0;){for(var G=I,V=0;G.cmp(v)!==0;V++)G=G.redSqr();u(V<$);var N=this.pow(p,new s(1).iushln($-V-1));q=q.redMul(N),p=N.redSqr(),I=I.redMul(p),$=V}return q},se.prototype.invm=function(e){var r=e._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},se.prototype.pow=function(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var a=4,o=new Array(1<<a);o[0]=new s(1).toRed(this),o[1]=e;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],e);var v=o[0],y=0,l=0,t=r.bitLength()%26;for(t===0&&(t=26),d=r.length-1;d>=0;d--){for(var p=r.words[d],q=t-1;q>=0;q--){var I=p>>q&1;if(v!==o[0]&&(v=this.sqr(v)),I===0&&y===0){l=0;continue}y<<=1,y|=I,l++,!(l!==a&&(d!==0||q!==0))&&(v=this.mul(v,o[y]),l=0,y=0)}t=26}return v},se.prototype.convertTo=function(e){var r=e.umod(this.m);return r===e?r.clone():r},se.prototype.convertFrom=function(e){var r=e.clone();return r.red=null,r},s.mont=function(e){return new ke(e)};function ke(w){se.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(ke,se),ke.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},ke.prototype.convertFrom=function(e){var r=this.imod(e.mul(this.rinv));return r.red=null,r},ke.prototype.imul=function(e,r){if(e.isZero()||r.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.mul=function(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var a=e.mul(r),o=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a.isub(o).iushrn(this.shift),v=d;return d.cmp(this.m)>=0?v=d.isub(this.m):d.cmpn(0)<0&&(v=d.iadd(this.m)),v._forceRed(this)},ke.prototype.invm=function(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,commonjsGlobal)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var c=requireBn(),n=requireSafeBuffer$1().Buffer;function h(u,m){return n.from(u.toRed(c.mont(m.modulus)).redPow(new c(m.publicExponent)).fromRed().toArray())}return withPublic_1=h,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var c=requireParseAsn1(),n=requireBrowser$b(),h=requireBrowser$9(),u=requireMgf(),m=requireXor(),s=requireBn(),g=requireWithPublic(),x=requireBrowserifyRsa(),_=requireSafeBuffer$1().Buffer;publicEncrypt=function(A,B,R){var T;A.padding?T=A.padding:R?T=1:T=4;var k=c(A),O;if(T===4)O=M(k,B);else if(T===1)O=b(k,B,R);else if(T===3){if(O=new s(B),O.cmp(k.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return R?x(O,k):g(O,k)};function M(E,A){var B=E.modulus.byteLength(),R=A.length,T=h("sha1").update(_.alloc(0)).digest(),k=T.length,O=2*k;if(R>B-O-2)throw new Error("message too long");var U=_.alloc(B-R-O-2),L=B-k-1,Q=n(k),ie=m(_.concat([T,U,_.alloc(1,1),A],L),u(Q,L)),we=m(Q,u(ie,k));return new s(_.concat([_.alloc(1),we,ie],B))}function b(E,A,B){var R=A.length,T=E.modulus.byteLength();if(R>T-11)throw new Error("message too long");var k;return B?k=_.alloc(T-R-3,255):k=S(T-R-3),new s(_.concat([_.from([0,B?1:2]),k,_.alloc(1),A],T))}function S(E){for(var A=_.allocUnsafe(E),B=0,R=n(E*2),T=0,k;B<E;)T===R.length&&(R=n(E*2),T=0),k=R[T++],k&&(A[B++]=k);return A}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var c=requireParseAsn1(),n=requireMgf(),h=requireXor(),u=requireBn(),m=requireBrowserifyRsa(),s=requireBrowser$9(),g=requireWithPublic(),x=requireSafeBuffer$1().Buffer;privateDecrypt=function(E,A,B){var R;E.padding?R=E.padding:B?R=1:R=4;var T=c(E),k=T.modulus.byteLength();if(A.length>k||new u(A).cmp(T.modulus)>=0)throw new Error("decryption error");var O;B?O=g(new u(A),T):O=m(A,T);var U=x.alloc(k-O.length);if(O=x.concat([U,O],k),R===4)return _(T,O);if(R===1)return M(T,O,B);if(R===3)return O;throw new Error("unknown padding")};function _(S,E){var A=S.modulus.byteLength(),B=s("sha1").update(x.alloc(0)).digest(),R=B.length;if(E[0]!==0)throw new Error("decryption error");var T=E.slice(1,R+1),k=E.slice(R+1),O=h(T,n(k,R)),U=h(k,n(O,A-R-1));if(b(B,U.slice(0,R)))throw new Error("decryption error");for(var L=R;U[L]===0;)L++;if(U[L++]!==1)throw new Error("decryption error");return U.slice(L)}function M(S,E,A){for(var B=E.slice(0,2),R=2,T=0;E[R++]!==0;)if(R>=E.length){T++;break}var k=E.slice(2,R-1);if((B.toString("hex")!=="0002"&&!A||B.toString("hex")!=="0001"&&A)&&T++,k.length<8&&T++,T)throw new Error("decryption error");return E.slice(R)}function b(S,E){S=x.from(S),E=x.from(E);var A=0,B=S.length;S.length!==E.length&&(A++,B=Math.min(S.length,E.length));for(var R=-1;++R<B;)A+=S[R]^E[R];return A}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(c){c.publicEncrypt=requirePublicEncrypt(),c.privateDecrypt=requirePrivateDecrypt(),c.privateEncrypt=function(h,u){return c.publicEncrypt(h,u,!0)},c.publicDecrypt=function(h,u){return c.privateDecrypt(h,u,!0)}}(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function c(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var n=requireSafeBuffer$1(),h=requireBrowser$b(),u=n.Buffer,m=n.kMaxLength,s=commonjsGlobal.crypto||commonjsGlobal.msCrypto,g=Math.pow(2,32)-1;function x(E,A){if(typeof E!="number"||E!==E)throw new TypeError("offset must be a number");if(E>g||E<0)throw new TypeError("offset must be a uint32");if(E>m||E>A)throw new RangeError("offset out of range")}function _(E,A,B){if(typeof E!="number"||E!==E)throw new TypeError("size must be a number");if(E>g||E<0)throw new TypeError("size must be a uint32");if(E+A>B||E>m)throw new RangeError("buffer too small")}s&&s.getRandomValues||!process$1.browser?(browser.randomFill=M,browser.randomFillSync=S):(browser.randomFill=c,browser.randomFillSync=c);function M(E,A,B,R){if(!u.isBuffer(E)&&!(E instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof A=="function")R=A,A=0,B=E.length;else if(typeof B=="function")R=B,B=E.length-A;else if(typeof R!="function")throw new TypeError('"cb" argument must be a function');return x(A,E.length),_(B,A,E.length),b(E,A,B,R)}function b(E,A,B,R){if(process$1.browser){var T=E.buffer,k=new Uint8Array(T,A,B);if(s.getRandomValues(k),R){process$1.nextTick(function(){R(null,E)});return}return E}if(R){h(B,function(U,L){if(U)return R(U);L.copy(E,A),R(null,E)});return}var O=h(B);return O.copy(E,A),E}function S(E,A,B){if(typeof A>"u"&&(A=0),!u.isBuffer(E)&&!(E instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return x(A,E.length),B===void 0&&(B=E.length-A),_(B,A,E.length),b(E,A,B)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var c=requireAlgos(),n=Object.keys(c),h=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);cryptoBrowserify.getHashes=function(){return h};var u=requireBrowser$7();cryptoBrowserify.pbkdf2=u.pbkdf2,cryptoBrowserify.pbkdf2Sync=u.pbkdf2Sync;var m=requireBrowser$5();cryptoBrowserify.Cipher=m.Cipher,cryptoBrowserify.createCipher=m.createCipher,cryptoBrowserify.Cipheriv=m.Cipheriv,cryptoBrowserify.createCipheriv=m.createCipheriv,cryptoBrowserify.Decipher=m.Decipher,cryptoBrowserify.createDecipher=m.createDecipher,cryptoBrowserify.Decipheriv=m.Decipheriv,cryptoBrowserify.createDecipheriv=m.createDecipheriv,cryptoBrowserify.getCiphers=m.getCiphers,cryptoBrowserify.listCiphers=m.listCiphers;var s=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=s.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=s.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=s.getDiffieHellman,cryptoBrowserify.createDiffieHellman=s.createDiffieHellman,cryptoBrowserify.DiffieHellman=s.DiffieHellman;var g=requireBrowser$3();cryptoBrowserify.createSign=g.createSign,cryptoBrowserify.Sign=g.Sign,cryptoBrowserify.createVerify=g.createVerify,cryptoBrowserify.Verify=g.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var x=requireBrowser$1();cryptoBrowserify.publicEncrypt=x.publicEncrypt,cryptoBrowserify.privateEncrypt=x.privateEncrypt,cryptoBrowserify.publicDecrypt=x.publicDecrypt,cryptoBrowserify.privateDecrypt=x.privateDecrypt;var _=requireBrowser();return cryptoBrowserify.randomFill=_.randomFill,cryptoBrowserify.randomFillSync=_.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}(function(c){(function(n){var h=function(j){var F,H=new Float64Array(16);if(j)for(F=0;F<j.length;F++)H[F]=j[F];return H},u=function(){throw new Error("no PRNG")},m=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var g=h(),x=h([1]),_=h([56129,1]),M=h([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),b=h([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=h([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),E=h([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=h([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(j,F,H,C){j[F]=H>>24&255,j[F+1]=H>>16&255,j[F+2]=H>>8&255,j[F+3]=H&255,j[F+4]=C>>24&255,j[F+5]=C>>16&255,j[F+6]=C>>8&255,j[F+7]=C&255}function R(j,F,H,C,J){var he,xe=0;for(he=0;he<J;he++)xe|=j[F+he]^H[C+he];return(1&xe-1>>>8)-1}function T(j,F,H,C){return R(j,F,H,C,16)}function k(j,F,H,C){return R(j,F,H,C,32)}function O(j,F,H,C){for(var J=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,he=H[0]&255|(H[1]&255)<<8|(H[2]&255)<<16|(H[3]&255)<<24,xe=H[4]&255|(H[5]&255)<<8|(H[6]&255)<<16|(H[7]&255)<<24,de=H[8]&255|(H[9]&255)<<8|(H[10]&255)<<16|(H[11]&255)<<24,ge=H[12]&255|(H[13]&255)<<8|(H[14]&255)<<16|(H[15]&255)<<24,tt=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,Xe=F[0]&255|(F[1]&255)<<8|(F[2]&255)<<16|(F[3]&255)<<24,ct=F[4]&255|(F[5]&255)<<8|(F[6]&255)<<16|(F[7]&255)<<24,rt=F[8]&255|(F[9]&255)<<8|(F[10]&255)<<16|(F[11]&255)<<24,st=F[12]&255|(F[13]&255)<<8|(F[14]&255)<<16|(F[15]&255)<<24,at=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,X=H[16]&255|(H[17]&255)<<8|(H[18]&255)<<16|(H[19]&255)<<24,re=H[20]&255|(H[21]&255)<<8|(H[22]&255)<<16|(H[23]&255)<<24,te=H[24]&255|(H[25]&255)<<8|(H[26]&255)<<16|(H[27]&255)<<24,fe=H[28]&255|(H[29]&255)<<8|(H[30]&255)<<16|(H[31]&255)<<24,le=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,pe=J,Se=he,Ee=xe,me=de,_e=ge,De=tt,Me=Xe,Be=ct,Qe=rt,Ye=st,et=at,it=X,dt=re,yt=te,wt=fe,gt=le,be,_t=0;_t<20;_t+=2)be=pe+dt|0,_e^=be<<7|be>>>25,be=_e+pe|0,Qe^=be<<9|be>>>23,be=Qe+_e|0,dt^=be<<13|be>>>19,be=dt+Qe|0,pe^=be<<18|be>>>14,be=De+Se|0,Ye^=be<<7|be>>>25,be=Ye+De|0,yt^=be<<9|be>>>23,be=yt+Ye|0,Se^=be<<13|be>>>19,be=Se+yt|0,De^=be<<18|be>>>14,be=et+Me|0,wt^=be<<7|be>>>25,be=wt+et|0,Ee^=be<<9|be>>>23,be=Ee+wt|0,Me^=be<<13|be>>>19,be=Me+Ee|0,et^=be<<18|be>>>14,be=gt+it|0,me^=be<<7|be>>>25,be=me+gt|0,Be^=be<<9|be>>>23,be=Be+me|0,it^=be<<13|be>>>19,be=it+Be|0,gt^=be<<18|be>>>14,be=pe+me|0,Se^=be<<7|be>>>25,be=Se+pe|0,Ee^=be<<9|be>>>23,be=Ee+Se|0,me^=be<<13|be>>>19,be=me+Ee|0,pe^=be<<18|be>>>14,be=De+_e|0,Me^=be<<7|be>>>25,be=Me+De|0,Be^=be<<9|be>>>23,be=Be+Me|0,_e^=be<<13|be>>>19,be=_e+Be|0,De^=be<<18|be>>>14,be=et+Ye|0,it^=be<<7|be>>>25,be=it+et|0,Qe^=be<<9|be>>>23,be=Qe+it|0,Ye^=be<<13|be>>>19,be=Ye+Qe|0,et^=be<<18|be>>>14,be=gt+wt|0,dt^=be<<7|be>>>25,be=dt+gt|0,yt^=be<<9|be>>>23,be=yt+dt|0,wt^=be<<13|be>>>19,be=wt+yt|0,gt^=be<<18|be>>>14;pe=pe+J|0,Se=Se+he|0,Ee=Ee+xe|0,me=me+de|0,_e=_e+ge|0,De=De+tt|0,Me=Me+Xe|0,Be=Be+ct|0,Qe=Qe+rt|0,Ye=Ye+st|0,et=et+at|0,it=it+X|0,dt=dt+re|0,yt=yt+te|0,wt=wt+fe|0,gt=gt+le|0,j[0]=pe>>>0&255,j[1]=pe>>>8&255,j[2]=pe>>>16&255,j[3]=pe>>>24&255,j[4]=Se>>>0&255,j[5]=Se>>>8&255,j[6]=Se>>>16&255,j[7]=Se>>>24&255,j[8]=Ee>>>0&255,j[9]=Ee>>>8&255,j[10]=Ee>>>16&255,j[11]=Ee>>>24&255,j[12]=me>>>0&255,j[13]=me>>>8&255,j[14]=me>>>16&255,j[15]=me>>>24&255,j[16]=_e>>>0&255,j[17]=_e>>>8&255,j[18]=_e>>>16&255,j[19]=_e>>>24&255,j[20]=De>>>0&255,j[21]=De>>>8&255,j[22]=De>>>16&255,j[23]=De>>>24&255,j[24]=Me>>>0&255,j[25]=Me>>>8&255,j[26]=Me>>>16&255,j[27]=Me>>>24&255,j[28]=Be>>>0&255,j[29]=Be>>>8&255,j[30]=Be>>>16&255,j[31]=Be>>>24&255,j[32]=Qe>>>0&255,j[33]=Qe>>>8&255,j[34]=Qe>>>16&255,j[35]=Qe>>>24&255,j[36]=Ye>>>0&255,j[37]=Ye>>>8&255,j[38]=Ye>>>16&255,j[39]=Ye>>>24&255,j[40]=et>>>0&255,j[41]=et>>>8&255,j[42]=et>>>16&255,j[43]=et>>>24&255,j[44]=it>>>0&255,j[45]=it>>>8&255,j[46]=it>>>16&255,j[47]=it>>>24&255,j[48]=dt>>>0&255,j[49]=dt>>>8&255,j[50]=dt>>>16&255,j[51]=dt>>>24&255,j[52]=yt>>>0&255,j[53]=yt>>>8&255,j[54]=yt>>>16&255,j[55]=yt>>>24&255,j[56]=wt>>>0&255,j[57]=wt>>>8&255,j[58]=wt>>>16&255,j[59]=wt>>>24&255,j[60]=gt>>>0&255,j[61]=gt>>>8&255,j[62]=gt>>>16&255,j[63]=gt>>>24&255}function U(j,F,H,C){for(var J=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,he=H[0]&255|(H[1]&255)<<8|(H[2]&255)<<16|(H[3]&255)<<24,xe=H[4]&255|(H[5]&255)<<8|(H[6]&255)<<16|(H[7]&255)<<24,de=H[8]&255|(H[9]&255)<<8|(H[10]&255)<<16|(H[11]&255)<<24,ge=H[12]&255|(H[13]&255)<<8|(H[14]&255)<<16|(H[15]&255)<<24,tt=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,Xe=F[0]&255|(F[1]&255)<<8|(F[2]&255)<<16|(F[3]&255)<<24,ct=F[4]&255|(F[5]&255)<<8|(F[6]&255)<<16|(F[7]&255)<<24,rt=F[8]&255|(F[9]&255)<<8|(F[10]&255)<<16|(F[11]&255)<<24,st=F[12]&255|(F[13]&255)<<8|(F[14]&255)<<16|(F[15]&255)<<24,at=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,X=H[16]&255|(H[17]&255)<<8|(H[18]&255)<<16|(H[19]&255)<<24,re=H[20]&255|(H[21]&255)<<8|(H[22]&255)<<16|(H[23]&255)<<24,te=H[24]&255|(H[25]&255)<<8|(H[26]&255)<<16|(H[27]&255)<<24,fe=H[28]&255|(H[29]&255)<<8|(H[30]&255)<<16|(H[31]&255)<<24,le=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,pe=J,Se=he,Ee=xe,me=de,_e=ge,De=tt,Me=Xe,Be=ct,Qe=rt,Ye=st,et=at,it=X,dt=re,yt=te,wt=fe,gt=le,be,_t=0;_t<20;_t+=2)be=pe+dt|0,_e^=be<<7|be>>>25,be=_e+pe|0,Qe^=be<<9|be>>>23,be=Qe+_e|0,dt^=be<<13|be>>>19,be=dt+Qe|0,pe^=be<<18|be>>>14,be=De+Se|0,Ye^=be<<7|be>>>25,be=Ye+De|0,yt^=be<<9|be>>>23,be=yt+Ye|0,Se^=be<<13|be>>>19,be=Se+yt|0,De^=be<<18|be>>>14,be=et+Me|0,wt^=be<<7|be>>>25,be=wt+et|0,Ee^=be<<9|be>>>23,be=Ee+wt|0,Me^=be<<13|be>>>19,be=Me+Ee|0,et^=be<<18|be>>>14,be=gt+it|0,me^=be<<7|be>>>25,be=me+gt|0,Be^=be<<9|be>>>23,be=Be+me|0,it^=be<<13|be>>>19,be=it+Be|0,gt^=be<<18|be>>>14,be=pe+me|0,Se^=be<<7|be>>>25,be=Se+pe|0,Ee^=be<<9|be>>>23,be=Ee+Se|0,me^=be<<13|be>>>19,be=me+Ee|0,pe^=be<<18|be>>>14,be=De+_e|0,Me^=be<<7|be>>>25,be=Me+De|0,Be^=be<<9|be>>>23,be=Be+Me|0,_e^=be<<13|be>>>19,be=_e+Be|0,De^=be<<18|be>>>14,be=et+Ye|0,it^=be<<7|be>>>25,be=it+et|0,Qe^=be<<9|be>>>23,be=Qe+it|0,Ye^=be<<13|be>>>19,be=Ye+Qe|0,et^=be<<18|be>>>14,be=gt+wt|0,dt^=be<<7|be>>>25,be=dt+gt|0,yt^=be<<9|be>>>23,be=yt+dt|0,wt^=be<<13|be>>>19,be=wt+yt|0,gt^=be<<18|be>>>14;j[0]=pe>>>0&255,j[1]=pe>>>8&255,j[2]=pe>>>16&255,j[3]=pe>>>24&255,j[4]=De>>>0&255,j[5]=De>>>8&255,j[6]=De>>>16&255,j[7]=De>>>24&255,j[8]=et>>>0&255,j[9]=et>>>8&255,j[10]=et>>>16&255,j[11]=et>>>24&255,j[12]=gt>>>0&255,j[13]=gt>>>8&255,j[14]=gt>>>16&255,j[15]=gt>>>24&255,j[16]=Me>>>0&255,j[17]=Me>>>8&255,j[18]=Me>>>16&255,j[19]=Me>>>24&255,j[20]=Be>>>0&255,j[21]=Be>>>8&255,j[22]=Be>>>16&255,j[23]=Be>>>24&255,j[24]=Qe>>>0&255,j[25]=Qe>>>8&255,j[26]=Qe>>>16&255,j[27]=Qe>>>24&255,j[28]=Ye>>>0&255,j[29]=Ye>>>8&255,j[30]=Ye>>>16&255,j[31]=Ye>>>24&255}function L(j,F,H,C){O(j,F,H,C)}function Q(j,F,H,C){U(j,F,H,C)}var ie=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function we(j,F,H,C,J,he,xe){var de=new Uint8Array(16),ge=new Uint8Array(64),tt,Xe;for(Xe=0;Xe<16;Xe++)de[Xe]=0;for(Xe=0;Xe<8;Xe++)de[Xe]=he[Xe];for(;J>=64;){for(L(ge,de,xe,ie),Xe=0;Xe<64;Xe++)j[F+Xe]=H[C+Xe]^ge[Xe];for(tt=1,Xe=8;Xe<16;Xe++)tt=tt+(de[Xe]&255)|0,de[Xe]=tt&255,tt>>>=8;J-=64,F+=64,C+=64}if(J>0)for(L(ge,de,xe,ie),Xe=0;Xe<J;Xe++)j[F+Xe]=H[C+Xe]^ge[Xe];return 0}function ye(j,F,H,C,J){var he=new Uint8Array(16),xe=new Uint8Array(64),de,ge;for(ge=0;ge<16;ge++)he[ge]=0;for(ge=0;ge<8;ge++)he[ge]=C[ge];for(;H>=64;){for(L(xe,he,J,ie),ge=0;ge<64;ge++)j[F+ge]=xe[ge];for(de=1,ge=8;ge<16;ge++)de=de+(he[ge]&255)|0,he[ge]=de&255,de>>>=8;H-=64,F+=64}if(H>0)for(L(xe,he,J,ie),ge=0;ge<H;ge++)j[F+ge]=xe[ge];return 0}function se(j,F,H,C,J){var he=new Uint8Array(32);Q(he,C,J,ie);for(var xe=new Uint8Array(8),de=0;de<8;de++)xe[de]=C[de+16];return ye(j,F,H,xe,he)}function ke(j,F,H,C,J,he,xe){var de=new Uint8Array(32);Q(de,he,xe,ie);for(var ge=new Uint8Array(8),tt=0;tt<8;tt++)ge[tt]=he[tt+16];return we(j,F,H,C,J,ge,de)}var w=function(j){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var F,H,C,J,he,xe,de,ge;F=j[0]&255|(j[1]&255)<<8,this.r[0]=F&8191,H=j[2]&255|(j[3]&255)<<8,this.r[1]=(F>>>13|H<<3)&8191,C=j[4]&255|(j[5]&255)<<8,this.r[2]=(H>>>10|C<<6)&7939,J=j[6]&255|(j[7]&255)<<8,this.r[3]=(C>>>7|J<<9)&8191,he=j[8]&255|(j[9]&255)<<8,this.r[4]=(J>>>4|he<<12)&255,this.r[5]=he>>>1&8190,xe=j[10]&255|(j[11]&255)<<8,this.r[6]=(he>>>14|xe<<2)&8191,de=j[12]&255|(j[13]&255)<<8,this.r[7]=(xe>>>11|de<<5)&8065,ge=j[14]&255|(j[15]&255)<<8,this.r[8]=(de>>>8|ge<<8)&8191,this.r[9]=ge>>>5&127,this.pad[0]=j[16]&255|(j[17]&255)<<8,this.pad[1]=j[18]&255|(j[19]&255)<<8,this.pad[2]=j[20]&255|(j[21]&255)<<8,this.pad[3]=j[22]&255|(j[23]&255)<<8,this.pad[4]=j[24]&255|(j[25]&255)<<8,this.pad[5]=j[26]&255|(j[27]&255)<<8,this.pad[6]=j[28]&255|(j[29]&255)<<8,this.pad[7]=j[30]&255|(j[31]&255)<<8};w.prototype.blocks=function(j,F,H){for(var C=this.fin?0:2048,J,he,xe,de,ge,tt,Xe,ct,rt,st,at,X,re,te,fe,le,pe,Se,Ee,me=this.h[0],_e=this.h[1],De=this.h[2],Me=this.h[3],Be=this.h[4],Qe=this.h[5],Ye=this.h[6],et=this.h[7],it=this.h[8],dt=this.h[9],yt=this.r[0],wt=this.r[1],gt=this.r[2],be=this.r[3],_t=this.r[4],Et=this.r[5],At=this.r[6],xt=this.r[7],Mt=this.r[8],St=this.r[9];H>=16;)J=j[F+0]&255|(j[F+1]&255)<<8,me+=J&8191,he=j[F+2]&255|(j[F+3]&255)<<8,_e+=(J>>>13|he<<3)&8191,xe=j[F+4]&255|(j[F+5]&255)<<8,De+=(he>>>10|xe<<6)&8191,de=j[F+6]&255|(j[F+7]&255)<<8,Me+=(xe>>>7|de<<9)&8191,ge=j[F+8]&255|(j[F+9]&255)<<8,Be+=(de>>>4|ge<<12)&8191,Qe+=ge>>>1&8191,tt=j[F+10]&255|(j[F+11]&255)<<8,Ye+=(ge>>>14|tt<<2)&8191,Xe=j[F+12]&255|(j[F+13]&255)<<8,et+=(tt>>>11|Xe<<5)&8191,ct=j[F+14]&255|(j[F+15]&255)<<8,it+=(Xe>>>8|ct<<8)&8191,dt+=ct>>>5|C,rt=0,st=rt,st+=me*yt,st+=_e*(5*St),st+=De*(5*Mt),st+=Me*(5*xt),st+=Be*(5*At),rt=st>>>13,st&=8191,st+=Qe*(5*Et),st+=Ye*(5*_t),st+=et*(5*be),st+=it*(5*gt),st+=dt*(5*wt),rt+=st>>>13,st&=8191,at=rt,at+=me*wt,at+=_e*yt,at+=De*(5*St),at+=Me*(5*Mt),at+=Be*(5*xt),rt=at>>>13,at&=8191,at+=Qe*(5*At),at+=Ye*(5*Et),at+=et*(5*_t),at+=it*(5*be),at+=dt*(5*gt),rt+=at>>>13,at&=8191,X=rt,X+=me*gt,X+=_e*wt,X+=De*yt,X+=Me*(5*St),X+=Be*(5*Mt),rt=X>>>13,X&=8191,X+=Qe*(5*xt),X+=Ye*(5*At),X+=et*(5*Et),X+=it*(5*_t),X+=dt*(5*be),rt+=X>>>13,X&=8191,re=rt,re+=me*be,re+=_e*gt,re+=De*wt,re+=Me*yt,re+=Be*(5*St),rt=re>>>13,re&=8191,re+=Qe*(5*Mt),re+=Ye*(5*xt),re+=et*(5*At),re+=it*(5*Et),re+=dt*(5*_t),rt+=re>>>13,re&=8191,te=rt,te+=me*_t,te+=_e*be,te+=De*gt,te+=Me*wt,te+=Be*yt,rt=te>>>13,te&=8191,te+=Qe*(5*St),te+=Ye*(5*Mt),te+=et*(5*xt),te+=it*(5*At),te+=dt*(5*Et),rt+=te>>>13,te&=8191,fe=rt,fe+=me*Et,fe+=_e*_t,fe+=De*be,fe+=Me*gt,fe+=Be*wt,rt=fe>>>13,fe&=8191,fe+=Qe*yt,fe+=Ye*(5*St),fe+=et*(5*Mt),fe+=it*(5*xt),fe+=dt*(5*At),rt+=fe>>>13,fe&=8191,le=rt,le+=me*At,le+=_e*Et,le+=De*_t,le+=Me*be,le+=Be*gt,rt=le>>>13,le&=8191,le+=Qe*wt,le+=Ye*yt,le+=et*(5*St),le+=it*(5*Mt),le+=dt*(5*xt),rt+=le>>>13,le&=8191,pe=rt,pe+=me*xt,pe+=_e*At,pe+=De*Et,pe+=Me*_t,pe+=Be*be,rt=pe>>>13,pe&=8191,pe+=Qe*gt,pe+=Ye*wt,pe+=et*yt,pe+=it*(5*St),pe+=dt*(5*Mt),rt+=pe>>>13,pe&=8191,Se=rt,Se+=me*Mt,Se+=_e*xt,Se+=De*At,Se+=Me*Et,Se+=Be*_t,rt=Se>>>13,Se&=8191,Se+=Qe*be,Se+=Ye*gt,Se+=et*wt,Se+=it*yt,Se+=dt*(5*St),rt+=Se>>>13,Se&=8191,Ee=rt,Ee+=me*St,Ee+=_e*Mt,Ee+=De*xt,Ee+=Me*At,Ee+=Be*Et,rt=Ee>>>13,Ee&=8191,Ee+=Qe*_t,Ee+=Ye*be,Ee+=et*gt,Ee+=it*wt,Ee+=dt*yt,rt+=Ee>>>13,Ee&=8191,rt=(rt<<2)+rt|0,rt=rt+st|0,st=rt&8191,rt=rt>>>13,at+=rt,me=st,_e=at,De=X,Me=re,Be=te,Qe=fe,Ye=le,et=pe,it=Se,dt=Ee,F+=16,H-=16;this.h[0]=me,this.h[1]=_e,this.h[2]=De,this.h[3]=Me,this.h[4]=Be,this.h[5]=Qe,this.h[6]=Ye,this.h[7]=et,this.h[8]=it,this.h[9]=dt},w.prototype.finish=function(j,F){var H=new Uint16Array(10),C,J,he,xe;if(this.leftover){for(xe=this.leftover,this.buffer[xe++]=1;xe<16;xe++)this.buffer[xe]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(C=this.h[1]>>>13,this.h[1]&=8191,xe=2;xe<10;xe++)this.h[xe]+=C,C=this.h[xe]>>>13,this.h[xe]&=8191;for(this.h[0]+=C*5,C=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=C,C=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=C,H[0]=this.h[0]+5,C=H[0]>>>13,H[0]&=8191,xe=1;xe<10;xe++)H[xe]=this.h[xe]+C,C=H[xe]>>>13,H[xe]&=8191;for(H[9]-=8192,J=(C^1)-1,xe=0;xe<10;xe++)H[xe]&=J;for(J=~J,xe=0;xe<10;xe++)this.h[xe]=this.h[xe]&J|H[xe];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,he=this.h[0]+this.pad[0],this.h[0]=he&65535,xe=1;xe<8;xe++)he=(this.h[xe]+this.pad[xe]|0)+(he>>>16)|0,this.h[xe]=he&65535;j[F+0]=this.h[0]>>>0&255,j[F+1]=this.h[0]>>>8&255,j[F+2]=this.h[1]>>>0&255,j[F+3]=this.h[1]>>>8&255,j[F+4]=this.h[2]>>>0&255,j[F+5]=this.h[2]>>>8&255,j[F+6]=this.h[3]>>>0&255,j[F+7]=this.h[3]>>>8&255,j[F+8]=this.h[4]>>>0&255,j[F+9]=this.h[4]>>>8&255,j[F+10]=this.h[5]>>>0&255,j[F+11]=this.h[5]>>>8&255,j[F+12]=this.h[6]>>>0&255,j[F+13]=this.h[6]>>>8&255,j[F+14]=this.h[7]>>>0&255,j[F+15]=this.h[7]>>>8&255},w.prototype.update=function(j,F,H){var C,J;if(this.leftover){for(J=16-this.leftover,J>H&&(J=H),C=0;C<J;C++)this.buffer[this.leftover+C]=j[F+C];if(H-=J,F+=J,this.leftover+=J,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(H>=16&&(J=H-H%16,this.blocks(j,F,J),F+=J,H-=J),H){for(C=0;C<H;C++)this.buffer[this.leftover+C]=j[F+C];this.leftover+=H}};function e(j,F,H,C,J,he){var xe=new w(he);return xe.update(H,C,J),xe.finish(j,F),0}function r(j,F,H,C,J,he){var xe=new Uint8Array(16);return e(xe,0,H,C,J,he),T(j,F,xe,0)}function a(j,F,H,C,J){var he;if(H<32)return-1;for(ke(j,0,F,0,H,C,J),e(j,16,j,32,H-32,j),he=0;he<16;he++)j[he]=0;return 0}function o(j,F,H,C,J){var he,xe=new Uint8Array(32);if(H<32||(se(xe,0,32,C,J),r(F,16,F,32,H-32,xe)!==0))return-1;for(ke(j,0,F,0,H,C,J),he=0;he<32;he++)j[he]=0;return 0}function d(j,F){var H;for(H=0;H<16;H++)j[H]=F[H]|0}function v(j){var F,H,C=1;for(F=0;F<16;F++)H=j[F]+C+65535,C=Math.floor(H/65536),j[F]=H-C*65536;j[0]+=C-1+37*(C-1)}function y(j,F,H){for(var C,J=~(H-1),he=0;he<16;he++)C=J&(j[he]^F[he]),j[he]^=C,F[he]^=C}function l(j,F){var H,C,J,he=h(),xe=h();for(H=0;H<16;H++)xe[H]=F[H];for(v(xe),v(xe),v(xe),C=0;C<2;C++){for(he[0]=xe[0]-65517,H=1;H<15;H++)he[H]=xe[H]-65535-(he[H-1]>>16&1),he[H-1]&=65535;he[15]=xe[15]-32767-(he[14]>>16&1),J=he[15]>>16&1,he[14]&=65535,y(xe,he,1-J)}for(H=0;H<16;H++)j[2*H]=xe[H]&255,j[2*H+1]=xe[H]>>8}function t(j,F){var H=new Uint8Array(32),C=new Uint8Array(32);return l(H,j),l(C,F),k(H,0,C,0)}function p(j){var F=new Uint8Array(32);return l(F,j),F[0]&1}function q(j,F){var H;for(H=0;H<16;H++)j[H]=F[2*H]+(F[2*H+1]<<8);j[15]&=32767}function I(j,F,H){for(var C=0;C<16;C++)j[C]=F[C]+H[C]}function $(j,F,H){for(var C=0;C<16;C++)j[C]=F[C]-H[C]}function G(j,F,H){var C,J,he=0,xe=0,de=0,ge=0,tt=0,Xe=0,ct=0,rt=0,st=0,at=0,X=0,re=0,te=0,fe=0,le=0,pe=0,Se=0,Ee=0,me=0,_e=0,De=0,Me=0,Be=0,Qe=0,Ye=0,et=0,it=0,dt=0,yt=0,wt=0,gt=0,be=H[0],_t=H[1],Et=H[2],At=H[3],xt=H[4],Mt=H[5],St=H[6],Pt=H[7],qt=H[8],Rt=H[9],Bt=H[10],It=H[11],Ct=H[12],kt=H[13],Tt=H[14],Nt=H[15];C=F[0],he+=C*be,xe+=C*_t,de+=C*Et,ge+=C*At,tt+=C*xt,Xe+=C*Mt,ct+=C*St,rt+=C*Pt,st+=C*qt,at+=C*Rt,X+=C*Bt,re+=C*It,te+=C*Ct,fe+=C*kt,le+=C*Tt,pe+=C*Nt,C=F[1],xe+=C*be,de+=C*_t,ge+=C*Et,tt+=C*At,Xe+=C*xt,ct+=C*Mt,rt+=C*St,st+=C*Pt,at+=C*qt,X+=C*Rt,re+=C*Bt,te+=C*It,fe+=C*Ct,le+=C*kt,pe+=C*Tt,Se+=C*Nt,C=F[2],de+=C*be,ge+=C*_t,tt+=C*Et,Xe+=C*At,ct+=C*xt,rt+=C*Mt,st+=C*St,at+=C*Pt,X+=C*qt,re+=C*Rt,te+=C*Bt,fe+=C*It,le+=C*Ct,pe+=C*kt,Se+=C*Tt,Ee+=C*Nt,C=F[3],ge+=C*be,tt+=C*_t,Xe+=C*Et,ct+=C*At,rt+=C*xt,st+=C*Mt,at+=C*St,X+=C*Pt,re+=C*qt,te+=C*Rt,fe+=C*Bt,le+=C*It,pe+=C*Ct,Se+=C*kt,Ee+=C*Tt,me+=C*Nt,C=F[4],tt+=C*be,Xe+=C*_t,ct+=C*Et,rt+=C*At,st+=C*xt,at+=C*Mt,X+=C*St,re+=C*Pt,te+=C*qt,fe+=C*Rt,le+=C*Bt,pe+=C*It,Se+=C*Ct,Ee+=C*kt,me+=C*Tt,_e+=C*Nt,C=F[5],Xe+=C*be,ct+=C*_t,rt+=C*Et,st+=C*At,at+=C*xt,X+=C*Mt,re+=C*St,te+=C*Pt,fe+=C*qt,le+=C*Rt,pe+=C*Bt,Se+=C*It,Ee+=C*Ct,me+=C*kt,_e+=C*Tt,De+=C*Nt,C=F[6],ct+=C*be,rt+=C*_t,st+=C*Et,at+=C*At,X+=C*xt,re+=C*Mt,te+=C*St,fe+=C*Pt,le+=C*qt,pe+=C*Rt,Se+=C*Bt,Ee+=C*It,me+=C*Ct,_e+=C*kt,De+=C*Tt,Me+=C*Nt,C=F[7],rt+=C*be,st+=C*_t,at+=C*Et,X+=C*At,re+=C*xt,te+=C*Mt,fe+=C*St,le+=C*Pt,pe+=C*qt,Se+=C*Rt,Ee+=C*Bt,me+=C*It,_e+=C*Ct,De+=C*kt,Me+=C*Tt,Be+=C*Nt,C=F[8],st+=C*be,at+=C*_t,X+=C*Et,re+=C*At,te+=C*xt,fe+=C*Mt,le+=C*St,pe+=C*Pt,Se+=C*qt,Ee+=C*Rt,me+=C*Bt,_e+=C*It,De+=C*Ct,Me+=C*kt,Be+=C*Tt,Qe+=C*Nt,C=F[9],at+=C*be,X+=C*_t,re+=C*Et,te+=C*At,fe+=C*xt,le+=C*Mt,pe+=C*St,Se+=C*Pt,Ee+=C*qt,me+=C*Rt,_e+=C*Bt,De+=C*It,Me+=C*Ct,Be+=C*kt,Qe+=C*Tt,Ye+=C*Nt,C=F[10],X+=C*be,re+=C*_t,te+=C*Et,fe+=C*At,le+=C*xt,pe+=C*Mt,Se+=C*St,Ee+=C*Pt,me+=C*qt,_e+=C*Rt,De+=C*Bt,Me+=C*It,Be+=C*Ct,Qe+=C*kt,Ye+=C*Tt,et+=C*Nt,C=F[11],re+=C*be,te+=C*_t,fe+=C*Et,le+=C*At,pe+=C*xt,Se+=C*Mt,Ee+=C*St,me+=C*Pt,_e+=C*qt,De+=C*Rt,Me+=C*Bt,Be+=C*It,Qe+=C*Ct,Ye+=C*kt,et+=C*Tt,it+=C*Nt,C=F[12],te+=C*be,fe+=C*_t,le+=C*Et,pe+=C*At,Se+=C*xt,Ee+=C*Mt,me+=C*St,_e+=C*Pt,De+=C*qt,Me+=C*Rt,Be+=C*Bt,Qe+=C*It,Ye+=C*Ct,et+=C*kt,it+=C*Tt,dt+=C*Nt,C=F[13],fe+=C*be,le+=C*_t,pe+=C*Et,Se+=C*At,Ee+=C*xt,me+=C*Mt,_e+=C*St,De+=C*Pt,Me+=C*qt,Be+=C*Rt,Qe+=C*Bt,Ye+=C*It,et+=C*Ct,it+=C*kt,dt+=C*Tt,yt+=C*Nt,C=F[14],le+=C*be,pe+=C*_t,Se+=C*Et,Ee+=C*At,me+=C*xt,_e+=C*Mt,De+=C*St,Me+=C*Pt,Be+=C*qt,Qe+=C*Rt,Ye+=C*Bt,et+=C*It,it+=C*Ct,dt+=C*kt,yt+=C*Tt,wt+=C*Nt,C=F[15],pe+=C*be,Se+=C*_t,Ee+=C*Et,me+=C*At,_e+=C*xt,De+=C*Mt,Me+=C*St,Be+=C*Pt,Qe+=C*qt,Ye+=C*Rt,et+=C*Bt,it+=C*It,dt+=C*Ct,yt+=C*kt,wt+=C*Tt,gt+=C*Nt,he+=38*Se,xe+=38*Ee,de+=38*me,ge+=38*_e,tt+=38*De,Xe+=38*Me,ct+=38*Be,rt+=38*Qe,st+=38*Ye,at+=38*et,X+=38*it,re+=38*dt,te+=38*yt,fe+=38*wt,le+=38*gt,J=1,C=he+J+65535,J=Math.floor(C/65536),he=C-J*65536,C=xe+J+65535,J=Math.floor(C/65536),xe=C-J*65536,C=de+J+65535,J=Math.floor(C/65536),de=C-J*65536,C=ge+J+65535,J=Math.floor(C/65536),ge=C-J*65536,C=tt+J+65535,J=Math.floor(C/65536),tt=C-J*65536,C=Xe+J+65535,J=Math.floor(C/65536),Xe=C-J*65536,C=ct+J+65535,J=Math.floor(C/65536),ct=C-J*65536,C=rt+J+65535,J=Math.floor(C/65536),rt=C-J*65536,C=st+J+65535,J=Math.floor(C/65536),st=C-J*65536,C=at+J+65535,J=Math.floor(C/65536),at=C-J*65536,C=X+J+65535,J=Math.floor(C/65536),X=C-J*65536,C=re+J+65535,J=Math.floor(C/65536),re=C-J*65536,C=te+J+65535,J=Math.floor(C/65536),te=C-J*65536,C=fe+J+65535,J=Math.floor(C/65536),fe=C-J*65536,C=le+J+65535,J=Math.floor(C/65536),le=C-J*65536,C=pe+J+65535,J=Math.floor(C/65536),pe=C-J*65536,he+=J-1+37*(J-1),J=1,C=he+J+65535,J=Math.floor(C/65536),he=C-J*65536,C=xe+J+65535,J=Math.floor(C/65536),xe=C-J*65536,C=de+J+65535,J=Math.floor(C/65536),de=C-J*65536,C=ge+J+65535,J=Math.floor(C/65536),ge=C-J*65536,C=tt+J+65535,J=Math.floor(C/65536),tt=C-J*65536,C=Xe+J+65535,J=Math.floor(C/65536),Xe=C-J*65536,C=ct+J+65535,J=Math.floor(C/65536),ct=C-J*65536,C=rt+J+65535,J=Math.floor(C/65536),rt=C-J*65536,C=st+J+65535,J=Math.floor(C/65536),st=C-J*65536,C=at+J+65535,J=Math.floor(C/65536),at=C-J*65536,C=X+J+65535,J=Math.floor(C/65536),X=C-J*65536,C=re+J+65535,J=Math.floor(C/65536),re=C-J*65536,C=te+J+65535,J=Math.floor(C/65536),te=C-J*65536,C=fe+J+65535,J=Math.floor(C/65536),fe=C-J*65536,C=le+J+65535,J=Math.floor(C/65536),le=C-J*65536,C=pe+J+65535,J=Math.floor(C/65536),pe=C-J*65536,he+=J-1+37*(J-1),j[0]=he,j[1]=xe,j[2]=de,j[3]=ge,j[4]=tt,j[5]=Xe,j[6]=ct,j[7]=rt,j[8]=st,j[9]=at,j[10]=X,j[11]=re,j[12]=te,j[13]=fe,j[14]=le,j[15]=pe}function V(j,F){G(j,F,F)}function N(j,F){var H=h(),C;for(C=0;C<16;C++)H[C]=F[C];for(C=253;C>=0;C--)V(H,H),C!==2&&C!==4&&G(H,H,F);for(C=0;C<16;C++)j[C]=H[C]}function W(j,F){var H=h(),C;for(C=0;C<16;C++)H[C]=F[C];for(C=250;C>=0;C--)V(H,H),C!==1&&G(H,H,F);for(C=0;C<16;C++)j[C]=H[C]}function Z(j,F,H){var C=new Uint8Array(32),J=new Float64Array(80),he,xe,de=h(),ge=h(),tt=h(),Xe=h(),ct=h(),rt=h();for(xe=0;xe<31;xe++)C[xe]=F[xe];for(C[31]=F[31]&127|64,C[0]&=248,q(J,H),xe=0;xe<16;xe++)ge[xe]=J[xe],Xe[xe]=de[xe]=tt[xe]=0;for(de[0]=Xe[0]=1,xe=254;xe>=0;--xe)he=C[xe>>>3]>>>(xe&7)&1,y(de,ge,he),y(tt,Xe,he),I(ct,de,tt),$(de,de,tt),I(tt,ge,Xe),$(ge,ge,Xe),V(Xe,ct),V(rt,de),G(de,tt,de),G(tt,ge,ct),I(ct,de,tt),$(de,de,tt),V(ge,de),$(tt,Xe,rt),G(de,tt,_),I(de,de,Xe),G(tt,tt,de),G(de,Xe,rt),G(Xe,ge,J),V(ge,ct),y(de,ge,he),y(tt,Xe,he);for(xe=0;xe<16;xe++)J[xe+16]=de[xe],J[xe+32]=tt[xe],J[xe+48]=ge[xe],J[xe+64]=Xe[xe];var st=J.subarray(32),at=J.subarray(16);return N(st,st),G(at,at,st),l(j,at),0}function ne(j,F){return Z(j,F,s)}function ee(j,F){return u(F,32),ne(j,F)}function z(j,F,H){var C=new Uint8Array(32);return Z(C,H,F),Q(j,m,C,ie)}var ue=a,Ze=o;function Ae(j,F,H,C,J,he){var xe=new Uint8Array(32);return z(xe,J,he),ue(j,F,H,C,xe)}function qe(j,F,H,C,J,he){var xe=new Uint8Array(32);return z(xe,J,he),Ze(j,F,H,C,xe)}var nt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ne(j,F,H,C){for(var J=new Int32Array(16),he=new Int32Array(16),xe,de,ge,tt,Xe,ct,rt,st,at,X,re,te,fe,le,pe,Se,Ee,me,_e,De,Me,Be,Qe,Ye,et,it,dt=j[0],yt=j[1],wt=j[2],gt=j[3],be=j[4],_t=j[5],Et=j[6],At=j[7],xt=F[0],Mt=F[1],St=F[2],Pt=F[3],qt=F[4],Rt=F[5],Bt=F[6],It=F[7],Ct=0;C>=128;){for(_e=0;_e<16;_e++)De=8*_e+Ct,J[_e]=H[De+0]<<24|H[De+1]<<16|H[De+2]<<8|H[De+3],he[_e]=H[De+4]<<24|H[De+5]<<16|H[De+6]<<8|H[De+7];for(_e=0;_e<80;_e++)if(xe=dt,de=yt,ge=wt,tt=gt,Xe=be,ct=_t,rt=Et,st=At,at=xt,X=Mt,re=St,te=Pt,fe=qt,le=Rt,pe=Bt,Se=It,Me=At,Be=It,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=(be>>>14|qt<<18)^(be>>>18|qt<<14)^(qt>>>9|be<<23),Be=(qt>>>14|be<<18)^(qt>>>18|be<<14)^(be>>>9|qt<<23),Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Me=be&_t^~be&Et,Be=qt&Rt^~qt&Bt,Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Me=nt[_e*2],Be=nt[_e*2+1],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Me=J[_e%16],Be=he[_e%16],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,Ee=et&65535|it<<16,me=Qe&65535|Ye<<16,Me=Ee,Be=me,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=(dt>>>28|xt<<4)^(xt>>>2|dt<<30)^(xt>>>7|dt<<25),Be=(xt>>>28|dt<<4)^(dt>>>2|xt<<30)^(dt>>>7|xt<<25),Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Me=dt&yt^dt&wt^yt&wt,Be=xt&Mt^xt&St^Mt&St,Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,st=et&65535|it<<16,Se=Qe&65535|Ye<<16,Me=tt,Be=te,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=Ee,Be=me,Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,tt=et&65535|it<<16,te=Qe&65535|Ye<<16,yt=xe,wt=de,gt=ge,be=tt,_t=Xe,Et=ct,At=rt,dt=st,Mt=at,St=X,Pt=re,qt=te,Rt=fe,Bt=le,It=pe,xt=Se,_e%16===15)for(De=0;De<16;De++)Me=J[De],Be=he[De],Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=J[(De+9)%16],Be=he[(De+9)%16],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ee=J[(De+1)%16],me=he[(De+1)%16],Me=(Ee>>>1|me<<31)^(Ee>>>8|me<<24)^Ee>>>7,Be=(me>>>1|Ee<<31)^(me>>>8|Ee<<24)^(me>>>7|Ee<<25),Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ee=J[(De+14)%16],me=he[(De+14)%16],Me=(Ee>>>19|me<<13)^(me>>>29|Ee<<3)^Ee>>>6,Be=(me>>>19|Ee<<13)^(Ee>>>29|me<<3)^(me>>>6|Ee<<26),Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,J[De]=et&65535|it<<16,he[De]=Qe&65535|Ye<<16;Me=dt,Be=xt,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[0],Be=F[0],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[0]=dt=et&65535|it<<16,F[0]=xt=Qe&65535|Ye<<16,Me=yt,Be=Mt,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[1],Be=F[1],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[1]=yt=et&65535|it<<16,F[1]=Mt=Qe&65535|Ye<<16,Me=wt,Be=St,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[2],Be=F[2],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[2]=wt=et&65535|it<<16,F[2]=St=Qe&65535|Ye<<16,Me=gt,Be=Pt,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[3],Be=F[3],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[3]=gt=et&65535|it<<16,F[3]=Pt=Qe&65535|Ye<<16,Me=be,Be=qt,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[4],Be=F[4],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[4]=be=et&65535|it<<16,F[4]=qt=Qe&65535|Ye<<16,Me=_t,Be=Rt,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[5],Be=F[5],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[5]=_t=et&65535|it<<16,F[5]=Rt=Qe&65535|Ye<<16,Me=Et,Be=Bt,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[6],Be=F[6],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[6]=Et=et&65535|it<<16,F[6]=Bt=Qe&65535|Ye<<16,Me=At,Be=It,Qe=Be&65535,Ye=Be>>>16,et=Me&65535,it=Me>>>16,Me=j[7],Be=F[7],Qe+=Be&65535,Ye+=Be>>>16,et+=Me&65535,it+=Me>>>16,Ye+=Qe>>>16,et+=Ye>>>16,it+=et>>>16,j[7]=At=et&65535|it<<16,F[7]=It=Qe&65535|Ye<<16,Ct+=128,C-=128}return C}function ve(j,F,H){var C=new Int32Array(8),J=new Int32Array(8),he=new Uint8Array(256),xe,de=H;for(C[0]=1779033703,C[1]=3144134277,C[2]=1013904242,C[3]=2773480762,C[4]=1359893119,C[5]=2600822924,C[6]=528734635,C[7]=1541459225,J[0]=4089235720,J[1]=2227873595,J[2]=4271175723,J[3]=1595750129,J[4]=2917565137,J[5]=725511199,J[6]=4215389547,J[7]=327033209,Ne(C,J,F,H),H%=128,xe=0;xe<H;xe++)he[xe]=F[de-H+xe];for(he[H]=128,H=256-128*(H<112?1:0),he[H-9]=0,B(he,H-8,de/536870912|0,de<<3),Ne(C,J,he,H),xe=0;xe<8;xe++)B(j,8*xe,C[xe],J[xe]);return 0}function ut(j,F){var H=h(),C=h(),J=h(),he=h(),xe=h(),de=h(),ge=h(),tt=h(),Xe=h();$(H,j[1],j[0]),$(Xe,F[1],F[0]),G(H,H,Xe),I(C,j[0],j[1]),I(Xe,F[0],F[1]),G(C,C,Xe),G(J,j[3],F[3]),G(J,J,b),G(he,j[2],F[2]),I(he,he,he),$(xe,C,H),$(de,he,J),I(ge,he,J),I(tt,C,H),G(j[0],xe,de),G(j[1],tt,ge),G(j[2],ge,de),G(j[3],xe,tt)}function Ce(j,F,H){var C;for(C=0;C<4;C++)y(j[C],F[C],H)}function je(j,F){var H=h(),C=h(),J=h();N(J,F[2]),G(H,F[0],J),G(C,F[1],J),l(j,C),j[31]^=p(H)<<7}function ht(j,F,H){var C,J;for(d(j[0],g),d(j[1],x),d(j[2],x),d(j[3],g),J=255;J>=0;--J)C=H[J/8|0]>>(J&7)&1,Ce(j,F,C),ut(F,j),ut(j,j),Ce(j,F,C)}function Ie(j,F){var H=[h(),h(),h(),h()];d(H[0],S),d(H[1],E),d(H[2],x),G(H[3],S,E),ht(j,H,F)}function Le(j,F,H){var C=new Uint8Array(64),J=[h(),h(),h(),h()],he;for(H||u(F,32),ve(C,F,32),C[0]&=248,C[31]&=127,C[31]|=64,Ie(J,C),je(j,J),he=0;he<32;he++)F[he+32]=j[he];return 0}var lt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function $e(j,F){var H,C,J,he;for(C=63;C>=32;--C){for(H=0,J=C-32,he=C-12;J<he;++J)F[J]+=H-16*F[C]*lt[J-(C-32)],H=Math.floor((F[J]+128)/256),F[J]-=H*256;F[J]+=H,F[C]=0}for(H=0,J=0;J<32;J++)F[J]+=H-(F[31]>>4)*lt[J],H=F[J]>>8,F[J]&=255;for(J=0;J<32;J++)F[J]-=H*lt[J];for(C=0;C<32;C++)F[C+1]+=F[C]>>8,j[C]=F[C]&255}function ze(j){var F=new Float64Array(64),H;for(H=0;H<64;H++)F[H]=j[H];for(H=0;H<64;H++)j[H]=0;$e(j,F)}function bt(j,F,H,C){var J=new Uint8Array(64),he=new Uint8Array(64),xe=new Uint8Array(64),de,ge,tt=new Float64Array(64),Xe=[h(),h(),h(),h()];ve(J,C,32),J[0]&=248,J[31]&=127,J[31]|=64;var ct=H+64;for(de=0;de<H;de++)j[64+de]=F[de];for(de=0;de<32;de++)j[32+de]=J[32+de];for(ve(xe,j.subarray(32),H+32),ze(xe),Ie(Xe,xe),je(j,Xe),de=32;de<64;de++)j[de]=C[de];for(ve(he,j,H+64),ze(he),de=0;de<64;de++)tt[de]=0;for(de=0;de<32;de++)tt[de]=xe[de];for(de=0;de<32;de++)for(ge=0;ge<32;ge++)tt[de+ge]+=he[de]*J[ge];return $e(j.subarray(32),tt),ct}function K(j,F){var H=h(),C=h(),J=h(),he=h(),xe=h(),de=h(),ge=h();return d(j[2],x),q(j[1],F),V(J,j[1]),G(he,J,M),$(J,J,j[2]),I(he,j[2],he),V(xe,he),V(de,xe),G(ge,de,xe),G(H,ge,J),G(H,H,he),W(H,H),G(H,H,J),G(H,H,he),G(H,H,he),G(j[0],H,he),V(C,j[0]),G(C,C,he),t(C,J)&&G(j[0],j[0],A),V(C,j[0]),G(C,C,he),t(C,J)?-1:(p(j[0])===F[31]>>7&&$(j[0],g,j[0]),G(j[3],j[0],j[1]),0)}function P(j,F,H,C){var J,he=new Uint8Array(32),xe=new Uint8Array(64),de=[h(),h(),h(),h()],ge=[h(),h(),h(),h()];if(H<64||K(ge,C))return-1;for(J=0;J<H;J++)j[J]=F[J];for(J=0;J<32;J++)j[J+32]=C[J];if(ve(xe,j,H),ze(xe),ht(de,ge,xe),Ie(ge,F.subarray(32)),ut(de,ge),je(he,de),H-=64,k(F,0,he,0)){for(J=0;J<H;J++)j[J]=0;return-1}for(J=0;J<H;J++)j[J]=F[J+64];return H}var D=32,Y=24,oe=32,Re=16,ce=32,Te=32,ft=32,Pe=32,Ue=32,ot=Y,He=oe,Ve=Re,pt=64,Fe=32,Ge=64,mt=32,Ke=64;n.lowlevel={crypto_core_hsalsa20:Q,crypto_stream_xor:ke,crypto_stream:se,crypto_stream_salsa20_xor:we,crypto_stream_salsa20:ye,crypto_onetimeauth:e,crypto_onetimeauth_verify:r,crypto_verify_16:T,crypto_verify_32:k,crypto_secretbox:a,crypto_secretbox_open:o,crypto_scalarmult:Z,crypto_scalarmult_base:ne,crypto_box_beforenm:z,crypto_box_afternm:ue,crypto_box:Ae,crypto_box_open:qe,crypto_box_keypair:ee,crypto_hash:ve,crypto_sign:bt,crypto_sign_keypair:Le,crypto_sign_open:P,crypto_secretbox_KEYBYTES:D,crypto_secretbox_NONCEBYTES:Y,crypto_secretbox_ZEROBYTES:oe,crypto_secretbox_BOXZEROBYTES:Re,crypto_scalarmult_BYTES:ce,crypto_scalarmult_SCALARBYTES:Te,crypto_box_PUBLICKEYBYTES:ft,crypto_box_SECRETKEYBYTES:Pe,crypto_box_BEFORENMBYTES:Ue,crypto_box_NONCEBYTES:ot,crypto_box_ZEROBYTES:He,crypto_box_BOXZEROBYTES:Ve,crypto_sign_BYTES:pt,crypto_sign_PUBLICKEYBYTES:Fe,crypto_sign_SECRETKEYBYTES:Ge,crypto_sign_SEEDBYTES:mt,crypto_hash_BYTES:Ke,gf:h,D:M,L:lt,pack25519:l,unpack25519:q,M:G,A:I,S:V,Z:$,pow2523:W,add:ut,set25519:d,modL:$e,scalarmult:ht,scalarbase:Ie};function We(j,F){if(j.length!==D)throw new Error("bad key size");if(F.length!==Y)throw new Error("bad nonce size")}function vt(j,F){if(j.length!==ft)throw new Error("bad public key size");if(F.length!==Pe)throw new Error("bad secret key size")}function Oe(){for(var j=0;j<arguments.length;j++)if(!(arguments[j]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Je(j){for(var F=0;F<j.length;F++)j[F]=0}n.randomBytes=function(j){var F=new Uint8Array(j);return u(F,j),F},n.secretbox=function(j,F,H){Oe(j,F,H),We(H,F);for(var C=new Uint8Array(oe+j.length),J=new Uint8Array(C.length),he=0;he<j.length;he++)C[he+oe]=j[he];return a(J,C,C.length,F,H),J.subarray(Re)},n.secretbox.open=function(j,F,H){Oe(j,F,H),We(H,F);for(var C=new Uint8Array(Re+j.length),J=new Uint8Array(C.length),he=0;he<j.length;he++)C[he+Re]=j[he];return C.length<32||o(J,C,C.length,F,H)!==0?null:J.subarray(oe)},n.secretbox.keyLength=D,n.secretbox.nonceLength=Y,n.secretbox.overheadLength=Re,n.scalarMult=function(j,F){if(Oe(j,F),j.length!==Te)throw new Error("bad n size");if(F.length!==ce)throw new Error("bad p size");var H=new Uint8Array(ce);return Z(H,j,F),H},n.scalarMult.base=function(j){if(Oe(j),j.length!==Te)throw new Error("bad n size");var F=new Uint8Array(ce);return ne(F,j),F},n.scalarMult.scalarLength=Te,n.scalarMult.groupElementLength=ce,n.box=function(j,F,H,C){var J=n.box.before(H,C);return n.secretbox(j,F,J)},n.box.before=function(j,F){Oe(j,F),vt(j,F);var H=new Uint8Array(Ue);return z(H,j,F),H},n.box.after=n.secretbox,n.box.open=function(j,F,H,C){var J=n.box.before(H,C);return n.secretbox.open(j,F,J)},n.box.open.after=n.secretbox.open,n.box.keyPair=function(){var j=new Uint8Array(ft),F=new Uint8Array(Pe);return ee(j,F),{publicKey:j,secretKey:F}},n.box.keyPair.fromSecretKey=function(j){if(Oe(j),j.length!==Pe)throw new Error("bad secret key size");var F=new Uint8Array(ft);return ne(F,j),{publicKey:F,secretKey:new Uint8Array(j)}},n.box.publicKeyLength=ft,n.box.secretKeyLength=Pe,n.box.sharedKeyLength=Ue,n.box.nonceLength=ot,n.box.overheadLength=n.secretbox.overheadLength,n.sign=function(j,F){if(Oe(j,F),F.length!==Ge)throw new Error("bad secret key size");var H=new Uint8Array(pt+j.length);return bt(H,j,j.length,F),H},n.sign.open=function(j,F){if(Oe(j,F),F.length!==Fe)throw new Error("bad public key size");var H=new Uint8Array(j.length),C=P(H,j,j.length,F);if(C<0)return null;for(var J=new Uint8Array(C),he=0;he<J.length;he++)J[he]=H[he];return J},n.sign.detached=function(j,F){for(var H=n.sign(j,F),C=new Uint8Array(pt),J=0;J<C.length;J++)C[J]=H[J];return C},n.sign.detached.verify=function(j,F,H){if(Oe(j,F,H),F.length!==pt)throw new Error("bad signature size");if(H.length!==Fe)throw new Error("bad public key size");var C=new Uint8Array(pt+j.length),J=new Uint8Array(pt+j.length),he;for(he=0;he<pt;he++)C[he]=F[he];for(he=0;he<j.length;he++)C[he+pt]=j[he];return P(J,C,C.length,H)>=0},n.sign.keyPair=function(){var j=new Uint8Array(Fe),F=new Uint8Array(Ge);return Le(j,F),{publicKey:j,secretKey:F}},n.sign.keyPair.fromSecretKey=function(j){if(Oe(j),j.length!==Ge)throw new Error("bad secret key size");for(var F=new Uint8Array(Fe),H=0;H<F.length;H++)F[H]=j[32+H];return{publicKey:F,secretKey:new Uint8Array(j)}},n.sign.keyPair.fromSeed=function(j){if(Oe(j),j.length!==mt)throw new Error("bad seed size");for(var F=new Uint8Array(Fe),H=new Uint8Array(Ge),C=0;C<32;C++)H[C]=j[C];return Le(F,H,!0),{publicKey:F,secretKey:H}},n.sign.publicKeyLength=Fe,n.sign.secretKeyLength=Ge,n.sign.seedLength=mt,n.sign.signatureLength=pt,n.hash=function(j){Oe(j);var F=new Uint8Array(Ke);return ve(F,j,j.length),F},n.hash.hashLength=Ke,n.verify=function(j,F){return Oe(j,F),j.length===0||F.length===0||j.length!==F.length?!1:R(j,0,F,0,j.length)===0},n.setPRNG=function(j){u=j},function(){var j=typeof self<"u"?self.crypto||self.msCrypto:null;if(j&&j.getRandomValues){var F=65536;n.setPRNG(function(H,C){var J,he=new Uint8Array(C);for(J=0;J<C;J+=F)j.getRandomValues(he.subarray(J,J+Math.min(C-J,F)));for(J=0;J<C;J++)H[J]=he[J];Je(he)})}else typeof commonjsRequire<"u"&&(j=requireCryptoBrowserify(),j&&j.randomBytes&&n.setPRNG(function(H,C){var J,he=j.randomBytes(C);for(J=0;J<C;J++)H[J]=he[J];Je(he)}))}()})(c.exports?c.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports,helper$1={};Object.defineProperty(helper$1,"__esModule",{value:!0}),helper$1.getEd25519Helper=helper$1.setEd25519Helper=void 0;let helper;function setEd25519Helper(c){helper=c}helper$1.setEd25519Helper=setEd25519Helper;function getEd25519Helper(){return helper}helper$1.getEd25519Helper=getEd25519Helper;var mod={},nkeys={},kp={},codec={},crc16$1={};Object.defineProperty(crc16$1,"__esModule",{value:!0}),crc16$1.crc16=void 0;const crc16tab=new Uint16Array([0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920]);class crc16{static checksum(n){let h=0;for(let u=0;u<n.byteLength;u++){let m=n[u];h=h<<8&65535^crc16tab[(h>>8^m)&255]}return h}static validate(n,h){return crc16.checksum(n)==h}}crc16$1.crc16=crc16;var base32$1={};Object.defineProperty(base32$1,"__esModule",{value:!0}),base32$1.base32=void 0;const b32Alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";class base32{static encode(n){let h=0,u=0,m=new Uint8Array(n),s=new Uint8Array(n.byteLength*2),g=0;for(let x=0;x<m.byteLength;x++)for(u=u<<8|m[x],h+=8;h>=5;){let _=u>>>h-5&31;s[g++]=b32Alphabet.charAt(_).charCodeAt(0),h-=5}if(h>0){let x=u<<5-h&31;s[g++]=b32Alphabet.charAt(x).charCodeAt(0)}return s.slice(0,g)}static decode(n){let h=0,u=0,m=0,s=new Uint8Array(n),g=new Uint8Array(s.byteLength*5/8|0);for(let x=0;x<s.byteLength;x++){let _=String.fromCharCode(s[x]),M=b32Alphabet.indexOf(_);if(M===-1)throw new Error("Illegal Base32 character: "+s[x]);u=u<<5|M,h+=5,h>=8&&(g[m++]=u>>>h-8&255,h-=8)}return g.slice(0,m)}}base32$1.base32=base32;var hasRequiredCodec;function requireCodec(){if(hasRequiredCodec)return codec;hasRequiredCodec=1,Object.defineProperty(codec,"__esModule",{value:!0}),codec.Codec=void 0;const c=crc16$1,n=requireNkeys(),h=base32$1;class u{static encode(s,g){if(!g||!(g instanceof Uint8Array))throw new n.NKeysError(n.NKeysErrorCode.SerializationError);if(!n.Prefixes.isValidPrefix(s))throw new n.NKeysError(n.NKeysErrorCode.InvalidPrefixByte);return u._encode(!1,s,g)}static encodeSeed(s,g){if(!g)throw new n.NKeysError(n.NKeysErrorCode.ApiError);if(!n.Prefixes.isValidPublicPrefix(s))throw new n.NKeysError(n.NKeysErrorCode.InvalidPrefixByte);if(g.byteLength!==32)throw new n.NKeysError(n.NKeysErrorCode.InvalidSeedLen);return u._encode(!0,s,g)}static decode(s,g){if(!n.Prefixes.isValidPrefix(s))throw new n.NKeysError(n.NKeysErrorCode.InvalidPrefixByte);const x=u._decode(g);if(x[0]!==s)throw new n.NKeysError(n.NKeysErrorCode.InvalidPrefixByte);return x.slice(1)}static decodeSeed(s){const g=u._decode(s),x=u._decodePrefix(g);if(x[0]!=n.Prefix.Seed)throw new n.NKeysError(n.NKeysErrorCode.InvalidSeed);if(!n.Prefixes.isValidPublicPrefix(x[1]))throw new n.NKeysError(n.NKeysErrorCode.InvalidPrefixByte);return{buf:g.slice(2),prefix:x[1]}}static _encode(s,g,x){const _=s?2:1,M=x.byteLength,S=_+M+2,E=_+M,A=new Uint8Array(S);if(s){const T=u._encodePrefix(n.Prefix.Seed,g);A.set(T)}else A[0]=g;A.set(x,_);const B=c.crc16.checksum(A.slice(0,E));return new DataView(A.buffer).setUint16(E,B,!0),h.base32.encode(A)}static _decode(s){if(s.byteLength<4)throw new n.NKeysError(n.NKeysErrorCode.InvalidEncoding);let g;try{g=h.base32.decode(s)}catch(S){throw new n.NKeysError(n.NKeysErrorCode.InvalidEncoding,S)}const x=g.byteLength-2,M=new DataView(g.buffer).getUint16(x,!0),b=g.slice(0,x);if(!c.crc16.validate(b,M))throw new n.NKeysError(n.NKeysErrorCode.InvalidChecksum);return b}static _encodePrefix(s,g){const x=s|g>>5,_=(g&31)<<3;return new Uint8Array([x,_])}static _decodePrefix(s){const g=s[0]&248,x=(s[0]&7)<<5|(s[1]&248)>>3;return new Uint8Array([g,x])}}return codec.Codec=u,codec}var hasRequiredKp;function requireKp(){if(hasRequiredKp)return kp;hasRequiredKp=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.KP=void 0;const c=requireCodec(),n=requireNkeys(),h=helper$1;class u{constructor(s){this.seed=s}getRawSeed(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return c.Codec.decodeSeed(this.seed).buf}getSeed(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return this.seed}getPublicKey(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);const s=c.Codec.decodeSeed(this.seed),g=(0,h.getEd25519Helper)().fromSeed(this.getRawSeed()),x=c.Codec.encode(s.prefix,g.publicKey);return new TextDecoder().decode(x)}getPrivateKey(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);const s=(0,h.getEd25519Helper)().fromSeed(this.getRawSeed());return c.Codec.encode(n.Prefix.Private,s.secretKey)}sign(s){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);const g=(0,h.getEd25519Helper)().fromSeed(this.getRawSeed());return(0,h.getEd25519Helper)().sign(s,g.secretKey)}verify(s,g){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);const x=(0,h.getEd25519Helper)().fromSeed(this.getRawSeed());return(0,h.getEd25519Helper)().verify(s,g,x.publicKey)}clear(){this.seed&&(this.seed.fill(0),this.seed=void 0)}seal(s,g,x){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}open(s,g){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}}return kp.KP=u,kp}var _public={},hasRequired_public;function require_public(){if(hasRequired_public)return _public;hasRequired_public=1,Object.defineProperty(_public,"__esModule",{value:!0}),_public.PublicKey=void 0;const c=requireCodec(),n=requireNkeys(),h=helper$1;class u{constructor(s){this.publicKey=s}getPublicKey(){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return new TextDecoder().decode(this.publicKey)}getPrivateKey(){throw this.publicKey?new n.NKeysError(n.NKeysErrorCode.PublicKeyOnly):new n.NKeysError(n.NKeysErrorCode.ClearedPair)}getSeed(){throw this.publicKey?new n.NKeysError(n.NKeysErrorCode.PublicKeyOnly):new n.NKeysError(n.NKeysErrorCode.ClearedPair)}sign(s){throw this.publicKey?new n.NKeysError(n.NKeysErrorCode.CannotSign):new n.NKeysError(n.NKeysErrorCode.ClearedPair)}verify(s,g){if(!this.publicKey)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);let x=c.Codec._decode(this.publicKey);return(0,h.getEd25519Helper)().verify(s,g,x.slice(1))}clear(){this.publicKey&&(this.publicKey.fill(0),this.publicKey=void 0)}seal(s,g,x){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}open(s,g){throw new n.NKeysError(n.NKeysErrorCode.InvalidNKeyOperation)}}return _public.PublicKey=u,_public}var curve={},hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.CurveKP=c.curveNonceLen=c.curveKeyLen=void 0;const n=requireNkeys(),h=helper$1,u=requireCodec(),m=requireMod(),s=base32$1,g=crc16$1;c.curveKeyLen=32;const x=35;c.curveNonceLen=24;const _=[120,107,118,49];class M{constructor(S){this.seed=S}clear(){this.seed&&(this.seed.fill(0),this.seed=void 0)}getPrivateKey(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return u.Codec.encode(m.Prefix.Private,this.seed)}getPublicKey(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);const S=(0,h.getEd25519Helper)().scalarBaseMultiply(this.seed),E=u.Codec.encode(m.Prefix.Curve,S);return new TextDecoder().decode(E)}getSeed(){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);return u.Codec.encodeSeed(m.Prefix.Curve,this.seed)}sign(){throw new n.NKeysError(n.NKeysErrorCode.InvalidCurveOperation)}verify(){throw new n.NKeysError(n.NKeysErrorCode.InvalidCurveOperation)}decodePubCurveKey(S){try{const E=s.base32.decode(new TextEncoder().encode(S));if(E.byteLength!==x)throw new n.NKeysError(n.NKeysErrorCode.InvalidCurveKey);if(E[0]!==m.Prefix.Curve)throw new n.NKeysError(n.NKeysErrorCode.InvalidPublicKey);const A=E.byteLength-2,R=new DataView(E.buffer).getUint16(A,!0),T=E.slice(0,A);if(!g.crc16.validate(T,R))throw new n.NKeysError(n.NKeysErrorCode.InvalidChecksum);return T.slice(1)}catch(E){throw new n.NKeysError(n.NKeysErrorCode.InvalidRecipient,E)}}seal(S,E,A){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);A||(A=(0,h.getEd25519Helper)().randomBytes(c.curveNonceLen));let B=this.decodePubCurveKey(E);const R=new Uint8Array(_.length+c.curveNonceLen);R.set(_,0),R.set(A,_.length);const T=(0,h.getEd25519Helper)().seal(S,A,B,this.seed),k=new Uint8Array(R.length+T.length);return k.set(R),k.set(T,R.length),k}open(S,E){if(!this.seed)throw new n.NKeysError(n.NKeysErrorCode.ClearedPair);if(S.length<=c.curveNonceLen+_.length)throw new n.NKeysError(n.NKeysErrorCode.InvalidEncrypted);for(let R=0;R<_.length;R++)if(S[R]!==_[R])throw new n.NKeysError(n.NKeysErrorCode.InvalidEncrypted);const A=this.decodePubCurveKey(E);S=S.slice(_.length);const B=S.slice(0,c.curveNonceLen);return S=S.slice(c.curveNonceLen),(0,h.getEd25519Helper)().open(S,B,A,this.seed)}}c.CurveKP=M}(curve)),curve}var hasRequiredNkeys;function requireNkeys(){if(hasRequiredNkeys)return nkeys;hasRequiredNkeys=1,Object.defineProperty(nkeys,"__esModule",{value:!0}),nkeys.NKeysError=nkeys.NKeysErrorCode=nkeys.Prefixes=nkeys.Prefix=nkeys.fromSeed=nkeys.fromCurveSeed=nkeys.fromPublic=nkeys.createCurve=nkeys.createServer=nkeys.createCluster=nkeys.createUser=nkeys.createAccount=nkeys.createOperator=nkeys.createPair=void 0;const c=requireKp(),n=require_public(),h=requireCodec(),u=helper$1,m=requireCurve();function s(U){const L=U===R.Curve?m.curveKeyLen:32,Q=(0,u.getEd25519Helper)().randomBytes(L);let ie=h.Codec.encodeSeed(U,new Uint8Array(Q));return U===R.Curve?new m.CurveKP(new Uint8Array(Q)):new c.KP(ie)}nkeys.createPair=s;function g(){return s(R.Operator)}nkeys.createOperator=g;function x(){return s(R.Account)}nkeys.createAccount=x;function _(){return s(R.User)}nkeys.createUser=_;function M(){return s(R.Cluster)}nkeys.createCluster=M;function b(){return s(R.Server)}nkeys.createServer=b;function S(){return s(R.Curve)}nkeys.createCurve=S;function E(U){const L=new TextEncoder().encode(U),Q=h.Codec._decode(L),ie=T.parsePrefix(Q[0]);if(T.isValidPublicPrefix(ie))return new n.PublicKey(L);throw new O(k.InvalidPublicKey)}nkeys.fromPublic=E;function A(U){const L=h.Codec.decodeSeed(U);if(L.prefix!==R.Curve)throw new O(k.InvalidCurveSeed);if(L.buf.byteLength!==m.curveKeyLen)throw new O(k.InvalidSeedLen);return new m.CurveKP(L.buf)}nkeys.fromCurveSeed=A;function B(U){return h.Codec.decodeSeed(U).prefix===R.Curve?A(U):new c.KP(U)}nkeys.fromSeed=B;var R;(function(U){U[U.Unknown=-1]="Unknown",U[U.Seed=144]="Seed",U[U.Private=120]="Private",U[U.Operator=112]="Operator",U[U.Server=104]="Server",U[U.Cluster=16]="Cluster",U[U.Account=0]="Account",U[U.User=160]="User",U[U.Curve=184]="Curve"})(R||(nkeys.Prefix=R={}));class T{static isValidPublicPrefix(L){return L==R.Server||L==R.Operator||L==R.Cluster||L==R.Account||L==R.User||L==R.Curve}static startsWithValidPrefix(L){let Q=L[0];return Q=="S"||Q=="P"||Q=="O"||Q=="N"||Q=="C"||Q=="A"||Q=="U"||Q=="X"}static isValidPrefix(L){return this.parsePrefix(L)!==R.Unknown}static parsePrefix(L){switch(L){case R.Seed:return R.Seed;case R.Private:return R.Private;case R.Operator:return R.Operator;case R.Server:return R.Server;case R.Cluster:return R.Cluster;case R.Account:return R.Account;case R.User:return R.User;case R.Curve:return R.Curve;default:return R.Unknown}}}nkeys.Prefixes=T;var k;(function(U){U.InvalidPrefixByte="nkeys: invalid prefix byte",U.InvalidKey="nkeys: invalid key",U.InvalidPublicKey="nkeys: invalid public key",U.InvalidSeedLen="nkeys: invalid seed length",U.InvalidSeed="nkeys: invalid seed",U.InvalidCurveSeed="nkeys: invalid curve seed",U.InvalidCurveKey="nkeys: not a valid curve key",U.InvalidCurveOperation="nkeys: curve key is not valid for sign/verify",U.InvalidNKeyOperation="keys: only curve key can seal/open",U.InvalidEncoding="nkeys: invalid encoded key",U.InvalidRecipient="nkeys: not a valid recipient public curve key",U.InvalidEncrypted="nkeys: encrypted input is not valid",U.CannotSign="nkeys: cannot sign, no private key available",U.PublicKeyOnly="nkeys: no seed or private key available",U.InvalidChecksum="nkeys: invalid checksum",U.SerializationError="nkeys: serialization error",U.ApiError="nkeys: api error",U.ClearedPair="nkeys: pair is cleared"})(k||(nkeys.NKeysErrorCode=k={}));class O extends Error{constructor(L,Q){super(L),this.name="NKeysError",this.code=L,this.chainedError=Q}}return nkeys.NKeysError=O,nkeys}var util={};Object.defineProperty(util,"__esModule",{value:!0}),util.dump=util.decode=util.encode=void 0;function encode(c){return btoa(String.fromCharCode(...c))}util.encode=encode;function decode(c){const n=atob(c),h=new Uint8Array(n.length);for(let u=0;u<n.length;u++)h[u]=n.charCodeAt(u);return h}util.decode=decode;function dump(c,n){n&&console.log(n);let h=[];for(let u=0;u<c.byteLength;u++){u%8===0&&h.push(`
`);let m=c[u].toString(16);m.length===1&&(m="0"+m),h.push(m)}console.log(h.join("  "))}util.dump=dump;var hasRequiredMod;function requireMod(){return hasRequiredMod||(hasRequiredMod=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.encode=c.decode=c.Prefix=c.NKeysErrorCode=c.NKeysError=c.fromSeed=c.fromPublic=c.fromCurveSeed=c.createUser=c.createServer=c.createPair=c.createOperator=c.createCurve=c.createCluster=c.createAccount=void 0;var n=requireNkeys();Object.defineProperty(c,"createAccount",{enumerable:!0,get:function(){return n.createAccount}}),Object.defineProperty(c,"createCluster",{enumerable:!0,get:function(){return n.createCluster}}),Object.defineProperty(c,"createCurve",{enumerable:!0,get:function(){return n.createCurve}}),Object.defineProperty(c,"createOperator",{enumerable:!0,get:function(){return n.createOperator}}),Object.defineProperty(c,"createPair",{enumerable:!0,get:function(){return n.createPair}}),Object.defineProperty(c,"createServer",{enumerable:!0,get:function(){return n.createServer}}),Object.defineProperty(c,"createUser",{enumerable:!0,get:function(){return n.createUser}}),Object.defineProperty(c,"fromCurveSeed",{enumerable:!0,get:function(){return n.fromCurveSeed}}),Object.defineProperty(c,"fromPublic",{enumerable:!0,get:function(){return n.fromPublic}}),Object.defineProperty(c,"fromSeed",{enumerable:!0,get:function(){return n.fromSeed}}),Object.defineProperty(c,"NKeysError",{enumerable:!0,get:function(){return n.NKeysError}}),Object.defineProperty(c,"NKeysErrorCode",{enumerable:!0,get:function(){return n.NKeysErrorCode}}),Object.defineProperty(c,"Prefix",{enumerable:!0,get:function(){return n.Prefix}});var h=util;Object.defineProperty(c,"decode",{enumerable:!0,get:function(){return h.decode}}),Object.defineProperty(c,"encode",{enumerable:!0,get:function(){return h.encode}})}(mod)),mod}(function(c){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,x,_,M){M===void 0&&(M=_);var b=Object.getOwnPropertyDescriptor(x,_);(!b||("get"in b?!x.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return x[_]}}),Object.defineProperty(g,M,b)}:function(g,x,_,M){M===void 0&&(M=_),g[M]=x[_]}),h=commonjsGlobal&&commonjsGlobal.__exportStar||function(g,x){for(var _ in g)_!=="default"&&!Object.prototype.hasOwnProperty.call(x,_)&&n(x,g,_)};Object.defineProperty(c,"__esModule",{value:!0});const u=naclFastExports,m={randomBytes:u.randomBytes,verify:u.sign.detached.verify,fromSeed:u.sign.keyPair.fromSeed,sign:u.sign.detached,scalarBaseMultiply:u.scalarMult.base,seal:u.box,open:u.box.open};if(typeof TextEncoder>"u"){const g=requireUtil$1();commonjsGlobal.TextEncoder=g.TextEncoder,commonjsGlobal.TextDecoder=g.TextDecoder}typeof atob>"u"&&(commonjsGlobal.atob=g=>Buffer.from(g,"base64").toString("binary"),commonjsGlobal.btoa=g=>Buffer.from(g,"binary").toString("base64"));const{setEd25519Helper:s}=helper$1;s(m),h(requireMod(),c)})(lib);var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(c){return typeof c=="string"&&REGEX.test(c)}const byteToHex=[];for(let c=0;c<256;++c)byteToHex.push((c+256).toString(16).slice(1));function unsafeStringify(c,n=0){return byteToHex[c[n+0]]+byteToHex[c[n+1]]+byteToHex[c[n+2]]+byteToHex[c[n+3]]+"-"+byteToHex[c[n+4]]+byteToHex[c[n+5]]+"-"+byteToHex[c[n+6]]+byteToHex[c[n+7]]+"-"+byteToHex[c[n+8]]+byteToHex[c[n+9]]+"-"+byteToHex[c[n+10]]+byteToHex[c[n+11]]+byteToHex[c[n+12]]+byteToHex[c[n+13]]+byteToHex[c[n+14]]+byteToHex[c[n+15]]}function parse(c){if(!validate(c))throw TypeError("Invalid UUID");let n;const h=new Uint8Array(16);return h[0]=(n=parseInt(c.slice(0,8),16))>>>24,h[1]=n>>>16&255,h[2]=n>>>8&255,h[3]=n&255,h[4]=(n=parseInt(c.slice(9,13),16))>>>8,h[5]=n&255,h[6]=(n=parseInt(c.slice(14,18),16))>>>8,h[7]=n&255,h[8]=(n=parseInt(c.slice(19,23),16))>>>8,h[9]=n&255,h[10]=(n=parseInt(c.slice(24,36),16))/1099511627776&255,h[11]=n/4294967296&255,h[12]=n>>>24&255,h[13]=n>>>16&255,h[14]=n>>>8&255,h[15]=n&255,h}function stringToBytes(c){c=unescape(encodeURIComponent(c));const n=[];for(let h=0;h<c.length;++h)n.push(c.charCodeAt(h));return n}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(c,n,h){function u(m,s,g,x){var _;if(typeof m=="string"&&(m=stringToBytes(m)),typeof s=="string"&&(s=parse(s)),((_=s)===null||_===void 0?void 0:_.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let M=new Uint8Array(16+m.length);if(M.set(s),M.set(m,s.length),M=h(M),M[6]=M[6]&15|n,M[8]=M[8]&63|128,g){x=x||0;for(let b=0;b<16;++b)g[x+b]=M[b];return g}return unsafeStringify(M)}try{u.name=c}catch{}return u.DNS=DNS,u.URL=URL$1,u}function f(c,n,h,u){switch(c){case 0:return n&h^~n&u;case 1:return n^h^u;case 2:return n&h^n&u^h&u;case 3:return n^h^u}}function ROTL(c,n){return c<<n|c>>>32-n}function sha1(c){const n=[1518500249,1859775393,2400959708,3395469782],h=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof c=="string"){const g=unescape(encodeURIComponent(c));c=[];for(let x=0;x<g.length;++x)c.push(g.charCodeAt(x))}else Array.isArray(c)||(c=Array.prototype.slice.call(c));c.push(128);const u=c.length/4+2,m=Math.ceil(u/16),s=new Array(m);for(let g=0;g<m;++g){const x=new Uint32Array(16);for(let _=0;_<16;++_)x[_]=c[g*64+_*4]<<24|c[g*64+_*4+1]<<16|c[g*64+_*4+2]<<8|c[g*64+_*4+3];s[g]=x}s[m-1][14]=(c.length-1)*8/Math.pow(2,32),s[m-1][14]=Math.floor(s[m-1][14]),s[m-1][15]=(c.length-1)*8&4294967295;for(let g=0;g<m;++g){const x=new Uint32Array(80);for(let A=0;A<16;++A)x[A]=s[g][A];for(let A=16;A<80;++A)x[A]=ROTL(x[A-3]^x[A-8]^x[A-14]^x[A-16],1);let _=h[0],M=h[1],b=h[2],S=h[3],E=h[4];for(let A=0;A<80;++A){const B=Math.floor(A/20),R=ROTL(_,5)+f(B,M,b,S)+E+n[B]+x[A]>>>0;E=S,S=b,b=ROTL(M,30)>>>0,M=_,_=R}h[0]=h[0]+_>>>0,h[1]=h[1]+M>>>0,h[2]=h[2]+b>>>0,h[3]=h[3]+S>>>0,h[4]=h[4]+E>>>0}return[h[0]>>24&255,h[0]>>16&255,h[0]>>8&255,h[0]&255,h[1]>>24&255,h[1]>>16&255,h[1]>>8&255,h[1]&255,h[2]>>24&255,h[2]>>16&255,h[2]>>8&255,h[2]&255,h[3]>>24&255,h[3]>>16&255,h[3]>>8&255,h[3]&255,h[4]>>24&255,h[4]>>16&255,h[4]>>8&255,h[4]&255]}const v5=v35("v5",80,sha1);function generateUserNKeys(){const c=lib.createUser(),n=c.getPublicKey(),h=new TextDecoder().decode(c.getSeed());return{publicKey:n,seed:h}}function getNKeysFromSeed(c){return lib.fromSeed(Buffer.from(c))}const dappJwtExpirationHours=2;function generateUserJwt({userSeed:c,accessToken:n}){const h=getNKeysFromSeed(c),u=getNKeysFromSeed(n),m={jti:getJti(),iat:getIat(),exp:getExp(),iss:u.getPublicKey(),name:"developer",sub:h.getPublicKey(),nats:getNatsConfig()};return signJwt(m,u)}function getExp(){return Math.round(addHours(new Date,dappJwtExpirationHours).getTime()/1e3)}function getJti(){return v5(location.origin,v5.URL).toString()}function getIat(){return Math.round(Date.now()/1e3)}function signJwt(c,n){const h={typ:"JWT",alg:"ed25519-nkey"},u=base64url.encode(JSON.stringify(h))+"."+base64url.encode(JSON.stringify(c)),m=base64url.encode(Buffer.from(n.sign(Buffer.from(u))));return u+"."+m}function getNatsConfig(){return{pub:{},sub:{},subs:-1,data:-1,payload:-1,type:"user",version:2}}function computeJwt(c,n){return`-----BEGIN NATS USER JWT-----
  ${c}
  ------END NATS USER JWT------
  
  ************************* IMPORTANT *************************
  NKEY Seed printed below can be used to sign and prove identity.
  NKEYs are sensitive and should be treated as secrets.
  
  -----BEGIN USER NKEY SEED-----
  ${n}
  ------END USER NKEY SEED------
  
  *************************************************************`}function createSubscriberJwt(c){const{seed:n}=generateUserNKeys(),h=generateUserJwt({userSeed:n,accessToken:c});return computeJwt(h,n)}async function connect(c){const{accessToken:n}=c,h=createSubscriberJwt(n),u={servers:c.url,authenticator:createAuthenticator(h)},m=await connect$1(u);return{disconnect:()=>m.close(),subscribe:s=>subscribe(s,m)}}function createWorker(){let c;const n={};addEventListener("message",async h=>{if(h.data.type==="subscribe"){const{url:u,accessToken:m,subject:s,buffer:g}=h.data;c||(c=await connect({url:u,accessToken:m})),n[s]||(n[s]=c.subscribe({subject:s,buffer:g,onMessages:(x,_)=>{if(!n[_])return;postMessage({type:"message",messages:x})},onError:(x,_)=>{postMessage({type:"error",error:_,text:x})}}));return}if(h.data.type==="unsubscribe"){const{subject:u}=h.data,m=n[u];m&&(m.unsubscribe(),delete n[u]),c&&Object.keys(n).length===0&&(c.disconnect(),c=void 0);return}})}createWorker()})();
